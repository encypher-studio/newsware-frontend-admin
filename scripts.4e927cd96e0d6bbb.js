(function(){var Qt,Dn,_i,He,rr,or,Et,$t,ht,be,Ze,St,Dt,Re,Vt,Fe,rt,Ie,fe,De,Ee,ze,Ve,Je,Ue,tt,Kt,re,Ke,Tt,nt,gt,ut,Lt,Ye,gn,it,Mt,on,xn,lt,Wt,an,_t,pn,Mn,Tn,Un,$n=[].slice,Bi={}.hasOwnProperty,ri=function(Ct,bt){function en(){this.constructor=Ct}for(var un in bt)Bi.call(bt,un)&&(Ct[un]=bt[un]);return en.prototype=bt.prototype,Ct.prototype=new en,Ct.__super__=bt.prototype,Ct},Ei=[].indexOf||function(Ct){for(var bt=0,en=this.length;en>bt;bt++)if(bt in this&&this[bt]===Ct)return bt;return-1};for(Ee={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},Ke=function(){var Ct;return null!=(Ct=typeof performance<"u"&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?Ct:+new Date},nt=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,De=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==nt&&(nt=function(Ct){return setTimeout(Ct,50)},De=function(Ct){return clearTimeout(Ct)}),ut=function(Ct){var bt,en;return bt=Ke(),(en=function(){var un;return(un=Ke()-bt)>=33?(bt=Ke(),Ct(un,function(){return nt(en)})):setTimeout(en,33-un)})()},gt=function(){var Ct,bt,en;return en=arguments[0],bt=arguments[1],Ct=3<=arguments.length?$n.call(arguments,2):[],"function"==typeof en[bt]?en[bt].apply(en,Ct):en[bt]},ze=function(){var Ct,bt,en,un,Gt,hn,wn;for(bt=arguments[0],hn=0,wn=(un=2<=arguments.length?$n.call(arguments,1):[]).length;wn>hn;hn++)if(en=un[hn])for(Ct in en)Bi.call(en,Ct)&&(Gt=en[Ct],null!=bt[Ct]&&"object"==typeof bt[Ct]&&null!=Gt&&"object"==typeof Gt?ze(bt[Ct],Gt):bt[Ct]=Gt);return bt},rt=function(Ct){var bt,en,Gt,hn;for(en=bt=0,Gt=0,hn=Ct.length;hn>Gt;Gt++)en+=Math.abs(Ct[Gt]),bt++;return en/bt},Je=function(Ct,bt){var en,Gt;if(null==Ct&&(Ct="options"),null==bt&&(bt=!0),Gt=document.querySelector("[data-pace-"+Ct+"]")){if(en=Gt.getAttribute("data-pace-"+Ct),!bt)return en;try{return JSON.parse(en)}catch(hn){return typeof console<"u"&&null!==console?console.error("Error parsing inline pace options",hn):void 0}}},Et=function(){function Ct(){}return Ct.prototype.on=function(bt,en,un,Gt){var hn;return null==Gt&&(Gt=!1),null==this.bindings&&(this.bindings={}),null==(hn=this.bindings)[bt]&&(hn[bt]=[]),this.bindings[bt].push({handler:en,ctx:un,once:Gt})},Ct.prototype.once=function(bt,en,un){return this.on(bt,en,un,!0)},Ct.prototype.off=function(bt,en){var un,Gt,hn;if(null!=(null!=(Gt=this.bindings)?Gt[bt]:void 0)){if(null==en)return delete this.bindings[bt];for(un=0,hn=[];un<this.bindings[bt].length;)hn.push(this.bindings[bt][un].handler===en?this.bindings[bt].splice(un,1):un++);return hn}},Ct.prototype.trigger=function(){var bt,un,hn,wn,On,ai,zn;if(un=arguments[0],bt=2<=arguments.length?$n.call(arguments,1):[],null!=(On=this.bindings)?On[un]:void 0){for(hn=0,zn=[];hn<this.bindings[un].length;)wn=(ai=this.bindings[un][hn]).once,ai.handler.apply(ai.ctx??this,bt),zn.push(wn?this.bindings[un].splice(hn,1):hn++);return zn}},Ct}(),be=window.Pace||{},window.Pace=be,ze(be,Et.prototype),Tt=be.options=ze({},Ee,window.paceOptions,Je()),an=0,pn=(Tn=["ajax","document","eventLag","elements"]).length;pn>an;an++)!0===Tt[it=Tn[an]]&&(Tt[it]=Ee[it]);ht=function(Ct){function bt(){return bt.__super__.constructor.apply(this,arguments)}return ri(bt,Ct),bt}(Error),Dn=function(){function Ct(){this.progress=0}return Ct.prototype.getElement=function(){var bt;if(null==this.el){if(!(bt=document.querySelector(Tt.target)))throw new ht;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=bt.firstChild?bt.insertBefore(this.el,bt.firstChild):bt.appendChild(this.el)}return this.el},Ct.prototype.finish=function(){var bt;return(bt=this.getElement()).className=bt.className.replace("pace-active",""),bt.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},Ct.prototype.update=function(bt){return this.progress=bt,this.render()},Ct.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(bt){ht=bt}return this.el=void 0},Ct.prototype.render=function(){var bt,un,Gt,hn,wn,On;if(null==document.querySelector(Tt.target))return!1;for(bt=this.getElement(),Gt="translate3d("+this.progress+"%, 0, 0)",hn=0,wn=(On=["webkitTransform","msTransform","transform"]).length;wn>hn;hn++)bt.children[0].style[On[hn]]=Gt;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(bt.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?un="99":(un=this.progress<10?"0":"",un+=0|this.progress),bt.children[0].setAttribute("data-progress",""+un)),this.lastRenderedProgress=this.progress},Ct.prototype.done=function(){return this.progress>=100},Ct}(),$t=function(){function Ct(){this.bindings={}}return Ct.prototype.trigger=function(bt,en){var Gt,hn,wn,On;if(null!=this.bindings[bt]){for(On=[],Gt=0,hn=(wn=this.bindings[bt]).length;hn>Gt;Gt++)On.push(wn[Gt].call(this,en));return On}},Ct.prototype.on=function(bt,en){var un;return null==(un=this.bindings)[bt]&&(un[bt]=[]),this.bindings[bt].push(en)},Ct}(),Wt=window.XMLHttpRequest,lt=window.XDomainRequest,xn=window.WebSocket,Ve=function(Ct,bt){var un,Gt;for(un in Gt=[],bt.prototype)try{Gt.push(null==Ct[un]&&"function"!=typeof bt[un]?"function"==typeof Object.defineProperty?Object.defineProperty(Ct,un,{get:function(){return bt.prototype[un]},configurable:!0,enumerable:!0}):Ct[un]=bt.prototype[un]:void 0)}catch(hn){}return Gt},Kt=[],be.ignore=function(){var Ct,bt,en;return bt=arguments[0],Ct=2<=arguments.length?$n.call(arguments,1):[],Kt.unshift("ignore"),en=bt.apply(null,Ct),Kt.shift(),en},be.track=function(){var Ct,bt,en;return bt=arguments[0],Ct=2<=arguments.length?$n.call(arguments,1):[],Kt.unshift("track"),en=bt.apply(null,Ct),Kt.shift(),en},gn=function(Ct){var bt;return null==Ct&&(Ct="GET"),"track"===Kt[0]?"force":!(Kt.length||!Tt.ajax||!("socket"===Ct&&Tt.ajax.trackWebSockets||(bt=Ct.toUpperCase(),Ei.call(Tt.ajax.trackMethods,bt)>=0)))},Ze=function(Ct){function bt(){var en,un=this;bt.__super__.constructor.apply(this,arguments),en=function(Gt){var hn;return hn=Gt.open,Gt.open=function(wn,On,ai){return gn(wn)&&un.trigger("request",{type:wn,url:On,request:Gt}),hn.apply(Gt,arguments)}},window.XMLHttpRequest=function(Gt){var hn;return hn=new Wt(Gt),en(hn),hn};try{Ve(window.XMLHttpRequest,Wt)}catch{}if(null!=lt){window.XDomainRequest=function(){var Gt;return Gt=new lt,en(Gt),Gt};try{Ve(window.XDomainRequest,lt)}catch{}}if(null!=xn&&Tt.ajax.trackWebSockets){window.WebSocket=function(Gt,hn){var wn;return wn=null!=hn?new xn(Gt,hn):new xn(Gt),gn("socket")&&un.trigger("request",{type:"socket",url:Gt,protocols:hn,request:wn}),wn};try{Ve(window.WebSocket,xn)}catch{}}}return ri(bt,Ct),bt}($t),_t=null,Ye=function(Ct){var bt,en,un,Gt;for(en=0,un=(Gt=Tt.ajax.ignoreURLs).length;un>en;en++)if("string"==typeof(bt=Gt[en])){if(-1!==Ct.indexOf(bt))return!0}else if(bt.test(Ct))return!0;return!1},(Ue=function(){return null==_t&&(_t=new Ze),_t})().on("request",function(Ct){var bt,en,un,Gt;return Gt=Ct.type,un=Ct.request,Ye(Ct.url)||be.running||!1===Tt.restartOnRequestAfter&&"force"!==gn(Gt)?void 0:(en=arguments,"boolean"==typeof(bt=Tt.restartOnRequestAfter||0)&&(bt=0),setTimeout(function(){var On,ai,zn,It,qt;if("socket"===Gt?un.readyState<2:0<(zn=un.readyState)&&4>zn){for(be.restart(),qt=[],On=0,ai=(It=be.sources).length;ai>On;On++){if((it=It[On])instanceof Qt){it.watch.apply(it,en);break}qt.push(void 0)}return qt}},bt))}),Qt=function(){function Ct(){var bt=this;this.elements=[],Ue().on("request",function(){return bt.watch.apply(bt,arguments)})}return Ct.prototype.watch=function(bt){var en,un,Gt;return Gt=bt.type,en=bt.request,Ye(bt.url)?void 0:(un="socket"===Gt?new Re(en):new Vt(en),this.elements.push(un))},Ct}(),Vt=function Ct(bt){var Gt,hn,wn,On,ai=this;if(this.progress=0,null!=window.ProgressEvent)for(bt.addEventListener("progress",function(zn){return ai.progress=zn.lengthComputable?100*zn.loaded/zn.total:ai.progress+(100-ai.progress)/2},!1),Gt=0,hn=(On=["load","abort","timeout","error"]).length;hn>Gt;Gt++)bt.addEventListener(On[Gt],function(){return ai.progress=100},!1);else wn=bt.onreadystatechange,bt.onreadystatechange=function(){var zn;return 0===(zn=bt.readyState)||4===zn?ai.progress=100:3===bt.readyState&&(ai.progress=50),"function"==typeof wn?wn.apply(null,arguments):void 0}},Re=function Ct(bt){var un,Gt,hn,wn=this;for(this.progress=0,un=0,Gt=(hn=["error","open"]).length;Gt>un;un++)bt.addEventListener(hn[un],function(){return wn.progress=100},!1)},He=function Ct(bt){var un,Gt,hn;for(null==bt&&(bt={}),this.elements=[],null==bt.selectors&&(bt.selectors=[]),un=0,Gt=(hn=bt.selectors).length;Gt>un;un++)this.elements.push(new rr(hn[un]))},rr=function(){function Ct(bt){this.selector=bt,this.progress=0,this.check()}return Ct.prototype.check=function(){var bt=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return bt.check()},Tt.elements.checkInterval)},Ct.prototype.done=function(){return this.progress=100},Ct}(),_i=function(){function Ct(){var bt,en,un=this;this.progress=null!=(en=this.states[document.readyState])?en:100,bt=document.onreadystatechange,document.onreadystatechange=function(){return null!=un.states[document.readyState]&&(un.progress=un.states[document.readyState]),"function"==typeof bt?bt.apply(null,arguments):void 0}}return Ct.prototype.states={loading:0,interactive:50,complete:100},Ct}(),or=function Ct(){var bt,en,un,Gt,hn,wn=this;this.progress=0,bt=0,hn=[],Gt=0,un=Ke(),en=setInterval(function(){var On;return On=Ke()-un-50,un=Ke(),hn.push(On),hn.length>Tt.eventLag.sampleCount&&hn.shift(),bt=rt(hn),++Gt>=Tt.eventLag.minSamples&&bt<Tt.eventLag.lagThreshold?(wn.progress=100,clearInterval(en)):wn.progress=3/(bt+3)*100},50)},Dt=function(){function Ct(bt){this.source=bt,this.last=this.sinceLastUpdate=0,this.rate=Tt.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=gt(this.source,"progress"))}return Ct.prototype.tick=function(bt,en){var un;return null==en&&(en=gt(this.source,"progress")),en>=100&&(this.done=!0),en===this.last?this.sinceLastUpdate+=bt:(this.sinceLastUpdate&&(this.rate=(en-this.last)/this.sinceLastUpdate),this.catchup=(en-this.progress)/Tt.catchupTime,this.sinceLastUpdate=0,this.last=en),en>this.progress&&(this.progress+=this.catchup*bt),un=1-Math.pow(this.progress/100,Tt.easeFactor),this.progress+=un*this.rate*bt,this.progress=Math.min(this.lastProgress+Tt.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},Ct}(),Mt=null,Lt=null,Ie=null,on=null,Fe=null,fe=null,be.running=!1,tt=function(){return Tt.restartOnPushState?be.restart():void 0},null!=window.history.pushState&&(Mn=window.history.pushState,window.history.pushState=function(){return tt(),Mn.apply(window.history,arguments)}),null!=window.history.replaceState&&(Un=window.history.replaceState,window.history.replaceState=function(){return tt(),Un.apply(window.history,arguments)}),St={ajax:Qt,elements:He,document:_i,eventLag:or},(re=function(){var Ct,bt,en,un,Gt,hn,wn,On;for(be.sources=Mt=[],bt=0,un=(hn=["ajax","elements","document","eventLag"]).length;un>bt;bt++)!1!==Tt[Ct=hn[bt]]&&Mt.push(new St[Ct](Tt[Ct]));for(en=0,Gt=(On=null!=(wn=Tt.extraSources)?wn:[]).length;Gt>en;en++)Mt.push(new(it=On[en])(Tt));return be.bar=Ie=new Dn,Lt=[],on=new Dt})(),be.stop=function(){return be.trigger("stop"),be.running=!1,Ie.destroy(),fe=!0,null!=Fe&&("function"==typeof De&&De(Fe),Fe=null),re()},be.restart=function(){return be.trigger("restart"),be.stop(),be.start()},be.go=function(){var Ct;return be.running=!0,Ie.render(),Ct=Ke(),fe=!1,Fe=ut(function(bt,en){var Gt,hn,On,ai,zn,qt,ln,Cn,cn,nn,bn,Nn,Bn;for(Gt=Cn=0,hn=!0,ai=cn=0,bn=Mt.length;bn>cn;ai=++cn)for(it=Mt[ai],ln=null!=Lt[ai]?Lt[ai]:Lt[ai]=[],zn=nn=0,Nn=(On=null!=(Bn=it.elements)?Bn:[it]).length;Nn>nn;zn=++nn)hn&=(qt=null!=ln[zn]?ln[zn]:ln[zn]=new Dt(On[zn])).done,qt.done||(Gt++,Cn+=qt.tick(bt));return Ie.update(on.tick(bt,Cn/Gt)),Ie.done()||hn||fe?(Ie.update(100),be.trigger("done"),setTimeout(function(){return Ie.finish(),be.running=!1,be.trigger("hide")},Math.max(Tt.ghostTime,Math.max(Tt.minTime-(Ke()-Ct),0)))):en()})},be.start=function(Ct){ze(Tt,Ct),be.running=!0;try{Ie.render()}catch(bt){ht=bt}return document.querySelector(".pace")?(be.trigger("start"),be.go()):setTimeout(be.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return be}):"object"==typeof exports?module.exports=be:Tt.startOnPageLoad&&be.start()}).call(this),function(Qt,Dn){"use strict";function He($,W,R){if("string"!=typeof $)throw"invalid module definition, module id must be defined and be a string";if(W===Dn)throw"invalid module definition, dependencies must be specified";if(R===Dn)throw"invalid module definition, definition function must be specified";!function _i($,W){for(var R,k=[],b=0;b<$.length;++b){if(!(R=$t[$[b]]||or($[b])))throw"module definition dependecy not found: "+$[b];k.push(R)}W.apply(null,k)}(W,function(){$t[$]=R.apply(null,arguments)})}function or($){for(var W=Qt,R=$.split(/[.\/]/),k=0;k<R.length;++k){if(!W[R[k]])return;W=W[R[k]]}return W}var $t={},ht="tinymce/geom/Rect",be="tinymce/util/Promise",Ze="tinymce/util/Delay",St="tinymce/Env",Dt="tinymce/dom/EventUtils",Re="tinymce/dom/Sizzle",Vt="tinymce/util/Arr",Fe="tinymce/util/Tools",rt="tinymce/dom/DomQuery",Ie="tinymce/html/Styles",fe="tinymce/dom/TreeWalker",De="tinymce/dom/Range",Ee="tinymce/html/Entities",ze="tinymce/dom/StyleSheetLoader",Ve="tinymce/dom/DOMUtils",Je="tinymce/dom/ScriptLoader",Ue="tinymce/AddOnManager",tt="tinymce/dom/NodeType",Kt="tinymce/text/Zwsp",re="tinymce/caret/CaretContainer",Ke="tinymce/dom/RangeUtils",Tt="tinymce/NodeChange",nt="tinymce/html/Node",gt="tinymce/html/Schema",ut="tinymce/html/SaxParser",Lt="tinymce/html/DomParser",Ye="tinymce/html/Writer",gn="tinymce/html/Serializer",it="tinymce/dom/Serializer",Mt="tinymce/dom/TridentSelection",on="tinymce/util/VK",xn="tinymce/dom/ControlSelection",lt="tinymce/util/Fun",Wt="tinymce/caret/CaretCandidate",an="tinymce/geom/ClientRect",_t="tinymce/text/ExtendingChar",pn="tinymce/caret/CaretPosition",Mn="tinymce/caret/CaretBookmark",Tn="tinymce/dom/BookmarkManager",ei="tinymce/dom/Selection",Un="tinymce/dom/ElementUtils",$n="tinymce/fmt/Preview",Bi="tinymce/fmt/Hooks",ri="tinymce/Formatter",Ei="tinymce/undo/Diff",Ct="tinymce/undo/Fragments",bt="tinymce/undo/Levels",en="tinymce/UndoManager",un="tinymce/EnterKey",Gt="tinymce/ForceBlocks",hn="tinymce/caret/CaretUtils",wn="tinymce/caret/CaretWalker",On="tinymce/InsertList",ai="tinymce/InsertContent",zn="tinymce/EditorCommands",It="tinymce/util/URI",qt="tinymce/util/Class",ln="tinymce/util/EventDispatcher",Cn="tinymce/data/Binding",cn="tinymce/util/Observable",nn="tinymce/data/ObservableObject",bn="tinymce/ui/Selector",Nn="tinymce/ui/Collection",Bn="tinymce/ui/DomUtils",Gn="tinymce/ui/BoxUtils",ui="tinymce/ui/ClassList",Li="tinymce/ui/ReflowQueue",ji="tinymce/ui/Control",ti="tinymce/ui/Factory",dr="tinymce/ui/KeyboardNavigation",qi="tinymce/ui/Container",pr="tinymce/ui/DragHelper",ar="tinymce/ui/Scrollable",Zi="tinymce/ui/Panel",Kr="tinymce/ui/Movable",ki="tinymce/ui/Resizable",zr="tinymce/ui/FloatPanel",Aa="tinymce/ui/Window",wt="tinymce/ui/MessageBox",Ht="tinymce/WindowManager",mn="tinymce/ui/Tooltip",sn="tinymce/ui/Widget",An="tinymce/ui/Progress",Wn="tinymce/ui/Notification",jn="tinymce/NotificationManager",qn="tinymce/dom/NodePath",Zn="tinymce/util/Quirks",ni="tinymce/EditorObservable",pi="tinymce/Mode",xi="tinymce/Shortcuts",Ai="tinymce/file/Uploader",Yi="tinymce/file/Conversions",Vi="tinymce/file/ImageScanner",_r="tinymce/file/BlobCache",Er="tinymce/file/UploadStatus",Vr="tinymce/ErrorReporter",Lr="tinymce/EditorUpload",na="tinymce/caret/FakeCaret",Co="tinymce/dom/Dimensions",lu="tinymce/caret/LineWalker",ia="tinymce/caret/LineUtils",Kc="tinymce/dom/MousePosition",Jc="tinymce/DragDropOverrides",uu="tinymce/SelectionOverrides",cu="tinymce/util/Uuid",gr="tinymce/ui/Sidebar",Ro="tinymce/Editor",ra="tinymce/util/I18n",lo="tinymce/FocusManager",wr="tinymce/EditorManager",oa="tinymce/util/XHR",Ia="tinymce/util/JSON",du="tinymce/util/JSONRequest",Qc="tinymce/util/JSONP",rl="tinymce/util/LocalStorage",Po="tinymce/Compat",Cr="tinymce/ui/Layout",mr="tinymce/ui/AbsoluteLayout",uo="tinymce/ui/Button",aa="tinymce/ui/ButtonGroup",ls="tinymce/ui/Checkbox",sa="tinymce/ui/ComboBox",ol="tinymce/ui/ColorBox",al="tinymce/ui/PanelButton",Da="tinymce/ui/ColorButton",us="tinymce/util/Color",hu="tinymce/ui/ColorPicker",cs="tinymce/ui/Path",fu="tinymce/ui/ElementPath",Rr="tinymce/ui/FormItem",la="tinymce/ui/Form",sl="tinymce/ui/FieldSet",ua="tinymce/content/LinkTargets",ll="tinymce/ui/FilePicker",Mo="tinymce/ui/FitLayout",Hr="tinymce/ui/FlexLayout",ds="tinymce/ui/FlowLayout",pu="tinymce/fmt/FontInfo",hs="tinymce/ui/FormatControls",ca="tinymce/ui/GridLayout",Sr="tinymce/ui/Iframe",ul="tinymce/ui/InfoBox",gu="tinymce/ui/Label",fs="tinymce/ui/Toolbar",da="tinymce/ui/MenuBar",cl="tinymce/ui/MenuButton",dl="tinymce/ui/MenuItem",mu="tinymce/ui/Throbber",Bo="tinymce/ui/Menu",ps="tinymce/ui/ListBox",co="tinymce/ui/Radio",ed="tinymce/ui/ResizeHandle",hl="tinymce/ui/SelectBox",td="tinymce/ui/Slider",nd="tinymce/ui/Spacer",fl="tinymce/ui/SplitButton",vu="tinymce/ui/StackLayout",yu="tinymce/ui/TabPanel",xu="tinymce/ui/TextBox";He(ht,[],function(){function $(T,I,L){var B,D,z,N,G,M;return B=I.x,D=I.y,z=T.w,N=T.h,G=I.w,M=I.h,"b"===(L=(L||"").split(""))[0]&&(D+=M),"r"===L[1]&&(B+=G),"c"===L[0]&&(D+=P(M/2)),"c"===L[1]&&(B+=P(G/2)),"b"===L[3]&&(D-=N),"r"===L[4]&&(B-=z),"c"===L[3]&&(D-=P(N/2)),"c"===L[4]&&(B-=P(z/2)),S(B,D,z,N)}function S(T,I,L,B){return{x:T,y:I,w:L,h:B}}var x=Math.min,w=Math.max,P=Math.round;return{inflate:function R(T,I,L){return S(T.x-I,T.y-L,T.w+2*I,T.h+2*L)},relativePosition:$,findBestRelativePosition:function W(T,I,L,B){var D,z;for(z=0;z<B.length;z++)if((D=$(T,I,B[z])).x>=L.x&&D.x+D.w<=L.w+L.x&&D.y>=L.y&&D.y+D.h<=L.h+L.y)return B[z];return null},intersect:function k(T,I){var L,B,D,z;return L=w(T.x,I.x),B=w(T.y,I.y),D=x(T.x+T.w,I.x+I.w),z=x(T.y+T.h,I.y+I.h),D-L<0||z-B<0?null:S(L,B,D-L,z-B)},clamp:function b(T,I,L){var B,D,z,N,G,M,A,C,g,m;return M=T.y,A=T.x+T.w,C=T.y+T.h,g=I.x+I.w,m=I.y+I.h,B=w(0,I.x-(G=T.x)),D=w(0,I.y-M),z=w(0,A-g),N=w(0,C-m),G+=B,M+=D,L&&(A+=B,C+=D,G-=z,M-=N),S(G,M,(A-=z)-G,(C-=N)-M)},create:S,fromClientRect:function y(T){return S(T.left,T.top,T.width,T.height)}}}),He(be,[],function(){function $(T,I){return function(){T.apply(I,arguments)}}function W(T){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof T)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],x(T,$(k,this),$(b,this))}function R(T){var I=this;return null===this._state?void this._deferreds.push(T):void w(function(){var L=I._state?T.onFulfilled:T.onRejected;if(null!==L){var B;try{B=L(I._value)}catch(D){return void T.reject(D)}T.resolve(B)}else(I._state?T.resolve:T.reject)(I._value)})}function k(T){try{if(T===this)throw new TypeError("A promise cannot be resolved with itself.");if(T&&("object"==typeof T||"function"==typeof T)){var I=T.then;if("function"==typeof I)return void x($(I,T),$(k,this),$(b,this))}this._state=!0,this._value=T,S.call(this)}catch(L){b.call(this,L)}}function b(T){this._state=!1,this._value=T,S.call(this)}function S(){for(var T=0,I=this._deferreds.length;T<I;T++)R.call(this,this._deferreds[T]);this._deferreds=null}function y(T,I,L,B){this.onFulfilled="function"==typeof T?T:null,this.onRejected="function"==typeof I?I:null,this.resolve=L,this.reject=B}function x(T,I,L){var B=!1;try{T(function(D){B||(B=!0,I(D))},function(D){B||(B=!0,L(D))})}catch(D){if(B)return;B=!0,L(D)}}if(window.Promise)return window.Promise;var w=W.immediateFn||"function"==typeof setImmediate&&setImmediate||function(T){setTimeout(T,1)},P=Array.isArray||function(T){return"[object Array]"===Object.prototype.toString.call(T)};return W.prototype.catch=function(T){return this.then(null,T)},W.prototype.then=function(T,I){var L=this;return new W(function(B,D){R.call(L,new y(T,I,B,D))})},W.all=function(){var T=Array.prototype.slice.call(1===arguments.length&&P(arguments[0])?arguments[0]:arguments);return new W(function(I,L){function B(N,G){try{if(G&&("object"==typeof G||"function"==typeof G)){var M=G.then;if("function"==typeof M)return void M.call(G,function(A){B(N,A)},L)}T[N]=G,0==--D&&I(T)}catch(A){L(A)}}if(0===T.length)return I([]);for(var D=T.length,z=0;z<T.length;z++)B(z,T[z])})},W.resolve=function(T){return T&&"object"==typeof T&&T.constructor===W?T:new W(function(I){I(T)})},W.reject=function(T){return new W(function(I,L){L(T)})},W.race=function(T){return new W(function(I,L){for(var B=0,D=T.length;B<D;B++)T[B].then(I,L)})},W}),He(Ze,[be],function($){function R(w,P){return"number"!=typeof P&&(P=0),setTimeout(w,P)}function k(w,P){return"number"!=typeof P&&(P=1),setInterval(w,P)}function y(w,P){var T,I;return I=function(){var L=arguments;clearTimeout(T),T=R(function(){w.apply(this,L)},P)},I.stop=function(){clearTimeout(T)},I}var x;return{requestAnimationFrame:function(w,P){return x?void x.then(w):void(x=new $(function(T){P||(P=document.body),function W(w,P){var I,L=window.requestAnimationFrame,B=["ms","moz","webkit"];for(I=0;I<B.length&&!L;I++)L=window[B[I]+"RequestAnimationFrame"];L||(L=function T(D){window.setTimeout(D,0)}),L(w,P)}(T,P)}).then(w))},setTimeout:R,setInterval:k,setEditorTimeout:function(w,P,T){return R(function(){w.removed||P()},T)},setEditorInterval:function(w,P,T){var I;return I=k(function(){w.removed?clearInterval(I):P()},T)},debounce:y,throttle:y,clearInterval:function S(w){return clearInterval(w)},clearTimeout:function b(w){return clearTimeout(w)}}}),He(St,[],function(){function $(G){return"matchMedia"in window&&matchMedia(G).matches}var k,b,S,y,x,w,P,T,I,L,B,D,z,W=navigator,R=W.userAgent;return k=window.opera&&window.opera.buildNumber,I=/Android/.test(R),S=(S=!(b=/WebKit/.test(R))&&!k&&/MSIE/gi.test(R)&&/Explorer/gi.test(W.appName))&&/MSIE (\w+)\./.exec(R)[1],y=-1!=R.indexOf("Trident/")&&(-1!=R.indexOf("rv:")||-1!=W.appName.indexOf("Netscape"))&&11,x=-1!=R.indexOf("Edge/")&&!S&&!y&&12,S=S||y||x,w=!b&&!y&&/Gecko/.test(R),P=-1!=R.indexOf("Mac"),T=/(iPad|iPhone)/.test(R),L="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,B=$("only screen and (max-device-width: 480px)")&&(I||T),D=$("only screen and (min-width: 800px)")&&(I||T),z=-1!=R.indexOf("Windows Phone"),x&&(b=!1),{opera:k,webkit:b,ie:S,gecko:w,mac:P,iOS:T,android:I,contentEditable:!T||L||R.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=S,range:window.getSelection&&"Range"in window,documentMode:S&&!x?document.documentMode||7:10,fileApi:L,ceFalse:!1===S||S>8,canHaveCSP:!1===S||S>11,desktop:!B&&!D,windowsPhone:z}}),He(Dt,[Ze,St],function($,W){function R(I,L,B,D){I.addEventListener?I.addEventListener(L,B,D||!1):I.attachEvent&&I.attachEvent("on"+L,B)}function k(I,L,B,D){I.removeEventListener?I.removeEventListener(L,B,D||!1):I.detachEvent&&I.detachEvent("on"+L,B)}function S(I,L){function B(){return!1}function D(){return!0}var z,G,N=L||{};for(z in I)T[z]||(N[z]=I[z]);if(N.target||(N.target=N.srcElement||document),W.experimentalShadowDom&&(N.target=function b(I,L){var B,D=L;return(B=I.path)&&B.length>0&&(D=B[0]),I.deepPath&&(B=I.deepPath())&&B.length>0&&(D=B[0]),D}(I,N.target)),I&&P.test(I.type)&&I.pageX===G&&I.clientX!==G){var M=N.target.ownerDocument||document,A=M.documentElement,C=M.body;N.pageX=I.clientX+(A&&A.scrollLeft||C&&C.scrollLeft||0)-(A&&A.clientLeft||C&&C.clientLeft||0),N.pageY=I.clientY+(A&&A.scrollTop||C&&C.scrollTop||0)-(A&&A.clientTop||C&&C.clientTop||0)}return N.preventDefault=function(){N.isDefaultPrevented=D,I&&(I.preventDefault?I.preventDefault():I.returnValue=!1)},N.stopPropagation=function(){N.isPropagationStopped=D,I&&(I.stopPropagation?I.stopPropagation():I.cancelBubble=!0)},N.stopImmediatePropagation=function(){N.isImmediatePropagationStopped=D,N.stopPropagation()},N.isDefaultPrevented||(N.isDefaultPrevented=B,N.isPropagationStopped=B,N.isImmediatePropagationStopped=B),typeof N.metaKey>"u"&&(N.metaKey=!1),N}function y(I,L,B){function D(){B.domLoaded||(B.domLoaded=!0,L(M))}var G=I.document,M={type:"ready"};return B.domLoaded?void L(M):(G.addEventListener?"complete"===G.readyState?D():R(I,"DOMContentLoaded",D):(R(G,"readystatechange",function z(){("complete"===G.readyState||"interactive"===G.readyState&&G.body)&&(k(G,"readystatechange",z),D())}),G.documentElement.doScroll&&I.self===I.top&&function N(){try{G.documentElement.doScroll("left")}catch{return void $.setTimeout(N)}D()}()),void R(I,"load",D))}function x(){function I(A,C){var g,m,O,U,H=B[C];if(g=H&&H[A.type])for(m=0,O=g.length;m<O;m++)if((U=g[m])&&!1===U.func.call(U.scope,A)&&A.preventDefault(),A.isImmediatePropagationStopped())return}var D,z,N,G,M,L=this,B={};z=w+(+new Date).toString(32),G="onmouseenter"in document.documentElement,N="onfocusin"in document.documentElement,M={mouseenter:"mouseover",mouseleave:"mouseout"},D=1,L.domLoaded=!1,L.events=B,L.bind=function(A,C,g,m){function O(le){I(S(le||ue.event),U)}var U,H,Z,J,de,se,ae,ue=window;if(A&&3!==A.nodeType&&8!==A.nodeType){for(A[z]?U=A[z]:(U=D++,A[z]=U,B[U]={}),m=m||A,Z=(C=C.split(" ")).length;Z--;)se=O,de=ae=!1,"DOMContentLoaded"===(J=C[Z])&&(J="ready"),L.domLoaded&&"ready"===J&&"complete"==A.readyState?g.call(m,S({type:J})):(G||(de=M[J])&&(se=function(le){var ve,ye;if(ve=le.currentTarget,(ye=le.relatedTarget)&&ve.contains)ye=ve.contains(ye);else for(;ye&&ye!==ve;)ye=ye.parentNode;ye||((le=S(le||ue.event)).type="mouseout"===le.type?"mouseleave":"mouseenter",le.target=ve,I(le,U))}),N||"focusin"!==J&&"focusout"!==J||(ae=!0,de="focusin"===J?"focus":"blur",se=function(le){(le=S(le||ue.event)).type="focus"===le.type?"focusin":"focusout",I(le,U)}),(H=B[U][J])?"ready"===J&&L.domLoaded?g({type:J}):H.push({func:g,scope:m}):(B[U][J]=H=[{func:g,scope:m}],H.fakeName=de,H.capture=ae,H.nativeHandler=se,"ready"===J?y(A,se,L):R(A,de||J,se,ae)));return A=H=0,g}},L.unbind=function(A,C,g){var m,O,U,H,Z,J;if(!A||3===A.nodeType||8===A.nodeType)return L;if(m=A[z]){if(J=B[m],C){for(U=(C=C.split(" ")).length;U--;)if(O=J[Z=C[U]]){if(g)for(H=O.length;H--;)if(O[H].func===g){var de=O.nativeHandler,se=O.fakeName,ae=O.capture;(O=O.slice(0,H).concat(O.slice(H+1))).nativeHandler=de,O.fakeName=se,O.capture=ae,J[Z]=O}g&&0!==O.length||(delete J[Z],k(A,O.fakeName||Z,O.nativeHandler,O.capture))}}else{for(Z in J)k(A,(O=J[Z]).fakeName||Z,O.nativeHandler,O.capture);J={}}for(Z in J)return L;delete B[m];try{delete A[z]}catch{A[z]=null}}return L},L.fire=function(A,C,g){var m;if(!A||3===A.nodeType||8===A.nodeType)return L;(g=S(null,g)).type=C,g.target=A;do{(m=A[z])&&I(g,m),A=A.parentNode||A.ownerDocument||A.defaultView||A.parentWindow}while(A&&!g.isPropagationStopped());return L},L.clean=function(A){var C,g,m=L.unbind;if(!A||3===A.nodeType||8===A.nodeType)return L;if(A[z]&&m(A),A.getElementsByTagName||(A=A.document),A&&A.getElementsByTagName)for(m(A),C=(g=A.getElementsByTagName("*")).length;C--;)(A=g[C])[z]&&m(A);return L},L.destroy=function(){B={}},L.cancel=function(A){return A&&(A.preventDefault(),A.stopImmediatePropagation()),!1}}var w="mce-data-",P=/^(?:mouse|contextmenu)|click/,T={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};return(x.Event=new x).bind(window,"ready",function(){}),x}),He(Re,[],function(){function $(te,pe,Ne,Xe){var xt,et,_e,at,dt,Xt,Le,vt,$e,Rt;if((pe?pe.ownerDocument||pe:Me)!==ue&&ae(pe),Ne=Ne||[],!te||"string"!=typeof te)return Ne;if(1!==(at=(pe=pe||ue).nodeType)&&9!==at)return[];if(ve&&!Xe){if(xt=Sn.exec(te))if(_e=xt[1]){if(9===at){if(!(et=pe.getElementById(_e))||!et.parentNode)return Ne;if(et.id===_e)return Ne.push(et),Ne}else if(pe.ownerDocument&&(et=pe.ownerDocument.getElementById(_e))&&he(pe,et)&&et.id===_e)return Ne.push(et),Ne}else{if(xt[2])return Be.apply(Ne,pe.getElementsByTagName(te)),Ne;if((_e=xt[3])&&C.getElementsByClassName)return Be.apply(Ne,pe.getElementsByClassName(_e)),Ne}if(C.qsa&&(!ye||!ye.test(te))){if(vt=Le=xe,$e=pe,Rt=9===at&&te,1===at&&"object"!==pe.nodeName.toLowerCase()){for(Xt=U(te),(Le=pe.getAttribute("id"))?vt=Le.replace(En,"\\$&"):pe.setAttribute("id",vt),vt="[id='"+vt+"'] ",dt=Xt.length;dt--;)Xt[dt]=vt+I(Xt[dt]);$e=dn.test(te)&&P(pe.parentNode)||pe,Rt=Xt.join(",")}if(Rt)try{return Be.apply(Ne,$e.querySelectorAll(Rt)),Ne}catch{}finally{Le||pe.removeAttribute("id")}}}return Z(te.replace(si,"$1"),pe,Ne,Xe)}function W(){var pe=[];return function te(Ne,Xe){return pe.push(Ne+" ")>g.cacheLength&&delete te[pe.shift()],te[Ne+" "]=Xe}}function R(te){return te[xe]=!0,te}function k(te){var pe=ue.createElement("div");try{return!!te(pe)}catch{return!1}finally{pe.parentNode&&pe.parentNode.removeChild(pe),pe=null}}function b(te,pe){for(var Ne=te.split("|"),Xe=te.length;Xe--;)g.attrHandle[Ne[Xe]]=pe}function S(te,pe){var Ne=pe&&te,Xe=Ne&&1===te.nodeType&&1===pe.nodeType&&(~pe.sourceIndex||ee)-(~te.sourceIndex||ee);if(Xe)return Xe;if(Ne)for(;Ne=Ne.nextSibling;)if(Ne===pe)return-1;return te?1:-1}function y(te){return function(pe){return"input"===pe.nodeName.toLowerCase()&&pe.type===te}}function x(te){return function(pe){var Ne=pe.nodeName.toLowerCase();return("input"===Ne||"button"===Ne)&&pe.type===te}}function w(te){return R(function(pe){return pe=+pe,R(function(Ne,Xe){for(var xt,et=te([],Ne.length,pe),_e=et.length;_e--;)Ne[xt=et[_e]]&&(Ne[xt]=!(Xe[xt]=Ne[xt]))})})}function P(te){return te&&typeof te.getElementsByTagName!==ne&&te}function T(){}function I(te){for(var pe=0,Ne=te.length,Xe="";pe<Ne;pe++)Xe+=te[pe].value;return Xe}function L(te,pe,Ne){var Xe=pe.dir,xt=Ne&&"parentNode"===Xe,et=At++;return pe.first?function(_e,at,dt){for(;_e=_e[Xe];)if(1===_e.nodeType||xt)return te(_e,at,dt)}:function(_e,at,dt){var Xt,Le,vt=[ot,et];if(dt){for(;_e=_e[Xe];)if((1===_e.nodeType||xt)&&te(_e,at,dt))return!0}else for(;_e=_e[Xe];)if(1===_e.nodeType||xt){if((Xt=(Le=_e[xe]||(_e[xe]={}))[Xe])&&Xt[0]===ot&&Xt[1]===et)return vt[2]=Xt[2];if(Le[Xe]=vt,vt[2]=te(_e,at,dt))return!0}}}function B(te){return te.length>1?function(pe,Ne,Xe){for(var xt=te.length;xt--;)if(!te[xt](pe,Ne,Xe))return!1;return!0}:te[0]}function z(te,pe,Ne,Xe,xt){for(var et,_e=[],at=0,dt=te.length,Xt=null!=pe;at<dt;at++)(et=te[at])&&(Ne&&!Ne(et,Xe,xt)||(_e.push(et),Xt&&pe.push(at)));return _e}function N(te,pe,Ne,Xe,xt,et){return Xe&&!Xe[xe]&&(Xe=N(Xe)),xt&&!xt[xe]&&(xt=N(xt,et)),R(function(_e,at,dt,Xt){var Le,vt,$e,Rt=[],Ut=[],Bt=at.length,jt=_e||function D(te,pe,Ne){for(var Xe=0,xt=pe.length;Xe<xt;Xe++)$(te,pe[Xe],Ne);return Ne}(pe||"*",dt.nodeType?[dt]:dt,[]),tn=!te||!_e&&pe?jt:z(jt,Rt,te,dt,Xt),_n=Ne?xt||(_e?te:Bt||Xe)?[]:at:tn;if(Ne&&Ne(tn,_n,dt,Xt),Xe)for(Le=z(_n,Ut),Xe(Le,[],dt,Xt),vt=Le.length;vt--;)($e=Le[vt])&&(_n[Ut[vt]]=!(tn[Ut[vt]]=$e));if(_e){if(xt||te){if(xt){for(Le=[],vt=_n.length;vt--;)($e=_n[vt])&&Le.push(tn[vt]=$e);xt(null,_n=[],Le,Xt)}for(vt=_n.length;vt--;)($e=_n[vt])&&(Le=xt?ct.call(_e,$e):Rt[vt])>-1&&(_e[Le]=!(at[Le]=$e))}}else _n=z(_n===at?_n.splice(Bt,_n.length):_n),xt?xt(null,at,_n,Xt):Be.apply(at,_n)})}function G(te){for(var pe,Ne,Xe,xt=te.length,et=g.relative[te[0].type],_e=et||g.relative[" "],at=et?1:0,dt=L(function(vt){return vt===pe},_e,!0),Xt=L(function(vt){return ct.call(pe,vt)>-1},_e,!0),Le=[function(vt,$e,Rt){return!et&&(Rt||$e!==J)||((pe=$e).nodeType?dt(vt,$e,Rt):Xt(vt,$e,Rt))}];at<xt;at++)if(Ne=g.relative[te[at].type])Le=[L(B(Le),Ne)];else{if((Ne=g.filter[te[at].type].apply(null,te[at].matches))[xe]){for(Xe=++at;Xe<xt&&!g.relative[te[Xe].type];Xe++);return N(at>1&&B(Le),at>1&&I(te.slice(0,at-1).concat({value:" "===te[at-2].type?"*":""})).replace(si,"$1"),Ne,at<Xe&&G(te.slice(at,Xe)),Xe<xt&&G(te=te.slice(Xe)),Xe<xt&&I(te))}Le.push(Ne)}return B(Le)}var A,C,g,m,O,U,H,Z,J,de,se,ae,ue,le,ve,ye,K,ie,he,xe="sizzle"+-new Date,Me=window.document,ot=0,At=0,Ot=W(),Jt=W(),zt=W(),Se=function(te,pe){return te===pe&&(se=!0),0},ne=typeof Dn,ee=1<<31,me={}.hasOwnProperty,ke=[],qe=ke.pop,Qe=ke.push,Be=ke.push,mt=ke.slice,ct=ke.indexOf||function(te){for(var pe=0,Ne=this.length;pe<Ne;pe++)if(this[pe]===te)return pe;return-1},ft="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yt="[\\x20\\t\\r\\n\\f]",vn="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Pn="\\["+yt+"*("+vn+")(?:"+yt+"*([*^$|!~]?=)"+yt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+vn+"))|)"+yt+"*\\]",Yn=":("+vn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Pn+")*)|.*)\\)|)",si=new RegExp("^"+yt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+yt+"+$","g"),Jn=new RegExp("^"+yt+"*,"+yt+"*"),Kn=new RegExp("^"+yt+"*([>+~]|"+yt+")"+yt+"*"),wi=new RegExp("="+yt+"*([^\\]'\"]*?)"+yt+"*\\]","g"),gi=new RegExp(Yn),mi=new RegExp("^"+vn+"$"),kt={ID:new RegExp("^#("+vn+")"),CLASS:new RegExp("^\\.("+vn+")"),TAG:new RegExp("^("+vn+"|[*])"),ATTR:new RegExp("^"+Pn),PSEUDO:new RegExp("^"+Yn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+yt+"*(even|odd|(([+-]|)(\\d*)n|)"+yt+"*(?:([+-]|)"+yt+"*(\\d+)|))"+yt+"*\\)|)","i"),bool:new RegExp("^(?:"+ft+")$","i"),needsContext:new RegExp("^"+yt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+yt+"*((?:-\\d)?\\d*)"+yt+"*\\)|)(?=[^-]|$)","i")},Yt=/^(?:input|select|textarea|button)$/i,je=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,Sn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dn=/[+~]/,En=/'|\\/g,Te=new RegExp("\\\\([\\da-f]{1,6}"+yt+"?|("+yt+")|.)","ig"),We=function(te,pe,Ne){var Xe="0x"+pe-65536;return Xe!=Xe||Ne?pe:Xe<0?String.fromCharCode(Xe+65536):String.fromCharCode(Xe>>10|55296,1023&Xe|56320)};try{Be.apply(ke=mt.call(Me.childNodes),Me.childNodes)}catch{Be={apply:ke.length?function(pe,Ne){Qe.apply(pe,mt.call(Ne))}:function(pe,Ne){for(var Xe=pe.length,xt=0;pe[Xe++]=Ne[xt++];);pe.length=Xe-1}}}for(A in C=$.support={},O=$.isXML=function(te){var pe=te&&(te.ownerDocument||te).documentElement;return!!pe&&"HTML"!==pe.nodeName},ae=$.setDocument=function(te){var Ne,Xe=te?te.ownerDocument||te:Me,xt=Xe.defaultView;return Xe!==ue&&9===Xe.nodeType&&Xe.documentElement?(ue=Xe,le=Xe.documentElement,ve=!O(Xe),xt&&xt!==function pe(et){try{return et.top}catch{}return null}(xt)&&(xt.addEventListener?xt.addEventListener("unload",function(){ae()},!1):xt.attachEvent&&xt.attachEvent("onunload",function(){ae()})),C.attributes=k(function(et){return et.className="i",!et.getAttribute("className")}),C.getElementsByTagName=k(function(et){return et.appendChild(Xe.createComment("")),!et.getElementsByTagName("*").length}),C.getElementsByClassName=pt.test(Xe.getElementsByClassName),C.getById=k(function(et){return le.appendChild(et).id=xe,!Xe.getElementsByName||!Xe.getElementsByName(xe).length}),C.getById?(g.find.ID=function(et,_e){if(typeof _e.getElementById!==ne&&ve){var at=_e.getElementById(et);return at&&at.parentNode?[at]:[]}},g.filter.ID=function(et){var _e=et.replace(Te,We);return function(at){return at.getAttribute("id")===_e}}):(delete g.find.ID,g.filter.ID=function(et){var _e=et.replace(Te,We);return function(at){var dt=typeof at.getAttributeNode!==ne&&at.getAttributeNode("id");return dt&&dt.value===_e}}),g.find.TAG=C.getElementsByTagName?function(et,_e){if(typeof _e.getElementsByTagName!==ne)return _e.getElementsByTagName(et)}:function(et,_e){var at,dt=[],Xt=0,Le=_e.getElementsByTagName(et);if("*"===et){for(;at=Le[Xt++];)1===at.nodeType&&dt.push(at);return dt}return Le},g.find.CLASS=C.getElementsByClassName&&function(et,_e){if(ve)return _e.getElementsByClassName(et)},K=[],ye=[],(C.qsa=pt.test(Xe.querySelectorAll))&&(k(function(et){et.innerHTML="<select msallowcapture=''><option selected=''></option></select>",et.querySelectorAll("[msallowcapture^='']").length&&ye.push("[*^$]="+yt+"*(?:''|\"\")"),et.querySelectorAll("[selected]").length||ye.push("\\["+yt+"*(?:value|"+ft+")"),et.querySelectorAll(":checked").length||ye.push(":checked")}),k(function(et){var _e=Xe.createElement("input");_e.setAttribute("type","hidden"),et.appendChild(_e).setAttribute("name","D"),et.querySelectorAll("[name=d]").length&&ye.push("name"+yt+"*[*^$|!~]?="),et.querySelectorAll(":enabled").length||ye.push(":enabled",":disabled"),et.querySelectorAll("*,:x"),ye.push(",.*:")})),(C.matchesSelector=pt.test(ie=le.matches||le.webkitMatchesSelector||le.mozMatchesSelector||le.oMatchesSelector||le.msMatchesSelector))&&k(function(et){C.disconnectedMatch=ie.call(et,"div"),ie.call(et,"[s!='']:x"),K.push("!=",Yn)}),ye=ye.length&&new RegExp(ye.join("|")),K=K.length&&new RegExp(K.join("|")),Ne=pt.test(le.compareDocumentPosition),he=Ne||pt.test(le.contains)?function(et,_e){var at=9===et.nodeType?et.documentElement:et,dt=_e&&_e.parentNode;return et===dt||!(!dt||1!==dt.nodeType||!(at.contains?at.contains(dt):et.compareDocumentPosition&&16&et.compareDocumentPosition(dt)))}:function(et,_e){if(_e)for(;_e=_e.parentNode;)if(_e===et)return!0;return!1},Se=Ne?function(et,_e){if(et===_e)return se=!0,0;var at=!et.compareDocumentPosition-!_e.compareDocumentPosition;return at||(1&(at=(et.ownerDocument||et)===(_e.ownerDocument||_e)?et.compareDocumentPosition(_e):1)||!C.sortDetached&&_e.compareDocumentPosition(et)===at?et===Xe||et.ownerDocument===Me&&he(Me,et)?-1:_e===Xe||_e.ownerDocument===Me&&he(Me,_e)?1:de?ct.call(de,et)-ct.call(de,_e):0:4&at?-1:1)}:function(et,_e){if(et===_e)return se=!0,0;var at,dt=0,Xt=et.parentNode,Le=_e.parentNode,vt=[et],$e=[_e];if(!Xt||!Le)return et===Xe?-1:_e===Xe?1:Xt?-1:Le?1:de?ct.call(de,et)-ct.call(de,_e):0;if(Xt===Le)return S(et,_e);for(at=et;at=at.parentNode;)vt.unshift(at);for(at=_e;at=at.parentNode;)$e.unshift(at);for(;vt[dt]===$e[dt];)dt++;return dt?S(vt[dt],$e[dt]):vt[dt]===Me?-1:$e[dt]===Me?1:0},Xe):ue},$.matches=function(te,pe){return $(te,null,null,pe)},$.matchesSelector=function(te,pe){if((te.ownerDocument||te)!==ue&&ae(te),pe=pe.replace(wi,"='$1']"),C.matchesSelector&&ve&&(!K||!K.test(pe))&&(!ye||!ye.test(pe)))try{var Ne=ie.call(te,pe);if(Ne||C.disconnectedMatch||te.document&&11!==te.document.nodeType)return Ne}catch{}return $(pe,ue,null,[te]).length>0},$.contains=function(te,pe){return(te.ownerDocument||te)!==ue&&ae(te),he(te,pe)},$.attr=function(te,pe){(te.ownerDocument||te)!==ue&&ae(te);var Ne=g.attrHandle[pe.toLowerCase()],Xe=Ne&&me.call(g.attrHandle,pe.toLowerCase())?Ne(te,pe,!ve):Dn;return Xe!==Dn?Xe:C.attributes||!ve?te.getAttribute(pe):(Xe=te.getAttributeNode(pe))&&Xe.specified?Xe.value:null},$.error=function(te){throw new Error("Syntax error, unrecognized expression: "+te)},$.uniqueSort=function(te){var pe,Ne=[],Xe=0,xt=0;if(se=!C.detectDuplicates,de=!C.sortStable&&te.slice(0),te.sort(Se),se){for(;pe=te[xt++];)pe===te[xt]&&(Xe=Ne.push(xt));for(;Xe--;)te.splice(Ne[Xe],1)}return de=null,te},m=$.getText=function(te){var pe,Ne="",Xe=0,xt=te.nodeType;if(xt){if(1===xt||9===xt||11===xt){if("string"==typeof te.textContent)return te.textContent;for(te=te.firstChild;te;te=te.nextSibling)Ne+=m(te)}else if(3===xt||4===xt)return te.nodeValue}else for(;pe=te[Xe++];)Ne+=m(pe);return Ne},(g=$.selectors={cacheLength:50,createPseudo:R,match:kt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(te){return te[1]=te[1].replace(Te,We),te[3]=(te[3]||te[4]||te[5]||"").replace(Te,We),"~="===te[2]&&(te[3]=" "+te[3]+" "),te.slice(0,4)},CHILD:function(te){return te[1]=te[1].toLowerCase(),"nth"===te[1].slice(0,3)?(te[3]||$.error(te[0]),te[4]=+(te[4]?te[5]+(te[6]||1):2*("even"===te[3]||"odd"===te[3])),te[5]=+(te[7]+te[8]||"odd"===te[3])):te[3]&&$.error(te[0]),te},PSEUDO:function(te){var pe,Ne=!te[6]&&te[2];return kt.CHILD.test(te[0])?null:(te[3]?te[2]=te[4]||te[5]||"":Ne&&gi.test(Ne)&&(pe=U(Ne,!0))&&(pe=Ne.indexOf(")",Ne.length-pe)-Ne.length)&&(te[0]=te[0].slice(0,pe),te[2]=Ne.slice(0,pe)),te.slice(0,3))}},filter:{TAG:function(te){var pe=te.replace(Te,We).toLowerCase();return"*"===te?function(){return!0}:function(Ne){return Ne.nodeName&&Ne.nodeName.toLowerCase()===pe}},CLASS:function(te){var pe=Ot[te+" "];return pe||(pe=new RegExp("(^|"+yt+")"+te+"("+yt+"|$)"))&&Ot(te,function(Ne){return pe.test("string"==typeof Ne.className&&Ne.className||typeof Ne.getAttribute!==ne&&Ne.getAttribute("class")||"")})},ATTR:function(te,pe,Ne){return function(Xe){var xt=$.attr(Xe,te);return null==xt?"!="===pe:!pe||(xt+="","="===pe?xt===Ne:"!="===pe?xt!==Ne:"^="===pe?Ne&&0===xt.indexOf(Ne):"*="===pe?Ne&&xt.indexOf(Ne)>-1:"$="===pe?Ne&&xt.slice(-Ne.length)===Ne:"~="===pe?(" "+xt+" ").indexOf(Ne)>-1:"|="===pe&&(xt===Ne||xt.slice(0,Ne.length+1)===Ne+"-"))}},CHILD:function(te,pe,Ne,Xe,xt){var et="nth"!==te.slice(0,3),_e="last"!==te.slice(-4),at="of-type"===pe;return 1===Xe&&0===xt?function(dt){return!!dt.parentNode}:function(dt,Xt,Le){var vt,$e,Rt,Ut,Bt,jt,tn=et!==_e?"nextSibling":"previousSibling",_n=dt.parentNode,Hn=at&&dt.nodeName.toLowerCase(),In=!Le&&!at;if(_n){if(et){for(;tn;){for(Rt=dt;Rt=Rt[tn];)if(at?Rt.nodeName.toLowerCase()===Hn:1===Rt.nodeType)return!1;jt=tn="only"===te&&!jt&&"nextSibling"}return!0}if(jt=[_e?_n.firstChild:_n.lastChild],_e&&In){for(Ut=(vt=($e=_n[xe]||(_n[xe]={}))[te]||[])[0]===ot&&vt[2],Rt=(Bt=vt[0]===ot&&vt[1])&&_n.childNodes[Bt];Rt=++Bt&&Rt&&Rt[tn]||(Ut=Bt=0)||jt.pop();)if(1===Rt.nodeType&&++Ut&&Rt===dt){$e[te]=[ot,Bt,Ut];break}}else if(In&&(vt=(dt[xe]||(dt[xe]={}))[te])&&vt[0]===ot)Ut=vt[1];else for(;(Rt=++Bt&&Rt&&Rt[tn]||(Ut=Bt=0)||jt.pop())&&((at?Rt.nodeName.toLowerCase()!==Hn:1!==Rt.nodeType)||!++Ut||(In&&((Rt[xe]||(Rt[xe]={}))[te]=[ot,Ut]),Rt!==dt)););return(Ut-=xt)===Xe||Ut%Xe==0&&Ut/Xe>=0}}},PSEUDO:function(te,pe){var Ne,Xe=g.pseudos[te]||g.setFilters[te.toLowerCase()]||$.error("unsupported pseudo: "+te);return Xe[xe]?Xe(pe):Xe.length>1?(Ne=[te,te,"",pe],g.setFilters.hasOwnProperty(te.toLowerCase())?R(function(xt,et){for(var _e,at=Xe(xt,pe),dt=at.length;dt--;)xt[_e=ct.call(xt,at[dt])]=!(et[_e]=at[dt])}):function(xt){return Xe(xt,0,Ne)}):Xe}},pseudos:{not:R(function(te){var pe=[],Ne=[],Xe=H(te.replace(si,"$1"));return Xe[xe]?R(function(xt,et,_e,at){for(var dt,Xt=Xe(xt,null,at,[]),Le=xt.length;Le--;)(dt=Xt[Le])&&(xt[Le]=!(et[Le]=dt))}):function(xt,et,_e){return pe[0]=xt,Xe(pe,null,_e,Ne),!Ne.pop()}}),has:R(function(te){return function(pe){return $(te,pe).length>0}}),contains:R(function(te){return te=te.replace(Te,We),function(pe){return(pe.textContent||pe.innerText||m(pe)).indexOf(te)>-1}}),lang:R(function(te){return mi.test(te||"")||$.error("unsupported lang: "+te),te=te.replace(Te,We).toLowerCase(),function(pe){var Ne;do{if(Ne=ve?pe.lang:pe.getAttribute("xml:lang")||pe.getAttribute("lang"))return(Ne=Ne.toLowerCase())===te||0===Ne.indexOf(te+"-")}while((pe=pe.parentNode)&&1===pe.nodeType);return!1}}),target:function(te){var pe=window.location&&window.location.hash;return pe&&pe.slice(1)===te.id},root:function(te){return te===le},focus:function(te){return te===ue.activeElement&&(!ue.hasFocus||ue.hasFocus())&&!!(te.type||te.href||~te.tabIndex)},enabled:function(te){return!1===te.disabled},disabled:function(te){return!0===te.disabled},checked:function(te){var pe=te.nodeName.toLowerCase();return"input"===pe&&!!te.checked||"option"===pe&&!!te.selected},selected:function(te){return!0===te.selected},empty:function(te){for(te=te.firstChild;te;te=te.nextSibling)if(te.nodeType<6)return!1;return!0},parent:function(te){return!g.pseudos.empty(te)},header:function(te){return je.test(te.nodeName)},input:function(te){return Yt.test(te.nodeName)},button:function(te){var pe=te.nodeName.toLowerCase();return"input"===pe&&"button"===te.type||"button"===pe},text:function(te){var pe;return"input"===te.nodeName.toLowerCase()&&"text"===te.type&&(null==(pe=te.getAttribute("type"))||"text"===pe.toLowerCase())},first:w(function(){return[0]}),last:w(function(te,pe){return[pe-1]}),eq:w(function(te,pe,Ne){return[Ne<0?Ne+pe:Ne]}),even:w(function(te,pe){for(var Ne=0;Ne<pe;Ne+=2)te.push(Ne);return te}),odd:w(function(te,pe){for(var Ne=1;Ne<pe;Ne+=2)te.push(Ne);return te}),lt:w(function(te,pe,Ne){for(var Xe=Ne<0?Ne+pe:Ne;--Xe>=0;)te.push(Xe);return te}),gt:w(function(te,pe,Ne){for(var Xe=Ne<0?Ne+pe:Ne;++Xe<pe;)te.push(Xe);return te})}}).pseudos.nth=g.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[A]=y(A);for(A in{submit:!0,reset:!0})g.pseudos[A]=x(A);return T.prototype=g.filters=g.pseudos,g.setFilters=new T,U=$.tokenize=function(te,pe){var Ne,Xe,xt,et,_e,at,dt,Xt=Jt[te+" "];if(Xt)return pe?0:Xt.slice(0);for(_e=te,at=[],dt=g.preFilter;_e;){for(et in Ne&&!(Xe=Jn.exec(_e))||(Xe&&(_e=_e.slice(Xe[0].length)||_e),at.push(xt=[])),Ne=!1,(Xe=Kn.exec(_e))&&(Ne=Xe.shift(),xt.push({value:Ne,type:Xe[0].replace(si," ")}),_e=_e.slice(Ne.length)),g.filter)!(Xe=kt[et].exec(_e))||dt[et]&&!(Xe=dt[et](Xe))||(Ne=Xe.shift(),xt.push({value:Ne,type:et,matches:Xe}),_e=_e.slice(Ne.length));if(!Ne)break}return pe?_e.length:_e?$.error(te):Jt(te,at).slice(0)},H=$.compile=function(te,pe){var Ne,Xe=[],xt=[],et=zt[te+" "];if(!et){for(pe||(pe=U(te)),Ne=pe.length;Ne--;)(et=G(pe[Ne]))[xe]?Xe.push(et):xt.push(et);et=zt(te,function M(te,pe){var Ne=pe.length>0,Xe=te.length>0,xt=function(et,_e,at,dt,Xt){var Le,vt,$e,Rt=0,Ut="0",Bt=et&&[],jt=[],tn=J,_n=et||Xe&&g.find.TAG("*",Xt),Hn=ot+=null==tn?1:Math.random()||.1,In=_n.length;for(Xt&&(J=_e!==ue&&_e);Ut!==In&&null!=(Le=_n[Ut]);Ut++){if(Xe&&Le){for(vt=0;$e=te[vt++];)if($e(Le,_e,at)){dt.push(Le);break}Xt&&(ot=Hn)}Ne&&((Le=!$e&&Le)&&Rt--,et&&Bt.push(Le))}if(Rt+=Ut,Ne&&Ut!==Rt){for(vt=0;$e=pe[vt++];)$e(Bt,jt,_e,at);if(et){if(Rt>0)for(;Ut--;)Bt[Ut]||jt[Ut]||(jt[Ut]=qe.call(dt));jt=z(jt)}Be.apply(dt,jt),Xt&&!et&&jt.length>0&&Rt+pe.length>1&&$.uniqueSort(dt)}return Xt&&(ot=Hn,J=tn),Bt};return Ne?R(xt):xt}(xt,Xe)),et.selector=te}return et},Z=$.select=function(te,pe,Ne,Xe){var xt,et,_e,at,dt,Xt="function"==typeof te&&te,Le=!Xe&&U(te=Xt.selector||te);if(Ne=Ne||[],1===Le.length){if((et=Le[0]=Le[0].slice(0)).length>2&&"ID"===(_e=et[0]).type&&C.getById&&9===pe.nodeType&&ve&&g.relative[et[1].type]){if(!(pe=(g.find.ID(_e.matches[0].replace(Te,We),pe)||[])[0]))return Ne;Xt&&(pe=pe.parentNode),te=te.slice(et.shift().value.length)}for(xt=kt.needsContext.test(te)?0:et.length;xt--&&!g.relative[at=(_e=et[xt]).type];)if((dt=g.find[at])&&(Xe=dt(_e.matches[0].replace(Te,We),dn.test(et[0].type)&&P(pe.parentNode)||pe))){if(et.splice(xt,1),!(te=Xe.length&&I(et)))return Be.apply(Ne,Xe),Ne;break}}return(Xt||H(te,Le))(Xe,pe,!ve,Ne,dn.test(te)&&P(pe.parentNode)||pe),Ne},C.sortStable=xe.split("").sort(Se).join("")===xe,C.detectDuplicates=!!se,ae(),C.sortDetached=k(function(te){return 1&te.compareDocumentPosition(ue.createElement("div"))}),k(function(te){return te.innerHTML="<a href='#'></a>","#"===te.firstChild.getAttribute("href")})||b("type|href|height|width",function(te,pe,Ne){if(!Ne)return te.getAttribute(pe,"type"===pe.toLowerCase()?1:2)}),C.attributes&&k(function(te){return te.innerHTML="<input/>",te.firstChild.setAttribute("value",""),""===te.firstChild.getAttribute("value")})||b("value",function(te,pe,Ne){if(!Ne&&"input"===te.nodeName.toLowerCase())return te.defaultValue}),k(function(te){return null==te.getAttribute("disabled")})||b(ft,function(te,pe,Ne){var Xe;if(!Ne)return!0===te[pe]?pe.toLowerCase():(Xe=te.getAttributeNode(pe))&&Xe.specified?Xe.value:null}),$}),He(Vt,[],function(){function W(T,I,L){var B,D;if(!T)return 0;if(L=L||T,T.length!==Dn){for(B=0,D=T.length;B<D;B++)if(!1===I.call(L,T[B],B,T))return 0}else for(B in T)if(T.hasOwnProperty(B)&&!1===I.call(L,T[B],B,T))return 0;return 1}function y(T,I,L){var B,D;for(B=0,D=T.length;B<D;B++)if(I.call(L,T[B],B,T))return B;return-1}var P=Array.isArray||function(T){return"[object Array]"===Object.prototype.toString.call(T)};return{isArray:P,toArray:function $(T){var L,B,I=T;if(!P(T))for(I=[],L=0,B=T.length;L<B;L++)I[L]=T[L];return I},each:W,map:function R(T,I){var L=[];return W(T,function(B,D){L.push(I(B,D,T))}),L},filter:function k(T,I){var L=[];return W(T,function(B,D){I&&!I(B,D,T)||L.push(B)}),L},indexOf:function b(T,I){var L,B;if(T)for(L=0,B=T.length;L<B;L++)if(T[L]===I)return L;return-1},reduce:function S(T,I,L,B){var D=0;for(arguments.length<3&&(L=T[0]);D<T.length;D++)L=I.call(B,L,T[D],D);return L},findIndex:y,find:function x(T,I,L){var B=y(T,I,L);return-1!==B?T[B]:Dn},last:function w(T){return T[T.length-1]}}}),He(Fe,[St,Vt],function($,W){function R(D){return null===D||D===Dn?"":(""+D).replace(B,"")}function k(D,z){return z?!("array"!=z||!W.isArray(D))||typeof D==z:D!==Dn}var B=/^\s*|\s*$/g;return{trim:R,isArray:W.isArray,is:k,toArray:W.toArray,makeMap:function b(D,z,N){var G;for(z=z||",","string"==typeof(D=D||[])&&(D=D.split(z)),N=N||{},G=D.length;G--;)N[D[G]]={};return N},each:W.each,map:W.map,grep:W.filter,inArray:W.indexOf,hasOwn:function S(D,z){return Object.prototype.hasOwnProperty.call(D,z)},extend:function x(D,z){var N,G,M,C,A=arguments;for(N=1,G=A.length;N<G;N++)for(M in z=A[N])z.hasOwnProperty(M)&&(C=z[M])!==Dn&&(D[M]=C);return D},create:function y(D,z,N){var M,A,C,g,m,G=this,O=0;if(D=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(D),C=D[3].match(/(^|\.)(\w+)$/i)[2],!(A=G.createNS(D[3].replace(/\.\w+$/,""),N))[C]){if("static"==D[2])return A[C]=z,void(this.onCreate&&this.onCreate(D[2],D[3],A[C]));z[C]||(z[C]=function(){},O=1),A[C]=z[C],G.extend(A[C].prototype,z),D[5]&&(M=G.resolve(D[5]).prototype,g=D[5].match(/\.(\w+)$/i)[1],m=A[C],A[C]=O?function(){return M[g].apply(this,arguments)}:function(){return this.parent=M[g],m.apply(this,arguments)},A[C].prototype[C]=A[C],G.each(M,function(U,H){A[C].prototype[H]=M[H]}),G.each(z,function(U,H){M[H]?A[C].prototype[H]=function(){return this.parent=M[H],U.apply(this,arguments)}:H!=C&&(A[C].prototype[H]=U)})),G.each(z.static,function(U,H){A[C][H]=U})}},walk:function w(D,z,N,G){G=G||this,D&&(N&&(D=D[N]),W.each(D,function(M,A){return!1!==z.call(G,M,A,N)&&void w(M,z,N,G)}))},createNS:function P(D,z){var N,G;for(z=z||window,D=D.split("."),N=0;N<D.length;N++)z[G=D[N]]||(z[G]={}),z=z[G];return z},resolve:function T(D,z){var N,G;for(z=z||window,N=0,G=(D=D.split(".")).length;N<G&&(z=z[D[N]]);N++);return z},explode:function I(D,z){return!D||k(D,"array")?D:W.map(D.split(z||","),R)},_addCacheSuffix:function L(D){var z=$.cacheSuffix;return z&&(D+=(-1===D.indexOf("?")?"?":"&")+z),D}}}),He(rt,[Dt,Re,Fe,St],function($,W,R,k){function b(K){return typeof K<"u"}function S(K){return"string"==typeof K}function x(K,ie){var he,xe,Me;for(Me=(ie=ie||g).createElement("div"),he=ie.createDocumentFragment(),Me.innerHTML=K;xe=Me.firstChild;)he.appendChild(xe);return he}function w(K,ie,he,xe){var Me;if(S(ie))ie=x(ie,N(K[0]));else if(ie.length&&!ie.nodeType){if(ie=I.makeArray(ie),xe)for(Me=ie.length-1;Me>=0;Me--)w(K,ie[Me],he,xe);else for(Me=0;Me<ie.length;Me++)w(K,ie[Me],he,xe);return K}if(ie.nodeType)for(Me=K.length;Me--;)he.call(K[Me],ie);return K}function P(K,ie){return K&&ie&&-1!==(" "+K.className+" ").indexOf(" "+ie+" ")}function T(K,ie,he){var xe,Me;return ie=I(ie)[0],K.each(function(){var ot=this;he&&xe==ot.parentNode||(xe=ot.parentNode,Me=ie.cloneNode(!1),ot.parentNode.insertBefore(Me,ot)),Me.appendChild(ot)}),K}function I(K,ie){return new I.fn.init(K,ie)}function B(K){return null===K||K===Z?"":(""+K).replace(ye,"")}function D(K,ie){var he,xe,Me,At;if(K)if(void 0===(he=K.length)){for(xe in K)if(K.hasOwnProperty(xe)&&!1===ie.call(At=K[xe],xe,At))break}else for(Me=0;Me<he&&!1!==ie.call(At=K[Me],Me,At);Me++);return K}function z(K,ie){var he=[];return D(K,function(xe,Me){ie(Me,xe)&&he.push(Me)}),he}function N(K){return K?9==K.nodeType?K:K.ownerDocument:g}function G(K,ie,he){var xe=[],Me=K[ie];for("string"!=typeof he&&he instanceof I&&(he=he[0]);Me&&9!==Me.nodeType&&(he===Dn||!(Me===he||"string"==typeof he&&I(Me).is(he)));)1===Me.nodeType&&xe.push(Me),Me=Me[ie];return xe}function M(K,ie,he,xe){var Me=[];for(xe instanceof I&&(xe=xe[0]);K;K=K[ie])if(!he||K.nodeType===he){if(xe!==Dn&&(K===xe||"string"==typeof xe&&I(K).is(xe)))break;Me.push(K)}return Me}function A(K,ie,he){for(K=K[ie];K;K=K[ie])if(K.nodeType==he)return K;return null}function C(K,ie,he){D(he,function(xe,Me){K[xe]=K[xe]||{},K[xe][ie]=Me})}var Z,g=document,m=Array.prototype.push,O=Array.prototype.slice,U=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,H=$.Event,J=R.makeMap("children,contents,next,prev"),de=R.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),se=R.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),ae={for:"htmlFor",class:"className",readonly:"readOnly"},ue={float:"cssFloat"},le={},ve={},ye=/^\s*|\s*$/g;return I.fn=I.prototype={constructor:I,selector:"",context:null,length:0,init:function(K,ie){var xe,Me,he=this;if(!K)return he;if(K.nodeType)return he.context=he[0]=K,he.length=1,he;if(ie&&ie.nodeType)he.context=ie;else{if(ie)return I(K).attr(ie);he.context=ie=document}if(S(K)){if(he.selector=K,!(xe="<"===K.charAt(0)&&">"===K.charAt(K.length-1)&&K.length>=3?[null,K,null]:U.exec(K)))return I(ie).find(K);if(xe[1])for(Me=x(K,N(ie)).firstChild;Me;)m.call(he,Me),Me=Me.nextSibling;else{if(!(Me=N(ie).getElementById(xe[2])))return he;if(Me.id!==xe[2])return he.find(K);he.length=1,he[0]=Me}}else this.add(K,!1);return he},toArray:function(){return R.toArray(this)},add:function(K,ie){var xe,Me,he=this;if(S(K))return he.add(I(K));if(!1!==ie)for(xe=I.unique(he.toArray().concat(I.makeArray(K))),he.length=xe.length,Me=0;Me<xe.length;Me++)he[Me]=xe[Me];else m.apply(he,I.makeArray(K));return he},attr:function(K,ie){var xe,he=this;if("object"==typeof K)D(K,function(Me,ot){he.attr(Me,ot)});else{if(!b(ie)){if(he[0]&&1===he[0].nodeType){if((xe=le[K])&&xe.get)return xe.get(he[0],K);if(se[K])return he.prop(K)?K:Z;null===(ie=he[0].getAttribute(K,2))&&(ie=Z)}return ie}this.each(function(){var Me;if(1===this.nodeType){if((Me=le[K])&&Me.set)return void Me.set(this,ie);null===ie?this.removeAttribute(K,2):this.setAttribute(K,ie,2)}})}return he},removeAttr:function(K){return this.attr(K,null)},prop:function(K,ie){var he=this;if("object"==typeof(K=ae[K]||K))D(K,function(xe,Me){he.prop(xe,Me)});else{if(!b(ie))return he[0]&&he[0].nodeType&&K in he[0]?he[0][K]:ie;this.each(function(){1==this.nodeType&&(this[K]=ie)})}return he},css:function(K,ie){function he(Ot){return Ot.replace(/-(\D)/g,function(Jt,zt){return zt.toUpperCase()})}function xe(Ot){return Ot.replace(/[A-Z]/g,function(Jt){return"-"+Jt})}var ot,At,Me=this;if("object"==typeof K)D(K,function(Ot,Jt){Me.css(Ot,Jt)});else if(b(ie))K=he(K),"number"!=typeof ie||de[K]||(ie+="px"),Me.each(function(){var Ot=this.style;if((At=ve[K])&&At.set)At.set(this,ie);else{try{this.style[ue[K]||K]=ie}catch{}null!==ie&&""!==ie||(Ot.removeProperty?Ot.removeProperty(xe(K)):Ot.removeAttribute(K))}});else{if(ot=Me[0],(At=ve[K])&&At.get)return At.get(ot);if(ot.ownerDocument.defaultView)try{return ot.ownerDocument.defaultView.getComputedStyle(ot,null).getPropertyValue(xe(K))}catch{return Z}else if(ot.currentStyle)return ot.currentStyle[he(K)]}return Me},remove:function(){for(var ie,he=this.length;he--;)H.clean(ie=this[he]),ie.parentNode&&ie.parentNode.removeChild(ie);return this},empty:function(){for(var ie,he=this.length;he--;)for(ie=this[he];ie.firstChild;)ie.removeChild(ie.firstChild);return this},html:function(K){var he,ie=this;if(b(K)){he=ie.length;try{for(;he--;)ie[he].innerHTML=K}catch{I(ie[he]).empty().append(K)}return ie}return ie[0]?ie[0].innerHTML:""},text:function(K){var he,ie=this;if(b(K)){for(he=ie.length;he--;)"innerText"in ie[he]?ie[he].innerText=K:ie[0].textContent=K;return ie}return ie[0]?ie[0].innerText||ie[0].textContent:""},append:function(){return w(this,arguments,function(K){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(K)})},prepend:function(){return w(this,arguments,function(K){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(K,this.firstChild)},!0)},before:function(){var K=this;return K[0]&&K[0].parentNode?w(K,arguments,function(ie){this.parentNode.insertBefore(ie,this)}):K},after:function(){var K=this;return K[0]&&K[0].parentNode?w(K,arguments,function(ie){this.parentNode.insertBefore(ie,this.nextSibling)},!0):K},appendTo:function(K){return I(K).append(this),this},prependTo:function(K){return I(K).prepend(this),this},replaceWith:function(K){return this.before(K).remove()},wrap:function(K){return T(this,K)},wrapAll:function(K){return T(this,K,!0)},wrapInner:function(K){return this.each(function(){I(this).contents().wrapAll(K)}),this},unwrap:function(){return this.parent().each(function(){I(this).replaceWith(this.childNodes)})},clone:function(){var K=[];return this.each(function(){K.push(this.cloneNode(!0))}),I(K)},addClass:function(K){return this.toggleClass(K,!0)},removeClass:function(K){return this.toggleClass(K,!1)},toggleClass:function(K,ie){var he=this;return"string"!=typeof K||(-1!==K.indexOf(" ")?D(K.split(" "),function(){he.toggleClass(this,ie)}):he.each(function(xe,Me){var ot,At;(At=P(Me,K))!==ie&&(ot=Me.className,At?Me.className=B((" "+ot+" ").replace(" "+K+" "," ")):Me.className+=ot?" "+K:K)})),he},hasClass:function(K){return P(this[0],K)},each:function(K){return D(this,K)},on:function(K,ie){return this.each(function(){H.bind(this,K,ie)})},off:function(K,ie){return this.each(function(){H.unbind(this,K,ie)})},trigger:function(K){return this.each(function(){"object"==typeof K?H.fire(this,K.type,K):H.fire(this,K)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new I(O.apply(this,arguments))},eq:function(K){return-1===K?this.slice(K):this.slice(K,+K+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(K){var ie,he,xe=[];for(ie=0,he=this.length;ie<he;ie++)I.find(K,this[ie],xe);return I(xe)},filter:function(K){return I("function"==typeof K?z(this.toArray(),function(ie,he){return K(he,ie)}):I.filter(K,this.toArray()))},closest:function(K){var ie=[];return K instanceof I&&(K=K[0]),this.each(function(he,xe){for(;xe;){if("string"==typeof K&&I(xe).is(K)){ie.push(xe);break}if(xe==K){ie.push(xe);break}xe=xe.parentNode}}),I(ie)},offset:function(K){var ie,he,xe,At,Me=0,ot=0;return K?this.css(K):((ie=this[0])&&(xe=(he=ie.ownerDocument).documentElement,ie.getBoundingClientRect&&(Me=(At=ie.getBoundingClientRect()).left+(xe.scrollLeft||he.body.scrollLeft)-xe.clientLeft,ot=At.top+(xe.scrollTop||he.body.scrollTop)-xe.clientTop)),{left:Me,top:ot})},push:m,sort:[].sort,splice:[].splice},R.extend(I,{extend:R.extend,makeArray:function(K){return function y(K){return K&&K==K.window}(K)||K.nodeType?[K]:R.toArray(K)},inArray:function L(K,ie){var he;if(ie.indexOf)return ie.indexOf(K);for(he=ie.length;he--;)if(ie[he]===K)return he;return-1},isArray:R.isArray,each:D,trim:B,grep:z,find:W,expr:W.selectors,unique:W.uniqueSort,text:W.getText,contains:W.contains,filter:function(K,ie,he){var xe=ie.length;for(he&&(K=":not("+K+")");xe--;)1!=ie[xe].nodeType&&ie.splice(xe,1);return 1===ie.length?I.find.matchesSelector(ie[0],K)?[ie[0]]:[]:I.find.matches(K,ie)}}),D({parent:function(K){var ie=K.parentNode;return ie&&11!==ie.nodeType?ie:null},parents:function(K){return G(K,"parentNode")},next:function(K){return A(K,"nextSibling",1)},prev:function(K){return A(K,"previousSibling",1)},children:function(K){return M(K.firstChild,"nextSibling",1)},contents:function(K){return R.toArray(("iframe"===K.nodeName?K.contentDocument||K.contentWindow.document:K).childNodes)}},function(K,ie){I.fn[K]=function(he){var Me=[];return this.each(function(){var ot=ie.call(Me,this,he,Me);ot&&(I.isArray(ot)?Me.push.apply(Me,ot):Me.push(ot))}),this.length>1&&(J[K]||(Me=I.unique(Me)),0===K.indexOf("parents")&&(Me=Me.reverse())),Me=I(Me),he?Me.filter(he):Me}}),D({parentsUntil:function(K,ie){return G(K,"parentNode",ie)},nextUntil:function(K,ie){return M(K,"nextSibling",1,ie).slice(1)},prevUntil:function(K,ie){return M(K,"previousSibling",1,ie).slice(1)}},function(K,ie){I.fn[K]=function(he,xe){var ot=[];return this.each(function(){var At=ie.call(ot,this,he,ot);At&&(I.isArray(At)?ot.push.apply(ot,At):ot.push(At))}),this.length>1&&(ot=I.unique(ot),0!==K.indexOf("parents")&&"prevUntil"!==K||(ot=ot.reverse())),ot=I(ot),xe?ot.filter(xe):ot}}),I.fn.is=function(K){return!!K&&this.filter(K).length>0},I.fn.init.prototype=I.fn,I.overrideDefaults=function(K){function ie(xe,Me){return he=he||K(),0===arguments.length&&(xe=he.element),Me||(Me=he.context),new ie.fn.init(xe,Me)}var he;return I.extend(ie,this),ie},k.ie&&k.ie<8&&(C(le,"get",{maxlength:function(K){var ie=K.maxLength;return 2147483647===ie?Z:ie},size:function(K){var ie=K.size;return 20===ie?Z:ie},class:function(K){return K.className},style:function(K){var ie=K.style.cssText;return 0===ie.length?Z:ie}}),C(le,"set",{class:function(K,ie){K.className=ie},style:function(K,ie){K.style.cssText=ie}})),k.ie&&k.ie<9&&(ue.float="styleFloat",C(ve,"set",{opacity:function(K,ie){var he=K.style;null===ie||""===ie?he.removeAttribute("filter"):(he.zoom=1,he.filter="alpha(opacity="+100*ie+")")}})),I.attrHooks=le,I.cssHooks=ve,I}),He(Ie,[],function(){return function($,W){function R(B,D,z,N){function G(M){return(M=parseInt(M,10).toString(16)).length>1?M:"0"+M}return"#"+G(D)+G(z)+G(N)}var x,P,T,I,k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,b=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,S=/\s*([^:]+):\s*([^;]+);?/g,y=/\s+$/,w={};for($=$||{},W&&(T=W.getValidStyles(),I=W.getInvalidStyles()),P="\\\" \\' \\; \\: ; : \ufeff".split(" "),x=0;x<P.length;x++)w[P[x]]="\ufeff"+x,w["\ufeff"+x]=P[x];return{toHex:function(B){return B.replace(k,R)},parse:function(B){function D(se,ae,ue){var le,ve,ye,K;if((le=m[se+"-top"+ae])&&(ve=m[se+"-right"+ae])&&(ye=m[se+"-bottom"+ae])&&(K=m[se+"-left"+ae])){var ie=[le,ve,ye,K];for(x=ie.length-1;x--&&ie[x]===ie[x+1];);x>-1&&ue||(m[se+ae]=-1==x?ie[0]:ie.join(" "),delete m[se+"-top"+ae],delete m[se+"-right"+ae],delete m[se+"-bottom"+ae],delete m[se+"-left"+ae])}}function z(se){var ue,ae=m[se];if(ae){for(ue=(ae=ae.split(" ")).length;ue--;)if(ae[ue]!==ae[0])return!1;return m[se]=ae[0],!0}}function G(se){return Z=!0,w[se]}function M(se,ae){return Z&&(se=se.replace(/\uFEFF[0-9]/g,function(ue){return w[ue]})),ae||(se=se.replace(/\\([\'\";:])/g,"$1")),se}function A(se){return String.fromCharCode(parseInt(se.slice(1),16))}function C(se){return se.replace(/\\[0-9a-f]+/gi,A)}function g(se,ae,ue,le,ve,ye){if(ve=ve||ye)return"'"+(ve=M(ve)).replace(/\'/g,"\\'")+"'";if(ae=M(ae||ue||le),!$.allow_script_urls){var K=ae.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(K)||!$.allow_svg_data_urls&&/^data:image\/svg/i.test(K))return""}return J&&(ae=J.call(de,ae,"style")),"url('"+ae.replace(/\'/g,"\\'")+"')"}var O,U,H,Z,m={},J=$.url_converter,de=$.url_converter_scope||this;if(B){for(B=(B=B.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,G).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(se){return se.replace(/[;:]/g,G)});O=S.exec(B);)if(S.lastIndex=O.index+O[0].length,U=O[1].replace(y,"").toLowerCase(),H=O[2].replace(y,""),U&&H){if(U=C(U),H=C(H),-1!==U.indexOf("\ufeff")||-1!==U.indexOf('"')||!$.allow_script_urls&&("behavior"==U||/expression\s*\(|\/\*|\*\//.test(H)))continue;"font-weight"===U&&"700"===H?H="bold":"color"!==U&&"background-color"!==U||(H=H.toLowerCase()),H=(H=H.replace(k,R)).replace(b,g),m[U]=Z?M(H,!0):H}D("border","",!0),D("border","-width"),D("border","-color"),D("border","-style"),D("padding",""),D("margin",""),function N(se,ae,ue,le){z(ae)&&z(ue)&&z(le)&&(m[se]=m[ae]+" "+m[ue]+" "+m[le],delete m[ae],delete m[ue],delete m[le])}("border","border-width","border-style","border-color"),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:function(B,D){function z(C){var g,m,O,U;if(g=T[C])for(m=0,O=g.length;m<O;m++)(U=B[C=g[m]])&&(G+=(G.length>0?" ":"")+C+": "+U+";")}var M,A,C,m,G="";if(D&&T)z("*"),z(D);else for(M in B)!(A=B[M])||I&&(C=M,m=void 0,(m=I["*"])&&m[C]||(m=I[D])&&m[C])||(G+=(G.length>0?" ":"")+M+": "+A+";");return G}}}}),He(fe,[],function(){return function($,W){function R(S,y,x,w){var P,T;if(S){if(!w&&S[y])return S[y];if(S!=W){if(P=S[x])return P;for(T=S.parentNode;T&&T!=W;T=T.parentNode)if(P=T[x])return P}}}var b=$;this.current=function(){return b},this.next=function(S){return b=R(b,"firstChild","nextSibling",S)},this.prev=function(S){return b=R(b,"lastChild","previousSibling",S)},this.prev2=function(S){return b=function k(S,y,x,w){var P,T,I;if(S){if(P=S[x],W&&P===W)return;if(P){if(!w)for(I=P[y];I;I=I[y])if(!I[y])return I;return P}if((T=S.parentNode)&&T!==W)return T}}(b,"lastChild","previousSibling",S)}}}),He(De,[Fe],function($){function W(R){function k(){return K.createDocumentFragment()}function b(ee,me){O(Me,ee,me)}function S(ee,me){O(ot,ee,me)}function y(ee){b(ee.parentNode,ne(ee))}function P(ee){S(ee.parentNode,ne(ee)+1)}function N(){return U(he)}function C(ee,me){var ke;if(3==ee.nodeType||me<0)return ee;for(ke=ee.firstChild;ke&&me>0;)--me,ke=ke.nextSibling;return ke||ee}function m(ee,me,ke,qe){var Qe,Be,mt,ct,ft,yt;if(ee==ke)return me==qe?0:me<qe?-1:1;for(Qe=ke;Qe&&Qe.parentNode!=ee;)Qe=Qe.parentNode;if(Qe){for(Be=0,mt=ee.firstChild;mt!=Qe&&Be<me;)Be++,mt=mt.nextSibling;return me<=Be?-1:1}for(Qe=ee;Qe&&Qe.parentNode!=ke;)Qe=Qe.parentNode;if(Qe){for(Be=0,mt=ke.firstChild;mt!=Qe&&Be<qe;)Be++,mt=mt.nextSibling;return Be<qe?-1:1}for(ct=R.findCommonAncestor(ee,ke),ft=ee;ft&&ft.parentNode!=ct;)ft=ft.parentNode;for(ft||(ft=ct),yt=ke;yt&&yt.parentNode!=ct;)yt=yt.parentNode;if(yt||(yt=ct),ft==yt)return 0;for(mt=ct.firstChild;mt;){if(mt==ft)return-1;if(mt==yt)return 1;mt=mt.nextSibling}}function O(ee,me,ke){var qe,Qe;for(ee?(ye[Ot]=me,ye[At]=ke):(ye[Jt]=me,ye[zt]=ke),qe=ye[Jt];qe.parentNode;)qe=qe.parentNode;for(Qe=ye[Ot];Qe.parentNode;)Qe=Qe.parentNode;Qe==qe?m(ye[Ot],ye[At],ye[Jt],ye[zt])>0&&ye.collapse(ee):ye.collapse(ee),ye.collapsed=function g(){return ye[Ot]==ye[Jt]&&ye[At]==ye[zt]}(),ye.commonAncestorContainer=R.findCommonAncestor(ye[Ot],ye[Jt])}function U(ee){var me,Qe,Be,mt,ct,ft,yt,ke=0,qe=0;if(ye[Ot]==ye[Jt])return function H(ee){var me,qe,Qe,Be,mt,ct,ft,yt;if(ee!=xe&&(me=k()),ye[At]==ye[zt])return me;if(3==ye[Ot].nodeType)return qe=ye[Ot].nodeValue.substring(ye[At],ye[zt]),ee!=he&&(Qe=ye[Ot],yt=ye[zt]-ye[At],0===(ft=ye[At])&&yt>=Qe.nodeValue.length-1?Qe.parentNode.removeChild(Qe):Qe.deleteData(ft,yt),ye.collapse(Me)),ee==xe?void 0:(qe.length>0&&me.appendChild(K.createTextNode(qe)),me);for(Qe=C(ye[Ot],ye[At]),Be=ye[zt]-ye[At];Qe&&Be>0;)mt=Qe.nextSibling,ct=le(Qe,ee),me&&me.appendChild(ct),--Be,Qe=mt;return ee!=he&&ye.collapse(Me),me}(ee);for(Qe=(me=ye[Jt]).parentNode;Qe;me=Qe,Qe=Qe.parentNode){if(Qe==ye[Ot])return Z(me,ee);++ke}for(Qe=(me=ye[Ot]).parentNode;Qe;me=Qe,Qe=Qe.parentNode){if(Qe==ye[Jt])return J(me,ee);++qe}for(Be=qe-ke,mt=ye[Ot];Be>0;)mt=mt.parentNode,Be--;for(ct=ye[Jt];Be<0;)ct=ct.parentNode,Be++;for(ft=mt.parentNode,yt=ct.parentNode;ft!=yt;ft=ft.parentNode,yt=yt.parentNode)mt=ft,ct=yt;return function de(ee,me,ke){var qe,Qe,Be,ct,ft,yt;for(ke!=xe&&(Qe=k()),qe=ae(ee,ke),Qe&&Qe.appendChild(qe),Be=ne(ee),ct=ne(me)-++Be,ft=ee.nextSibling;ct>0;)yt=ft.nextSibling,qe=le(ft,ke),Qe&&Qe.appendChild(qe),ft=yt,--ct;return qe=se(me,ke),Qe&&Qe.appendChild(qe),ke!=he&&(ye.setStartAfter(ee),ye.collapse(Me)),Qe}(mt,ct,ee)}function Z(ee,me){var ke,qe,Be,mt,ct;if(me!=xe&&(ke=k()),qe=se(ee,me),ke&&ke.appendChild(qe),(Be=ne(ee)-ye[At])<=0)return me!=he&&(ye.setEndBefore(ee),ye.collapse(ot)),ke;for(qe=ee.previousSibling;Be>0;)mt=qe.previousSibling,ct=le(qe,me),ke&&ke.insertBefore(ct,ke.firstChild),--Be,qe=mt;return me!=he&&(ye.setEndBefore(ee),ye.collapse(ot)),ke}function J(ee,me){var ke,qe,Qe,Be,mt,ct;for(me!=xe&&(ke=k()),Qe=ae(ee,me),ke&&ke.appendChild(Qe),qe=ne(ee),++qe,Be=ye[zt]-qe,Qe=ee.nextSibling;Qe&&Be>0;)mt=Qe.nextSibling,ct=le(Qe,me),ke&&ke.appendChild(ct),--Be,Qe=mt;return me!=he&&(ye.setStartAfter(ee),ye.collapse(Me)),ke}function se(ee,me){var qe,Qe,Be,mt,ct,ke=C(ye[Jt],ye[zt]-1),ft=ke!=ye[Jt];if(ke==ee)return ue(ke,ft,ot,me);for(Qe=ue(qe=ke.parentNode,ot,ot,me);qe;){for(;ke;)Be=ke.previousSibling,mt=ue(ke,ft,ot,me),me!=xe&&Qe.insertBefore(mt,Qe.firstChild),ft=Me,ke=Be;if(qe==ee)return Qe;ke=qe.previousSibling,ct=ue(qe=qe.parentNode,ot,ot,me),me!=xe&&ct.appendChild(Qe),Qe=ct}}function ae(ee,me){var Qe,Be,mt,ct,ft,ke=C(ye[Ot],ye[At]),qe=ke!=ye[Ot];if(ke==ee)return ue(ke,qe,Me,me);for(Be=ue(Qe=ke.parentNode,ot,Me,me);Qe;){for(;ke;)mt=ke.nextSibling,ct=ue(ke,qe,Me,me),me!=xe&&Be.appendChild(ct),qe=Me,ke=mt;if(Qe==ee)return Be;ke=Qe.nextSibling,ft=ue(Qe=Qe.parentNode,ot,Me,me),me!=xe&&ft.appendChild(Be),Be=ft}}function ue(ee,me,ke,qe){var Qe,Be,mt,ct,ft;return me?le(ee,qe):3==ee.nodeType?(Qe=ee.nodeValue,ke?(Be=Qe.substring(ct=ye[At]),mt=Qe.substring(0,ct)):(Be=Qe.substring(0,ct=ye[zt]),mt=Qe.substring(ct)),qe!=he&&(ee.nodeValue=mt),qe==xe?void 0:((ft=R.clone(ee,ot)).nodeValue=Be,ft)):qe!=xe?R.clone(ee,ot):void 0}function le(ee,me){return me!=xe?me==he?R.clone(ee,Me):ee:void ee.parentNode.removeChild(ee)}var ye=this,K=R.doc,he=1,xe=2,Me=!0,ot=!1,At="startOffset",Ot="startContainer",Jt="endContainer",zt="endOffset",Se=$.extend,ne=R.nodeIndex;return Se(ye,{startContainer:K,startOffset:0,endContainer:K,endOffset:0,collapsed:Me,commonAncestorContainer:K,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:b,setEnd:S,setStartBefore:y,setStartAfter:function x(ee){b(ee.parentNode,ne(ee)+1)},setEndBefore:function w(ee){S(ee.parentNode,ne(ee))},setEndAfter:P,collapse:function T(ee){ee?(ye[Jt]=ye[Ot],ye[zt]=ye[At]):(ye[Ot]=ye[Jt],ye[At]=ye[zt]),ye.collapsed=Me},selectNode:function I(ee){y(ee),P(ee)},selectNodeContents:function L(ee){b(ee,0),S(ee,1===ee.nodeType?ee.childNodes.length:ee.nodeValue.length)},compareBoundaryPoints:function B(ee,me){var ke=ye[Ot],qe=ye[At],Qe=ye[Jt],Be=ye[zt],mt=me.startContainer,ct=me.startOffset,ft=me.endContainer,yt=me.endOffset;return 0===ee?m(ke,qe,mt,ct):1===ee?m(Qe,Be,mt,ct):2===ee?m(Qe,Be,ft,yt):3===ee?m(ke,qe,ft,yt):void 0},deleteContents:function D(){U(xe)},extractContents:function z(){return U(0)},cloneContents:N,insertNode:function G(ee){var qe,Qe,me=this[Ot],ke=this[At];3!==me.nodeType&&4!==me.nodeType||!me.nodeValue?(me.childNodes.length>0&&(Qe=me.childNodes[ke]),Qe?me.insertBefore(ee,Qe):3==me.nodeType?R.insertAfter(ee,me):me.appendChild(ee)):ke?ke>=me.nodeValue.length?R.insertAfter(ee,me):(qe=me.splitText(ke),me.parentNode.insertBefore(ee,qe)):me.parentNode.insertBefore(ee,me)},surroundContents:function M(ee){var me=ye.extractContents();ye.insertNode(ee),ee.appendChild(me),ye.selectNode(ee)},cloneRange:function A(){return Se(new W(R),{startContainer:ye[Ot],startOffset:ye[At],endContainer:ye[Jt],endOffset:ye[zt],collapsed:ye.collapsed,commonAncestorContainer:ye.commonAncestorContainer})},toStringIE:function ve(){return R.create("body",null,N()).outerText}}),ye}return W.prototype.toString=function(){return this.toStringIE()},W}),He(Ee,[Fe],function($){function R(B,D){var z,N,G,M={};if(B){for(B=B.split(","),D=D||10,z=0;z<B.length;z+=2)N=String.fromCharCode(parseInt(B[z],D)),S[N]||(M[N]=G="&"+B[z+1]+";",M[G]=N);return M}}var b,S,y,k=$.makeMap,x=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P=/[<>&\"\']/g,T=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,I={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};S={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},y={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},b=R("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var L={encodeRaw:function(B,D){return B.replace(D?x:w,function(z){return S[z]||z})},encodeAllRaw:function(B){return(""+B).replace(P,function(D){return S[D]||D})},encodeNumeric:function(B,D){return B.replace(D?x:w,function(z){return z.length>1?"&#"+(1024*(z.charCodeAt(0)-55296)+(z.charCodeAt(1)-56320)+65536)+";":S[z]||"&#"+z.charCodeAt(0)+";"})},encodeNamed:function(B,D,z){return z=z||b,B.replace(D?x:w,function(N){return S[N]||z[N]||N})},getEncodeFunc:function(B,D){return D=R(D)||b,(B=k(B.replace(/\+/g,","))).named&&B.numeric?function z(G,M){return G.replace(M?x:w,function(A){return S[A]||D[A]||"&#"+A.charCodeAt(0)+";"||A})}:B.named?D?function N(G,M){return L.encodeNamed(G,M,D)}:L.encodeNamed:B.numeric?L.encodeNumeric:L.encodeRaw},decode:function(B){return B.replace(T,function(D,z){return z?(z="x"===z.charAt(0).toLowerCase()?parseInt(z.substr(1),16):parseInt(z,10))>65535?(z-=65536,String.fromCharCode(55296+(z>>10),56320+(1023&z))):I[z]||String.fromCharCode(z):y[D]||b[D]||function W(B){var D;return(D=document.createElement("div")).innerHTML=B,D.textContent||D.innerText||B}(D)})}};return L}),He(ze,[Fe,Ze],function($,W){return function(R,k){function b(P){R.getElementsByTagName("head")[0].appendChild(P)}var w,y=0,x={};w=(k=k||{}).maxLoadTime||5e3,this.load=function S(P,T,I){function L(){for(var m=g.passed,O=m.length;O--;)m[O]();g.status=2,g.passed=[],g.failed=[]}function B(){for(var m=g.failed,O=m.length;O--;)m[O]();g.status=3,g.passed=[],g.failed=[]}function z(m,O){m()||((new Date).getTime()-C<w?W.setTimeout(O):B())}function N(){z(function(){for(var O,H,m=R.styleSheets,U=m.length;U--;)if((H=(O=m[U]).ownerNode?O.ownerNode:O.owningElement)&&H.id===M.id)return L(),!0},N)}var M,A,C,g;if(P=$._addCacheSuffix(P),x[P]?g=x[P]:x[P]=g={passed:[],failed:[]},T&&g.passed.push(T),I&&g.failed.push(I),1!=g.status){if(2==g.status)return void L();if(3==g.status)return void B();if(g.status=1,(M=R.createElement("link")).rel="stylesheet",M.type="text/css",M.id="u"+y++,M.async=!1,M.defer=!1,C=(new Date).getTime(),"onload"in M&&!function D(){var m=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(m&&m[1]<536)}())M.onload=N,M.onerror=B;else{if(navigator.userAgent.indexOf("Firefox")>0)return(A=R.createElement("style")).textContent='@import "'+P+'"',function G(){z(function(){try{var m=A.sheet.cssRules;return L(),!!m}catch{}},G)}(),void b(A);N()}b(M),M.href=P}}}}),He(Ve,[Re,rt,Ie,Dt,fe,De,Ee,St,Fe,ze],function($,W,R,k,b,S,y,x,w,P){function I(g,m){var O=m.attr("style");(O=g.serializeStyle(g.parseStyle(O),m[0].nodeName))||(O=null),m.attr("data-mce-style",O)}function L(g,m){var U,H,O=0;if(g)for(U=g.nodeType,g=g.previousSibling;g;g=g.previousSibling)H=g.nodeType,(!m||3!=H||H!=U&&g.nodeValue.length)&&(O++,U=H);return O}function B(g,m){var U,O=this;O.doc=g,O.win=window,O.files={},O.counter=0,O.stdMode=!M||g.documentMode>=8,O.boxModel=!M||"CSS1Compat"==g.compatMode||O.stdMode,O.styleSheetLoader=new P(g),O.boundEvents=[],O.settings=m=m||{},O.schema=m.schema,O.styles=new R({url_converter:m.url_converter,url_converter_scope:m.url_converter_scope},m.schema),O.fixDoc(g),O.events=m.ownEvents?new k(m.proxy):k.Event,O.attrHooks=function T(g,m){var O={},U=m.keep_values;return O={style:{set:function(Z,J){return null!==J&&"object"==typeof J?void Z.css(J):(U&&Z.attr("data-mce-style",J),void Z.attr("style",J))},get:function(Z){var J=Z.attr("data-mce-style")||Z.attr("style");return g.serializeStyle(g.parseStyle(J),Z[0].nodeName)}}},U&&(O.href=O.src={set:function(Z,J,de){m.url_converter&&(J=m.url_converter.call(m.url_converter_scope||g,J,de,Z[0])),Z.attr("data-mce-"+de,J).attr(de,J)},get:function(Z,J){return Z.attr("data-mce-"+J)||Z.attr(J)}}),O}(O,m),U=m.schema?m.schema.getBlockElements():{},O.$=W.overrideDefaults(function(){return{context:g,element:O.getRoot()}}),O.isBlock=function(H){if(!H)return!1;var Z=H.nodeType;return Z?!(1!==Z||!U[H.nodeName]):!!U[H]}}var D=w.each,z=w.is,N=w.grep,G=w.trim,M=x.ie,A=/^([a-z0-9],?)+$/i,C=/^[ \t\r\n]*$/;return B.prototype={$$:function(g){return"string"==typeof g&&(g=this.get(g)),this.$(g)},root:null,fixDoc:function(g){var O,m=this.settings;if(M&&m.schema)for(O in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(U){g.createElement(U)}),m.schema.getCustomElements())g.createElement(O)},clone:function(g,m){var U,O=this;return!M||1!==g.nodeType||m?g.cloneNode(m):m?U.firstChild:(U=O.doc.createElement(g.nodeName),D(O.getAttribs(g),function(Z){O.setAttrib(U,Z.nodeName,O.getAttrib(g,Z.nodeName))}),U)},getRoot:function(){return this.settings.root_element||this.doc.body},getViewPort:function(g){var m,O;return m=(g=g||this.win).document,O=this.boxModel?m.documentElement:m.body,{x:g.pageXOffset||O.scrollLeft,y:g.pageYOffset||O.scrollTop,w:g.innerWidth||O.clientWidth,h:g.innerHeight||O.clientHeight}},getRect:function(g){var O,U,m=this;return g=m.get(g),O=m.getPos(g),U=m.getSize(g),{x:O.x,y:O.y,w:U.w,h:U.h}},getSize:function(g){var O,U,m=this;return g=m.get(g),O=m.getStyle(g,"width"),U=m.getStyle(g,"height"),-1===O.indexOf("px")&&(O=0),-1===U.indexOf("px")&&(U=0),{w:parseInt(O,10)||g.offsetWidth||g.clientWidth,h:parseInt(U,10)||g.offsetHeight||g.clientHeight}},getParent:function(g,m,O){return this.getParents(g,m,O,!1)},getParents:function(g,m,O,U){var Z,H=this,J=[];for(g=H.get(g),U=U===Dn,O=O||("BODY"!=H.getRoot().nodeName?H.getRoot().parentNode:null),z(m,"string")&&(Z=m,m="*"===m?function(de){return 1==de.nodeType}:function(de){return H.is(de,Z)});g&&g!=O&&g.nodeType&&9!==g.nodeType;){if(!m||m(g)){if(!U)return g;J.push(g)}g=g.parentNode}return U?J:null},get:function(g){var m;return g&&this.doc&&"string"==typeof g&&(m=g,(g=this.doc.getElementById(g))&&g.id!==m)?this.doc.getElementsByName(m)[1]:g},getNext:function(g,m){return this._findSib(g,m,"nextSibling")},getPrev:function(g,m){return this._findSib(g,m,"previousSibling")},select:function(g,m){var O=this;return $(g,O.get(m)||O.settings.root_element||O.doc,[])},is:function(g,m){var O;if(g.length===Dn){if("*"===m)return 1==g.nodeType;if(A.test(m)){for(m=m.toLowerCase().split(/,/),g=g.nodeName.toLowerCase(),O=m.length-1;O>=0;O--)if(m[O]==g)return!0;return!1}}if(g.nodeType&&1!=g.nodeType)return!1;var U=g.nodeType?[g]:g;return $(m,U[0].ownerDocument||U[0],null,U).length>0},add:function(g,m,O,U,H){var Z=this;return this.run(g,function(J){var de;return de=z(m,"string")?Z.doc.createElement(m):m,Z.setAttribs(de,O),U&&(U.nodeType?de.appendChild(U):Z.setHTML(de,U)),H?de:J.appendChild(de)})},create:function(g,m,O){return this.add(this.doc.createElement(g),g,m,O,1)},createHTML:function(g,m,O){var H,U="";for(H in U+="<"+g,m)m.hasOwnProperty(H)&&null!==m[H]&&typeof m[H]<"u"&&(U+=" "+H+'="'+this.encode(m[H])+'"');return typeof O<"u"?U+">"+O+"</"+g+">":U+" />"},createFragment:function(g){var m,O,H,U=this.doc;for(H=U.createElement("div"),m=U.createDocumentFragment(),g&&(H.innerHTML=g);O=H.firstChild;)m.appendChild(O);return m},remove:function(g,m){return g=this.$$(g),m?g.each(function(){for(var O;O=this.firstChild;)3==O.nodeType&&0===O.data.length?this.removeChild(O):this.parentNode.insertBefore(O,this)}).remove():g.remove(),g.length>1?g.toArray():g[0]},setStyle:function(g,m,O){g=this.$$(g).css(m,O),this.settings.update_styles&&I(this,g)},getStyle:function(g,m,O){return g=this.$$(g),O?g.css(m):("float"==(m=m.replace(/-(\D)/g,function(U,H){return H.toUpperCase()}))&&(m=x.ie&&x.ie<12?"styleFloat":"cssFloat"),g[0]&&g[0].style?g[0].style[m]:Dn)},setStyles:function(g,m){g=this.$$(g).css(m),this.settings.update_styles&&I(this,g)},removeAllAttribs:function(g){return this.run(g,function(m){var O,U=m.attributes;for(O=U.length-1;O>=0;O--)m.removeAttributeNode(U.item(O))})},setAttrib:function(g,m,O){var H,Z,U=this,J=U.settings;""===O&&(O=null),H=(g=U.$$(g)).attr(m),g.length&&((Z=U.attrHooks[m])&&Z.set?Z.set(g,O,m):g.attr(m,O),H!=O&&J.onSetAttrib&&J.onSetAttrib({attrElm:g,attrName:m,attrValue:O}))},setAttribs:function(g,m){var O=this;O.$$(g).each(function(U,H){D(m,function(Z,J){O.setAttrib(H,J,Z)})})},getAttrib:function(g,m,O){var H,Z;return(g=this.$$(g)).length&&(Z=(H=this.attrHooks[m])&&H.get?H.get(g,m):g.attr(m)),typeof Z>"u"&&(Z=O||""),Z},getPos:function(g,m){var Z,se,O=this,U=0,H=0,J=O.doc,de=J.body;if(m=m||de,g=O.get(g)){if(m===de&&g.getBoundingClientRect&&"static"===W(de).css("position"))return{x:U=(se=g.getBoundingClientRect()).left+(J.documentElement.scrollLeft||de.scrollLeft)-(m=O.boxModel?J.documentElement:de).clientLeft,y:H=se.top+(J.documentElement.scrollTop||de.scrollTop)-m.clientTop};for(Z=g;Z&&Z!=m&&Z.nodeType;)U+=Z.offsetLeft||0,H+=Z.offsetTop||0,Z=Z.offsetParent;for(Z=g.parentNode;Z&&Z!=m&&Z.nodeType;)U-=Z.scrollLeft||0,H-=Z.scrollTop||0,Z=Z.parentNode}return{x:U,y:H}},parseStyle:function(g){return this.styles.parse(g)},serializeStyle:function(g,m){return this.styles.serialize(g,m)},addStyle:function(g){var U,H,O=this.doc;if(this!==B.DOM&&O===document){var Z=B.DOM.addedStyles;if((Z=Z||[])[g])return;Z[g]=!0,B.DOM.addedStyles=Z}(H=O.getElementById("mceDefaultStyles"))||((H=O.createElement("style")).id="mceDefaultStyles",H.type="text/css",(U=O.getElementsByTagName("head")[0]).firstChild?U.insertBefore(H,U.firstChild):U.appendChild(H)),H.styleSheet?H.styleSheet.cssText+=g:H.appendChild(O.createTextNode(g))},loadCSS:function(g){var U,m=this,O=m.doc;return m!==B.DOM&&O===document?void B.DOM.loadCSS(g):(g||(g=""),U=O.getElementsByTagName("head")[0],void D(g.split(","),function(H){var Z;H=w._addCacheSuffix(H),m.files[H]||(m.files[H]=!0,Z=m.create("link",{rel:"stylesheet",href:H}),M&&O.documentMode&&O.recalc&&(Z.onload=function(){O.recalc&&O.recalc(),Z.onload=null}),U.appendChild(Z))}))},addClass:function(g,m){this.$$(g).addClass(m)},removeClass:function(g,m){this.toggleClass(g,m,!1)},hasClass:function(g,m){return this.$$(g).hasClass(m)},toggleClass:function(g,m,O){this.$$(g).toggleClass(m,O).each(function(){""===this.className&&W(this).attr("class",null)})},show:function(g){this.$$(g).show()},hide:function(g){this.$$(g).hide()},isHidden:function(g){return"none"==this.$$(g).css("display")},uniqueId:function(g){return(g||"mce_")+this.counter++},setHTML:function(g,m){g=this.$$(g),M?g.each(function(O,U){if(!1!==U.canHaveHTML){for(;U.firstChild;)U.removeChild(U.firstChild);try{U.innerHTML="<br>"+m,U.removeChild(U.firstChild)}catch{W("<div></div>").html("<br>"+m).contents().slice(1).appendTo(U)}return m}}):g.html(m)},getOuterHTML:function(g){return 1==(g=this.get(g)).nodeType&&"outerHTML"in g?g.outerHTML:W("<div></div>").append(W(g).clone()).html()},setOuterHTML:function(g,m){var O=this;O.$$(g).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=m)}catch{}O.remove(W(this).html(m),!0)})},decode:y.decode,encode:y.encodeAllRaw,insertAfter:function(g,m){return m=this.get(m),this.run(g,function(O){var U,H;return U=m.parentNode,(H=m.nextSibling)?U.insertBefore(O,H):U.appendChild(O),O})},replace:function(g,m,O){return this.run(m,function(H){return z(H,"array")&&(g=g.cloneNode(!0)),O&&D(N(H.childNodes),function(Z){g.appendChild(Z)}),H.parentNode.replaceChild(g,H)})},rename:function(g,m){var U,O=this;return g.nodeName!=m.toUpperCase()&&(U=O.create(m),D(O.getAttribs(g),function(H){O.setAttrib(U,H.nodeName,O.getAttrib(g,H.nodeName))}),O.replace(U,g,1)),U||g},findCommonAncestor:function(g,m){for(var U,O=g;O;){for(U=m;U&&O!=U;)U=U.parentNode;if(O==U)break;O=O.parentNode}return!O&&g.ownerDocument?g.ownerDocument.documentElement:O},toHex:function(g){return this.styles.toHex(w.trim(g))},run:function(g,m,O){var H,U=this;return"string"==typeof g&&(g=U.get(g)),!!g&&(O=O||this,g.nodeType||!g.length&&0!==g.length?m.call(O,g):(H=[],D(g,function(Z,J){Z&&("string"==typeof Z&&(Z=U.get(Z)),H.push(m.call(O,Z,J)))}),H))},getAttribs:function(g){var m;return(g=this.get(g))?M?(m=[],"OBJECT"==g.nodeName?g.attributes:("OPTION"===g.nodeName&&this.getAttrib(g,"selected")&&m.push({specified:1,nodeName:"selected"}),g.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(U){m.push({specified:1,nodeName:U})}),m)):g.attributes:[]},isEmpty:function(g,m){var U,H,Z,J,de,se,O=this,ae=0;if(g=g.firstChild){de=new b(g,g.parentNode),m=m||(O.schema?O.schema.getNonEmptyElements():null),J=O.schema?O.schema.getWhiteSpaceElements():{};do{if(1===(Z=g.nodeType)){var ue=g.getAttribute("data-mce-bogus");if(ue){g=de.next("all"===ue);continue}if(se=g.nodeName.toLowerCase(),m&&m[se]){if("br"===se){ae++,g=de.next();continue}return!1}for(U=(H=O.getAttribs(g)).length;U--;)if("name"===(se=H[U].nodeName)||"data-mce-bookmark"===se)return!1}if(8==Z||3===Z&&!C.test(g.nodeValue)||3===Z&&g.parentNode&&J[g.parentNode.nodeName]&&C.test(g.nodeValue))return!1;g=de.next()}while(g)}return ae<=1},createRng:function(){var g=this.doc;return g.createRange?g.createRange():new S(this)},nodeIndex:L,split:function(g,m,O){function U(ae){var le,ve=ae.childNodes,ye=ae.nodeType;if(1!=ye||"bookmark"!=ae.getAttribute("data-mce-type")){for(le=ve.length-1;le>=0;le--)U(ve[le]);if(9!=ye){if(3==ye&&ae.nodeValue.length>0){var K=G(ae.nodeValue).length;if(!H.isBlock(ae.parentNode)||K>0||0===K&&function ue(ie){return ie.previousSibling&&"SPAN"==ie.previousSibling.nodeName&&ie.nextSibling&&"SPAN"==ie.nextSibling.nodeName}(ae))return}else if(1==ye&&(1==(ve=ae.childNodes).length&&ve[0]&&1==ve[0].nodeType&&"bookmark"==ve[0].getAttribute("data-mce-type")&&ae.parentNode.insertBefore(ve[0],ae),ve.length||/^(br|hr|input|img)$/i.test(ae.nodeName)))return;H.remove(ae)}return ae}}var J,de,se,H=this,Z=H.createRng();if(g&&m)return Z.setStart(g.parentNode,H.nodeIndex(g)),Z.setEnd(m.parentNode,H.nodeIndex(m)),J=Z.extractContents(),(Z=H.createRng()).setStart(m.parentNode,H.nodeIndex(m)+1),Z.setEnd(g.parentNode,H.nodeIndex(g)+1),de=Z.extractContents(),(se=g.parentNode).insertBefore(U(J),g),se.insertBefore(O||m,g),se.insertBefore(U(de),g),H.remove(g),O||m},bind:function(g,m,O,U){var H=this;if(w.isArray(g)){for(var Z=g.length;Z--;)g[Z]=H.bind(g[Z],m,O,U);return g}return!H.settings.collect||g!==H.doc&&g!==H.win||H.boundEvents.push([g,m,O,U]),H.events.bind(g,m,O,U||H)},unbind:function(g,m,O){var H,U=this;if(w.isArray(g)){for(H=g.length;H--;)g[H]=U.unbind(g[H],m,O);return g}if(U.boundEvents&&(g===U.doc||g===U.win))for(H=U.boundEvents.length;H--;){var Z=U.boundEvents[H];g!=Z[0]||m&&m!=Z[1]||O&&O!=Z[2]||this.events.unbind(Z[0],Z[1],Z[2])}return this.events.unbind(g,m,O)},fire:function(g,m,O){return this.events.fire(g,m,O)},getContentEditable:function(g){var m;return g&&1==g.nodeType?(m=g.getAttribute("data-mce-contenteditable"))&&"inherit"!==m?m:"inherit"!==g.contentEditable?g.contentEditable:null:null},getContentEditableParent:function(g){for(var m=this.getRoot(),O=null;g&&g!==m&&null===(O=this.getContentEditable(g));g=g.parentNode);return O},destroy:function(){var g=this;if(g.boundEvents){for(var m=g.boundEvents.length;m--;){var O=g.boundEvents[m];this.events.unbind(O[0],O[1],O[2])}g.boundEvents=null}$.setDocument&&$.setDocument(),g.win=g.doc=g.root=g.events=g.frag=null},isChildOf:function(g,m){for(;g;){if(m===g)return!0;g=g.parentNode}return!1},dumpRng:function(g){return"startContainer: "+g.startContainer.nodeName+", startOffset: "+g.startOffset+", endContainer: "+g.endContainer.nodeName+", endOffset: "+g.endOffset},_findSib:function(g,m,O){var U=this,H=m;if(g)for("string"==typeof H&&(H=function(Z){return U.is(Z,m)}),g=g[O];g;g=g[O])if(H(g))return g;return null}},B.DOM=new B(document),B.nodeIndex=L,B}),He(Je,[Ve,Fe],function($,W){function R(){var G,L={},B=[],D={},z=[],N=0;this.isDone=function(M){return 2==L[M]},this.markDone=function(M){L[M]=2},this.add=this.load=function(M,A,C,g){L[M]==G&&(B.push(M),L[M]=0),A&&(D[M]||(D[M]=[]),D[M].push({success:A,failure:g,scope:C||this}))},this.remove=function(M){delete L[M],delete D[M]},this.loadQueue=function(M,A,C){this.loadScripts(B,M,A,C)},this.loadScripts=function(M,A,C,g){function m(H,Z){b(D[Z],function(J){y(J[H])&&J[H].call(J.scope)}),D[Z]=G}var O,U=[];z.push({success:A,failure:g,scope:C||this}),(O=function(){var H=S(M);M.length=0,b(H,function(Z){return 2===L[Z]?void m("success",Z):3===L[Z]?void m("failure",Z):void(1!==L[Z]&&(L[Z]=1,N++,function x(M,A,C){function g(){O.remove(H),U&&(U.onreadystatechange=U.onload=U=null),A()}var U,H,O=k;H=O.uniqueId(),(U=document.createElement("script")).id=H,U.type="text/javascript",U.src=W._addCacheSuffix(M),"onreadystatechange"in U?U.onreadystatechange=function(){/loaded|complete/.test(U.readyState)&&g()}:U.onload=g,U.onerror=function m(){y(C)?C():typeof console<"u"&&console.log&&console.log("Failed to load script: "+M)},(document.getElementsByTagName("head")[0]||document.body).appendChild(U)}(Z,function(){L[Z]=2,N--,m("success",Z),O()},function(){L[Z]=3,N--,U.push(Z),m("failure",Z),O()})))}),N||(b(z,function(Z){0===U.length?y(Z.success)&&Z.success.call(Z.scope):y(Z.failure)&&Z.failure.call(Z.scope,U)}),z.length=0)})()}}var k=$.DOM,b=W.each,S=W.grep,y=function(x){return"function"==typeof x};return R.ScriptLoader=new R,R}),He(Ue,[Je,Fe],function($,W){function R(){var b=this;b.items=[],b.urls={},b.lookup={}}var k=W.each;return R.prototype={get:function(b){return this.lookup[b]?this.lookup[b].instance:Dn},dependencies:function(b){var S;return this.lookup[b]&&(S=this.lookup[b].dependencies),S||[]},requireLangPack:function(b,S){var y=R.language;if(y&&!1!==R.languageLoad){if(S)if(-1!=(S=","+S+",").indexOf(","+y.substr(0,2)+","))y=y.substr(0,2);else if(-1==S.indexOf(","+y+","))return;$.ScriptLoader.add(this.urls[b]+"/langs/"+y+".js")}},add:function(b,S,y){return this.items.push(S),this.lookup[b]={instance:S,dependencies:y},S},remove:function(b){delete this.urls[b],delete this.lookup[b]},createUrl:function(b,S){return"object"==typeof S?S:{prefix:b.prefix,resource:S,suffix:b.suffix}},addComponents:function(b,S){var y=this.urls[b];k(S,function(x){$.ScriptLoader.add(y+"/"+x)})},load:function(b,S,y,x,w){function P(){var L=T.dependencies(b);k(L,function(B){var D=T.createUrl(S,B);T.load(D.resource,D,Dn,Dn)}),y&&y.call(x||$)}var T=this,I=S;T.urls[b]||("object"==typeof S&&(I=S.prefix+S.resource+S.suffix),0!==I.indexOf("/")&&-1==I.indexOf("://")&&(I=R.baseURL+"/"+I),T.urls[b]=I.substring(0,I.lastIndexOf("/")),T.lookup[b]?P():$.ScriptLoader.add(I,P,x,w))}},R.PluginManager=new R,R.ThemeManager=new R,R}),He(tt,[],function(){function $(w){return function(P){return!!P&&P.nodeType==w}}function W(w){return w=w.toLowerCase().split(" "),function(P){var T,I;if(P&&P.nodeType)for(I=P.nodeName.toLowerCase(),T=0;T<w.length;T++)if(I===w[T])return!0;return!1}}function y(w){return function(P){return!(!x(P)||P.contentEditable!==w&&P.getAttribute("data-mce-contenteditable")!==w)}}var x=$(1);return{isText:$(3),isElement:x,isComment:$(8),isBr:W("br"),isContentEditableTrue:y("true"),isContentEditableFalse:y("false"),matchNodeNames:W,hasPropValue:function k(w,P){return function(T){return x(T)&&T[w]===P}},hasAttributeValue:function b(w,P){return function(T){return x(T)&&T.getAttribute(w)===P}},matchStyleValues:function R(w,P){return P=P.toLowerCase().split(" "),function(T){var I;if(x(T))for(I=0;I<P.length;I++)if(getComputedStyle(T,null).getPropertyValue(w)===P[I])return!0;return!1}},isBogus:function S(w){return x(w)&&w.hasAttribute("data-mce-bogus")}}}),He(Kt,[],function(){return{isZwsp:function $(k){return"\ufeff"==k},ZWSP:"\ufeff",trim:function W(k){return k.replace(new RegExp("\ufeff","g"),"")}}}),He(re,[tt,Kt],function($,W){function R(A){return M(A)&&(A=A.parentNode),G(A)&&A.hasAttribute("data-mce-caret")}function k(A){return M(A)&&W.isZwsp(A.data)}function b(A){return R(A)||k(A)}function S(A){var C=A.parentNode;C&&C.removeChild(A)}function I(A){return A.firstChild!==A.lastChild||!$.isBr(A.firstChild)}function B(A){return M(A)&&A.data[0]==W.ZWSP}function D(A){return M(A)&&A.data[A.data.length-1]==W.ZWSP}var G=$.isElement,M=$.isText;return{isCaretContainer:b,isCaretContainerBlock:R,isCaretContainerInline:k,showCaretContainerBlock:function N(A){return A&&A.hasAttribute("data-mce-caret")?(function z(A){var C=A.getElementsByTagName("br"),g=C[C.length-1];$.isBogus(g)&&g.parentNode.removeChild(g)}(A),A.removeAttribute("data-mce-caret"),A.removeAttribute("data-mce-bogus"),A.removeAttribute("style"),A.removeAttribute("_moz_abspos"),A):null},insertInline:function w(A,C){var m,O,U;if(O=A.ownerDocument.createTextNode(W.ZWSP),U=A.parentNode,C){if(M(m=A.previousSibling)){if(b(m))return m;if(D(m))return m.splitText(m.data.length-1)}U.insertBefore(O,A)}else{if(M(m=A.nextSibling)){if(b(m))return m;if(B(m))return m.splitText(1),m}A.nextSibling?U.insertBefore(O,A.nextSibling):U.appendChild(O)}return O},insertBlock:function T(A,C,g){var O,U;return(O=C.ownerDocument.createElement(A)).setAttribute("data-mce-caret",g?"before":"after"),O.setAttribute("data-mce-bogus","all"),O.appendChild(function P(){var A=document.createElement("br");return A.setAttribute("data-mce-bogus","1"),A}()),U=C.parentNode,g?U.insertBefore(O,C):C.nextSibling?U.insertBefore(O,C.nextSibling):U.appendChild(O),O},hasContent:I,remove:function L(A){if(G(A)&&b(A)&&(I(A)?A.removeAttribute("data-mce-caret"):S(A)),M(A)){var C=W.trim(function y(A){try{return A.nodeValue}catch{return""}}(A));!function x(A,C){0===C.length?S(A):A.nodeValue=C}(A,C)}},startsWithCaretContainer:B,endsWithCaretContainer:D}}),He(Ke,[Fe,fe,tt,De,re],function($,W,R,k,b){function S(M){return z(M)||N(M)}function x(M,A,C){for(;M&&M!==A;){if(C(M))return M;M=M.parentNode}return null}function P(M){return"_mce_caret"===M.id}function T(M,A){return G(M)&&!1===function w(M,A,C){return null!==x(M,A,C)}(M,A,P)}function I(M){this.walk=function(A,C){function g(ie){var he;return 3===(he=ie[0]).nodeType&&he===H&&Z>=he.nodeValue.length&&ie.splice(0,1),he=ie[ie.length-1],0===de&&ie.length>0&&he===J&&3===he.nodeType&&ie.splice(ie.length-1,1),ie}function m(ie,he,xe){for(var Me=[];ie&&ie!=xe;ie=ie[he])Me.push(ie);return Me}function O(ie,he){do{if(ie.parentNode==he)return ie;ie=ie.parentNode}while(ie)}function U(ie,he,xe){var Me=xe?"nextSibling":"previousSibling";for(ve=(le=ie).parentNode;le&&le!=he;le=ve)ve=le.parentNode,(ye=m(le==ie?le:le[Me],Me)).length&&(xe||ye.reverse(),C(g(ye)))}var se,ae,ue,le,ve,ye,K,H=A.startContainer,Z=A.startOffset,J=A.endContainer,de=A.endOffset;if((K=M.select("td[data-mce-selected],th[data-mce-selected]")).length>0)D(K,function(ie){C([ie])});else{if(1==H.nodeType&&H.hasChildNodes()&&(H=H.childNodes[Z]),1==J.nodeType&&J.hasChildNodes()&&(J=function y(M,A){var C=M.childNodes;return--A>C.length-1?A=C.length-1:A<0&&(A=0),C[A]||M}(J,de)),H==J)return C(g([H]));for(se=M.findCommonAncestor(H,J),le=H;le;le=le.parentNode){if(le===J)return U(H,se,!0);if(le===se)break}for(le=J;le;le=le.parentNode){if(le===H)return U(J,se);if(le===se)break}ae=O(H,se)||H,ue=O(J,se)||J,U(H,ae,!0),(ye=m(ae==H?ae:ae.nextSibling,"nextSibling",ue==J?ue.nextSibling:ue)).length&&C(g(ye)),U(J,ue)}},this.split=function(A){function C(H,Z){return H.splitText(Z)}var g=A.startContainer,m=A.startOffset,O=A.endContainer,U=A.endOffset;return g==O&&3==g.nodeType?m>0&&m<g.nodeValue.length&&(g=(O=C(g,m)).previousSibling,U>m?(g=O=C(O,U-=m).previousSibling,U=O.nodeValue.length,m=0):U=0):(3==g.nodeType&&m>0&&m<g.nodeValue.length&&(g=C(g,m),m=0),3==O.nodeType&&U>0&&U<O.nodeValue.length&&(U=(O=C(O,U).previousSibling).nodeValue.length)),{startContainer:g,startOffset:m,endContainer:O,endOffset:U}},this.normalize=function(A){function C(O){function H(he,xe){for(var Me=new W(he,M.getParent(he.parentNode,M.isBlock)||le);he=Me[xe?"prev":"next"]();)if("BR"===he.nodeName)return!0}function de(he,xe){var Me,ot,At;if(At=M.getParent((xe=xe||se).parentNode,M.isBlock)||le,he&&"BR"==xe.nodeName&&ie&&M.isEmpty(At))return se=xe.parentNode,ae=M.nodeIndex(xe),void(g=!0);for(Me=new W(xe,At);ve=Me[he?"prev":"next"]();){if("false"===M.getContentEditableParent(ve)||T(ve,M.getRoot()))return;if(3===ve.nodeType&&ve.nodeValue.length>0)return se=ve,ae=he?ve.nodeValue.length:0,void(g=!0);if(M.isBlock(ve)||ye[ve.nodeName.toLowerCase()])return;ot=ve}m&&ot&&(se=ot,g=!0,ae=0)}var se,ae,ue,ve,ye,K,ie,he,le=M.getRoot();if(ae=A[(O?"start":"end")+"Offset"],ie=1==(se=A[(O?"start":"end")+"Container"]).nodeType&&ae===se.childNodes.length,ye=M.schema.getNonEmptyElements(),K=O,!G(se)){if(1==se.nodeType&&ae>se.childNodes.length-1&&(K=!1),9===se.nodeType&&(se=M.getRoot(),ae=0),se===le){if(K&&(ve=se.childNodes[ae>0?ae-1:0])&&(G(ve)||ye[ve.nodeName]||"TABLE"==ve.nodeName))return;if(se.hasChildNodes()){if(ae=Math.min(!K&&ae>0?ae-1:ae,se.childNodes.length-1),se=se.childNodes[ae],ae=0,!m&&se===le.lastChild&&"TABLE"===se.nodeName||function Z(he){for(;he&&he!=le;){if(N(he))return!0;he=he.parentNode}return!1}(se)||G(se))return;if(se.hasChildNodes()&&!/TABLE/.test(se.nodeName)){ve=se,ue=new W(se,le);do{if(N(ve)||G(ve)){g=!1;break}if(3===ve.nodeType&&ve.nodeValue.length>0){ae=K?0:ve.nodeValue.length,se=ve,g=!0;break}if(ye[ve.nodeName.toLowerCase()]&&(!(he=ve)||!/^(TD|TH|CAPTION)$/.test(he.nodeName))){ae=M.nodeIndex(ve),se=ve.parentNode,"IMG"!=ve.nodeName||K||ae++,g=!0;break}}while(ve=K?ue.next():ue.prev())}}}m&&(3===se.nodeType&&0===ae&&de(!0),1===se.nodeType&&((ve=se.childNodes[ae])||(ve=se.childNodes[ae-1]),!ve||"BR"!==ve.nodeName||function J(he,xe){return he.previousSibling&&he.previousSibling.nodeName==xe}(ve,"A")||H(ve)||H(ve,!0)||de(!0,ve))),K&&!m&&3===se.nodeType&&ae===se.nodeValue.length&&de(!1),g&&A["set"+(O?"Start":"End")](se,ae)}}var g,m;return m=A.collapsed,C(!0),m||C(),g&&m&&A.collapse(!0),g}}var D=$.each,z=R.isContentEditableTrue,N=R.isContentEditableFalse,G=b.isCaretContainer;return I.compareRanges=function(M,A){if(M&&A){if(!M.item&&!M.duplicate)return M.startContainer==A.startContainer&&M.startOffset==A.startOffset;if(M.item&&A.item&&M.item(0)===A.item(0)||M.isEqual&&A.isEqual&&A.isEqual(M))return!0}return!1},I.getCaretRangeFromPoint=function(M,A,C){var g,m;if(C.caretPositionFromPoint)m=C.caretPositionFromPoint(M,A),(g=C.createRange()).setStart(m.offsetNode,m.offset),g.collapse(!0);else if(C.caretRangeFromPoint)g=C.caretRangeFromPoint(M,A);else if(C.body.createTextRange){g=C.body.createTextRange();try{g.moveToPoint(M,A),g.collapse(!0)}catch{g=function L(M,A,C){var g,m,O;if(g=C.elementFromPoint(M,A),m=C.body.createTextRange(),g&&"HTML"!=g.tagName||(g=C.body),m.moveToElementText(g),(O=(O=$.toArray(m.getClientRects())).sort(function(U,H){return(U=Math.abs(Math.max(U.top-A,U.bottom-A)))-Math.abs(Math.max(H.top-A,H.bottom-A))})).length>0){A=(O[0].bottom+O[0].top)/2;try{return m.moveToPoint(M,A),m.collapse(!0),m}catch{}}return null}(M,A,C)}return function B(M,A){var C=M&&M.parentElement?M.parentElement():null;return N(x(C,A,S))?null:M}(g,C.body)}return g},I.getSelectedNode=function(M){var A=M.startContainer,C=M.startOffset;return A.hasChildNodes()&&M.endOffset==C+1?A.childNodes[C]:null},I.getNode=function(M,A){return 1==M.nodeType&&M.hasChildNodes()&&(A>=M.childNodes.length&&(A=M.childNodes.length-1),M=M.childNodes[A]),M},I}),He(Tt,[Ke,St,Ze],function($,W,R){return function(k){var S,y=[];"onselectionchange"in k.getDoc()||k.on("NodeChange Click MouseUp KeyUp Focus",function(x){var w,P;P={startContainer:(w=k.selection.getRng()).startContainer,startOffset:w.startOffset,endContainer:w.endContainer,endOffset:w.endOffset},"nodechange"!=x.type&&$.compareRanges(P,S)||k.fire("SelectionChange"),S=P}),k.on("contextmenu",function(){k.fire("SelectionChange")}),k.on("SelectionChange",function(){var x=k.selection.getStart(!0);!W.range&&k.selection.isCollapsed()||!function b(x){var w,P;if((P=k.$(x).parentsUntil(k.getBody()).add(x)).length===y.length){for(w=P.length;w>=0&&P[w]===y[w];w--);if(-1===w)return y=P,!0}return y=P,!1}(x)&&k.dom.isChildOf(x,k.getBody())&&k.nodeChanged({selectionChange:!0})}),k.on("MouseUp",function(x){x.isDefaultPrevented()||("IMG"==k.selection.getNode().nodeName?R.setEditorTimeout(k,function(){k.nodeChanged()}):k.nodeChanged())}),this.nodeChanged=function(x){var P,T,I,w=k.selection;k.initialized&&w&&!k.settings.disable_nodechange&&!k.readonly&&(I=k.getBody(),(P=w.getStart()||I).ownerDocument==k.getDoc()&&k.dom.isChildOf(P,I)||(P=I),"IMG"==P.nodeName&&w.isCollapsed()&&(P=P.parentNode),T=[],k.dom.getParent(P,function(L){return L===I||void T.push(L)}),(x=x||{}).element=P,x.parents=T,k.fire("NodeChange",x))}}}),He(nt,[],function(){function $(b,S,y){var x,w,P=y?"lastChild":"firstChild",T=y?"prev":"next";if(b[P])return b[P];if(b!==S){if(x=b[T])return x;for(w=b.parent;w&&w!==S;w=w.parent)if(x=w[T])return x}}function W(b,S){this.name=b,this.type=S,1===S&&(this.attributes=[],this.attributes.map={})}var R=/^[ \t\r\n]*$/,k={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return W.prototype={replace:function(b){var S=this;return b.parent&&b.remove(),S.insert(b,S),S.remove(),S},attr:function(b,S){var x,w,y=this;if("string"!=typeof b){for(w in b)y.attr(w,b[w]);return y}if(x=y.attributes){if(void 0!==S){if(null===S){if(b in x.map)for(delete x.map[b],w=x.length;w--;)if(x[w].name===b)return x=x.splice(w,1),y;return y}if(b in x.map){for(w=x.length;w--;)if(x[w].name===b){x[w].value=S;break}}else x.push({name:b,value:S});return x.map[b]=S,y}return x.map[b]}},clone:function(){var y,x,w,P,T,b=this,S=new W(b.name,b.type);if(w=b.attributes){for((T=[]).map={},y=0,x=w.length;y<x;y++)"id"!==(P=w[y]).name&&(T[T.length]={name:P.name,value:P.value},T.map[P.name]=P.value);S.attributes=T}return S.value=b.value,S.shortEnded=b.shortEnded,S},wrap:function(b){var S=this;return S.parent.insert(b,S),b.append(S),S},unwrap:function(){var S,y,b=this;for(S=b.firstChild;S;)y=S.next,b.insert(S,b,!0),S=y;b.remove()},remove:function(){var b=this,S=b.parent,y=b.next,x=b.prev;return S&&(S.firstChild===b?(S.firstChild=y,y&&(y.prev=null)):x.next=y,S.lastChild===b?(S.lastChild=x,x&&(x.next=null)):y.prev=x,b.parent=b.next=b.prev=null),b},append:function(b){var y,S=this;return b.parent&&b.remove(),(y=S.lastChild)?(y.next=b,b.prev=y,S.lastChild=b):S.lastChild=S.firstChild=b,b.parent=S,b},insert:function(b,S,y){var x;return b.parent&&b.remove(),x=S.parent||this,y?(S===x.firstChild?x.firstChild=b:S.prev.next=b,b.prev=S.prev,b.next=S,S.prev=b):(S===x.lastChild?x.lastChild=b:S.next.prev=b,b.next=S.next,b.prev=S,S.next=b),b.parent=x,b},getAll:function(b){var y,x=[];for(y=this.firstChild;y;y=$(y,this))y.name===b&&x.push(y);return x},empty:function(){var S,y,x,b=this;if(b.firstChild){for(S=[],x=b.firstChild;x;x=$(x,b))S.push(x);for(y=S.length;y--;)(x=S[y]).parent=x.firstChild=x.lastChild=x.next=x.prev=null}return b.firstChild=b.lastChild=null,b},isEmpty:function(b,S){var w,P,x=this.firstChild;if(S=S||{},x)do{if(1===x.type){if(x.attributes.map["data-mce-bogus"])continue;if(b[x.name])return!1;for(w=x.attributes.length;w--;)if("name"===(P=x.attributes[w].name)||0===P.indexOf("data-mce-bookmark"))return!1}if(8===x.type||3===x.type&&!R.test(x.value)||3===x.type&&x.parent&&S[x.parent.name]&&R.test(x.value))return!1}while(x=$(x,this));return!0},walk:function(b){return $(this,null,b)}},W.create=function(b,S){var y,x;if(y=new W(b,k[b]||1),S)for(x in S)y.attr(x,S[x]);return y},W}),He(gt,[Fe],function($){function W(I,L){return(I=$.trim(I))?I.split(L||" "):[]}function k(I,L){var B;return I&&(B={},"string"==typeof I&&(I={"*":I}),x(I,function(D,z){B[z]=B[z.toUpperCase()]="map"==L?y(D,/[, ]/):P(D,/[, ]/)})),B}var b={},S={},y=$.makeMap,x=$.each,w=$.extend,P=$.explode,T=$.inArray;return function(I){function L(xe,Me,ot){var At=I[xe];return At?At=y(At,/[, ]/,y(At.toUpperCase(),/[, ]/)):(At=b[xe])||(At=y(Me," ",y(Me.toUpperCase()," ")),At=w(At,ot),b[xe]=At),At}function B(xe){return new RegExp("^"+xe.replace(/([?+*])/g,".$1")+"$")}function D(xe){var Me,ot,At,Ot,Jt,zt,Se,ne,ee,me,ke,qe,Qe,Be,mt,ct,ft,yt,vn,Pn=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,Yn=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,si=/[*?+]/;if(xe)for(xe=W(xe,","),C["@"]&&(ct=C["@"].attributes,ft=C["@"].attributesOrder),Me=0,ot=xe.length;Me<ot;Me++)if(Jt=Pn.exec(xe[Me])){if(ee=Jt[2],mt=Jt[3],ne=Jt[5],zt={attributes:qe={},attributesOrder:Qe=[]},"#"===(Be=Jt[1])&&(zt.paddEmpty=!0),"-"===Be&&(zt.removeEmpty=!0),"!"===Jt[4]&&(zt.removeEmptyAttrs=!0),ct){for(yt in ct)qe[yt]=ct[yt];Qe.push.apply(Qe,ft)}if(ne)for(At=0,Ot=(ne=W(ne,"|")).length;At<Ot;At++)if(Jt=Yn.exec(ne[At])){if(Se={},ke=Jt[1],me=Jt[2].replace(/::/g,":"),Be=Jt[3],vn=Jt[4],"!"===ke&&(zt.attributesRequired=zt.attributesRequired||[],zt.attributesRequired.push(me),Se.required=!0),"-"===ke){delete qe[me],Qe.splice(T(Qe,me),1);continue}Be&&("="===Be&&(zt.attributesDefault=zt.attributesDefault||[],zt.attributesDefault.push({name:me,value:vn}),Se.defaultValue=vn),":"===Be&&(zt.attributesForced=zt.attributesForced||[],zt.attributesForced.push({name:me,value:vn}),Se.forcedValue=vn),"<"===Be&&(Se.validValues=y(vn,"?"))),si.test(me)?(zt.attributePatterns=zt.attributePatterns||[],Se.pattern=B(me),zt.attributePatterns.push(Se)):(qe[me]||Qe.push(me),qe[me]=Se)}ct||"@"!=ee||(ct=qe,ft=Qe),mt&&(zt.outputName=ee,C[mt]=zt),si.test(ee)?(zt.pattern=B(ee),m.push(zt)):C[ee]=zt}}function z(xe){C={},m=[],D(xe),x(H,function(Me,ot){g[ot]=Me.children})}function N(xe){var Me=/^(~)?(.+)$/;xe&&(b.text_block_elements=b.block_elements=null,x(W(xe,","),function(ot){var At=Me.exec(ot),Ot="~"===At[1],Jt=Ot?"span":"div",zt=At[2];if(g[zt]=g[Jt],ie[zt]=Jt,Ot||(ue[zt.toUpperCase()]={},ue[zt]={}),!C[zt]){var Se=C[Jt];delete(Se=w({},Se)).removeEmptyAttrs,delete Se.removeEmpty,C[zt]=Se}x(g,function(ne,ee){ne[Jt]&&(g[ee]=ne=w({},g[ee]),ne[zt]=ne[Jt])})}))}function G(xe){var Me=/^([+\-]?)(\w+)\[([^\]]+)\]$/;b[I.schema]=null,xe&&x(W(xe,","),function(ot){var Ot,Jt,At=Me.exec(ot);At&&(Ot=(Jt=At[1])?g[At[2]]:g[At[2]]={"#comment":{}},Ot=g[At[2]],x(W(At[3],"|"),function(zt){"-"===Jt?delete Ot[zt]:Ot[zt]={}}))})}function M(xe){var ot,Me=C[xe];if(Me)return Me;for(ot=m.length;ot--;)if((Me=m[ot]).pattern.test(xe))return Me}var O,U,H,Z,J,de,se,ae,ue,le,ve,ye,K,A=this,C={},g={},m=[],ie={},he={};H=function R(I){function L(g,m,O){function U(de,se){var ue,le,ae={};for(ue=0,le=de.length;ue<le;ue++)ae[de[ue]]=se||{};return ae}var H,Z,J;for(m=m||"","string"==typeof(O=O||[])&&(O=W(O)),H=(g=W(g)).length;H--;)J={attributes:U(Z=W([z,m].join(" "))),attributesOrder:Z,children:U(O,S)},D[g[H]]=J}function B(g,m){var O,U,H,Z;for(O=(g=W(g)).length,m=W(m);O--;)for(U=D[g[O]],H=0,Z=m.length;H<Z;H++)U.attributes[m[H]]={},U.attributesOrder.push(m[H])}var z,N,G,M,A,C,D={};return b[I]?b[I]:(z="id accesskey class dir lang style tabindex title",N="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",G="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=I&&(z+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",N+=" article aside details dialog figure header footer hgroup section nav",G+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=I&&(z+=" xml:lang",G=[G,C="acronym applet basefont big font strike tt"].join(" "),x(W(C),function(g){L(g,"",G)}),N=[N,A="center dir isindex noframes"].join(" "),M=[N,G].join(" "),x(W(A),function(g){L(g,"",M)})),M=M||[N,G].join(" "),L("html","manifest","head body"),L("head","","base command link meta noscript script style title"),L("title hr noscript br"),L("base","href target"),L("link","href rel media hreflang type sizes hreflang"),L("meta","name http-equiv content charset"),L("style","media type scoped"),L("script","src async defer type charset"),L("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",M),L("address dt dd div caption","",M),L("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",G),L("blockquote","cite",M),L("ol","reversed start type","li"),L("ul","","li"),L("li","value",M),L("dl","","dt dd"),L("a","href target rel media hreflang type",G),L("q","cite",G),L("ins del","cite datetime",M),L("img","src sizes srcset alt usemap ismap width height"),L("iframe","src name width height",M),L("embed","src type width height"),L("object","data type typemustmatch name usemap form width height",[M,"param"].join(" ")),L("param","name value"),L("map","name",[M,"area"].join(" ")),L("area","alt coords shape href target rel media hreflang type"),L("table","border","caption colgroup thead tfoot tbody tr"+("html4"==I?" col":"")),L("colgroup","span","col"),L("col","span"),L("tbody thead tfoot","","tr"),L("tr","","td th"),L("td","colspan rowspan headers",M),L("th","colspan rowspan headers scope abbr",M),L("form","accept-charset action autocomplete enctype method name novalidate target",M),L("fieldset","disabled form name",[M,"legend"].join(" ")),L("label","form for",G),L("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),L("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==I?M:G),L("select","disabled form multiple name required size","option optgroup"),L("optgroup","disabled label","option"),L("option","disabled label selected value"),L("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),L("menu","type label",[M,"li"].join(" ")),L("noscript","",M),"html4"!=I&&(L("wbr"),L("ruby","",[G,"rt rp"].join(" ")),L("figcaption","",M),L("mark rt rp summary bdi","",G),L("canvas","width height",M),L("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[M,"track source"].join(" ")),L("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[M,"track source"].join(" ")),L("picture","","img source"),L("source","src srcset type media sizes"),L("track","kind src srclang label default"),L("datalist","",[G,"option"].join(" ")),L("article section nav aside header footer","",M),L("hgroup","","h1 h2 h3 h4 h5 h6"),L("figure","",[M,"figcaption"].join(" ")),L("time","datetime",G),L("dialog","open",M),L("command","type label icon disabled checked radiogroup command"),L("output","for form name",G),L("progress","value max",G),L("meter","value min max low high optimum",G),L("details","open",[M,"summary"].join(" ")),L("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=I&&(B("script","language xml:space"),B("style","xml:space"),B("object","declare classid code codebase codetype archive standby align border hspace vspace"),B("embed","align name hspace vspace"),B("param","valuetype type"),B("a","charset name rev shape coords"),B("br","clear"),B("applet","codebase archive code object alt name width height align hspace vspace"),B("img","name longdesc align border hspace vspace"),B("iframe","longdesc frameborder marginwidth marginheight scrolling align"),B("font basefont","size color face"),B("input","usemap align"),B("select","onchange"),B("textarea"),B("h1 h2 h3 h4 h5 h6 div p legend caption","align"),B("ul","type compact"),B("li","type"),B("ol dl menu dir","compact"),B("pre","width xml:space"),B("hr","align noshade size width"),B("isindex","prompt"),B("table","summary width frame rules cellspacing cellpadding align bgcolor"),B("col","width align char charoff valign"),B("colgroup","width align char charoff valign"),B("thead","align char charoff valign"),B("tr","align char charoff valign bgcolor"),B("th","axis align char charoff valign nowrap bgcolor width height"),B("form","accept"),B("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),B("tfoot","align char charoff valign"),B("tbody","align char charoff valign"),B("area","nohref"),B("body","background bgcolor text link vlink alink")),"html4"!=I&&(B("input button select textarea","autofocus"),B("input textarea","placeholder"),B("a","download"),B("link script img","crossorigin"),B("iframe","sandbox seamless allowfullscreen")),x(W("a form meter progress dfn"),function(g){D[g]&&delete D[g].children[g]}),delete D.caption.children.table,delete D.script,b[I]=D,D)}((I=I||{}).schema),!1===I.verify_html&&(I.valid_elements="*[*]"),O=k(I.valid_styles),U=k(I.invalid_styles,"map"),ae=k(I.valid_classes,"map"),Z=L("whitespace_elements","pre script noscript style textarea video audio iframe object code"),J=L("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),de=L("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),se=L("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),le=L("non_empty_elements","td th iframe video audio object script pre code",de),ve=L("move_caret_before_on_enter_elements","table",le),ye=L("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),ue=L("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",ye),K=L("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),x((I.special||"script noscript style textarea").split(" "),function(xe){he[xe]=new RegExp("</"+xe+"[^>]*>","gi")}),I.valid_elements?z(I.valid_elements):(x(H,function(xe,Me){C[Me]={attributes:xe.attributes,attributesOrder:xe.attributesOrder},g[Me]=xe.children}),"html5"!=I.schema&&x(W("strong/b em/i"),function(xe){xe=W(xe,"/"),C[xe[1]].outputName=xe[0]}),x(W("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(xe){C[xe]&&(C[xe].removeEmpty=!0)}),x(W("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(xe){C[xe].paddEmpty=!0}),x(W("span"),function(xe){C[xe].removeEmptyAttrs=!0})),N(I.custom_elements),G(I.valid_children),D(I.extended_valid_elements),G("+ol[ul|ol],+ul[ul|ol]"),x({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(xe,Me){C[Me]&&(C[Me].parentsRequired=W(xe))}),I.invalid_elements&&x(P(I.invalid_elements),function(xe){C[xe]&&delete C[xe]}),M("span")||D("span[!data-mce-type|*]"),A.children=g,A.getValidStyles=function(){return O},A.getInvalidStyles=function(){return U},A.getValidClasses=function(){return ae},A.getBoolAttrs=function(){return se},A.getBlockElements=function(){return ue},A.getTextBlockElements=function(){return ye},A.getTextInlineElements=function(){return K},A.getShortEndedElements=function(){return de},A.getSelfClosingElements=function(){return J},A.getNonEmptyElements=function(){return le},A.getMoveCaretBeforeOnEnterElements=function(){return ve},A.getWhiteSpaceElements=function(){return Z},A.getSpecialElements=function(){return he},A.isValidChild=function(xe,Me){var ot=g[xe];return!(!ot||!ot[Me])},A.isValid=function(xe,Me){var ot,At,Ot=M(xe);if(Ot){if(!Me||Ot.attributes[Me])return!0;if(ot=Ot.attributePatterns)for(At=ot.length;At--;)if(ot[At].pattern.test(xe))return!0}return!1},A.getElementRule=M,A.getCustomElements=function(){return ie},A.addValidElements=D,A.setValidElements=z,A.addCustomElements=N,A.addValidChildren=G,A.elements=C}}),He(ut,[gt,Ee,Fe],function($,W,R){function k(y,x,w){var T,I,L,B,P=1;for(B=y.getShortEndedElements(),(L=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=T=w;I=L.exec(x);){if(T=L.lastIndex,"/"===I[1])P--;else if(!I[1]){if(I[2]in B)continue;P++}if(0===P)break}return T}function b(y,x){function w(){}var P=this;y=y||{},P.schema=x=x||new $,!1!==y.fix_self_closing&&(y.fix_self_closing=!0),S("comment cdata text start end pi doctype".split(" "),function(T){T&&(P[T]=y[T]||w)}),P.parse=function(T){function I(qe){var Qe,Be;for(Qe=M.length;Qe--&&M[Qe].name!==qe;);if(Qe>=0){for(Be=M.length-1;Be>=Qe;Be--)(qe=M[Be]).valid&&B.end(qe.name);M.length=Qe}}function L(qe,Qe,Be,mt,ct){var ft,yt;if(Be=(Qe=Qe.toLowerCase())in Z?Qe:Se(Be||mt||ct||""),de&&!O&&0!==Qe.indexOf("data-")){if(!(ft=ve[Qe])&&ye){for(yt=ye.length;yt--&&!(ft=ye[yt]).pattern.test(Qe););-1===yt&&(ft=null)}if(!ft||ft.validValues&&!(Be in ft.validValues))return}if(ee[Qe]&&!y.allow_script_urls){var Pn=Be.replace(/[\s\u0000-\u001F]+/g,"");try{Pn=decodeURIComponent(Pn)}catch{Pn=unescape(Pn)}if(me.test(Pn)||!y.allow_html_data_urls&&ke.test(Pn)&&!/^data:image\//i.test(Pn))return}A.map[Qe]=Be,A.push({name:Qe,value:Be})}var D,N,G,A,C,g,m,O,U,H,Z,J,de,se,ae,ue,le,ve,ye,K,ie,he,Me,ot,At,Ot,Jt,ne,B=this,z=0,M=[],zt=0,Se=W.decode,ee=R.makeMap("src,href,data,background,formaction,poster"),me=/((java|vb)script|mhtml):/i,ke=/^data:/i;for(ot=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),At=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,H=x.getShortEndedElements(),Me=y.self_closing_elements||x.getSelfClosingElements(),Z=x.getBoolAttrs(),de=y.validate,U=y.remove_internals,ne=y.fix_self_closing,Ot=x.getSpecialElements();D=ot.exec(T);){if(z<D.index&&B.text(Se(T.substr(z,D.index-z))),N=D[6])":"===(N=N.toLowerCase()).charAt(0)&&(N=N.substr(1)),I(N);else if(N=D[7]){if(":"===(N=N.toLowerCase()).charAt(0)&&(N=N.substr(1)),J=N in H,ne&&Me[N]&&M.length>0&&M[M.length-1].name===N&&I(N),!de||(se=x.getElementRule(N))){if(ae=!0,de&&(ve=se.attributes,ye=se.attributePatterns),(le=D[8])?((O=-1!==le.indexOf("data-mce-type"))&&U&&(ae=!1),(A=[]).map={},le.replace(At,L)):(A=[]).map={},de&&!O){if(K=se.attributesRequired,ie=se.attributesDefault,se.removeEmptyAttrs&&!A.length&&(ae=!1),he=se.attributesForced)for(C=he.length;C--;)"{$uid}"===(Jt=(ue=he[C]).value)&&(Jt="mce_"+zt++),A.map[m=ue.name]=Jt,A.push({name:m,value:Jt});if(ie)for(C=ie.length;C--;)(m=(ue=ie[C]).name)in A.map||("{$uid}"===(Jt=ue.value)&&(Jt="mce_"+zt++),A.map[m]=Jt,A.push({name:m,value:Jt}));if(K){for(C=K.length;C--&&!(K[C]in A.map););-1===C&&(ae=!1)}if(ue=A.map["data-mce-bogus"]){if("all"===ue){z=k(x,T,ot.lastIndex),ot.lastIndex=z;continue}ae=!1}}ae&&B.start(N,A,J)}else ae=!1;if(G=Ot[N]){G.lastIndex=z=D.index+D[0].length,(D=G.exec(T))?(ae&&(g=T.substr(z,D.index-z)),z=D.index+D[0].length):(g=T.substr(z),z=T.length),ae&&(g.length>0&&B.text(g,!0),B.end(N)),ot.lastIndex=z;continue}J||(le&&le.indexOf("/")==le.length-1?ae&&B.end(N):M.push({name:N,valid:ae}))}else(N=D[1])?(">"===N.charAt(0)&&(N=" "+N),y.allow_conditional_comments||"[if"!==N.substr(0,3).toLowerCase()||(N=" "+N),B.comment(N)):(N=D[2])?B.cdata(N):(N=D[3])?B.doctype(N):(N=D[4])&&B.pi(N,D[5]);z=D.index+D[0].length}for(z<T.length&&B.text(Se(T.substr(z))),C=M.length-1;C>=0;C--)(N=M[C]).valid&&B.end(N.name)}}var S=R.each;return b.findEndTag=k,b}),He(Lt,[nt,gt,ut,Fe],function($,W,R,k){var b=k.makeMap,S=k.each,y=k.explode,x=k.extend,w=function(T,I){T.padd_empty_with_br?I.empty().append(new $("br","1")).shortEnded=!0:I.empty().append(new $("#text","3")).value="\xa0"},P=function(T,I){return T&&T.firstChild===T.lastChild&&T.firstChild.name===I};return function(T,I){var B=this,D={},z=[],N={},G={};(T=T||{}).validate=!("validate"in T)||T.validate,T.root_name=T.root_name||"body",B.schema=I=I||new W,B.filterNode=function(M){var A,C,g;for((C in D&&((g=N[C])?g.push(M):N[C]=[M]),A=z.length);A--;)(C=z[A].name)in M.attributes.map&&((g=G[C])?g.push(M):G[C]=[M]);return M},B.addNodeFilter=function(M,A){S(y(M),function(C){var g=D[C];g||(D[C]=g=[]),g.push(A)})},B.addAttributeFilter=function(M,A){S(y(M),function(C){var g;for(g=0;g<z.length;g++)if(z[g].name===C)return void z[g].callbacks.push(A);z.push({name:C,callbacks:[A]})})},B.parse=function(M,A){function g(ne,ee){var ke,me=new $(ne,ee);return ne in D&&((ke=N[ne])?ke.push(me):N[ne]=[me]),me}function m(ne){var ee,me,ke,qe,Qe=I.getBlockElements();for(ee=ne.prev;ee&&3===ee.type;){if((ke=ee.value.replace(Me,"")).length>0)return void(ee.value=ke);if(me=ee.next){if(3==me.type&&me.value.length){ee=ee.prev;continue}if(!Qe[me.name]&&"script"!=me.name&&"style"!=me.name){ee=ee.prev;continue}}qe=ee.prev,ee.remove(),ee=qe}}var U,H,Z,J,de,se,ae,ue,le,ve,ye,K,ie,xe,Me,ot,At,Ot,Jt,zt,Se,he=[];if(A=A||{},N={},G={},K=x(b("script,style,head,html,body,title,meta,param"),I.getBlockElements()),zt=I.getNonEmptyElements(),Jt=I.children,ye=T.validate,Se="forced_root_block"in A?A.forced_root_block:T.forced_root_block,Ot=I.getWhiteSpaceElements(),ie=/^[ \t\r\n]+/,Me=/[ \t\r\n]+$/,ot=/[ \t\r\n]+/g,At=/^[ \t\r\n]+$/,U=new R({validate:ye,allow_script_urls:T.allow_script_urls,allow_conditional_comments:T.allow_conditional_comments,self_closing_elements:function O(ne){var ee,me={};for(ee in ne)"li"!==ee&&"p"!=ee&&(me[ee]=ne[ee]);return me}(I.getSelfClosingElements()),cdata:function(ne){Z.append(g("#cdata",4)).value=ne},text:function(ne,ee){var me;xe||(ne=ne.replace(ot," "),Z.lastChild&&K[Z.lastChild.name]&&(ne=ne.replace(ie,""))),0!==ne.length&&((me=g("#text",3)).raw=!!ee,Z.append(me).value=ne)},comment:function(ne){Z.append(g("#comment",8)).value=ne},pi:function(ne,ee){Z.append(g(ne,7)).value=ee,m(Z)},doctype:function(ne){Z.append(g("#doctype",10)).value=ne,m(Z)},start:function(ne,ee,me){var ke,qe,Qe,Be,mt;if(Qe=ye?I.getElementRule(ne):{}){for((ke=g(Qe.outputName||ne,1)).attributes=ee,ke.shortEnded=me,Z.append(ke),(mt=Jt[Z.name])&&Jt[ke.name]&&!mt[ke.name]&&he.push(ke),qe=z.length;qe--;)(Be=z[qe].name)in ee.map&&((le=G[Be])?le.push(ke):G[Be]=[ke]);K[ne]&&m(ke),me||(Z=ke),!xe&&Ot[ne]&&(xe=!0)}},end:function(ne){var ee,me,ke,qe,Qe;if(me=ye?I.getElementRule(ne):{}){if(K[ne]&&!xe){if((ee=Z.firstChild)&&3===ee.type)if((ke=ee.value.replace(ie,"")).length>0)ee.value=ke,ee=ee.next;else for(qe=ee.next,ee.remove(),ee=qe;ee&&3===ee.type;)qe=ee.next,(0===(ke=ee.value).length||At.test(ke))&&(ee.remove(),ee=qe),ee=qe;if((ee=Z.lastChild)&&3===ee.type)if((ke=ee.value.replace(Me,"")).length>0)ee.value=ke,ee=ee.prev;else for(qe=ee.prev,ee.remove(),ee=qe;ee&&3===ee.type;)qe=ee.prev,(0===(ke=ee.value).length||At.test(ke))&&(ee.remove(),ee=qe),ee=qe}if(xe&&Ot[ne]&&(xe=!1),(me.removeEmpty||me.paddEmpty)&&Z.isEmpty(zt,Ot))if(me.paddEmpty)w(T,Z);else if(!Z.attributes.map.name&&!Z.attributes.map.id)return Qe=Z.parent,K[Z.name]?Z.empty().remove():Z.unwrap(),void(Z=Qe);Z=Z.parent}}},I),H=Z=new $(A.context||T.root_name,11),U.parse(M),ye&&he.length&&(A.context?A.invalid=!0:function L(M){var A,C,g,m,O,U,H,Z,J,de,se,ae,ue,le,ve,ye;for(ae=b("tr,td,th,tbody,thead,tfoot,table"),de=I.getNonEmptyElements(),se=I.getWhiteSpaceElements(),ue=I.getTextBlockElements(),le=I.getSpecialElements(),A=0;A<M.length;A++)if((C=M[A]).parent&&!C.fixed)if(ue[C.name]&&"li"==C.parent.name){for(ve=C.next;ve&&ue[ve.name];)ve.name="li",ve.fixed=!0,C.parent.insert(ve,C.parent),ve=ve.next;C.unwrap(C)}else{for(m=[C],g=C.parent;g&&!I.isValidChild(g.name,C.name)&&!ae[g.name];g=g.parent)m.push(g);if(g&&m.length>1){for(m.reverse(),O=U=B.filterNode(m[0].clone()),J=0;J<m.length-1;J++){for(I.isValidChild(U.name,m[J].name)?(H=B.filterNode(m[J].clone()),U.append(H)):H=U,Z=m[J].firstChild;Z&&Z!=m[J+1];)ye=Z.next,H.append(Z),Z=ye;U=H}O.isEmpty(de,se)?g.insert(C,m[0],!0):(g.insert(O,m[0],!0),g.insert(C,O)),((g=m[0]).isEmpty(de,se)||P(g,"br"))&&g.empty().remove()}else if(C.parent){if("li"===C.name){if((ve=C.prev)&&("ul"===ve.name||"ul"===ve.name)){ve.append(C);continue}if((ve=C.next)&&("ul"===ve.name||"ul"===ve.name)){ve.insert(C,ve.firstChild,!0);continue}C.wrap(B.filterNode(new $("ul",1)));continue}I.isValidChild(C.parent.name,"div")&&I.isValidChild("div",C.name)?C.wrap(B.filterNode(new $("div",1))):le[C.name]?C.empty().remove():C.unwrap()}}}(he)),Se&&("body"==H.name||A.isRootContent)&&function C(){function ne(qe){qe&&((ee=qe.firstChild)&&3==ee.type&&(ee.value=ee.value.replace(ie,"")),(ee=qe.lastChild)&&3==ee.type&&(ee.value=ee.value.replace(Me,"")))}var me,ke,ee=H.firstChild;if(I.isValidChild(H.name,Se.toLowerCase())){for(;ee;)me=ee.next,3==ee.type||1==ee.type&&"p"!==ee.name&&!K[ee.name]&&!ee.attr("data-mce-type")?(ke||((ke=g(Se,1)).attr(T.forced_root_block_attrs),H.insert(ke,ee)),ke.append(ee)):(ne(ke),ke=null),ee=me;ne(ke)}}(),!A.invalid){for(ve in N){for(le=D[ve],ae=(J=N[ve]).length;ae--;)J[ae].parent||J.splice(ae,1);for(de=0,se=le.length;de<se;de++)le[de](J,ve,A)}for(de=0,se=z.length;de<se;de++)if((le=z[de]).name in G){for(ae=(J=G[le.name]).length;ae--;)J[ae].parent||J.splice(ae,1);for(ae=0,ue=le.callbacks.length;ae<ue;ae++)le.callbacks[ae](J,le.name,A)}}return H},T.remove_trailing_brs&&B.addNodeFilter("br",function(M){var A,g,U,H,Z,J,se,ae,C=M.length,m=x({},I.getBlockElements()),O=I.getNonEmptyElements(),de=I.getNonEmptyElements();for(m.body=1,A=0;A<C;A++)if(U=(g=M[A]).parent,m[g.parent.name]&&g===U.lastChild){for(Z=g.prev;Z;){if("span"!==(J=Z.name)||"bookmark"!==Z.attr("data-mce-type")){if("br"!==J)break;if("br"===J){g=null;break}}Z=Z.prev}g&&(g.remove(),U.isEmpty(O,de)&&(se=I.getElementRule(U.name))&&(se.removeEmpty?U.remove():se.paddEmpty&&w(T,U)))}else{for(H=g;U&&U.firstChild===H&&U.lastChild===H&&(H=U,!m[U.name]);)U=U.parent;H===U&&!0!==T.padd_empty_with_br&&((ae=new $("#text",3)).value="\xa0",g.replace(ae))}}),T.allow_unsafe_link_target||B.addAttributeFilter("href",function(M){function C(Z){var J=new RegExp("("+H.replace(" ","|")+")","g");return Z&&(Z=k.trim(Z.replace(J,""))),Z||null}for(var O,U,m=M.length,H="noopener noreferrer";m--;)U=(O=M[m]).attr("rel"),"a"===O.name&&O.attr("rel",(Z=U,"_blank"==O.attr("target")?function A(Z){return(Z=C(Z))?[Z,H].join(" "):H}(Z):C(Z)));var Z}),T.allow_html_in_named_anchor||B.addAttributeFilter("id,name",function(M){for(var C,g,m,O,A=M.length;A--;)if("a"===(O=M[A]).name&&O.firstChild&&!O.attr("href")){m=O.parent,C=O.lastChild;do{g=C.prev,m.insert(C,O),C=g}while(C)}}),T.fix_list_elements&&B.addNodeFilter("ul,ol",function(M){for(var C,g,A=M.length;A--;)if("ul"===(g=(C=M[A]).parent).name||"ol"===g.name)if(C.prev&&"li"===C.prev.name)C.prev.append(C);else{var m=new $("li",1);m.attr("style","list-style-type: none"),C.wrap(m)}}),T.validate&&I.getValidClasses()&&B.addAttributeFilter("class",function(M){for(var C,g,m,O,U,Z,J,A=M.length,H=I.getValidClasses();A--;){for(g=(C=M[A]).attr("class").split(" "),U="",m=0;m<g.length;m++)O=g[m],J=!1,(Z=H["*"])&&Z[O]&&(J=!0),Z=H[C.name],!J&&Z&&Z[O]&&(J=!0),J&&(U&&(U+=" "),U+=O);U.length||(U=null),C.attr("class",U)}})}}),He(Ye,[Ee,Fe],function($,W){var R=W.makeMap;return function(k){var S,y,x,w,P,b=[];return S=(k=k||{}).indent,y=R(k.indent_before||""),x=R(k.indent_after||""),w=$.getEncodeFunc(k.entity_encoding||"raw",k.entities),P="html"==k.element_format,{start:function(T,I,L){var B,D,z,N;if(S&&y[T]&&b.length>0&&(N=b[b.length-1]).length>0&&"\n"!==N&&b.push("\n"),b.push("<",T),I)for(B=0,D=I.length;B<D;B++)b.push(" ",(z=I[B]).name,'="',w(z.value,!0),'"');b[b.length]=!L||P?">":" />",L&&S&&x[T]&&b.length>0&&(N=b[b.length-1]).length>0&&"\n"!==N&&b.push("\n")},end:function(T){var I;b.push("</",T,">"),S&&x[T]&&b.length>0&&(I=b[b.length-1]).length>0&&"\n"!==I&&b.push("\n")},text:function(T,I){T.length>0&&(b[b.length]=I?T:w(T))},cdata:function(T){b.push("<![CDATA[",T,"]]>")},comment:function(T){b.push("\x3c!--",T,"--\x3e")},pi:function(T,I){I?b.push("<?",T," ",w(I),"?>"):b.push("<?",T,"?>"),S&&b.push("\n")},doctype:function(T){b.push("<!DOCTYPE",T,">",S?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}}}),He(gn,[Ye,gt],function($,W){return function(R,k){var b=this,S=new $(R);(R=R||{}).validate=!("validate"in R)||R.validate,b.schema=k=k||new W,b.writer=S,b.serialize=function(y){function x(T){var L,B,D,z,N,G,M,A,C,I=w[T.type];if(I)I(T);else{if(L=T.name,B=T.shortEnded,D=T.attributes,P&&D&&D.length>1&&((G=[]).map={},C=k.getElementRule(T.name))){for(M=0,A=C.attributesOrder.length;M<A;M++)(z=C.attributesOrder[M])in D.map&&(G.map[z]=N=D.map[z],G.push({name:z,value:N}));for(M=0,A=D.length;M<A;M++)(z=D[M].name)in G.map||(G.map[z]=N=D.map[z],G.push({name:z,value:N}));D=G}if(S.start(T.name,D,B),!B){if(T=T.firstChild)do{x(T)}while(T=T.next);S.end(L)}}}var w,P;return P=R.validate,w={3:function(T){S.text(T.value,T.raw)},8:function(T){S.comment(T.value)},7:function(T){S.pi(T.name,T.value)},10:function(T){S.doctype(T.value)},4:function(T){S.cdata(T.value)},11:function(T){if(T=T.firstChild)do{x(T)}while(T=T.next)}},S.reset(),1!=y.type||R.inner?w[11](y):x(y),S.getContent()}}}),He(it,[Ve,Lt,ut,Ee,gn,nt,gt,St,Fe,Kt],function($,W,R,k,b,S,y,x,w,P){var I=w.each,L=w.trim,B=$.DOM;return function(D,z){function N(U){var H=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[\u200b\ufeff]+<\\/span>","\\s?("+O.join("|")+')="[^"]+"'].join("|"),"gi");return P.trim(U.replace(H,""))}function G(U){var J,de,se,ae,ue,H=U,Z=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,le=z.schema;for(H=N(H),ue=le.getShortEndedElements();ae=Z.exec(H);)de=Z.lastIndex,se=ae[0].length,J=ue[ae[1]]?de:R.findEndTag(le,H,de),H=H.substring(0,de-se)+H.substring(J),Z.lastIndex=de-se;return H}var C,g,m,O=["data-mce-selected"];return z&&(C=z.dom,g=z.schema),C=C||B,g=g||new y(D),D.entity_encoding=D.entity_encoding||"named",D.remove_trailing_brs=!("remove_trailing_brs"in D)||D.remove_trailing_brs,(m=new W(D,g)).addAttributeFilter("data-mce-tabindex",function(U,H){for(var J,Z=U.length;Z--;)(J=U[Z]).attr("tabindex",J.attributes.map["data-mce-tabindex"]),J.attr(H,null)}),m.addAttributeFilter("src,href,style",function(U,H){for(var J,de,Z=U.length,se="data-mce-"+H,ae=D.url_converter,ue=D.url_converter_scope;Z--;)void 0!==(de=(J=U[Z]).attributes.map[se])?(J.attr(H,de.length>0?de:null),J.attr(se,null)):(de=J.attributes.map[H],"style"===H?de=C.serializeStyle(C.parseStyle(de),J.name):ae&&(de=ae.call(ue,de,H,J.name)),J.attr(H,de.length>0?de:null))}),m.addAttributeFilter("class",function(U){for(var Z,J,H=U.length;H--;)(J=(Z=U[H]).attr("class"))&&(J=Z.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),Z.attr("class",J.length>0?J:null))}),m.addAttributeFilter("data-mce-type",function(U,H,Z){for(var de,J=U.length;J--;)"bookmark"!==(de=U[J]).attributes.map["data-mce-type"]||Z.cleanup||de.remove()}),m.addNodeFilter("noscript",function(U){for(var Z,H=U.length;H--;)(Z=U[H].firstChild)&&(Z.value=k.decode(Z.value))}),m.addNodeFilter("script,style",function(U,H){function Z(ue){return ue.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var de,se,ae,J=U.length;J--;)se=(de=U[J]).firstChild?de.firstChild.value:"","script"===H?((ae=de.attr("type"))&&de.attr("type","mce-no/type"==ae?null:ae.replace(/^mce\-/,"")),se.length>0&&(de.firstChild.value="// <![CDATA[\n"+Z(se)+"\n// ]]>")):se.length>0&&(de.firstChild.value="\x3c!--\n"+Z(se)+"\n--\x3e")}),m.addNodeFilter("#comment",function(U){for(var Z,H=U.length;H--;)0===(Z=U[H]).value.indexOf("[CDATA[")?(Z.name="#cdata",Z.type=4,Z.value=Z.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===Z.value.indexOf("mce:protected ")&&(Z.name="#text",Z.type=3,Z.raw=!0,Z.value=unescape(Z.value).substr(14))}),m.addNodeFilter("xml:namespace,input",function(U,H){for(var J,Z=U.length;Z--;)7===(J=U[Z]).type?J.remove():1===J.type&&("input"!==H||"type"in J.attributes.map||J.attr("type","text"))}),m.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(U,H){for(var Z=U.length;Z--;)U[Z].attr(H,null)}),{schema:g,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:function(U,H){var J,de,se,ae,ue,le;return x.ie&&C.select("script,style,select,map").length>0?(ue=U.innerHTML,U=U.cloneNode(!1),C.setHTML(U,ue)):U=U.cloneNode(!0),(J=document.implementation).createHTMLDocument&&(de=J.createHTMLDocument(""),I("BODY"==U.nodeName?U.childNodes:[U],function(ve){de.body.appendChild(de.importNode(ve,!0))}),U="BODY"!=U.nodeName?de.body.firstChild:de.body,se=C.doc,C.doc=de),(H=H||{}).format=H.format||"html",H.selection&&(H.forced_root_block=""),H.no_events||(H.node=U,this.onPreProcess(H)),function T(D){function z(M){return M&&"br"===M.name}var N,G;z(N=D.lastChild)&&z(G=N.prev)&&(N.remove(),G.remove())}(le=m.parse(L(H.getInner?U.innerHTML:C.getOuterHTML(U)),H)),ae=new b(D,g),H.content=ae.serialize(le),H.cleanup||(H.content=P.trim(H.content),H.content=H.content.replace(/\uFEFF/g,"")),H.no_events||this.onPostProcess(H),se&&(C.doc=se),H.node=null,H.content},addRules:function(U){g.addValidElements(U)},setRules:function(U){g.setValidElements(U)},onPreProcess:function(U){z&&z.fire("PreProcess",U)},onPostProcess:function(U){z&&z.fire("PostProcess",U)},addTempAttr:function A(U){-1===w.inArray(O,U)&&(m.addAttributeFilter(U,function(H,Z){for(var J=H.length;J--;)H[J].attr(Z,null)}),O.push(U))},trimHtml:N,getTrimmedContent:function M(){return G(z.getBody().innerHTML)},trimContent:G}}}),He(Mt,[],function(){return function $(W){function R(x,w){var P,I,L,B,D,z,N,M,T=0,G=-1;if((P=x.duplicate()).collapse(w),(M=P.parentElement()).ownerDocument===W.dom.doc){for(;"false"===M.contentEditable;)M=M.parentNode;if(!M.hasChildNodes())return{node:M,inside:1};for(I=(B=M.children).length-1;T<=I;)if(N=Math.floor((T+I)/2),P.moveToElementText(D=B[N]),(G=P.compareEndPoints(w?"StartToStart":"EndToEnd",x))>0)I=N-1;else{if(!(G<0))return{node:D};T=N+1}if(G<0)for(D?P.collapse(!1):(P.moveToElementText(M),P.collapse(!0),D=M,L=!0),z=0;0!==P.compareEndPoints(w?"StartToStart":"StartToEnd",x)&&0!==P.move("character",1)&&M==P.parentElement();)z++;else for(P.collapse(!0),z=0;0!==P.compareEndPoints(w?"StartToStart":"StartToEnd",x)&&0!==P.move("character",-1)&&M==P.parentElement();)z++;return{node:D,position:G,offset:z,inside:L}}}var b=this,S=W.dom;this.getBookmark=function(x){function w(L){var B,D,z,N,G=[];for(B=L.parentNode,D=S.getRoot().parentNode;B!=D&&9!==B.nodeType;){for(N=(z=B.children).length;N--;)if(L===z[N]){G.push(N);break}L=B,B=B.parentNode}return G}function P(L){var B;if(B=R(T,L))return{position:B.position,offset:B.offset,indexes:w(B.node),inside:B.inside}}var T=W.getRng(),I={};return 2===x&&(T.item?I.start={ctrl:!0,indexes:w(T.item(0))}:(I.start=P(!0),W.isCollapsed()||(I.end=P()))),I},this.moveToBookmark=function(x){function w(L){var B,D,z,N;for(B=S.getRoot(),D=L.length-1;D>=0;D--)(z=L[D])<=(N=B.children).length-1&&(B=N[z]);return B}function P(L){var D,z,G,B=x[L?"start":"end"];B&&(D=B.position>0,(z=I.createTextRange()).moveToElementText(w(B.indexes)),void 0!==(G=B.offset)?(z.collapse(B.inside||D),z.moveStart("character",D?-G:G)):z.collapse(L),T.setEndPoint(L?"StartToStart":"EndToStart",z),L&&T.collapse(!0))}var T,I=S.doc.body;x.start&&(x.start.ctrl?((T=I.createControlRange()).addElement(w(x.start.indexes)),T.select()):(T=I.createTextRange(),P(!0),P(),T.select()))},this.addRange=function(x){function w(C){var g,m,O,U,H;O=S.create("a"),g=C?I:B,m=C?L:D,U=P.duplicate(),g!=N&&g!=N.documentElement||(g=G,m=0),3==g.nodeType?(g.parentNode.insertBefore(O,g),U.moveToElementText(O),U.moveStart("character",m),S.remove(O),P.setEndPoint(C?"StartToStart":"EndToEnd",U)):((H=g.childNodes).length?(m>=H.length?S.insertAfter(O,H[H.length-1]):g.insertBefore(O,H[m]),U.moveToElementText(O)):g.canHaveHTML&&(g.innerHTML="<span>&#xFEFF;</span>",U.moveToElementText(O=g.firstChild),U.collapse(!1)),P.setEndPoint(C?"StartToStart":"EndToEnd",U),S.remove(O))}var P,T,I,L,B,D,z,M,A,N=W.dom.doc,G=N.body;if(I=x.startContainer,L=x.startOffset,B=x.endContainer,D=x.endOffset,P=G.createTextRange(),I==B&&1==I.nodeType){if(L==D&&!I.hasChildNodes()){if(I.canHaveHTML)return(z=I.previousSibling)&&!z.hasChildNodes()&&S.isBlock(z)?z.innerHTML="&#xFEFF;":z=null,I.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",P.moveToElementText(I.lastChild),P.select(),S.doc.selection.clear(),I.innerHTML="",void(z&&(z.innerHTML=""));L=S.nodeIndex(I),I=I.parentNode}if(L==D-1)try{if(A=I.childNodes[L],(T=G.createControlRange()).addElement(A),T.select(),(M=W.getRng()).item&&A===M.item(0))return}catch{}}w(!0),w(),P.select()},this.getRangeAt=function k(){function x(z){var G,M,C,m,N=R(w,z),A=0;if(G=N.node,M=N.offset,!N.inside||G.hasChildNodes())if(void 0!==M){if(N.position<0){if(!(C=N.inside?G.firstChild:G.nextSibling))return void P[z?"setStartAfter":"setEndAfter"](G);if(!M)return void(3==C.nodeType?P[z?"setStart":"setEnd"](C,0):P[z?"setStartBefore":"setEndBefore"](C));for(;C;){if(3==C.nodeType&&(A+=(m=C.nodeValue).length)>=M){G=C,A=m.length-(A-=M);break}C=C.nextSibling}}else{if(!(C=G.previousSibling))return P[z?"setStartBefore":"setEndBefore"](G);if(!M)return void(3==G.nodeType?P[z?"setStart":"setEnd"](C,G.nodeValue.length):P[z?"setStartAfter":"setEndAfter"](C));for(;C;){if(3==C.nodeType&&(A+=C.nodeValue.length)>=M){G=C,A-=M;break}C=C.previousSibling}}P[z?"setStart":"setEnd"](G,A)}else P[z?"setStartBefore":"setEndAfter"](G);else P[z?"setStart":"setEnd"](G,0)}var T,I,L,B,D,w=W.getRng(),P=S.createRng();if((T=w.item?w.item(0):w.parentElement()).ownerDocument!=S.doc)return P;if(I=W.isCollapsed(),w.item)return P.setStart(T.parentNode,S.nodeIndex(T)),P.setEnd(P.startContainer,P.startOffset+1),P;try{x(!0),I||x()}catch(z){if(-2147024809!=z.number)throw z;D=b.getBookmark(2),(L=w.duplicate()).collapse(!0),T=L.parentElement(),I||((L=w.duplicate()).collapse(!1),(B=L.parentElement()).innerHTML=B.innerHTML),T.innerHTML=T.innerHTML,b.moveToBookmark(D),w=W.getRng(),x(!0),I||x()}return P}}}),He(on,[St],function($){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(W){return W.shiftKey||W.ctrlKey||W.altKey||this.metaKeyPressed(W)},metaKeyPressed:function(W){return $.mac?W.metaKey:W.ctrlKey&&!W.altKey}}}),He(xn,[on,Fe,Ze,St,tt],function($,W,R,k,b){var y=b.isContentEditableFalse,x=b.isContentEditableTrue;return function(w,P){function T(ct){var ft=P.settings.object_resizing;return!1!==ft&&!k.iOS&&("string"!=typeof ft&&(ft="table,img,div"),"false"!==ct.getAttribute("data-mce-resize")&&ct!=P.getBody()&&P.dom.is(ct,ft))}function I(ct){var ft,yt,Pn,Yn;Jt=(Jt=(ft=ct.screenX-K)*ve[2]+Me)<5?5:Jt,zt=(zt=(yt=ct.screenY-ie)*ve[3]+ot)<5?5:zt,("IMG"==se.nodeName&&!1!==P.settings.resize_img_proportional?!$.modifierPressed(ct):$.modifierPressed(ct)||"IMG"==se.nodeName&&ve[2]*ve[3]!=0)&&(me(ft)>me(yt)?(zt=ke(Jt*At),Jt=ke(zt/At)):(Jt=ke(zt/At),zt=ke(Jt*At))),J.setStyles(ae,{width:Jt,height:zt}),J.setStyles(ue,{left:Pn=(Pn=ve.startPos.x+ft)>0?Pn:0,top:Yn=(Yn=ve.startPos.y+yt)>0?Yn:0,display:"block"}),ue.innerHTML=Jt+" &times; "+zt,ve[2]<0&&ae.clientWidth<=Jt&&J.setStyle(ae,"left",he+(Me-Jt)),ve[3]<0&&ae.clientHeight<=zt&&J.setStyle(ae,"top",xe+(ot-zt)),(ft=qe.scrollWidth-Qe)+(yt=qe.scrollHeight-Be)!=0&&J.setStyles(ue,{left:Pn-ft,top:Yn-yt}),Ot||(P.fire("ObjectResizeStart",{target:se,width:Me,height:ot}),Ot=!0)}function L(){function ct(ft,yt){yt&&(se.style[ft]||!P.schema.isValid(se.nodeName.toLowerCase(),ft)?J.setStyle(se,ft,yt):J.setAttrib(se,ft,yt))}Ot=!1,ct("width",Jt),ct("height",zt),J.unbind(Se,"mousemove",I),J.unbind(Se,"mouseup",L),ne!=Se&&(J.unbind(ne,"mousemove",I),J.unbind(ne,"mouseup",L)),J.remove(ae),J.remove(ue),ee&&"TABLE"!=se.nodeName||B(se),P.fire("ObjectResized",{target:se,width:Jt,height:zt}),J.setAttrib(se,"style",J.getAttrib(se,"style")),P.nodeChanged()}function B(ct,ft,yt){var vn,Pn,Yn,si,Jn;D(),O(),vn=J.getPos(ct,qe),he=vn.x,xe=vn.y,Jn=ct.getBoundingClientRect(),Pn=Jn.width||Jn.right-Jn.left,Yn=Jn.height||Jn.bottom-Jn.top,se!=ct&&(m(),se=ct,Jt=zt=0),si=P.fire("ObjectSelected",{target:ct}),T(ct)&&!si.isDefaultPrevented()?de(le,function(Kn,wi){function gi(kt){K=kt.screenX,ie=kt.screenY,At=(ot=se.clientHeight)/(Me=se.clientWidth),ve=Kn,Kn.startPos={x:Pn*Kn[0]+he,y:Yn*Kn[1]+xe},Qe=qe.scrollWidth,Be=qe.scrollHeight,ae=se.cloneNode(!0),J.addClass(ae,"mce-clonedresizable"),J.setAttrib(ae,"data-mce-bogus","all"),ae.contentEditable=!1,ae.unSelectabe=!0,J.setStyles(ae,{left:he,top:xe,margin:0}),ae.removeAttribute("data-mce-selected"),qe.appendChild(ae),J.bind(Se,"mousemove",I),J.bind(Se,"mouseup",L),ne!=Se&&(J.bind(ne,"mousemove",I),J.bind(ne,"mouseup",L)),ue=J.add(qe,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Me+" &times; "+ot)}var mi;return ft?void(wi==ft&&gi(yt)):((mi=J.get("mceResizeHandle"+wi))&&J.remove(mi),mi=J.add(qe,"div",{id:"mceResizeHandle"+wi,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+wi+"-resize; margin:0; padding:0"}),k.ie&&(mi.contentEditable=!1),J.bind(mi,"mousedown",function(kt){kt.stopImmediatePropagation(),kt.preventDefault(),gi(kt)}),Kn.elm=mi,void J.setStyles(mi,{left:Pn*Kn[0]+he-mi.offsetWidth/2,top:Yn*Kn[1]+xe-mi.offsetHeight/2}))}):D(),se.setAttribute("data-mce-selected","1")}function D(){var ct,ft;for(ct in O(),se&&se.removeAttribute("data-mce-selected"),le)(ft=J.get("mceResizeHandle"+ct))&&(J.unbind(ft),J.remove(ft))}function z(ct){function ft(Pn,Yn){if(Pn)do{if(Pn===Yn)return!0}while(Pn=Pn.parentNode)}var yt,vn;if(!Ot&&!P.removed)return de(J.select("img[data-mce-selected],hr[data-mce-selected]"),function(Pn){Pn.removeAttribute("data-mce-selected")}),vn="mousedown"==ct.type?ct.target:w.getNode(),ft(vn=J.$(vn).closest(ee?"table":"table,img,hr")[0],qe)&&(U(),ft(yt=w.getStart(!0),vn)&&ft(w.getEnd(!0),vn)&&(!ee||vn!=yt&&"IMG"!==yt.nodeName))?void B(vn):void D()}function N(ct,ft,yt){ct&&ct.attachEvent&&ct.attachEvent("on"+ft,yt)}function G(ct,ft,yt){ct&&ct.detachEvent&&ct.detachEvent("on"+ft,yt)}function M(ct){var yt,vn,Pn,si,Jn,Kn,ft=ct.srcElement;for(vn in yt=ft.getBoundingClientRect(),Jn=ye.clientX-yt.left,Kn=ye.clientY-yt.top,le)if(si=ft.offsetHeight*(Pn=le[vn])[1],me(ft.offsetWidth*Pn[0]-Jn)<8&&me(si-Kn)<8){ve=Pn;break}Ot=!0,P.fire("ObjectResizeStart",{target:se,width:se.clientWidth,height:se.clientHeight}),P.getDoc().selection.empty(),B(ft,vn,ye)}function C(ct){return y(function S(w,P){for(;P&&P!=w;){if(x(P)||y(P))return P;P=P.parentNode}return null}(P.getBody(),ct))}function g(ct){var ft=ct.srcElement;if(C(ft))!function A(ct){ct.preventDefault?ct.preventDefault():ct.returnValue=!1}(ct);else if(ft!=se){if(P.fire("ObjectSelected",{target:ft}),m(),0===ft.id.indexOf("mceResizeHandle"))return void(ct.returnValue=!1);"IMG"!=ft.nodeName&&"TABLE"!=ft.nodeName||(D(),se=ft,N(ft,"resizestart",M))}}function m(){G(se,"resizestart",M)}function O(){for(var ct in le){var ft=le[ct];ft.elm&&(J.unbind(ft.elm),delete ft.elm)}}function U(){try{P.getDoc().execCommand("enableObjectResizing",!1,!1)}catch{}}function H(ct){var ft;if(ee){ft=Se.body.createControlRange();try{return ft.addElement(ct),ft.select(),!0}catch{}}}var se,ae,ue,le,ve,ye,K,ie,he,xe,Me,ot,At,Ot,Jt,zt,Qe,Be,J=P.dom,de=W.each,Se=P.getDoc(),ne=document,ee=k.ie&&k.ie<11,me=Math.abs,ke=Math.round,qe=P.getBody();le={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var mt=".mce-content-body";return P.contentStyles.push(mt+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+mt+" .mce-resizehandle:hover {background: #000}"+mt+" img[data-mce-selected],"+mt+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+mt+" .mce-clonedresizable {position: absolute;"+(k.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+mt+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),P.on("init",function(){ee?(P.on("ObjectResized",function(ft){"TABLE"!=ft.target.nodeName&&(D(),H(ft.target))}),N(qe,"controlselect",g),P.on("mousedown",function(ft){ye=ft})):(U(),k.ie>=11&&(P.on("mousedown click",function(ft){var yt=ft.target,vn=yt.nodeName;Ot||!/^(TABLE|IMG|HR)$/.test(vn)||C(yt)||(P.selection.select(yt,"TABLE"==vn),"mousedown"==ft.type&&P.nodeChanged())}),P.dom.bind(qe,"mscontrolselect",function(ft){function yt(vn){R.setEditorTimeout(P,function(){P.selection.select(vn)})}return C(ft.target)?(ft.preventDefault(),void yt(ft.target)):void(/^(TABLE|IMG|HR)$/.test(ft.target.nodeName)&&(ft.preventDefault(),"IMG"==ft.target.tagName&&yt(ft.target)))})));var ct=R.throttle(function(ft){P.composing||z(ft)});P.on("nodechange ResizeEditor ResizeWindow drop",ct),P.on("keyup compositionend",function(ft){se&&"TABLE"==se.nodeName&&ct(ft)}),P.on("hide blur",D)}),P.on("remove",O),{isResizable:T,showResizeRect:B,hideResizeRect:D,updateResizeRect:z,controlSelect:H,destroy:function Z(){se=ae=null,ee&&(m(),G(qe,"controlselect",g))}}}}),He(lt,[],function(){var x=[].slice;return{constant:function $(w){return function(){return w}},negate:function W(w){return function(P){return!w(P)}},and:function b(){var w=x.call(arguments);return function(P){for(var T=0;T<w.length;T++)if(!w[T](P))return!1;return!0}},or:function k(){var w=x.call(arguments);return function(P){for(var T=0;T<w.length;T++)if(w[T](P))return!0;return!1}},curry:function S(w){var P=x.call(arguments);return P.length-1>=w.length?w.apply(this,P.slice(1)):function(){var T=P.concat([].slice.call(arguments));return S.apply(this,T)}},compose:function R(w,P){return function(T){return w(P(T))}},noop:function y(){}}}),He(Wt,[tt,Vt,re],function($,W,R){function k(N){return!z(N)&&(I(N)?!L(N.parentNode):B(N)||T(N)||D(N)||P(N))}function b(N,G){for(N=N.parentNode;N&&N!=G;N=N.parentNode){if(P(N))return!1;if(w(N))return!0}return!0}var w=$.isContentEditableTrue,P=$.isContentEditableFalse,T=$.isBr,I=$.isText,L=$.matchNodeNames("script style textarea"),B=$.matchNodeNames("img input textarea hr iframe video audio object"),D=$.matchNodeNames("table"),z=R.isCaretContainer;return{isCaretCandidate:k,isInEditable:b,isAtomic:function y(N){return B(N)||function S(N){return!!P(N)&&!0!==W.reduce(N.getElementsByTagName("*"),function(G,M){return G||w(M)},!1)}(N)},isEditableCaretCandidate:function x(N,G){return k(N)&&b(N,G)}}}),He(an,[],function(){function $(I){return I?{left:T(I.left),top:T(I.top),bottom:T(I.bottom),right:T(I.right),width:T(I.width),height:T(I.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function k(I,L,B){return I>=0&&I<=Math.min(L.height,B.height)/2}function b(I,L){return I.bottom<L.top||!(I.top>L.bottom)&&k(L.top-I.bottom,I,L)}function S(I,L){return I.top>L.bottom||!(I.bottom<L.top)&&k(L.bottom-I.top,I,L)}function y(I,L){return I.left<L.left}function x(I,L){return I.right>L.right}var T=Math.round;return{clone:$,collapse:function W(I,L){return I=$(I),L||(I.left=I.left+I.width),I.right=I.left,I.width=0,I},isEqual:function R(I,L){return I.left===L.left&&I.top===L.top&&I.bottom===L.bottom&&I.right===L.right},isAbove:b,isBelow:S,isLeft:y,isRight:x,compare:function w(I,L){return b(I,L)?-1:S(I,L)?1:y(I,L)?-1:x(I,L)?1:0},containsXY:function P(I,L,B){return L>=I.left&&L<=I.right&&B>=I.top&&B<=I.bottom}}}),He(_t,[],function(){var W=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]");return{isExtendingChar:function $(R){return"string"==typeof R&&R.charCodeAt(0)>=768&&W.test(R)}}}),He(pn,[lt,tt,Ve,Ke,Wt,an,_t],function($,W,R,k,b,S,y){function x(m){return"createRange"in m?m.createRange():R.DOM.createRng()}function w(m){return m&&/[\r\n\t ]/.test(m)}function P(m){var H,O=m.startContainer,U=m.startOffset;return!!(w(m.toString())&&G(O.parentNode)&&(H=O.data,w(H[U-1])||w(H[U+1])))}function I(m,O,U){function de(){return U||(U=function T(m){function U(ue){var le,ve;return ve=ue.getClientRects(),le=S.clone(ve.length>0?ve[0]:ue.getBoundingClientRect()),A(ue)&&0===le.left?function O(ue){var ie,le=ue.ownerDocument,ve=x(le),ye=le.createTextNode("\xa0"),K=ue.parentNode;return K.insertBefore(ye,ue),ve.setStart(ye,0),ve.setEnd(ye,1),ie=S.clone(ve.getBoundingClientRect()),K.removeChild(ye),ie}(ue):le}function H(ue,le){return(ue=S.collapse(ue,le)).width=1,ue.right=ue.left+1,ue}function Z(ue){0!==ue.height&&(de.length>0&&S.isEqual(ue,de[de.length-1])||de.push(ue))}function J(ue,le){var ve=x(ue.ownerDocument);if(le<ue.data.length){if(y.isExtendingChar(ue.data[le]))return de;if(y.isExtendingChar(ue.data[le-1])&&(ve.setStart(ue,le),ve.setEnd(ue,le+1),!P(ve)))return Z(H(U(ve),!1)),de}le>0&&(ve.setStart(ue,le-1),ve.setEnd(ue,le),P(ve)||Z(H(U(ve),!1))),le<ue.data.length&&(ve.setStart(ue,le),ve.setEnd(ue,le+1),P(ve)||Z(H(U(ve),!0)))}var se,ae,de=[];if(M(m.container()))return J(m.container(),m.offset()),de;if(L(m.container()))if(m.isAtEnd())ae=g(m.container(),m.offset()),M(ae)&&J(ae,ae.data.length),N(ae)&&!A(ae)&&Z(H(U(ae),!1));else{if(ae=g(m.container(),m.offset()),M(ae)&&J(ae,0),N(ae)&&m.isAtEnd())return Z(H(U(ae),!1)),de;se=g(m.container(),m.offset()-1),N(se)&&!A(se)&&(D(se)||D(ae)||!N(ae))&&Z(H(U(se),!1)),N(ae)&&Z(H(U(ae),!0))}return de}(new I(m,O))),U}return{container:$.constant(m),offset:$.constant(O),toRange:function J(){var le;return(le=x(m.ownerDocument)).setStart(m,O),le.setEnd(m,O),le},getClientRects:de,isVisible:function se(){return de().length>0},isAtStart:function H(){return M(m),0===O},isAtEnd:function Z(){return M(m)?O>=m.data.length:O>=m.childNodes.length},isEqual:function ae(le){return le&&m===le.container()&&O===le.offset()},getNode:function ue(le){return g(m,le?O-1:O)}}}var L=W.isElement,B=b.isCaretCandidate,D=W.matchStyleValues("display","block table"),z=W.matchStyleValues("float","left right"),N=$.and(L,B,$.negate(z)),G=$.negate(W.matchStyleValues("white-space","pre pre-line pre-wrap")),M=W.isText,A=W.isBr,C=R.nodeIndex,g=k.getNode;return I.fromRangeStart=function(m){return new I(m.startContainer,m.startOffset)},I.fromRangeEnd=function(m){return new I(m.endContainer,m.endOffset)},I.after=function(m){return new I(m.parentNode,C(m)+1)},I.before=function(m){return new I(m.parentNode,C(m))},I}),He(Mn,[tt,Ve,lt,Vt,pn],function($,W,R,k,b){function S(A){var C=A.parentNode;return G(C)?S(C):C}function y(A){return A?k.reduce(A.childNodes,function(C,g){return G(g)&&"BR"!=g.nodeName?C=C.concat(y(g)):C.push(g),C},[]):[]}function w(A){return function(C){return A===C}}function P(A){var C,g,m;return C=y(S(A)),g=k.findIndex(C,w(A),A),C=C.slice(0,g+1),m=k.reduce(C,function(O,U,H){return N(U)&&N(C[H-1])&&O++,O},0),C=k.filter(C,$.matchNodeNames(A.nodeName)),(g=k.findIndex(C,w(A),A))-m}function T(A){return(N(A)?"text()":A.nodeName.toLowerCase())+"["+P(A)+"]"}var N=$.isText,G=$.isBogus,M=W.nodeIndex;return{create:function L(A,C){var g,m,U,H,Z,O=[];return g=C.container(),m=C.offset(),N(g)?U=function x(A,C){for(;(A=A.previousSibling)&&N(A);)C+=A.data.length;return C}(g,m):(m>=(H=g.childNodes).length?(U="after",m=H.length-1):U="before",g=H[m]),O.push(T(g)),Z=function I(A,C,g){var m=[];for(C=C.parentNode;!(C==A||g&&g(C));C=C.parentNode)m.push(C);return m}(A,g),Z=k.filter(Z,R.negate($.isBogus)),(O=O.concat(k.map(Z,function(J){return T(J)}))).reverse().join("/")+","+U},resolve:function z(A,C){var g,m,O;return C?(g=C.split(","),C=g[0].split("/"),O=g.length>1?g[1]:"before",m=k.reduce(C,function(U,H){return(H=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(H))?("text()"===H[1]&&(H[1]="#text"),function B(A,C,g){var m=y(A);return m=k.filter(m,function(O,U){return!N(O)||!N(m[U-1])}),(m=k.filter(m,$.matchNodeNames(C)))[g]}(U,H[1],parseInt(H[2],10))):null},A),m?N(m)?function D(A,C){for(var O,g=A,m=0;N(g);){if(O=g.data.length,C>=m&&C<=m+O){A=g,C-=m;break}if(!N(g.nextSibling)){A=g,C=O;break}m+=O,g=g.nextSibling}return C>A.data.length&&(C=A.data.length),new b(A,C)}(m,parseInt(O,10)):(O="after"===O?M(m)+1:M(m),new b(m.parentNode,O)):null):null}}}),He(Tn,[St,Fe,re,Mn,pn,tt,Ke],function($,W,R,k,b,S,y){function x(P){var T=P.dom;this.getBookmark=function(I,L){function B(H,Z){var J=0;return W.each(T.select(H),function(de){if("all"!==de.getAttribute("data-mce-bogus"))return de!=Z&&void J++}),J}function D(H){function Z(J){var de,se,ae,ue=J?"start":"end";se=H[ue+"Offset"],1==(de=H[ue+"Container"]).nodeType&&"TR"==de.nodeName&&(de=(ae=de.childNodes)[Math.min(J?se:se-1,ae.length-1)])&&H["set"+(J?"Start":"End")](de,se=J?0:de.childNodes.length)}return Z(!0),Z(),H}var G,M,A,C,g,m,U,O="&#xFEFF;";if(2==I)return g=(m=P.getNode())?m.nodeName:null,G=P.getRng(),w(m)||"IMG"==g?{name:g,index:B(g,m)}:P.tridentSel?P.tridentSel.getBookmark(I):(m=function N(H){function Z(J,de){var se;return S.isElement(J)&&(J=y.getNode(J,de),w(J))?J:R.isCaretContainer(J)&&(S.isText(J)&&R.isCaretContainerBlock(J)&&(J=J.parentNode),w(se=J.previousSibling)||w(se=J.nextSibling))?se:void 0}return Z(H.startContainer,H.startOffset)||Z(H.endContainer,H.endOffset)}(G))?{name:g=m.tagName,index:B(g,m)}:function z(H){function Z(se,ae){var ye,K,ue=se[ae?"startContainer":"endContainer"],le=se[ae?"startOffset":"endOffset"],ve=[],ie=0;if(3==ue.nodeType){if(L)for(ye=ue.previousSibling;ye&&3==ye.nodeType;ye=ye.previousSibling)le+=ye.nodeValue.length;ve.push(le)}else le>=(K=ue.childNodes).length&&K.length&&(ie=1,le=Math.max(0,K.length-1)),ve.push(T.nodeIndex(K[le],L)+ie);for(;ue&&ue!=J;ue=ue.parentNode)ve.push(T.nodeIndex(ue,L));return ve}var J=T.getRoot(),de={};return de.start=Z(H,!0),P.isCollapsed()||(de.end=Z(H)),de}(G);if(3==I)return G=P.getRng(),{start:k.create(T.getRoot(),b.fromRangeStart(G)),end:k.create(T.getRoot(),b.fromRangeEnd(G))};if(I)return{rng:P.getRng()};if(G=P.getRng(),A=T.uniqueId(),C=P.isCollapsed(),U="overflow:hidden;line-height:0px",G.duplicate||G.item){if(G.item)return{name:g=(m=G.item(0)).nodeName,index:B(g,m)};M=G.duplicate();try{G.collapse(),G.pasteHTML('<span data-mce-type="bookmark" id="'+A+'_start" style="'+U+'">'+O+"</span>"),C||(M.collapse(!1),G.moveToElementText(M.parentElement()),0===G.compareEndPoints("StartToEnd",M)&&M.move("character",-1),M.pasteHTML('<span data-mce-type="bookmark" id="'+A+'_end" style="'+U+'">'+O+"</span>"))}catch{return null}}else{if("IMG"==(g=(m=P.getNode()).nodeName))return{name:g,index:B(g,m)};M=D(G.cloneRange()),C||(M.collapse(!1),M.insertNode(T.create("span",{"data-mce-type":"bookmark",id:A+"_end",style:U},O))),(G=D(G)).collapse(!0),G.insertNode(T.create("span",{"data-mce-type":"bookmark",id:A+"_start",style:U},O))}return P.moveToBookmark({id:A,keep:1}),{id:A}},this.moveToBookmark=function(I){function L(m){var U,H,Z,J,O=I[m?"start":"end"];if(O){for(Z=O[0],H=G,U=O.length-1;U>=1;U--){if(O[U]>(J=H.childNodes).length-1)return;H=J[O[U]]}3===H.nodeType&&(Z=Math.min(O[0],H.nodeValue.length)),1===H.nodeType&&(Z=Math.min(O[0],H.childNodes.length)),m?N.setStart(H,Z):N.setEnd(H,Z)}return!0}function B(m){var U,H,Z,J,O=T.get(I.id+"_"+m),de=I.keep;if(O&&(U=O.parentNode,"start"==m?(de?(U=O.firstChild,H=1):H=T.nodeIndex(O),M=A=U,C=g=H):(de?(U=O.firstChild,H=1):H=T.nodeIndex(O),A=U,g=H),!de)){for(J=O.previousSibling,Z=O.nextSibling,W.each(W.grep(O.childNodes),function(se){3==se.nodeType&&(se.nodeValue=se.nodeValue.replace(/\uFEFF/g,""))});O=T.get(I.id+"_"+m);)T.remove(O,1);J&&Z&&J.nodeType==Z.nodeType&&3==J.nodeType&&!$.opera&&(H=J.nodeValue.length,J.appendData(Z.nodeValue),T.remove(Z),"start"==m?(M=A=J,C=g=H):(A=J,g=H))}}function D(m){return!T.isBlock(m)||m.innerHTML||$.ie||(m.innerHTML='<br data-mce-bogus="1" />'),m}var N,G,M,A,C,g;if(I)if(W.isArray(I.start)){if(N=T.createRng(),G=T.getRoot(),P.tridentSel)return P.tridentSel.moveToBookmark(I);L(!0)&&L()&&P.setRng(N)}else"string"==typeof I.start?P.setRng(function z(){var m,O;return m=T.createRng(),O=k.resolve(T.getRoot(),I.start),m.setStart(O.container(),O.offset()),O=k.resolve(T.getRoot(),I.end),m.setEnd(O.container(),O.offset()),m}()):I.id?(B("start"),B("end"),M&&((N=T.createRng()).setStart(D(M),C),N.setEnd(D(A),g),P.setRng(N))):I.name?P.select(T.select(I.name)[I.index]):I.rng&&P.setRng(I.rng)}}var w=S.isContentEditableFalse;return x.isBookmarkNode=function(P){return P&&"SPAN"===P.tagName&&"bookmark"===P.getAttribute("data-mce-type")},x}),He(ei,[fe,Mt,xn,Ke,Tn,tt,St,Fe,pn],function($,W,R,k,b,S,y,x,w){function P(B,D,z,N){var G=this;G.dom=B,G.win=D,G.serializer=z,G.editor=N,G.bookmarkManager=new b(G),G.controlSelection=new R(G,N),G.win.getSelection||(G.tridentSel=new W(G))}var T=x.each,I=x.trim,L=y.ie;return P.prototype={setCursorLocation:function(B,D){var z=this,N=z.dom.createRng();B?(N.setStart(B,D),N.setEnd(B,D),z.setRng(N),z.collapse(!1)):(z._moveEndPoint(N,z.editor.getBody(),!0),z.setRng(N))},getContent:function(B){var M,A,C,D=this,z=D.getRng(),N=D.dom.create("body"),G=D.getSel();return M=A="",(B=B||{}).get=!0,B.format=B.format||"html",B.selection=!0,D.editor.fire("BeforeGetContent",B),"text"==B.format?D.isCollapsed()?"":z.text||(G.toString?G.toString():""):(z.cloneContents?(C=z.cloneContents())&&N.appendChild(C):z.item!==Dn||z.htmlText!==Dn?(N.innerHTML="<br>"+(z.item?z.item(0).outerHTML:z.htmlText),N.removeChild(N.firstChild)):N.innerHTML=z.toString(),/^\s/.test(N.innerHTML)&&(M=" "),/\s+$/.test(N.innerHTML)&&(A=" "),B.getInner=!0,B.content=D.isCollapsed()?"":M+D.serializer.serialize(N,B)+A,D.editor.fire("GetContent",B),B.content)},setContent:function(B,D){var G,A,C,z=this,N=z.getRng(),M=z.win.document;if((D=D||{format:"html"}).set=!0,D.selection=!0,D.content=B,D.no_events||z.editor.fire("BeforeSetContent",D),B=D.content,N.insertNode){B+='<span id="__caret">_</span>',N.startContainer==M&&N.endContainer==M?M.body.innerHTML=B:(N.deleteContents(),0===M.body.childNodes.length?M.body.innerHTML=B:N.createContextualFragment?N.insertNode(N.createContextualFragment(B)):(A=M.createDocumentFragment(),C=M.createElement("div"),A.appendChild(C),C.outerHTML=B,N.insertNode(A))),G=z.dom.get("__caret"),(N=M.createRange()).setStartBefore(G),N.setEndBefore(G),z.setRng(N),z.dom.remove("__caret");try{z.setRng(N)}catch{}}else N.item&&(M.execCommand("Delete",!1,null),N=z.getRng()),/^\s+/.test(B)?(N.pasteHTML('<span id="__mce_tmp">_</span>'+B),z.dom.remove("__mce_tmp")):N.pasteHTML(B);D.no_events||z.editor.fire("SetContent",D)},getStart:function(B){var N,G,M,A,D=this,z=D.getRng();if(z.duplicate||z.item){if(z.item)return z.item(0);for((M=z.duplicate()).collapse(1),(N=M.parentElement()).ownerDocument!==D.dom.doc&&(N=D.dom.getRoot()),G=A=z.parentElement();A=A.parentNode;)if(A==N){N=G;break}return N}return 1==(N=z.startContainer).nodeType&&N.hasChildNodes()&&(B&&z.collapsed||(N=N.childNodes[Math.min(N.childNodes.length-1,z.startOffset)])),N&&3==N.nodeType?N.parentNode:N},getEnd:function(B){var N,G,D=this,z=D.getRng();return z.duplicate||z.item?z.item?z.item(0):((z=z.duplicate()).collapse(0),(N=z.parentElement()).ownerDocument!==D.dom.doc&&(N=D.dom.getRoot()),N&&"BODY"==N.nodeName&&N.lastChild||N):(G=z.endOffset,1==(N=z.endContainer).nodeType&&N.hasChildNodes()&&(B&&z.collapsed||(N=N.childNodes[G>0?G-1:G])),N&&3==N.nodeType?N.parentNode:N)},getBookmark:function(B,D){return this.bookmarkManager.getBookmark(B,D)},moveToBookmark:function(B){return this.bookmarkManager.moveToBookmark(B)},select:function(B,D){var M,z=this,N=z.dom,G=N.createRng();if(z.lastFocusBookmark=null,B){if(!D&&z.controlSelection.controlSelect(B))return;M=N.nodeIndex(B),G.setStart(B.parentNode,M),G.setEnd(B.parentNode,M+1),D&&(z._moveEndPoint(G,B,!0),z._moveEndPoint(G,B)),z.setRng(G)}return B},isCollapsed:function(){var D=this.getRng(),z=this.getSel();return!(!D||D.item)&&(D.compareEndPoints?0===D.compareEndPoints("StartToEnd",D):!z||D.collapsed)},collapse:function(B){var N,D=this,z=D.getRng();z.item&&(N=z.item(0),(z=D.win.document.body.createTextRange()).moveToElementText(N)),z.collapse(!!B),D.setRng(z)},getSel:function(){var B=this.win;return B.getSelection?B.getSelection():B.document.selection},getRng:function(B){function D(O,U,H){try{return U.compareBoundaryPoints(O,H)}catch{return-1}}var N,G,M,A,C,g,z=this;if(!z.win||typeof(A=z.win.document)>"u"||null===A)return null;if(!B&&z.lastFocusBookmark){var m=z.lastFocusBookmark;return m.startContainer?((G=A.createRange()).setStart(m.startContainer,m.startOffset),G.setEnd(m.endContainer,m.endOffset)):G=m,G}if(B&&z.tridentSel)return z.tridentSel.getRangeAt(0);try{(N=z.getSel())&&(G=N.rangeCount>0?N.getRangeAt(0):N.createRange?N.createRange():A.createRange())}catch{}if((g=z.editor.fire("GetSelectionRange",{range:G})).range!==G)return g.range;if(L&&G&&G.setStart&&A.selection){try{C=A.selection.createRange()}catch{}C&&C.item&&(M=C.item(0),(G=A.createRange()).setStartBefore(M),G.setEndAfter(M))}return G||(G=A.createRange?A.createRange():A.body.createTextRange()),G.setStart&&9===G.startContainer.nodeType&&G.collapsed&&(M=z.dom.getRoot(),G.setStart(M,0),G.setEnd(M,0)),z.selectedRange&&z.explicitRange&&(0===D(G.START_TO_START,G,z.selectedRange)&&0===D(G.END_TO_END,G,z.selectedRange)?G=z.explicitRange:(z.selectedRange=null,z.explicitRange=null)),G},setRng:function(B,D){var N,G,z=this;if(B)if(B.select){z.explicitRange=null;try{B.select()}catch{}}else if(z.tridentSel){if(B.cloneRange)try{z.tridentSel.addRange(B)}catch{}}else{if(N=z.getSel(),B=z.editor.fire("SetSelectionRange",{range:B}).range,N){z.explicitRange=B;try{N.removeAllRanges(),N.addRange(B)}catch{}!1===D&&N.extend&&(N.collapse(B.endContainer,B.endOffset),N.extend(B.startContainer,B.startOffset)),z.selectedRange=N.rangeCount>0?N.getRangeAt(0):null}B.collapsed||B.startContainer!=B.endContainer||!N.setBaseAndExtent||y.ie||B.endOffset-B.startOffset<2&&B.startContainer.hasChildNodes()&&(G=B.startContainer.childNodes[B.startOffset])&&"IMG"==G.tagName&&(N.setBaseAndExtent(B.startContainer,B.startOffset,B.endContainer,B.endOffset),N.anchorNode===B.startContainer&&N.focusNode===B.endContainer||N.setBaseAndExtent(G,0,G,1)),z.editor.fire("AfterSetSelectionRange",{range:B})}},setNode:function(B){return this.setContent(this.dom.getOuterHTML(B)),B},getNode:function(){function B(m,O){for(var U=m;m&&3===m.nodeType&&0===m.length;)m=O?m.nextSibling:m.previousSibling;return m||U}var N,G,M,A,C,D=this,z=D.getRng(),g=D.dom.getRoot();return z?(G=z.startContainer,M=z.endContainer,A=z.startOffset,C=z.endOffset,z.setStart?(N=z.commonAncestorContainer,!z.collapsed&&(G==M&&C-A<2&&G.hasChildNodes()&&(N=G.childNodes[A]),3===G.nodeType&&3===M.nodeType&&(G=G.length===A?B(G.nextSibling,!0):G.parentNode,M=0===C?B(M.previousSibling,!1):M.parentNode,G&&G===M))?G:N&&3==N.nodeType?N.parentNode:N):((N=z.item?z.item(0):z.parentElement()).ownerDocument!==D.win.document&&(N=g),N)):g},getSelectedBlocks:function(B,D){var G,M,z=this,N=z.dom,A=[];if(M=N.getRoot(),B=N.getParent(B||z.getStart(),N.isBlock),D=N.getParent(D||z.getEnd(),N.isBlock),B&&B!=M&&A.push(B),B&&D&&B!=D){G=B;for(var C=new $(B,M);(G=C.next())&&G!=D;)N.isBlock(G)&&A.push(G)}return D&&B!=D&&D!=M&&A.push(D),A},isForward:function(){var z,N,B=this.dom,D=this.getSel();return!(D&&D.anchorNode&&D.focusNode)||((z=B.createRng()).setStart(D.anchorNode,D.anchorOffset),z.collapse(!0),(N=B.createRng()).setStart(D.focusNode,D.focusOffset),N.collapse(!0),z.compareBoundaryPoints(z.START_TO_START,N)<=0)},normalize:function(){var B=this,D=B.getRng();return y.range&&new k(B.dom).normalize(D)&&B.setRng(D,B.isForward()),D},selectorChanged:function(B,D){var N,z=this;return z.selectorChangedData||(z.selectorChangedData={},N={},z.editor.on("NodeChange",function(G){var M=G.element,A=z.dom,C=A.getParents(M,null,A.getRoot()),g={};T(z.selectorChangedData,function(m,O){T(C,function(U){if(A.is(U,O))return N[O]||(T(m,function(H){H(!0,{node:U,selector:O,parents:C})}),N[O]=m),g[O]=m,!1})}),T(N,function(m,O){g[O]||(delete N[O],T(m,function(U){U(!1,{node:M,selector:O,parents:C})}))})})),z.selectorChangedData[B]||(z.selectorChangedData[B]=[]),z.selectorChangedData[B].push(D),z},getScrollContainer:function(){for(var B,D=this.dom.getRoot();D&&"BODY"!=D.nodeName;){if(D.scrollHeight>D.clientHeight){B=D;break}D=D.parentNode}return B},scrollIntoView:function(B,D){function z(H){for(var Z=0,J=0,de=H;de&&de.nodeType;)Z+=de.offsetLeft||0,J+=de.offsetTop||0,de=de.offsetParent;return{x:Z,y:J}}var N,G,g,m,M=this,A=M.dom,C=A.getRoot(),O=0;if(S.isElement(B)){if(!1===D&&(O=B.offsetHeight),"BODY"!=C.nodeName){var U=M.getScrollContainer();if(U)return N=z(B).y-z(U).y+O,m=U.clientHeight,void((N<(g=U.scrollTop)||N+25>g+m)&&(U.scrollTop=N<g?N:N-m+25))}G=A.getViewPort(M.editor.getWin()),N=A.getPos(B).y+O,g=G.y,m=G.h,(N<G.y||N+25>g+m)&&M.editor.getWin().scrollTo(0,N<g?N:N-m+25)}},placeCaretAt:function(B,D){this.setRng(k.getCaretRangeFromPoint(B,D,this.editor.getDoc()))},_moveEndPoint:function(B,D,z){var N=D,G=new $(D,N),M=this.dom.schema.getNonEmptyElements();do{if(3==D.nodeType&&0!==I(D.nodeValue).length)return void(z?B.setStart(D,0):B.setEnd(D,D.nodeValue.length));if(M[D.nodeName]&&!/^(TD|TH)$/.test(D.nodeName))return void(z?B.setStartBefore(D):"BR"==D.nodeName?B.setEndBefore(D):B.setEndAfter(D));if(y.ie&&y.ie<11&&this.dom.isBlock(D)&&this.dom.isEmpty(D))return void(z?B.setStart(D,0):B.setEnd(D,0))}while(D=z?G.next():G.prev());"BODY"==N.nodeName&&(z?B.setStart(N,0):B.setEnd(N,N.childNodes.length))},getBoundingClientRect:function(){var B=this.getRng();return B.collapsed?w.fromRangeStart(B).getClientRects()[0]:B.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},P}),He(Un,[Tn,Fe],function($,W){var k=W.each;return function R(b){this.compare=function(S,y){function x(P){var T={};return k(b.getAttribs(P),function(I){var L=I.nodeName.toLowerCase();0!==L.indexOf("_")&&"style"!==L&&0!==L.indexOf("data-")&&(T[L]=b.getAttrib(P,L))}),T}function w(P,T){var I,L;for(L in P)if(P.hasOwnProperty(L)){if(typeof(I=T[L])>"u"||P[L]!=I)return!1;delete T[L]}for(L in T)if(T.hasOwnProperty(L))return!1;return!0}return!(S.nodeName!=y.nodeName||!w(x(S),x(y))||!w(b.parseStyle(b.getAttrib(S,"style")),b.parseStyle(b.getAttrib(y,"style")))||$.isBookmarkNode(S)||$.isBookmarkNode(y))}}}),He($n,[Ve,Fe,gt],function($,W,R){function k(T,I){function B(C){var g;return function L(C,g){g.classes.length&&P.addClass(C,g.classes.join(" ")),P.setAttribs(C,g.attrs)}(g=P.create((G="string"==typeof C?{name:C,classes:[],attrs:{}}:C).name),G),g}var N,G,M,A=I&&I.schema||new R({});return T&&T.length?(N=B(G=T[0]),(M=P.create("div")).appendChild(function z(C,g,m){var O,U,H,Z=g.length&&g[0],J=Z&&Z.name;if(H=function D(C,g){var m="string"!=typeof C?C.nodeName.toLowerCase():C,U=A.getElementRule(m).parentsRequired;return!(!U||!U.length)&&(g&&-1!==W.inArray(U,g)?g:U[0])}(C,J))J==H?(U=g[0],g=g.slice(1)):U=H;else if(Z)U=g[0],g=g.slice(1);else if(!m)return C;return U&&(O=B(U)).appendChild(C),m&&(O||(O=P.create("div")).appendChild(C),W.each(m,function(de){var se=B(de);O.insertBefore(se,C)})),z(O,g,U&&U.siblings)}(N,T.slice(1),G.siblings)),M):""}function S(T){var I,L={classes:[],attrs:{}};return"*"!==(T=L.selector=W.trim(T))&&(I=T.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(B,D,z,N,G){switch(D){case"#":L.attrs.id=z;break;case".":L.classes.push(z);break;case":":-1!==W.inArray("checked disabled enabled read-only required".split(" "),z)&&(L.attrs[z]=z)}if("["==N){var M=G.match(/([\w\-]+)(?:\=\"([^\"]+))?/);M&&(L.attrs[M[1]]=M[2])}return""})),L.name=I||"div",L}function y(T){return T&&"string"==typeof T?(T=(T=T.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),W.map(T.split(/(?:>|\s+(?![^\[\]]+\]))/),function(I){var L=W.map(I.split(/(?:~\+|~|\+)/),S),B=L.pop();return L.length&&(B.siblings=L),B}).reverse()):[]}var w=W.each,P=$.DOM;return{getCssText:function x(T,I){function L(C){return C.replace(/%(\w+)/g,"")}var B,D,z,N,M,A,G="";if(!1===(A=T.settings.preview_styles))return"";if("string"!=typeof A&&(A="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof I){if(!(I=T.formatter.get(I)))return;I=I[0]}return"preview"in I&&!1===(A=I.preview)?"":(B=I.block||I.inline||"span",(N=y(I.selector)).length?(N[0].name||(N[0].name=B),B=I.selector,D=k(N,T)):D=k([B],T),z=P.select(B,D)[0]||D.firstChild,w(I.styles,function(C,g){(C=L(C))&&P.setStyle(z,g,C)}),w(I.attributes,function(C,g){(C=L(C))&&P.setAttrib(z,g,C)}),w(I.classes,function(C){C=L(C),P.hasClass(z,C)||P.addClass(z,C)}),T.fire("PreviewFormats"),P.setStyles(D,{position:"absolute",left:-65535}),T.getBody().appendChild(D),M=P.getStyle(T.getBody(),"fontSize",!0),M=/px$/.test(M)?parseInt(M,10):0,w(A.split(" "),function(C){var g=P.getStyle(z,C,!0);if(!("background-color"==C&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=P.getStyle(T.getBody(),C,!0),"#ffffff"==P.toHex(g).toLowerCase())||"color"==C&&"#000000"==P.toHex(g).toLowerCase())){if("font-size"==C&&/em|%$/.test(g)){if(0===M)return;g=(g=parseFloat(g,10)/(/%$/.test(g)?100:1))*M+"px"}"border"==C&&g&&(G+="padding:0 2px;"),G+=C+":"+g+";"}}),T.fire("AfterPreviewFormats"),P.remove(D),G)},parseSelector:y,selectorToHtml:function b(T,I){return k(y(T),I)}}}),He(Bi,[Vt,tt,rt],function($,W,R){var S={},y=$.filter,x=$.each;return function k(w,P){var T=S[w];T||(S[w]=T=[]),S[w].push(P)}("pre",function(w){var L,B,I=w.selection.getRng();L=W.matchNodeNames("pre"),I.collapsed||(B=w.selection.getSelectedBlocks(),x(y(y(B,L),function P(D){return L(D.previousSibling)&&-1!=$.indexOf(B,D.previousSibling)}),function(D){!function T(D,z){R(z).remove(),R(D).append("<br><br>").append(z.childNodes)}(D.previousSibling,D)}))}),{postProcess:function b(w,P){x(S[w],function(T){T(P)})}}}),He(ri,[fe,Ke,Tn,Un,lt,Fe,$n,Bi],function($,W,R,k,b,S,y,x){return function(w){function P(Te){return Te.nodeType&&(Te=Te.nodeName),!!w.schema.getTextBlockElements()[Te.toLowerCase()]}function T(Te){return/^(TH|TD)$/.test(Te.nodeName)}function L(Te,We){return Be.getParents(Te,We,Be.getRoot())}function B(Te){return 1===Te.nodeType&&"_mce_caret"===Te.id}function N(Te){return Te?Qe[Te]:Qe}function G(Te,We){Te&&("string"!=typeof Te?pt(Te,function(te,pe){G(pe,te)}):(pt(We=We.length?We:[We],function(te){te.deep===gi&&(te.deep=!te.selector),te.split===gi&&(te.split=!te.selector||te.inline),te.remove===gi&&te.selector&&!te.inline&&(te.remove="none"),te.selector&&te.inline&&(te.mixed=!0,te.block_expand=!0),"string"==typeof te.classes&&(te.classes=te.classes.split(/\s+/))}),Qe[Te]=We))}function A(Te,We){var te=N(We);if(te)for(var pe=0;pe<te.length;pe++)if(!1===te[pe].inherit&&Be.is(Te,te[pe].selector))return!0;return!1}function C(Te){var We;return w.dom.getParent(Te,function(te){return(We=w.dom.getStyle(te,"text-decoration"))&&"none"!==We}),We}function g(Te){var We;1===Te.nodeType&&Te.parentNode&&1===Te.parentNode.nodeType&&(We=C(Te.parentNode),w.dom.getStyle(Te,"color")&&We?w.dom.setStyle(Te,"text-decoration",We):w.dom.getStyle(Te,"text-decoration")===We&&w.dom.setStyle(Te,"text-decoration",null))}function m(Te,We,te){function pe(Rt,Ut){if(Ut=Ut||_e,Rt){if(Ut.onformat&&Ut.onformat(Rt,Ut,We,te),pt(Ut.styles,function(jt,tn){Be.setStyle(Rt,tn,Me(jt,We))}),Ut.styles){var Bt=Be.getAttrib(Rt,"style");Bt&&Rt.setAttribute("data-mce-style",Bt)}pt(Ut.attributes,function(jt,tn){Be.setAttrib(Rt,tn,Me(jt,We))}),pt(Ut.classes,function(jt){jt=Me(jt,We),Be.hasClass(Rt,jt)||Be.addClass(Rt,jt)})}}function Ne(Rt,Ut){var Bt=!1;return!!_e.selector&&(pt(Rt,function(jt){if(!("collapsed"in jt)||jt.collapsed===Xt)return Be.is(Ut,jt.selector)&&!B(Ut)?(pe(Ut,jt),Bt=!0,!1):void 0}),Bt)}function xt(Rt,Ut,Bt){var tn,_n,jt=[],Hn=!0;pe(_n=Be.create(tn=_e.inline||_e.block)),ct.walk(Rt,function(In){var Ci;pt(In,function ii(Xn){var li,Xi,hr,Di;if(Di=Hn,li=Xn.nodeName.toLowerCase(),Xi=Xn.parentNode.nodeName.toLowerCase(),1===Xn.nodeType&&mi(Xn)&&(Di=Hn,Hn="true"===mi(Xn),hr=!0),le(li,"br"))return Ci=0,void(_e.block&&Be.remove(Xn));if(_e.wrapper&&H(Xn,Te,We))Ci=0;else{if(Hn&&!hr&&_e.block&&!_e.wrapper&&P(li)&&ft(Xi,tn))return pe(Xn=Be.rename(Xn,tn)),jt.push(Xn),void(Ci=0);if(_e.selector){var Hi=Ne(et,Xn);if(!_e.inline||Hi)return void(Ci=0)}!Hn||hr||!ft(tn,li)||!ft(Xi,tn)||!Bt&&3===Xn.nodeType&&1===Xn.nodeValue.length&&65279===Xn.nodeValue.charCodeAt(0)||B(Xn)||_e.inline&&yt(Xn)?(Ci=0,pt(Sn(Xn.childNodes),ii),hr&&(Hn=Di),Ci=0):(Ci||(Ci=Be.clone(_n,Jn),Xn.parentNode.insertBefore(Ci,Xn),jt.push(Ci)),Ci.appendChild(Xn))}})}),!0===_e.links&&pt(jt,function(In){!function ii(Ci){"A"===Ci.nodeName&&pe(Ci,_e),pt(Sn(Ci.childNodes),ii)}(In)}),pt(jt,function(In){function ii(Di){var Hi=0;return pt(Di.childNodes,function(Fr){ot(Fr)||je(Fr)||Hi++}),Hi}function Ci(Di){var Hi=!1;return pt(Di.childNodes,function(Fr){if(ye(Fr))return Hi=Fr,!1}),Hi}var Xi;if(Xi=ii(In),!(jt.length>1)&&yt(In)||0!==Xi){if(_e.inline||_e.wrapper){if(_e.exact||1!==Xi||(In=function li(Di){var Hi,Fr;return(Hi=Ci(Di))&&!je(Hi)&&ue(Hi,_e)&&(pe(Fr=Be.clone(Hi,Jn)),Be.replace(Fr,Di,Kn),Be.remove(Hi,1)),Fr||Di}(In)),pt(et,function(Di){pt(Be.select(Di.inline,In),function(Hi){je(Hi)||zt(Di,We,Hi,Di.exact?Hi:null)})}),H(In.parentNode,Te,We)&&zt(_e,We,In)&&(In=0),_e.merge_with_parents&&Be.getParent(In.parentNode,function(Di){if(H(Di,Te,We))return zt(_e,We,In)&&(In=0),Kn}),!yt(In)&&!he(In,"fontSize")){var hr=function Xn(Di,Hi){do{if(1!==ii(Di)||!(Di=Ci(Di)))break;if(Hi(Di))return Di}while(Di);return null}(In,K("fontSize"));hr&&m("fontsize",{value:he(hr,"fontSize")},In)}In&&!1!==_e.merge_siblings&&(In=ee(ne(In),In),In=ee(In,ne(In,Kn)))}}else Be.remove(In,1)})}var at,dt,et=N(Te),_e=et[0],Xt=!te&&mt.isCollapsed();if("false"!==mi(mt.getNode())){if(_e){if(te)te.nodeType?Ne(et,te)||((dt=Be.createRng()).setStartBefore(te),dt.setEndAfter(te),xt(Ot(dt,et),0,!0)):xt(te,0,!0);else if(Xt&&_e.inline&&!Be.select("td[data-mce-selected],th[data-mce-selected]").length)ke("apply",Te,We);else{var Le=w.selection.getNode();vn||!et[0].defaultBlock||Be.getParent(Le,Be.isBlock)||m(et[0].defaultBlock),w.selection.setRng(function Xe(){var Ut=w.selection.getRng(),Bt=Ut.startContainer,jt=Ut.endContainer;if(Bt!=jt&&0===Ut.endOffset){var tn=function Rt(Hn,In){var ii=new $(In);for(te=ii.prev2();te;te=ii.prev2())if(3==te.nodeType&&te.data.length>0||te.childNodes.length>1||te==Hn||"BR"==te.tagName)return te}(Bt,jt);Ut.setEnd(tn,3==tn.nodeType?tn.data.length:tn.childNodes.length)}return Ut}()),at=mt.getBookmark(),xt(Ot(mt.getRng(Kn),et)),_e.styles&&((_e.styles.color||_e.styles.textDecoration)&&(dn(Le,g,"childNodes"),g(Le)),_e.styles.backgroundColor&&ve(Le,K("fontSize"),function ie(Te,We){return b.curry(function(te,pe,Ne){Be.setStyle(Ne,te,pe)},Te,We)}("backgroundColor",Me(_e.styles.backgroundColor,We)))),mt.moveToBookmark(at),qe(mt.getRng(Kn)),w.nodeChanged()}x.postProcess(Te,w)}}else{te=mt.getNode();for(var vt=0,$e=et.length;vt<$e;vt++)if(et[vt].ceFalseOverride&&Be.is(te,et[vt].selector))return void pe(te,et[vt])}}function O(Te,We,te,pe){function Ne(Bt){var jt,tn,_n,Hn,In;if(1===Bt.nodeType&&mi(Bt)&&(Hn=$e,$e="true"===mi(Bt),In=!0),jt=Sn(Bt.childNodes),$e&&!In)for(tn=0,_n=dt.length;tn<_n&&!zt(dt[tn],We,Bt,Bt);tn++);if(Xt.deep&&jt.length){for(tn=0,_n=jt.length;tn<_n;tn++)Ne(jt[tn]);In&&($e=Hn)}}function et(Bt){return function xt(Bt,jt,tn,_n){var Hn,In,ii,Ci,Xn,li;if(Bt){for(li=Bt.parentNode,Hn=jt.parentNode;Hn&&Hn!=li;Hn=Hn.parentNode){for(In=Be.clone(Hn,Jn),Xn=0;Xn<dt.length;Xn++)if(zt(dt[Xn],We,In,In)){In=0;break}In&&(ii&&In.appendChild(ii),Ci||(Ci=In),ii=In)}!_n||Xt.mixed&&yt(Bt)||(jt=Be.split(Bt,jt)),ii&&(tn.parentNode.insertBefore(ii,tn),Ci.appendChild(tn))}return jt}(function Xe(Bt){var jt;return pt(L(Bt.parentNode).reverse(),function(tn){var _n;jt||"_start"==tn.id||"_end"==tn.id||(_n=H(tn,Te,We,pe))&&!1!==_n.split&&(jt=tn)}),jt}(Bt),Bt,Bt,!0)}function _e(Bt){var jt=Be.get(Bt?"_start":"_end"),tn=jt[Bt?"firstChild":"lastChild"];return je(tn)&&(tn=tn[Bt?"firstChild":"lastChild"]),3==tn.nodeType&&0===tn.data.length&&(tn=Bt?jt.previousSibling||jt.nextSibling:jt.nextSibling||jt.previousSibling),Be.remove(jt,!0),tn}function at(Bt){var jt,tn,_n=Bt.commonAncestorContainer;if(Bt=Ot(Bt,dt,Kn),Xt.split){if((jt=me(Bt,Kn))!=(tn=me(Bt))){if(/^(TR|TH|TD)$/.test(jt.nodeName)&&jt.firstChild&&(jt="TR"==jt.nodeName?jt.firstChild.firstChild||jt:jt.firstChild||jt),_n&&/^T(HEAD|BODY|FOOT|R)$/.test(_n.nodeName)&&T(tn)&&tn.firstChild&&(tn=tn.firstChild||tn),Be.isChildOf(jt,tn)&&!yt(tn)&&!T(jt)&&!T(tn))return et(jt=At(jt,"span",{id:"_start","data-mce-type":"bookmark"})),void(jt=_e(Kn));jt=At(jt,"span",{id:"_start","data-mce-type":"bookmark"}),tn=At(tn,"span",{id:"_end","data-mce-type":"bookmark"}),et(jt),et(tn),jt=_e(Kn),tn=_e()}else jt=tn=et(jt);Bt.startContainer=jt.parentNode?jt.parentNode:jt,Bt.startOffset=Pn(jt),Bt.endContainer=tn.parentNode?tn.parentNode:tn,Bt.endOffset=Pn(tn)+1}ct.walk(Bt,function(Hn){pt(Hn,function(In){Ne(In),1===In.nodeType&&"underline"===w.dom.getStyle(In,"text-decoration")&&In.parentNode&&"underline"===C(In.parentNode)&&zt({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,In)})})}var Le,vt,dt=N(Te),Xt=dt[0],$e=!0;if(te)te.nodeType?((vt=Be.createRng()).setStartBefore(te),vt.setEndAfter(te),at(vt)):at(te);else if("false"!==mi(mt.getNode()))mt.isCollapsed()&&Xt.inline&&!Be.select("td[data-mce-selected],th[data-mce-selected]").length?ke("remove",Te,We,pe):(Le=mt.getBookmark(),at(mt.getRng(Kn)),mt.moveToBookmark(Le),Xt.inline&&Z(Te,We,mt.getStart())&&qe(mt.getRng(!0)),w.nodeChanged());else{te=mt.getNode();for(var Rt=0,Ut=dt.length;Rt<Ut&&(!dt[Rt].ceFalseOverride||!zt(dt[Rt],We,te,te));Rt++);}}function H(Te,We,te,pe){function Ne(at,dt,Xt){var Le,vt,Rt,$e=dt[Xt];if(dt.onmatch)return dt.onmatch(at,dt,Xt);if($e)if($e.length===gi){for(Le in $e)if($e.hasOwnProperty(Le)&&(vt="attributes"===Xt?Be.getAttrib(at,Le):he(at,Le),pe&&!vt&&!dt.exact||(!pe||dt.exact)&&!le(vt,xe(Me($e[Le],te),Le))))return}else for(Rt=0;Rt<$e.length;Rt++)if("attributes"===Xt?Be.getAttrib(at,$e[Rt]):he(at,$e[Rt]))return dt;return dt}var xt,et,_e,Xe=N(We);if(Xe&&Te)for(et=0;et<Xe.length;et++)if(ue(Te,xt=Xe[et])&&Ne(Te,xt,"attributes")&&Ne(Te,xt,"styles")){if(_e=xt.classes)for(et=0;et<_e.length;et++)if(!Be.hasClass(Te,_e[et]))return;return xt}}function Z(Te,We,te){function pe(Xe){var xt=Be.getRoot();return Xe!==xt&&(Xe=Be.getParent(Xe,function(et){return!!A(et,Te)||et.parentNode===xt||!!H(et,Te,We,!0)}),H(Xe,Te,We))}var Ne;return te?pe(te):pe(te=mt.getNode())||(Ne=mt.getStart())!=te&&pe(Ne)?Kn:Jn}function ue(Te,We){return le(Te,We.inline)||le(Te,We.block)?Kn:We.selector?1==Te.nodeType&&Be.is(Te,We.selector):void 0}function le(Te,We){return We=""+((We=We||"").nodeName||We),(Te=""+((Te=Te||"").nodeName||Te)).toLowerCase()==We.toLowerCase()}function ve(Te,We,te){pt(Te.childNodes,function(pe){ye(pe)&&(We(pe)&&te(pe),pe.hasChildNodes()&&ve(pe,We,te))})}function ye(Te){return 1==Te.nodeType&&!je(Te)&&!ot(Te)&&!B(Te)}function K(Te){return b.curry(function(We,te){return!(!te||!he(te,We))},Te)}function he(Te,We){return xe(Be.getStyle(Te,We),We)}function xe(Te,We){return"color"!=We&&"backgroundColor"!=We||(Te=Be.toHex(Te)),"fontWeight"==We&&700==Te&&(Te="bold"),"fontFamily"==We&&(Te=Te.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+Te}function Me(Te,We){return"string"!=typeof Te?Te=Te(We):We&&(Te=Te.replace(/%(\w+)/g,function(te,pe){return We[pe]||te})),Te}function ot(Te){return Te&&3===Te.nodeType&&/^([\t \r\n]+|)$/.test(Te.nodeValue)}function At(Te,We,te){var pe=Be.create(We,te);return Te.parentNode.insertBefore(pe,Te),pe.appendChild(Te),pe}function Ot(Te,We,te){function pe(Ut){var jt,tn,_n,Hn,In,ii;if(jt=tn=Ut?Le:$e,Hn=Ut?"previousSibling":"nextSibling",In=Be.getRoot(),3==jt.nodeType&&!ot(jt)&&(Ut?vt>0:Rt<jt.nodeValue.length))return jt;for(;;){if(!We[0].block_expand&&yt(tn))return tn;for(_n=tn[Hn];_n;_n=_n[Hn])if(!je(_n)&&!ot(_n)&&("BR"!=(ii=_n).nodeName||!ii.getAttribute("data-mce-bogus")||ii.nextSibling))return tn;if(tn==In||tn.parentNode==In){jt=tn;break}tn=tn.parentNode}return jt}function Ne(Ut,Bt){for(Bt===gi&&(Bt=3===Ut.nodeType?Ut.length:Ut.childNodes.length);Ut&&Ut.hasChildNodes();)(Ut=Ut.childNodes[Bt])&&(Bt=3===Ut.nodeType?Ut.length:Ut.childNodes.length);return{node:Ut,offset:Bt}}function Xe(Ut){for(var Bt=Ut;Bt;){if(1===Bt.nodeType&&mi(Bt))return"false"===mi(Bt)?Bt:Ut;Bt=Bt.parentNode}return Ut}function xt(Ut,Bt,jt){function tn(Ci,Xn){var li,Xi,hr=Ci.nodeValue;return typeof Xn>"u"&&(Xn=jt?hr.length:0),jt?-1===(li=(li=hr.lastIndexOf(" ",Xn))>(Xi=hr.lastIndexOf("\xa0",Xn))?li:Xi)||te||li++:(li=hr.indexOf(" ",Xn),Xi=hr.indexOf("\xa0",Xn),li=-1!==li&&(-1===Xi||li<Xi)?li:Xi),li}var _n,Hn,In,ii;if(3===Ut.nodeType){if(-1!==(In=tn(Ut,Bt)))return{container:Ut,offset:In};ii=Ut}for(_n=new $(Ut,Be.getParent(Ut,yt)||w.getBody());Hn=_n[jt?"prev":"next"]();)if(3===Hn.nodeType){if(ii=Hn,-1!==(In=tn(Hn)))return{container:Hn,offset:In}}else if(yt(Hn))break;if(ii)return{container:ii,offset:Bt=jt?0:ii.length}}function et(Ut,Bt){var jt,tn,_n,Hn;for(3==Ut.nodeType&&0===Ut.nodeValue.length&&Ut[Bt]&&(Ut=Ut[Bt]),jt=L(Ut),tn=0;tn<jt.length;tn++)for(_n=0;_n<We.length;_n++)if((!("collapsed"in(Hn=We[_n]))||Hn.collapsed===Te.collapsed)&&Be.is(jt[tn],Hn.selector))return jt[tn];return Ut}function _e(Ut,Bt){var jt,tn=Be.getRoot();if(We[0].wrapper||(jt=Be.getParent(Ut,We[0].block,tn)),jt||(jt=Be.getParent(3==Ut.nodeType?Ut.parentNode:Ut,function(_n){return _n!=tn&&P(_n)})),jt&&We[0].wrapper&&(jt=L(jt,"ul,ol").reverse()[0]||jt),!jt)for(jt=Ut;jt[Bt]&&!yt(jt[Bt])&&!le(jt=jt[Bt],"br"););return jt||Ut}var at,dt,Xt,Le=Te.startContainer,vt=Te.startOffset,$e=Te.endContainer,Rt=Te.endOffset;if(1==Le.nodeType&&Le.hasChildNodes()&&3==(Le=Le.childNodes[vt>(at=Le.childNodes.length-1)?at:vt]).nodeType&&(vt=0),1==$e.nodeType&&$e.hasChildNodes()&&3==($e=$e.childNodes[Rt>(at=$e.childNodes.length-1)?at:Rt-1]).nodeType&&(Rt=$e.nodeValue.length),Le=Xe(Le),$e=Xe($e),(je(Le.parentNode)||je(Le))&&3==(Le=(Le=je(Le)?Le:Le.parentNode).nextSibling||Le).nodeType&&(vt=0),(je($e.parentNode)||je($e))&&3==($e=($e=je($e)?$e:$e.parentNode).previousSibling||$e).nodeType&&(Rt=$e.length),We[0].inline&&(Te.collapsed&&((Xt=xt(Le,vt,!0))&&(Le=Xt.container,vt=Xt.offset),(Xt=xt($e,Rt))&&($e=Xt.container,Rt=Xt.offset)),(dt=Ne($e,Rt)).node)){for(;dt.node&&0===dt.offset&&dt.node.previousSibling;)dt=Ne(dt.node.previousSibling);dt.node&&dt.offset>0&&3===dt.node.nodeType&&" "===dt.node.nodeValue.charAt(dt.offset-1)&&dt.offset>1&&($e=dt.node).splitText(dt.offset-1)}return(We[0].inline||We[0].block_expand)&&(We[0].inline&&3==Le.nodeType&&0!==vt||(Le=pe(!0)),We[0].inline&&3==$e.nodeType&&Rt!==$e.nodeValue.length||($e=pe())),We[0].selector&&We[0].expand!==Jn&&!We[0].inline&&(Le=et(Le,"previousSibling"),$e=et($e,"nextSibling")),(We[0].block||We[0].selector)&&(Le=_e(Le,"previousSibling"),$e=_e($e,"nextSibling"),We[0].block&&(yt(Le)||(Le=pe(!0)),yt($e)||($e=pe()))),1==Le.nodeType&&(vt=Pn(Le),Le=Le.parentNode),1==$e.nodeType&&(Rt=Pn($e)+1,$e=$e.parentNode),{startContainer:Le,startOffset:vt,endContainer:$e,endOffset:Rt}}function zt(Te,We,te,pe){var Ne,Xe,xt;if(!ue(te,Te)&&!function Jt(Te,We){return We.links&&"A"==Te.tagName}(te,Te))return Jn;if("all"!=Te.remove)for(pt(Te.styles,function(_e,at){_e=xe(Me(_e,We),at),"number"==typeof at&&(at=_e,pe=0),(Te.remove_similar||!pe||le(he(pe,at),_e))&&Be.setStyle(te,at,""),xt=1}),xt&&""===Be.getAttrib(te,"style")&&(te.removeAttribute("style"),te.removeAttribute("data-mce-style")),pt(Te.attributes,function(_e,at){var dt;if(_e=Me(_e,We),"number"==typeof at&&(at=_e,pe=0),!pe||le(Be.getAttrib(pe,at),_e)){if("class"==at&&(_e=Be.getAttrib(te,at))&&(dt="",pt(_e.split(/\s+/),function(Xt){/mce\-\w+/.test(Xt)&&(dt+=(dt?" ":"")+Xt)}),dt))return void Be.setAttrib(te,at,dt);"class"==at&&te.removeAttribute("className"),si.test(at)&&te.removeAttribute("data-mce-"+at),te.removeAttribute(at)}}),pt(Te.classes,function(_e){_e=Me(_e,We),pe&&!Be.hasClass(pe,_e)||Be.removeClass(te,_e)}),Xe=Be.getAttribs(te),Ne=0;Ne<Xe.length;Ne++){var et=Xe[Ne].nodeName;if(0!==et.indexOf("_")&&0!==et.indexOf("data-"))return Jn}return"none"!=Te.remove?(function Se(Te,We){function te(Xe,xt,et){return!(Xe=ne(Xe,xt,et))||"BR"==Xe.nodeName||yt(Xe)}var Ne,pe=Te.parentNode;We.block&&(vn?pe==Be.getRoot()&&(We.list_block&&le(Te,We.list_block)||pt(Sn(Te.childNodes),function(Xe){ft(vn,Xe.nodeName.toLowerCase())?Ne?Ne.appendChild(Xe):(Ne=At(Xe,vn),Be.setAttribs(Ne,w.settings.forced_root_block_attrs)):Ne=0})):yt(Te)&&!yt(pe)&&(te(Te,Jn)||te(Te.firstChild,Kn,1)||Te.insertBefore(Be.create("br"),Te.firstChild),te(Te,Kn)||te(Te.lastChild,Jn,1)||Te.appendChild(Be.create("br")))),We.selector&&We.inline&&!le(We.inline,Te)||Be.remove(Te,1)}(te,Te),Kn):void 0}function ne(Te,We,te){if(Te)for(We=We?"nextSibling":"previousSibling",Te=te?Te:Te[We];Te;Te=Te[We])if(1==Te.nodeType||!ot(Te))return Te}function ee(Te,We){function te(xt,et){for(pe=xt;pe;pe=pe[et]){if(3==pe.nodeType&&0!==pe.nodeValue.length)return xt;if(1==pe.nodeType&&!je(pe))return pe}return xt}var pe,Ne,Xe=new k(Be);if(Te&&We&&(Te=te(Te,"previousSibling"),We=te(We,"nextSibling"),Xe.compare(Te,We))){for(pe=Te.nextSibling;pe&&pe!=We;)Ne=pe,pe=pe.nextSibling,Te.appendChild(Ne);return Be.remove(We),pt(Sn(We.childNodes),function(xt){Te.appendChild(xt)}),Te}return We}function me(Te,We){var te,pe,Ne;return pe=Te[We?"startOffset":"endOffset"],1==(te=Te[We?"startContainer":"endContainer"]).nodeType&&(!We&&pe&&pe--,te=te.childNodes[pe>(Ne=te.childNodes.length-1)?Ne:pe]),3===te.nodeType&&We&&pe>=te.nodeValue.length&&(te=new $(te,w.getBody()).next()||te),3!==te.nodeType||We||0!==pe||(te=new $(te,w.getBody()).prev()||te),te}function ke(Te,We,te,pe){function Ne($e){var Rt=Be.create("span",{id:Le,"data-mce-bogus":!0,style:vt?"color:red":""});return $e&&Rt.appendChild(w.getDoc().createTextNode(Yn)),Rt}function Xe($e,Rt){for(;$e;){if(3===$e.nodeType&&$e.nodeValue!==Yn||$e.childNodes.length>1)return!1;Rt&&1===$e.nodeType&&Rt.push($e),$e=$e.firstChild}return!0}function xt($e){for(;$e;){if($e.id===Le)return $e;$e=$e.parentNode}}function et($e){var Rt;if($e)for($e=(Rt=new $($e,$e)).current();$e;$e=Rt.next())if(3===$e.nodeType)return $e}function _e($e,Rt){var Ut,Bt;if($e)Bt=mt.getRng(!0),Xe($e)?(!1!==Rt&&(Bt.setStartBefore($e),Bt.setEndBefore($e)),Be.remove($e)):((Ut=et($e)).nodeValue.charAt(0)===Yn&&(Ut.deleteData(0,1),Bt.startContainer==Ut&&Bt.startOffset>0&&Bt.setStart(Ut,Bt.startOffset-1),Bt.endContainer==Ut&&Bt.endOffset>0&&Bt.setEnd(Ut,Bt.endOffset-1)),Be.remove($e,1)),mt.setRng(Bt);else if(!($e=xt(mt.getStart())))for(;$e=Be.get(Le);)_e($e,!1)}function Xt(){var $e;($e=xt(mt.getStart()))&&!Be.isEmpty($e)&&dn($e,function(Rt){1!=Rt.nodeType||Rt.id===Le||Be.isEmpty(Rt)||Be.setAttrib(Rt,"data-mce-bogus",null)},"childNodes")}var Le="_mce_caret",vt=w.settings.caret_debug;w._hasCaretEvents||(Yt=function(){var Rt,$e=[];if(Xe(xt(mt.getStart()),$e))for(Rt=$e.length;Rt--;)Be.setAttrib($e[Rt],"data-mce-bogus","1")},kt=function($e){var Rt=$e.keyCode;_e(),8==Rt&&mt.isCollapsed()&&mt.getStart().innerHTML==Yn&&_e(xt(mt.getStart())),37!=Rt&&39!=Rt||_e(xt(mt.getStart())),Xt()},w.on("SetContent",function($e){$e.selection&&Xt()}),w._hasCaretEvents=!0),"apply"==Te?function at(){var $e,Rt,Ut,Bt,jt,_n;Bt=($e=mt.getRng(!0)).startOffset,_n=$e.startContainer.nodeValue,(Rt=xt(mt.getStart()))&&(Ut=et(Rt));var Hn=/[^\s\u00a0\u00ad\u200b\ufeff]/;_n&&Bt>0&&Bt<_n.length&&Hn.test(_n.charAt(Bt))&&Hn.test(_n.charAt(Bt-1))?(jt=mt.getBookmark(),$e.collapse(!0),$e=Ot($e,N(We)),$e=ct.split($e),m(We,te,$e),mt.moveToBookmark(jt)):(Rt&&Ut.nodeValue===Yn||(Ut=(Rt=Ne(!0)).firstChild,$e.insertNode(Rt),Bt=1),m(We,te,Rt),mt.setCursorLocation(Ut,Bt))}():function dt(){var Rt,Bt,jt,tn,_n,In,ii,$e=mt.getRng(!0),Hn=[];for(tn=Rt=$e.startContainer,3==Rt.nodeType&&($e.startOffset!=Rt.nodeValue.length&&(jt=!0),tn=tn.parentNode);tn;){if(H(tn,We,te,pe)){_n=tn;break}tn.nextSibling&&(jt=!0),Hn.push(tn),tn=tn.parentNode}if(_n)if(jt)Bt=mt.getBookmark(),$e.collapse(!0),$e=Ot($e,N(We),!0),$e=ct.split($e),O(We,te,$e),mt.moveToBookmark(Bt);else{for(tn=ii=Ne(),In=Hn.length-1;In>=0;In--)tn.appendChild(Be.clone(Hn[In],!1)),tn=tn.firstChild;tn.appendChild(Be.doc.createTextNode(Yn)),tn=tn.firstChild;var Ci=Be.getParent(_n,P);Ci&&Be.isEmpty(Ci)?_n.parentNode.replaceChild(ii,_n):Be.insertAfter(ii,_n),mt.setCursorLocation(tn,1),Be.isEmpty(_n)&&Be.remove(_n)}}()}function qe(Te){var pe,Ne,Xe,xt,et,We=Te.startContainer,te=Te.startOffset;if((Te.startContainer!=Te.endContainer||!function I(Te){return Te&&/^(IMG)$/.test(Te.nodeName)}(Te.startContainer.childNodes[Te.startOffset]))&&(3==We.nodeType&&te>=We.nodeValue.length&&(te=Pn(We),We=We.parentNode,pe=!0),1==We.nodeType))for(We=(xt=We.childNodes)[Math.min(te,xt.length-1)],Ne=new $(We,Be.getParent(We,Be.isBlock)),(te>xt.length-1||pe)&&Ne.next(),Xe=Ne.current();Xe;Xe=Ne.next())if(3==Xe.nodeType&&!ot(Xe))return et=Be.create("a",{"data-mce-bogus":"all"},Yn),Xe.parentNode.insertBefore(et,Xe),Te.setStart(Xe,0),mt.setRng(Te),void Be.remove(et)}var wi,gi,kt,Yt,Qe={},Be=w.dom,mt=w.selection,ct=new W(Be),ft=w.schema.isValidChild,yt=Be.isBlock,vn=w.settings.forced_root_block,Pn=Be.nodeIndex,Yn="\ufeff",si=/^(src|href|style)$/,Jn=!1,Kn=!0,mi=Be.getContentEditable,je=R.isBookmarkNode,pt=S.each,Sn=S.grep,dn=S.walk;(0,S.extend)(this,{get:N,register:G,unregister:function M(Te){return Te&&Qe[Te]&&delete Qe[Te],Qe},apply:m,remove:O,toggle:function U(Te,We,te){var pe=N(Te);!Z(Te,We,te)||"toggle"in pe[0]&&!pe[0].toggle?m(Te,We,te):O(Te,We,te)},match:Z,matchAll:function J(Te,We){var te,pe=[],Ne={};return te=mt.getStart(),Be.getParent(te,function(Xe){var xt,et;for(xt=0;xt<Te.length;xt++)!Ne[et=Te[xt]]&&H(Xe,et,We)&&(Ne[et]=!0,pe.push(et))},Be.getRoot()),pe},matchNode:H,canApply:function de(Te){var pe,Ne,Xe,xt,We=N(Te);if(We)for(pe=L(mt.getStart()),Xe=We.length-1;Xe>=0;Xe--){if(!(xt=We[Xe].selector)||We[Xe].defaultBlock)return Kn;for(Ne=pe.length-1;Ne>=0;Ne--)if(Be.is(pe[Ne],xt))return Kn}return Jn},formatChanged:function se(Te,We,te){var pe;return wi||(wi={},pe={},w.on("NodeChange",function(Ne){var Xe=L(Ne.element),xt={};Xe=S.grep(Xe,function(et){return 1==et.nodeType&&!et.getAttribute("data-mce-bogus")}),pt(wi,function(et,_e){pt(Xe,function(at){return H(at,_e,{},et.similar)?(pe[_e]||(pt(et,function(dt){dt(!0,{node:at,format:_e,parents:Xe})}),pe[_e]=et),xt[_e]=et,!1):!A(at,_e)&&void 0})}),pt(pe,function(et,_e){xt[_e]||(delete pe[_e],pt(et,function(at){at(!1,{node:Ne.element,format:_e,parents:Xe})}))})})),pt(Te.split(","),function(Ne){wi[Ne]||(wi[Ne]=[],wi[Ne].similar=te),wi[Ne].push(We)}),this},getCssText:function ae(Te){return y.getCssText(w,Te)}}),function D(){G({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(Te,We,te){pt(te,function(pe,Ne){Be.setAttrib(Te,Ne,pe)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),pt("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(Te){G(Te,{block:Te,remove:"all"})}),G(w.settings.formats)}(),function z(){w.addShortcut("meta+b","bold_desc","Bold"),w.addShortcut("meta+i","italic_desc","Italic"),w.addShortcut("meta+u","underline_desc","Underline");for(var Te=1;Te<=6;Te++)w.addShortcut("access+"+Te,"",["FormatBlock",!1,"h"+Te]);w.addShortcut("access+7","",["FormatBlock",!1,"p"]),w.addShortcut("access+8","",["FormatBlock",!1,"div"]),w.addShortcut("access+9","",["FormatBlock",!1,"address"])}(),w.on("BeforeGetContent",function(Te){Yt&&"raw"!=Te.format&&Yt()}),w.on("mouseup keydown",function(Te){kt&&kt(Te)})}}),He(Ei,[],function(){return{KEEP:0,DELETE:2,INSERT:1,diff:function(b,S){var y=b.length+S.length+2,x=new Array(y),w=new Array(y),T=function(D,z,N,G,M){var A=L(D,z,N,G);if(null===A||A.start===z&&A.diag===z-G||A.end===D&&A.diag===D-N)for(var C=D,g=N;C<z||g<G;)C<z&&g<G&&b[C]===S[g]?(M.push([0,b[C]]),++C,++g):z-D>G-N?(M.push([2,b[C]]),++C):(M.push([1,S[g]]),++g);else{T(D,A.start,N,A.start-A.diag,M);for(var m=A.start;m<A.end;++m)M.push([0,b[m]]);T(A.end,z,A.end-A.diag,G,M)}},I=function(D,z,N,G){for(var M=D;M-z<G&&M<N&&b[M]===S[M-z];)++M;return function(D,z,N){return{start:D,end:z,diag:N}}(D,M,z)},L=function(D,z,N,G){var M=z-D,A=G-N;if(0===M||0===A)return null;var C=M-A,g=A+M,m=(g%2==0?g:g+1)/2;x[1+m]=D,w[1+m]=z+1;for(var O=0;O<=m;++O){for(var U=-O;U<=O;U+=2){var H=U+m;x[H]=U===-O||U!=O&&x[H-1]<x[H+1]?x[H+1]:x[H-1]+1;for(var Z=x[H],J=Z-D+N-U;Z<z&&J<G&&b[Z]===S[J];)x[H]=++Z,++J;if(C%2!=0&&C-O<=U&&U<=C+O&&w[H-C]<=x[H])return I(w[H-C],U+D-N,z,G)}for(U=C-O;U<=C+O;U+=2){for(w[H=U+m-C]=U===C-O||U!=C+O&&w[H+1]<=w[H-1]?w[H+1]-1:w[H-1],J=(Z=w[H]-1)-D+N-U;Z>=D&&J>=N&&b[Z]===S[J];)w[H]=Z--,J--;if(C%2==0&&-O<=U&&U<=O&&w[H]<=x[H+C])return I(w[H],U+D-N,z,G)}}},B=[];return T(0,b.length,0,S.length,B),B}}}),He(Ct,[Vt,Ee,Ei],function($,W,R){var k=function(T){return 1===T.nodeType?T.outerHTML:3===T.nodeType?W.encodeRaw(T.data,!1):8===T.nodeType?"\x3c!--"+T.data+"--\x3e":""};return{read:function(T){return $.map(T.childNodes,k)},write:function(T,I){var L=$.map(I.childNodes,k);return function(T,I){var L=0;$.each(T,function(B){B[0]===R.KEEP?L++:B[0]===R.INSERT?(function(T,I,L){var B=function(T){var I,L,B;for(B=document.createElement("div"),I=document.createDocumentFragment(),T&&(B.innerHTML=T);L=B.firstChild;)I.appendChild(L);return I}(I);if(T.hasChildNodes()&&L<T.childNodes.length){var D=T.childNodes[L];D.parentNode.insertBefore(B,D)}else T.appendChild(B)}(I,B[1],L),L++):B[0]===R.DELETE&&function(T,I){if(T.hasChildNodes()&&I<T.childNodes.length){var L=T.childNodes[I];L.parentNode.removeChild(L)}}(I,L)})}(R.diff(L,T),I),I}}}),He(bt,[Vt,Ct],function($,W){var k=function(P){return{type:"fragmented",fragments:P,content:"",bookmark:null,beforeBookmark:null}},b=function(P){return{type:"complete",fragments:null,content:P,bookmark:null,beforeBookmark:null}},x=function(P){return"fragmented"===P.type?P.fragments.join(""):P.content};return{createFragmentedLevel:k,createCompleteLevel:b,createFromEditor:function(P){var T,I,L;return T=W.read(P.getBody()),function(P){return-1!==P.indexOf("</iframe>")}(I=(L=$.map(T,function(B){return P.serializer.trimContent(B)})).join(""))?k(L):b(I)},applyToEditor:function(P,T,I){"fragmented"===T.type?W.write(T.fragments,P.getBody()):P.setContent(T.content,{format:"raw"}),P.selection.moveToBookmark(I?T.beforeBookmark:T.bookmark)},isEq:function(P,T){return x(P)===x(T)}}}),He(en,[on,Fe,bt],function($,W,R){return function(k){function b(B){k.setDirty(B)}function S(B){x.typing=!1,x.add({},B)}function y(){x.typing&&(x.typing=!1,x.add())}var T,I,x=this,w=0,P=[],L=0;return k.on("init",function(){x.add()}),k.on("BeforeExecCommand",function(B){var D=B.command;"Undo"!==D&&"Redo"!==D&&"mceRepaint"!==D&&(y(),x.beforeChange())}),k.on("ExecCommand",function(B){var D=B.command;"Undo"!==D&&"Redo"!==D&&"mceRepaint"!==D&&S(B)}),k.on("ObjectResizeStart Cut",function(){x.beforeChange()}),k.on("SaveContent ObjectResized blur",S),k.on("DragEnd",S),k.on("KeyUp",function(B){var D=B.keyCode;B.isDefaultPrevented()||((D>=33&&D<=36||D>=37&&D<=40||45===D||B.ctrlKey)&&(S(),k.nodeChanged()),46!==D&&8!==D||k.nodeChanged(),I&&x.typing&&(k.isDirty()||(b(P[0]&&!R.isEq(R.createFromEditor(k),P[0])),k.isDirty()&&k.fire("change",{level:P[0],lastLevel:null})),k.fire("TypingUndo"),I=!1,k.nodeChanged()))}),k.on("KeyDown",function(B){var D=B.keyCode;if(!B.isDefaultPrevented()){if(D>=33&&D<=36||D>=37&&D<=40||45===D)return void(x.typing&&S(B));!(D<16||D>20)||224===D||91===D||x.typing||B.ctrlKey&&!B.altKey||B.metaKey||(x.beforeChange(),x.typing=!0,x.add({},B),I=!0)}}),k.on("MouseDown",function(B){x.typing&&S(B)}),k.addShortcut("meta+z","","Undo"),k.addShortcut("meta+y,meta+shift+z","","Redo"),k.on("AddUndo Undo Redo ClearUndos",function(B){B.isDefaultPrevented()||k.nodeChanged()}),x={data:P,typing:!1,beforeChange:function(){L||(T=k.selection.getBookmark(2,!0))},add:function(B,D){var z,G,M,N=k.settings;if(M=R.createFromEditor(k),B=W.extend(B=B||{},M),L||k.removed||k.fire("BeforeAddUndo",{level:B,lastLevel:G=P[w],originalEvent:D}).isDefaultPrevented()||G&&R.isEq(G,B))return null;if(P[w]&&(P[w].beforeBookmark=T),N.custom_undo_redo_levels&&P.length>N.custom_undo_redo_levels){for(z=0;z<P.length-1;z++)P[z]=P[z+1];P.length--,w=P.length}B.bookmark=k.selection.getBookmark(2,!0),w<P.length-1&&(P.length=w+1),P.push(B),w=P.length-1;var A={level:B,lastLevel:G,originalEvent:D};return k.fire("AddUndo",A),w>0&&(b(!0),k.fire("change",A)),B},undo:function(){var B;return x.typing&&(x.add(),x.typing=!1),w>0&&(B=P[--w],R.applyToEditor(k,B,!0),b(!0),k.fire("undo",{level:B})),B},redo:function(){var B;return w<P.length-1&&(B=P[++w],R.applyToEditor(k,B,!1),b(!0),k.fire("redo",{level:B})),B},clear:function(){P=[],w=0,x.typing=!1,x.data=P,k.fire("ClearUndos")},hasUndo:function(){return w>0||x.typing&&P[0]&&!R.isEq(R.createFromEditor(k),P[0])},hasRedo:function(){return w<P.length-1&&!x.typing},transact:function(B){y(),x.beforeChange();try{L++,B()}finally{L--}return x.add()},extra:function(B,D){var N;x.transact(B)&&(N=P[w].bookmark,R.applyToEditor(k,P[w-1],!0),x.transact(D)&&(P[w-1].beforeBookmark=N))}}}}),He(un,[fe,Ke,re,St],function($,W,R,k){var b=k.ie&&k.ie<11;return function(S){var x=S.dom,w=S.selection,P=S.settings,T=S.undoManager,I=S.schema,L=I.getNonEmptyElements(),B=I.getMoveCaretBeforeOnEnterElements();S.on("keydown",function(D){13==D.keyCode&&!1!==function y(D){function z(ne){return ne&&x.isBlock(ne)&&!/^(TD|TH|CAPTION|FORM)$/.test(ne.nodeName)&&!/^(fixed|absolute)/i.test(ne.style.position)&&"true"!==x.getContentEditable(ne)}function G(ne){var ee;x.isBlock(ne)&&(ee=w.getRng(),ne.appendChild(x.create("span",null,"\xa0")),w.select(ne),ne.lastChild.outerHTML="",w.setRng(ee))}function A(ne){var me,ke,qe,Be,Qe=ne;if(ne){if(k.ie&&k.ie<9&&ie&&ie.firstChild&&ie.firstChild==ie.lastChild&&"BR"==ie.firstChild.tagName&&x.remove(ie.firstChild),/^(LI|DT|DD)$/.test(ne.nodeName)){var mt=function ee(ct){for(;ct;){if(1==ct.nodeType||3==ct.nodeType&&ct.data&&/[\r\n\s]/.test(ct.data))return ct;ct=ct.nextSibling}}(ne.firstChild);mt&&/^(UL|OL|DL)$/.test(mt.nodeName)&&ne.insertBefore(x.doc.createTextNode("\xa0"),ne.firstChild)}if(qe=x.createRng(),k.ie||ne.normalize(),ne.hasChildNodes()){for(me=new $(ne,ne);ke=me.current();){if(3==ke.nodeType){qe.setStart(ke,0),qe.setEnd(ke,0);break}if(B[ke.nodeName.toLowerCase()]){qe.setStartBefore(ke),qe.setEndBefore(ke);break}Qe=ke,ke=me.next()}ke||(qe.setStart(Qe,0),qe.setEnd(Qe,0))}else"BR"==ne.nodeName?ne.nextSibling&&x.isBlock(ne.nextSibling)?((!he||he<9)&&(Be=x.create("br"),ne.parentNode.insertBefore(Be,ne)),qe.setStartBefore(ne),qe.setEndBefore(ne)):(qe.setStartAfter(ne),qe.setEndAfter(ne)):(qe.setStart(ne,0),qe.setEnd(ne,0));w.setRng(qe),x.remove(Be),w.scrollIntoView(ne)}}function C(ne){var ee=P.forced_root_block;ee&&ee.toLowerCase()===ne.tagName.toLowerCase()&&x.setAttribs(ne,P.forced_root_block_attrs)}function g(ne){ne.innerHTML=b?"":'<br data-mce-bogus="1">'}function m(ne){var me,ke,qe,ee=ye,Qe=I.getTextInlineElements();if(ne||"TABLE"==Ot?C(me=x.create(ne||zt)):me=ie.cloneNode(!1),qe=me,!1!==P.keep_styles)do{if(Qe[ee.nodeName]){if("_mce_caret"==ee.id)continue;ke=ee.cloneNode(!1),x.setAttrib(ke,"id",""),me.hasChildNodes()?(ke.appendChild(me.firstChild),me.appendChild(ke)):(qe=ke,me.appendChild(ke))}}while((ee=ee.parentNode)&&ee!=ve);return b||(qe.innerHTML='<br data-mce-bogus="1">'),me}function O(ne){var ee,me,ke;if(3==ye.nodeType&&(ne?K>0:K<ye.nodeValue.length))return!1;if(ye.parentNode==ie&&Se&&!ne||ne&&1==ye.nodeType&&ye==ie.firstChild)return!0;if("TABLE"===ye.nodeName||ye.previousSibling&&"TABLE"==ye.previousSibling.nodeName)return Se&&!ne||!Se&&ne;for(ee=new $(ye,ie),3==ye.nodeType&&(ne&&0===K?ee.prev():ne||K!=ye.nodeValue.length||ee.next());me=ee.current();){if(1===me.nodeType){if(!me.getAttribute("data-mce-bogus")&&(ke=me.nodeName.toLowerCase(),L[ke]&&"br"!==ke))return!1}else if(3===me.nodeType&&!/^[ \t\r\n]*$/.test(me.nodeValue))return!1;ne?ee.prev():ee.next()}return!0}function Z(){S.execCommand("InsertLineBreak",!1,D)}function ae(){Me=/^(H[1-6]|PRE|FIGURE)$/.test(Ot)&&"HGROUP"!=Jt?m(zt):m(),P.end_container_on_empty_block&&z(At)&&x.isEmpty(ie)?Me=x.split(At,ie):x.insertAfter(Me,ie),A(Me)}var ue,le,ve,ye,K,ie,he,xe,Me,ot,At,Ot,Jt,zt,Se;if(ue=w.getRng(!0),!D.isDefaultPrevented()){if(!ue.collapsed)return void S.execCommand("Delete");if(new W(x).normalize(ue),ye=ue.startContainer,K=ue.startOffset,zt=(zt=(P.force_p_newlines?"p":"")||P.forced_root_block)?zt.toUpperCase():"",he=x.doc.documentMode,xe=D.shiftKey,1==ye.nodeType&&ye.hasChildNodes()&&(Se=K>ye.childNodes.length-1,ye=ye.childNodes[Math.min(K,ye.childNodes.length-1)]||ye,K=Se&&3==ye.nodeType?ye.nodeValue.length:0),ve=function de(ne){var me,ke,ee=x.getRoot();for(me=ne;me!==ee&&"false"!==x.getContentEditable(me);)"true"===x.getContentEditable(me)&&(ke=me),me=me.parentNode;return me!==ee?ke:ee}(ye)){if(T.beforeChange(),!x.isBlock(ve)&&ve!=x.getRoot())return void(zt&&!xe||Z());if((zt&&!xe||!zt&&xe)&&(ye=function U(ne,ee){var me,ke,qe,Qe,Be,mt,ct=zt||"P";if(!(ke=x.getParent(ne,x.isBlock))||!z(ke)){if(mt=(ke=ke||ve)==S.getBody()||function N(ne){return ne&&/^(TD|TH|CAPTION)$/.test(ne.nodeName)}(ke)?ke.nodeName.toLowerCase():ke.parentNode.nodeName.toLowerCase(),!ke.hasChildNodes())return C(me=x.create(ct)),ke.appendChild(me),ue.setStart(me,0),ue.setEnd(me,0),me;for(Qe=ne;Qe.parentNode!=ke;)Qe=Qe.parentNode;for(;Qe&&!x.isBlock(Qe);)qe=Qe,Qe=Qe.previousSibling;if(qe&&I.isValidChild(mt,ct.toLowerCase())){for(C(me=x.create(ct)),qe.parentNode.insertBefore(me,qe),Qe=qe;Qe&&!x.isBlock(Qe);)Be=Qe.nextSibling,me.appendChild(Qe),Qe=Be;ue.setStart(ne,ee),ue.setEnd(ne,ee)}}return ne}(ye,K)),ie=x.getParent(ye,x.isBlock),At=ie?x.getParent(ie.parentNode,x.isBlock):null,Ot=ie?ie.nodeName.toUpperCase():"","LI"!=(Jt=At?At.nodeName.toUpperCase():"")||D.ctrlKey||(ie=At,Ot=Jt),S.undoManager.typing&&(S.undoManager.typing=!1,S.undoManager.add()),/^(LI|DT|DD)$/.test(Ot)){if(!zt&&xe)return void Z();if(x.isEmpty(ie))return void function H(){function ne(ke){for(var qe=At[ke?"firstChild":"lastChild"];qe&&1!=qe.nodeType;)qe=qe[ke?"nextSibling":"previousSibling"];return qe===ie}function ee(){var ke=At.parentNode;return/^(LI|DT|DD)$/.test(ke.nodeName)?ke:At}if(At!=S.getBody()){var me=At.parentNode.nodeName;/^(OL|UL|LI)$/.test(me)&&(zt="LI"),Me=zt?m(zt):x.create("BR"),ne(!0)&&ne()?"LI"==me?x.insertAfter(Me,ee()):x.replace(Me,At):ne(!0)?"LI"==me?(x.insertAfter(Me,ee()),Me.appendChild(x.doc.createTextNode(" ")),Me.appendChild(At)):At.parentNode.insertBefore(Me,At):ne()?(x.insertAfter(Me,ee()),G(Me)):(At=ee(),(le=ue.cloneRange()).setStartAfter(ie),le.setEndAfter(At),ot=le.extractContents(),"LI"==zt&&"LI"==ot.firstChild.nodeName?(Me=ot.firstChild,x.insertAfter(ot,At)):(x.insertAfter(ot,At),x.insertAfter(Me,At))),x.remove(ie),A(Me),T.add()}}()}if("PRE"==Ot&&!1!==P.br_in_pre){if(!xe)return void Z()}else if(!zt&&!xe&&"LI"!=Ot||zt&&xe)return void Z();zt&&ie===S.getBody()||(zt=zt||"P",R.isCaretContainerBlock(ie)?(Me=R.showCaretContainerBlock(ie),x.isEmpty(ie)&&g(ie),A(Me)):O()?ae():O(!0)?(G(Me=ie.parentNode.insertBefore(m(),ie)),A(ie)):((le=ue.cloneRange()).setEndAfter(ie),function J(ne){do{3===ne.nodeType&&(ne.nodeValue=ne.nodeValue.replace(/^[\r\n]+/,"")),ne=ne.firstChild}while(ne)}(ot=le.extractContents()),Me=ot.firstChild,x.insertAfter(ot,ie),function M(ne){var ke,ee=ne,me=[];if(ee){for(;ee=ee.firstChild;){if(x.isBlock(ee))return;1!=ee.nodeType||L[ee.nodeName.toLowerCase()]||me.push(ee)}for(ke=me.length;ke--;)(!(ee=me[ke]).hasChildNodes()||ee.firstChild==ee.lastChild&&""===ee.firstChild.nodeValue||"A"==ee.nodeName&&" "===(ee.innerText||ee.textContent))&&x.remove(ee)}}(Me),function se(ne){var ee;b||(ne.normalize(),(ee=ne.lastChild)&&!/^(left|right)$/gi.test(x.getStyle(ee,"float",!0))||x.add(ne,"br"))}(ie),x.isEmpty(ie)&&g(ie),Me.normalize(),x.isEmpty(Me)?(x.remove(Me),ae()):A(Me)),x.setAttrib(Me,"id",""),S.fire("NewBlock",{newBlock:Me}),T.typing=!1,T.add())}}}(D)&&D.preventDefault()})}}),He(Gt,[],function(){return function($){var R=$.settings,k=$.dom,b=$.selection,S=$.schema,y=S.getBlockElements();R.forced_root_block&&$.on("NodeChange",function W(){var P,T,I,L,B,D,z,G,M,A,C,g,x=b.getStart(),w=$.getBody(),N=-16777215;if(g=R.forced_root_block,x&&1===x.nodeType&&g){for(;x&&x!=w;){if(y[x.nodeName])return;x=x.parentNode}if((P=b.getRng()).setStart){T=P.startContainer,I=P.startOffset,L=P.endContainer,B=P.endOffset;try{M=$.getDoc().activeElement===w}catch{}}else P.item&&(x=P.item(0),(P=$.getDoc().body.createTextRange()).moveToElementText(x)),M=P.parentElement().ownerDocument===$.getDoc(),(A=P.duplicate()).collapse(!0),I=-1*A.move("character",N),A.collapsed||((A=P.duplicate()).collapse(!1),B=-1*A.move("character",N)-I);for(x=w.firstChild,C=w.nodeName.toLowerCase();x;)if((3===x.nodeType||1==x.nodeType&&!y[x.nodeName])&&S.isValidChild(C,g.toLowerCase())){if(3===x.nodeType&&0===x.nodeValue.length){z=x,x=x.nextSibling,k.remove(z);continue}D||(D=k.create(g,$.settings.forced_root_block_attrs),x.parentNode.insertBefore(D,x),G=!0),z=x,x=x.nextSibling,D.appendChild(z)}else D=null,x=x.nextSibling;if(G&&M){if(P.setStart)P.setStart(T,I),P.setEnd(L,B),b.setRng(P);else try{(P=$.getDoc().body.createTextRange()).moveToElementText(w),P.collapse(!0),P.moveStart("character",I),B>0&&P.moveEnd("character",B),P.select()}catch{}$.nodeChanged()}}})}}),He(hn,[lt,fe,tt,pn,re,Wt],function($,W,R,k,b,S){function y(ae){return ae>0}function x(ae){return ae<0}function w(ae,ue){for(var le;le=ae(ue);)if(!U(le))return le;return null}function T(ae,ue){for(ae=ae.parentNode;ae&&ae!=ue;ae=ae.parentNode)if(C(ae))return ae;return ue}function I(ae,ue){for(;ae&&ae!=ue;){if(m(ae))return ae;ae=ae.parentNode}return null}function z(ae,ue){var le=ue.ownerDocument.createRange();return ae?(le.setStartBefore(ue),le.setEndBefore(ue)):(le.setStartAfter(ue),le.setEndAfter(ue)),le}function N(ae,ue,le){return I(ue,ae)==I(le,ae)}function G(ae,ue,le){var ve,ye;for(ye=ae?"previousSibling":"nextSibling";le&&le!=ue;){if(O(ve=le[ye])&&(ve=ve[ye]),g(ve)){if(N(ue,ve,le))return ve;break}if(J(ve))break;le=le.parentNode}return null}function A(ae,ue){return g(function D(ae,ue){var le,ve;return ue?(le=ue.container(),ve=ue.offset(),Z(le)?le.childNodes[ve+ae]:null):null}(ae,ue))}var C=R.isContentEditableTrue,g=R.isContentEditableFalse,m=R.matchStyleValues("display","block table table-cell table-caption"),O=b.isCaretContainer,U=b.isCaretContainerBlock,H=$.curry,Z=R.isElement,J=S.isCaretCandidate,de=H(z,!0),se=H(z,!1);return{isForwards:y,isBackwards:x,findNode:function P(ae,ue,le,ve,ye){var K=new W(ae,ve);if(x(ue)){if((g(ae)||U(ae))&&le(ae=w(K.prev,!0)))return ae;for(;ae=w(K.prev,ye);)if(le(ae))return ae}if(y(ue)){if((g(ae)||U(ae))&&le(ae=w(K.next,!0)))return ae;for(;ae=w(K.next,ye);)if(le(ae))return ae}return null},getEditingHost:T,getParentBlock:I,isInSameBlock:function L(ae,ue,le){return I(ae.container(),le)==I(ue.container(),le)},isInSameEditingHost:function B(ae,ue,le){return T(ae.container(),le)==T(ue.container(),le)},isBeforeContentEditableFalse:H(A,0),isAfterContentEditableFalse:H(A,-1),normalizeRange:function M(ae,ue,le){var ve,ye,K,ie,he=H(G,!0,ue),xe=H(G,!1,ue);if(K=le.startOffset,b.isCaretContainerBlock(ye=le.startContainer)){if(Z(ye)||(ye=ye.parentNode),"before"==(ie=ye.getAttribute("data-mce-caret"))&&g(ve=ye.nextSibling))return de(ve);if("after"==ie&&g(ve=ye.previousSibling))return se(ve)}if(!le.collapsed)return le;if(R.isText(ye)){if(O(ye)){if(1===ae){if(ve=xe(ye))return de(ve);if(ve=he(ye))return se(ve)}if(-1===ae){if(ve=he(ye))return se(ve);if(ve=xe(ye))return de(ve)}return le}if(b.endsWithCaretContainer(ye)&&K>=ye.data.length-1)return 1===ae&&(ve=xe(ye))?de(ve):le;if(b.startsWithCaretContainer(ye)&&K<=1)return-1===ae&&(ve=he(ye))?se(ve):le;if(K===ye.data.length)return(ve=xe(ye))?de(ve):le;if(0===K)return(ve=he(ye))?se(ve):le}return le}}}),He(wn,[tt,Wt,pn,hn,Vt,lt],function($,W,R,k,b,S){function x(C,g){return C.hasChildNodes()&&g<C.childNodes.length?C.childNodes[g]:null}function w(C,g){if(z(C)){if(G(g.previousSibling)&&!L(g.previousSibling))return R.before(g);if(L(g))return R(g,0)}if(N(C)){if(G(g.nextSibling)&&!L(g.nextSibling))return R.after(g);if(L(g))return R(g,g.data.length)}return N(C)?D(g)?R.before(g):R.after(g):R.before(g)}function T(C,g,m){var O,U,H,Z,J,de,se;if(!B(m)||!g)return null;if(O=(se=g).container(),U=se.offset(),L(O)){if(N(C)&&U>0)return R(O,--U);if(z(C)&&U<O.length)return R(O,++U);H=O}else{if(N(C)&&U>0&&(Z=x(O,U-1),G(Z)))return!M(Z)&&(J=k.findNode(Z,C,A,Z))?L(J)?R(J,J.data.length):R.after(J):L(Z)?R(Z,Z.data.length):R.before(Z);if(z(C)&&U<O.childNodes.length&&(Z=x(O,U),G(Z)))return function P(C,g){var m;return!!$.isBr(C)&&!!(m=T(1,R.after(C),g))&&!k.isInSameBlock(R.before(C),R.before(m),g)}(Z,m)?T(C,R.after(Z),m):!M(Z)&&(J=k.findNode(Z,C,A,Z))?L(J)?R(J,0):R.before(J):L(Z)?R(Z,0):R.after(Z);H=se.getNode()}return(z(C)&&se.isAtEnd()||N(C)&&se.isAtStart())&&(H=k.findNode(H,C,S.constant(!0),m,!0),A(H))?w(C,H):(Z=k.findNode(H,C,A,m),de=b.last(b.filter(function y(C,g){for(var m=[];C&&C!=g;)m.push(C),C=C.parentNode;return m}(O,m),I)),!de||Z&&de.contains(Z)?Z?w(C,Z):null:se=z(C)?R.after(de):R.before(de))}var I=$.isContentEditableFalse,L=$.isText,B=$.isElement,D=$.isBr,z=k.isForwards,N=k.isBackwards,G=W.isCaretCandidate,M=W.isAtomic,A=W.isEditableCaretCandidate;return function(C){return{next:function(g){return T(1,g,C)},prev:function(g){return T(-1,g,C)}}}}),He(On,[Fe,wn,pn],function($,W,R){var y=function(M){return $.grep(M.childNodes,function(A){return"LI"===A.nodeName})},w=function(M){return M.length>0&&function(M){return!M.firstChild}(M[M.length-1])?M.slice(0,-1):M},P=function(M,A){var C=M.getParent(A,M.isBlock);return C&&"LI"===C.nodeName?C:null},B=function(M,A){var C=R.after(M),m=new W(A).prev(C);return m?m.toRange():null};return{isListFragment:function(M){var A=M.firstChild,C=M.lastChild;return A&&"meta"===A.name&&(A=A.next),C&&"mce_marker"===C.attr("id")&&(C=C.prev),!(!A||A!==C||"ul"!==A.name&&"ol"!==A.name)},insertAtCaret:function(M,A,C,g){var m=function(M,A,C){var g=A.serialize(C);return function(M){var A=M.firstChild,C=M.lastChild;return A&&"META"===A.nodeName&&A.parentNode.removeChild(A),C&&"mce_marker"===C.id&&C.parentNode.removeChild(C),M}(M.createFragment(g))}(A,M,g),O=P(A,C.startContainer),U=w(y(m.firstChild)),J=A.getRoot(),de=function(se){var ae=R.fromRangeStart(C),ue=new W(A.getRoot()),le=1===se?ue.prev(ae):ue.next(ae);return!le||P(A,le.getNode())!==O};return de(1)?function(M,A,C){var g=M.parentNode;return $.each(A,function(m){g.insertBefore(m,M)}),function(M,A){var C=R.before(M),m=new W(A).next(C);return m?m.toRange():null}(M,C)}(O,U,J):de(2)?function(M,A,C,g){return g.insertAfter(A.reverse(),M),B(A[0],C)}(O,U,J,A):function(M,A,C,g){var m=function(M,A){var C=A.cloneRange(),g=A.cloneRange();return C.setStartBefore(M),g.setEndAfter(M),[C.cloneContents(),g.cloneContents()]}(M,g),O=M.parentNode;return O.insertBefore(m[0],M),$.each(A,function(U){O.insertBefore(U,M)}),O.insertBefore(m[1],M),O.removeChild(M),B(A[A.length-1],C)}(O,U,J,C)},isParentBlockLi:function(M,A){return!!P(M,A)},trimListItems:w,listItems:y}}),He(ai,[St,Fe,gn,wn,pn,Un,tt,On],function($,W,R,k,b,S,y,x){var w=y.matchNodeNames("td th");return{insertAtCaret:function(B,D){var z=function(B){var D;return"string"!=typeof B?(D=W.extend({paste:B.paste,data:{paste:B.paste}},B),{content:B.content,details:D}):{content:B,details:{}}}(D);!function(B,D,z){var U,H,Z,J,de,se,ae,ue,le,ve,ye,K,ie=B.schema.getTextInlineElements(),he=B.selection,xe=B.dom;/^ | $/.test(D)&&(D=function N(Ot){function Jt(ee){return Se[ee]&&3==Se[ee].nodeType}var zt,Se,ne;return ne=(zt=he.getRng(!0)).startOffset,3==(Se=zt.startContainer).nodeType&&(ne>0?Ot=Ot.replace(/^&nbsp;/," "):Jt("previousSibling")||(Ot=Ot.replace(/^ /,"&nbsp;")),ne<Se.length?Ot=Ot.replace(/&nbsp;(<br>|)$/," "):Jt("nextSibling")||(Ot=Ot.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),Ot}(D)),U=B.parser,K=z.merge,H=new R({validate:B.settings.validate},B.schema),ye='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',B.fire("BeforeSetContent",se={content:D,format:"html",selection:!0}),-1==(D=se.content).indexOf("{$caret}")&&(D+="{$caret}"),D=D.replace(/\{\$caret\}/,ye);var Me=(ue=he.getRng()).startContainer||(ue.parentElement?ue.parentElement():null),ot=B.getBody();Me===ot&&he.isCollapsed()&&xe.isBlock(ot.firstChild)&&function m(Ot){return Ot&&!B.schema.getShortEndedElements()[Ot.nodeName]}(ot.firstChild)&&xe.isEmpty(ot.firstChild)&&((ue=xe.createRng()).setStart(ot.firstChild,0),ue.setEnd(ot.firstChild,0),he.setRng(ue)),he.isCollapsed()||(B.selection.setRng(B.selection.getRng()),B.getDoc().execCommand("Delete",!1,null),function G(){var Ot,Jt,zt;zt=(Ot=he.getRng(!0)).startOffset,3==(Jt=Ot.startContainer).nodeType&&Ot.collapsed&&("\xa0"===Jt.data[zt]?(Jt.deleteData(zt,1),/[\u00a0| ]$/.test(D)||(D+=" ")):"\xa0"===Jt.data[zt-1]&&(Jt.deleteData(zt-1,1),/[\u00a0| ]$/.test(D)||(D=" "+D)))}());var At={context:(Z=he.getNode()).nodeName.toLowerCase(),data:z.data};if(de=U.parse(D,At),!0===z.paste&&x.isListFragment(de)&&x.isParentBlockLi(xe,Z))return ue=x.insertAtCaret(H,xe,B.selection.getRng(!0),de),B.selection.setRng(ue),void B.fire("SetContent",se);if(function A(Ot){for(var Jt=Ot;Jt=Jt.walk();)1===Jt.type&&Jt.attr("data-mce-fragment","1")}(de),"mce_marker"==(le=de.lastChild).attr("id"))for(ae=le,le=le.prev;le;le=le.walk(!0))if(3==le.type||!xe.isBlock(le.name)){B.schema.isValidChild(le.parent.name,"span")&&le.parent.insert(ae,le,"br"===le.name);break}if(B._selectionOverrides.showBlockCaretContainer(Z),At.invalid){for(he.setContent(ye),Z=he.getNode(),J=B.getBody(),9==Z.nodeType?Z=le=J:le=Z;le!==J;)Z=le,le=le.parentNode;D=Z==J?J.innerHTML:xe.getOuterHTML(Z),D=H.serialize(U.parse(D.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return H.serialize(de)}))),Z==J?xe.setHTML(J,D):xe.setOuterHTML(Z,D)}else D=H.serialize(de),function(B,D,z){if("all"===z.getAttribute("data-mce-bogus"))z.parentNode.insertBefore(B.dom.createFragment(D),z);else{var N=z.firstChild;!N||N===z.lastChild&&"BR"===N.nodeName?B.dom.setHTML(z,D):B.selection.setContent(D)}}(B,D,Z);(function M(){if(K){var Ot=B.getBody(),Jt=new S(xe);W.each(xe.select("*[data-mce-fragment]"),function(zt){for(var Se=zt.parentNode;Se&&Se!=Ot;Se=Se.parentNode)ie[zt.nodeName.toLowerCase()]&&Jt.compare(Se,zt)&&xe.remove(zt,!0)})}})(),function O(Ot){var Se,ne,ee;if(Ot){if(he.scrollIntoView(Ot),Se=function Jt(me){for(var ke=B.getBody();me&&me!==ke;me=me.parentNode)if("false"===B.dom.getContentEditable(me))return me;return null}(Ot))return xe.remove(Ot),void he.select(Se);ue=xe.createRng(),(le=Ot.previousSibling)&&3==le.nodeType?(ue.setStart(le,le.nodeValue.length),$.ie||(ve=Ot.nextSibling)&&3==ve.nodeType&&(le.appendData(ve.data),ve.parentNode.removeChild(ve))):(ue.setStartBefore(Ot),ue.setEndBefore(Ot)),ne=xe.getParent(Ot,xe.isBlock),xe.remove(Ot),ne&&xe.isEmpty(ne)&&(B.$(ne).empty(),ue.setStart(ne,0),ue.setEnd(ne,0),w(ne)||function g(Ot){return!!Ot.getAttribute("data-mce-fragment")}(ne)||!(ee=function zt(me){var ke=b.fromRangeStart(me);if(ke=new k(B.getBody()).next(ke))return ke.toRange()}(ue))?xe.add(ne,xe.create("br",{"data-mce-bogus":"1"})):(ue=ee,xe.remove(ne))),he.setRng(ue)}}(xe.get("mce_marker")),function C(Ot){W.each(Ot.getElementsByTagName("*"),function(Jt){Jt.removeAttribute("data-mce-fragment")})}(B.getBody()),B.fire("SetContent",se),B.addVisual()}(B,z.content,z.details)}}}),He(zn,[St,Fe,Ke,fe,ai,tt],function($,W,R,k,b,S){var y=W.each,x=W.extend,w=W.map,P=W.inArray,T=W.explode,I=$.ie&&$.ie<11,L=!0;return function(D){function N(K){var ie;if(!D.quirks.isHidden()){if(K=K.toLowerCase(),ie=le.state[K])return ie(K);try{return D.getDoc().queryCommandState(K)}catch{}return!1}}function M(K,ie){ie=ie||"exec",y(K,function(he,xe){y(xe.toLowerCase().split(","),function(Me){le[ie][Me]=he})})}function U(K,ie,he){return ie===Dn&&(ie=!1),he===Dn&&(he=null),D.getDoc().execCommand(K,ie,he)}function H(K){return ue.match(K)}function Z(K,ie){ue.toggle(K,ie?{value:ie}:Dn),D.nodeChanged()}function J(K){ye=ae.getBookmark(K)}function de(){ae.moveToBookmark(ye)}var se,ae,ue,ye,le={state:{},exec:{},value:{}},ve=D.settings;D.on("PreInit",function(){se=D.dom,ae=D.selection,ve=D.settings,ue=D.formatter}),x(this,{execCommand:function z(K,ie,he,xe){var Me,ot,At=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(K)||xe&&xe.skip_focus||D.focus(),(xe=D.fire("BeforeExecCommand",{command:K,ui:ie,value:he})).isDefaultPrevented())return!1;if(ot=K.toLowerCase(),Me=le.exec[ot])return Me(ot,ie,he),D.fire("ExecCommand",{command:K,ui:ie,value:he}),!0;if(y(D.plugins,function(Ot){if(Ot.execCommand&&Ot.execCommand(K,ie,he))return D.fire("ExecCommand",{command:K,ui:ie,value:he}),At=!0,!1}),At)return At;if(D.theme&&D.theme.execCommand&&D.theme.execCommand(K,ie,he))return D.fire("ExecCommand",{command:K,ui:ie,value:he}),!0;try{At=D.getDoc().execCommand(K,ie,he)}catch{}return!!At&&(D.fire("ExecCommand",{command:K,ui:ie,value:he}),!0)},queryCommandState:N,queryCommandValue:function G(K){var ie;if(!D.quirks.isHidden()){if(K=K.toLowerCase(),ie=le.value[K])return ie(K);try{return D.getDoc().queryCommandValue(K)}catch{}}},queryCommandSupported:function C(K){if(K=K.toLowerCase(),le.exec[K])return!0;try{return D.getDoc().queryCommandSupported(K)}catch{}return!1},addCommands:M,addCommand:function A(K,ie,he){K=K.toLowerCase(),le.exec[K]=function(xe,Me,ot,At){return ie.call(he||D,Me,ot,At)}},addQueryStateHandler:function g(K,ie,he){K=K.toLowerCase(),le.state[K]=function(){return ie.call(he||D)}},addQueryValueHandler:function m(K,ie,he){K=K.toLowerCase(),le.value[K]=function(){return ie.call(he||D)}},hasCustomCommand:function O(K){return K=K.toLowerCase(),!!le.exec[K]}}),M({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){D.undoManager.add()},"Cut,Copy,Paste":function(K){var he,ie=D.getDoc();try{U(K)}catch{he=L}if("paste"!==K||ie.queryCommandEnabled(K)||(he=!0),he||!ie.queryCommandSupported(K)){var xe=D.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");$.mac&&(xe=xe.replace(/Ctrl\+/g,"\u2318+")),D.notificationManager.open({text:xe,type:"error"})}},unlink:function(){if(ae.isCollapsed()){var K=D.dom.getParent(D.selection.getStart(),"a");K&&D.dom.remove(K,!0)}else ue.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(K){var ie=K.substring(7);"full"==ie&&(ie="justify"),y("left,center,right,justify".split(","),function(he){ie!=he&&ue.remove("align"+he)}),"none"!=ie&&Z("align"+ie)},"InsertUnorderedList,InsertOrderedList":function(K){var ie,he;U(K),(ie=se.getParent(ae.getNode(),"ol,ul"))&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((he=ie.parentNode).nodeName)&&(J(),se.split(he,ie),de())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(K){Z(K)},"ForeColor,HiliteColor,FontName":function(K,ie,he){Z(K,he)},FontSize:function(K,ie,he){var xe,Me;he>=1&&he<=7&&(Me=T(ve.font_size_style_values),he=(xe=T(ve.font_size_classes))?xe[he-1]||he:Me[he-1]||he),Z(K,he)},RemoveFormat:function(K){ue.remove(K)},mceBlockQuote:function(){Z("blockquote")},FormatBlock:function(K,ie,he){return Z(he||"p")},mceCleanup:function(){var K=ae.getBookmark();D.setContent(D.getContent({cleanup:L}),{cleanup:L}),ae.moveToBookmark(K)},mceRemoveNode:function(K,ie,he){var xe=he||ae.getNode();xe!=D.getBody()&&(J(),D.dom.remove(xe,L),de())},mceSelectNodeDepth:function(K,ie,he){var xe=0;se.getParent(ae.getNode(),function(Me){if(1==Me.nodeType&&xe++==he)return ae.select(Me),!1},D.getBody())},mceSelectNode:function(K,ie,he){ae.select(he)},mceInsertContent:function(K,ie,he){b.insertAtCaret(D,he)},mceInsertRawHTML:function(K,ie,he){ae.setContent("tiny_mce_marker"),D.setContent(D.getContent().replace(/tiny_mce_marker/g,function(){return he}))},mceToggleFormat:function(K,ie,he){Z(he)},mceSetContent:function(K,ie,he){D.setContent(he)},"Indent,Outdent":function(K){var ie,he,xe;he=/[a-z%]+$/i.exec(ie=ve.indentation),ie=parseInt(ie,10),N("InsertUnorderedList")||N("InsertOrderedList")?U(K):(ve.forced_root_block||se.getParent(ae.getNode(),se.isBlock)||ue.apply("div"),y(ae.getSelectedBlocks(),function(Me){if("false"!==se.getContentEditable(Me)&&"LI"!==Me.nodeName){var ot=D.getParam("indent_use_margin",!1)?"margin":"padding";ot="TABLE"===Me.nodeName?"margin":ot,ot+="rtl"==se.getStyle(Me,"direction",!0)?"Right":"Left","outdent"==K?(xe=Math.max(0,parseInt(Me.style[ot]||0,10)-ie),se.setStyle(Me,ot,xe?xe+he:"")):(xe=parseInt(Me.style[ot]||0,10)+ie+he,se.setStyle(Me,ot,xe))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){D.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){D.hasVisual=!D.hasVisual,D.addVisual()},mceReplaceContent:function(K,ie,he){D.execCommand("mceInsertContent",!1,he.replace(/\{\$selection\}/g,ae.getContent({format:"text"})))},mceInsertLink:function(K,ie,he){var xe;"string"==typeof he&&(he={href:he}),xe=se.getParent(ae.getNode(),"a"),he.href=he.href.replace(" ","%20"),xe&&he.href||ue.remove("link"),he.href&&ue.apply("link",he,xe)},selectAll:function(){var ie,K=se.getRoot();if(ae.getRng().setStart){var he=se.getParent(ae.getStart(),S.isContentEditableTrue);he&&((ie=se.createRng()).selectNodeContents(he),ae.setRng(ie))}else(ie=ae.getRng()).item||(ie.moveToElementText(K),ie.select())},delete:function(){U("Delete");var K=D.getBody();se.isEmpty(K)&&(D.setContent(""),K.firstChild&&se.isBlock(K.firstChild)?D.selection.setCursorLocation(K.firstChild,0):D.selection.setCursorLocation(K,0))},mceNewDocument:function(){D.setContent("")},InsertLineBreak:function(K,ie,he){var ot,At,Ot,Me=he,Jt=ae.getRng(!0);new R(se).normalize(Jt);var zt=Jt.startOffset,Se=Jt.startContainer;if(1==Se.nodeType&&Se.hasChildNodes()){var ne=zt>Se.childNodes.length-1;Se=Se.childNodes[Math.min(zt,Se.childNodes.length-1)]||Se,zt=ne&&3==Se.nodeType?Se.nodeValue.length:0}var ee=se.getParent(Se,se.isBlock),me=ee?ee.nodeName.toUpperCase():"",ke=ee?se.getParent(ee.parentNode,se.isBlock):null,qe=ke?ke.nodeName.toUpperCase():"";"LI"!=qe||Me&&Me.ctrlKey||(ee=ke,me=qe),Se&&3==Se.nodeType&&zt>=Se.nodeValue.length&&(I||function xe(){for(var ct,mt=new k(Se,ee),ft=D.schema.getNonEmptyElements();ct=mt.next();)if(ft[ct.nodeName.toLowerCase()]||ct.length>0)return!0}()||(ot=se.create("br"),Jt.insertNode(ot),Jt.setStartAfter(ot),Jt.setEndAfter(ot),At=!0)),ot=se.create("br"),Jt.insertNode(ot);var Be=se.doc.documentMode;return I&&"PRE"==me&&(!Be||Be<8)&&ot.parentNode.insertBefore(se.doc.createTextNode("\r"),ot),Ot=se.create("span",{},"&nbsp;"),ot.parentNode.insertBefore(Ot,ot),ae.scrollIntoView(Ot),se.remove(Ot),At?(Jt.setStartBefore(ot),Jt.setEndBefore(ot)):(Jt.setStartAfter(ot),Jt.setEndAfter(ot)),ae.setRng(Jt),D.undoManager.add(),L}}),M({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(K){var ie="align"+K.substring(7),he=ae.isCollapsed()?[se.getParent(ae.getNode(),se.isBlock)]:ae.getSelectedBlocks(),xe=w(he,function(Me){return!!ue.matchNode(Me,ie)});return-1!==P(xe,L)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(K){return H(K)},mceBlockQuote:function(){return H("blockquote")},Outdent:function(){var K;return ve.inline_styles&&((K=se.getParent(ae.getStart(),se.isBlock))&&parseInt(K.style.paddingLeft,10)>0||(K=se.getParent(ae.getEnd(),se.isBlock))&&parseInt(K.style.paddingLeft,10)>0)?L:N("InsertUnorderedList")||N("InsertOrderedList")||!ve.inline_styles&&!!se.getParent(ae.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(K){var ie=se.getParent(ae.getNode(),"ul,ol");return ie&&("insertunorderedlist"===K&&"UL"===ie.tagName||"insertorderedlist"===K&&"OL"===ie.tagName)}},"state"),M({"FontSize,FontName":function(K){var he,ie=0;return(he=se.getParent(ae.getNode(),"span"))&&(ie="fontsize"==K?he.style.fontSize:he.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),ie}},"value"),M({Undo:function(){D.undoManager.undo()},Redo:function(){D.undoManager.redo()}})}}),He(It,[Fe],function($){function W(y,x){var P,T,w=this;if(y=k(y),P=(x=w.settings=x||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(y)||/^\s*#/.test(y))w.source=y;else{var I=0===y.indexOf("//");0!==y.indexOf("/")||I||(y=(P&&P.protocol||"http")+"://mce_host"+y),/^[\w\-]*:?\/\//.test(y)||(T=x.base_uri?x.base_uri.path:new W(location.href).directory,""===x.base_uri.protocol?y="//mce_host"+w.toAbsPath(T,y):(y=/([^#?]*)([#?]?.*)/.exec(y),y=(P&&P.protocol||"http")+"://mce_host"+w.toAbsPath(T,y[1])+y[2])),y=y.replace(/@@/g,"(mce_at)"),y=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(y),R(b,function(L,B){var D=y[B];D&&(D=D.replace(/\(mce_at\)/g,"@@")),w[L]=D}),P&&(w.protocol||(w.protocol=P.protocol),w.userInfo||(w.userInfo=P.userInfo),w.port||"mce_host"!==w.host||(w.port=P.port),w.host&&"mce_host"!==w.host||(w.host=P.host),w.source=""),I&&(w.protocol="")}}var R=$.each,k=$.trim,b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),S={ftp:21,http:80,https:443,mailto:25};return W.prototype={setPath:function(y){var x=this;y=/^(.*?)\/?(\w+)?$/.exec(y),x.path=y[0],x.directory=y[1],x.file=y[2],x.source="",x.getURI()},toRelative:function(y){var w,x=this;if("./"===y)return y;if("mce_host"!=(y=new W(y,{base_uri:x})).host&&x.host!=y.host&&y.host||x.port!=y.port||x.protocol!=y.protocol&&""!==y.protocol)return y.getURI();var P=x.getURI(),T=y.getURI();return P==T||"/"==P.charAt(P.length-1)&&P.substr(0,P.length-1)==T?P:(w=x.toRelPath(x.path,y.path),y.query&&(w+="?"+y.query),y.anchor&&(w+="#"+y.anchor),w)},toAbsolute:function(y,x){return(y=new W(y,{base_uri:this})).getURI(x&&this.isSameOrigin(y))},isSameOrigin:function(y){if(this.host==y.host&&this.protocol==y.protocol){if(this.port==y.port)return!0;var x=S[this.protocol];if(x&&(this.port||x)==(y.port||x))return!0}return!1},toRelPath:function(y,x){var w,I,L,P=0,T="";if(y=(y=y.substring(0,y.lastIndexOf("/"))).split("/"),w=x.split("/"),y.length>=w.length)for(I=0,L=y.length;I<L;I++)if(I>=w.length||y[I]!=w[I]){P=I+1;break}if(y.length<w.length)for(I=0,L=w.length;I<L;I++)if(I>=y.length||y[I]!=w[I]){P=I+1;break}if(1===P)return x;for(I=0,L=y.length-(P-1);I<L;I++)T+="../";for(I=P-1,L=w.length;I<L;I++)T+=I!=P-1?"/"+w[I]:w[I];return T},toAbsPath:function(y,x){var w,I,L,P=0,T=[];for(I=/\/$/.test(x)?"/":"",y=y.split("/"),x=x.split("/"),R(y,function(B){B&&T.push(B)}),y=T,w=x.length-1,T=[];w>=0;w--)0!==x[w].length&&"."!==x[w]&&(".."!==x[w]?P>0?P--:T.push(x[w]):P++);return 0!==(L=(w=y.length-P)<=0?T.reverse().join("/"):y.slice(0,w).join("/")+"/"+T.reverse().join("/")).indexOf("/")&&(L="/"+L),I&&L.lastIndexOf("/")!==L.length-1&&(L+=I),L},getURI:function(y){var x,w=this;return w.source&&!y||(x="",y||(x+=w.protocol?w.protocol+"://":"//",w.userInfo&&(x+=w.userInfo+"@"),w.host&&(x+=w.host),w.port&&(x+=":"+w.port)),w.path&&(x+=w.path),w.query&&(x+="?"+w.query),w.anchor&&(x+="#"+w.anchor),w.source=x),w.source}},W.parseDataUri=function(y){var x,w;return y=decodeURIComponent(y).split(","),(w=/data:([^;]+)/.exec(y[0]))&&(x=w[1]),{type:x,data:y[1]}},W.getDocumentBaseUrl=function(y){var x;return x=0!==y.protocol.indexOf("http")&&"file:"!==y.protocol?y.href:y.protocol+"//"+y.host+y.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(x)&&(x=x.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(x)||(x+="/")),x},W}),He(qt,[Fe],function($){function W(){}var b,S,R=$.each,k=$.extend;return W.extend=b=function(y){function x(){var z,N,G,M=this;if(!S&&(M.init&&M.init.apply(M,arguments),N=M.Mixins))for(z=N.length;z--;)(G=N[z]).init&&G.init.apply(M,arguments)}function w(){return this}function P(z,N){return function(){var A,G=this,M=G._super;return G._super=I[z],A=N.apply(G,arguments),G._super=M,A}}var L,B,D,I=this.prototype;for(B in S=!0,L=new this,S=!1,y.Mixins&&(R(y.Mixins,function(z){for(var N in z)"init"!==N&&(y[N]=z[N])}),I.Mixins&&(y.Mixins=I.Mixins.concat(y.Mixins))),y.Methods&&R(y.Methods.split(","),function(z){y[z]=w}),y.Properties&&R(y.Properties.split(","),function(z){var N="_"+z;y[z]=function(G){var M=this;return void 0!==G?(M[N]=G,M):M[N]}}),y.Statics&&R(y.Statics,function(z,N){x[N]=z}),y.Defaults&&I.Defaults&&(y.Defaults=k({},I.Defaults,y.Defaults)),y)L[B]="function"==typeof(D=y[B])&&I[B]?P(B,D):D;return x.prototype=L,x.constructor=x,x.extend=b,x},W}),He(ln,[Fe],function($){function W(k){function b(){return!1}function S(){return!0}function x(z,N,G,M){var A,C,g;if(!1===N&&(N=b),N)for(N={func:N},M&&$.extend(N,M),g=(C=z.toLowerCase().split(" ")).length;g--;)(A=B[z=C[g]])||(A=B[z]=[],D(z,!0)),G?A.unshift(N):A.push(N);return I}function w(z,N){var G,M,A,C,g;if(z)for(G=(C=z.toLowerCase().split(" ")).length;G--;){if(M=B[z=C[G]],!z){for(A in B)D(A,!1),delete B[A];return I}if(M){if(N)for(g=M.length;g--;)M[g].func===N&&(M=M.slice(0,g).concat(M.slice(g+1)),B[z]=M);else M.length=0;M.length||(D(z,!1),delete B[z])}}else{for(z in B)D(z,!1);B={}}return I}var L,D,I=this,B={};L=(k=k||{}).scope||I,D=k.toggleEvent||b,I.fire=function y(z,N){var G,M,A,C;if(z=z.toLowerCase(),(N=N||{}).type=z,N.target||(N.target=L),N.preventDefault||(N.preventDefault=function(){N.isDefaultPrevented=S},N.stopPropagation=function(){N.isPropagationStopped=S},N.stopImmediatePropagation=function(){N.isImmediatePropagationStopped=S},N.isDefaultPrevented=b,N.isPropagationStopped=b,N.isImmediatePropagationStopped=b),k.beforeFire&&k.beforeFire(N),G=B[z])for(M=0,A=G.length;M<A;M++){if((C=G[M]).once&&w(z,C.func),N.isImmediatePropagationStopped())return N.stopPropagation(),N;if(!1===C.func.call(L,N))return N.preventDefault(),N}return N},I.on=x,I.off=w,I.once=function P(z,N,G){return x(z,N,G,{once:!0})},I.has=function T(z){return z=z.toLowerCase(),!(!B[z]||0===B[z].length)}}var R=$.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");return W.isNative=function(k){return!!R[k.toLowerCase()]},W}),He(Cn,[],function(){function $(W){this.create=W.create}return $.create=function(W,R){return new $({create:function(k,b){function S(w){k.set(b,w.value)}var x;return k.on("change:"+b,function y(w){W.set(R,w.value)}),W.on("change:"+R,S),(x=k._bindings)||(x=k._bindings=[],k.on("destroy",function(){for(var w=x.length;w--;)x[w]()})),x.push(function(){W.off("change:"+R,S)}),W.get(R)}})},$}),He(cn,[ln],function($){function W(R){return R._eventDispatcher||(R._eventDispatcher=new $({scope:R,toggleEvent:function(k,b){$.isNative(k)&&R.toggleNativeEvent&&R.toggleNativeEvent(k,b)}})),R._eventDispatcher}return{fire:function(R,k,b){var S=this;if(S.removed&&"remove"!==R)return k;if(k=W(S).fire(R,k,b),!1!==b&&S.parent)for(var y=S.parent();y&&!k.isPropagationStopped();)y.fire(R,k,!1),y=y.parent();return k},on:function(R,k,b){return W(this).on(R,k,b)},off:function(R,k){return W(this).off(R,k)},once:function(R,k){return W(this).once(R,k)},hasEventListeners:function(R){return W(this).has(R)}}}),He(nn,[Cn,cn,qt,Fe],function($,W,R,k){function b(y){return y.nodeType>0}function S(y,x){var w,P;if(y===x)return!0;if(null===y||null===x||"object"!=typeof y||"object"!=typeof x)return y===x;if(k.isArray(x)){if(y.length!==x.length)return!1;for(w=y.length;w--;)if(!S(y[w],x[w]))return!1}if(b(y)||b(x))return y===x;for(w in P={},x){if(!S(y[w],x[w]))return!1;P[w]=!0}for(w in y)if(!P[w]&&!S(y[w],x[w]))return!1;return!0}return R.extend({Mixins:[W],init:function(y){var x,w;for(x in y=y||{})(w=y[x])instanceof $&&(y[x]=w.create(this,x));this.data=y},set:function(y,x){var w,P,T=this.data[y];if(x instanceof $&&(x=x.create(this,y)),"object"==typeof y){for(w in y)this.set(w,y[w]);return this}return S(T,x)||(this.data[y]=x,this.fire("change:"+y,P={target:this,name:y,value:x,oldValue:T}),this.fire("change",P)),this},get:function(y){return this.data[y]},has:function(y){return y in this.data},bind:function(y){return $.create(this,y)},destroy:function(){this.fire("destroy")}})}),He(bn,[qt],function($){var S,R=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,k=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,b=/^\s*|\s*$/g,y=$.extend({init:function(x){function B(N,G,M){function A(g){g&&G.push(g)}var C;return A(function w(N){if(N)return N=N.toLowerCase(),function(G){return"*"===N||G.type===N}}((C=R.exec(N.replace(b,"")))[1])),A(function P(N){if(N)return function(G){return G._name===N}}(C[2])),A(function T(N){if(N)return N=N.split("."),function(G){for(var M=N.length;M--;)if(!G.classes.contains(N[M]))return!1;return!0}}(C[3])),A(function I(N,G,M){if(N)return function(A){var C=A[N]?A[N]():"";return G?"="===G?C===M:"*="===G?C.indexOf(M)>=0:"~="===G?(" "+C+" ").indexOf(" "+M+" ")>=0:"!="===G?C!=M:"^="===G?0===C.indexOf(M):"$="===G&&C.substr(C.length-M.length)===M:!!M}}(C[4],C[5],C[6])),A(function L(N){var G;if(N)return(N=/(?:not\((.+)\))|(.+)/i.exec(N))[1]?(G=D(N[1],[]),function(M){return!z(M,G)}):(N=N[2],function(M,A,C){return"first"===N?0===A:"last"===N?A===C-1:"even"===N?A%2==0:"odd"===N?A%2==1:!!M[N]&&M[N]()})}(C[7])),G.pseudo=!!C[7],G.direct=M,G}function D(N,G){var A,C,g,M=[];do{if(k.exec(""),(C=k.exec(N))&&(N=C[3],M.push(C[1]),C[2])){A=C[3];break}}while(C);for(A&&D(A,G),N=[],g=0;g<M.length;g++)">"!=M[g]&&N.push(B(M[g],[],">"===M[g-1]));return G.push(N),G}var z=this.match;this._selectors=D(x,[])},match:function(x,w){var P,T,I,L,B,D,z,N,G,M,A,C,g;for(P=0,T=(w=w||this._selectors).length;P<T;P++){for(g=x,C=0,I=(L=(B=w[P]).length)-1;I>=0;I--)for(N=B[I];g;){if(N.pseudo)for(G=M=(A=g.parent().items()).length;G--&&A[G]!==g;);for(D=0,z=N.length;D<z;D++)if(!N[D](g,G,M)){D=z+1;break}if(D===z){C++;break}if(I===L-1)break;g=g.parent()}if(C===L)return!0}return!1},find:function(x){function w(B,D,z){var N,G,M,A,C,g=D[z];for(N=0,G=B.length;N<G;N++){for(C=B[N],M=0,A=g.length;M<A;M++)if(!g[M](C,N,G)){M=A+1;break}if(M===A)z==D.length-1?P.push(C):C.items&&w(C.items(),D,z+1);else if(g.direct)return;C.items&&w(C.items(),D,z)}}var T,I,P=[],L=this._selectors;if(x.items){for(T=0,I=L.length;T<I;T++)w(x.items(),L[T],0);I>1&&(P=function W(x){for(var T,w=[],P=x.length;P--;)(T=x[P]).__checked||(w.push(T),T.__checked=1);for(P=w.length;P--;)delete w[P].__checked;return w}(P))}return S||(S=y.Collection),new S(P)}});return y}),He(Nn,[Fe,bn,qt],function($,W,R){var k,b,S=Array.prototype.push,y=Array.prototype.slice;return b={length:0,init:function(x){x&&this.add(x)},add:function(x){var w=this;return $.isArray(x)?S.apply(w,x):x instanceof k?w.add(x.toArray()):S.call(w,x),w},set:function(x){var T,w=this,P=w.length;for(w.length=0,w.add(x),T=w.length;T<P;T++)delete w[T];return w},filter:function(x){var P,T,L,B,I=[];for("string"==typeof x?(x=new W(x),B=function(D){return x.match(D)}):B=x,P=0,T=this.length;P<T;P++)B(L=this[P])&&I.push(L);return new k(I)},slice:function(){return new k(y.apply(this,arguments))},eq:function(x){return-1===x?this.slice(x):this.slice(x,+x+1)},each:function(x){return $.each(this,x),this},toArray:function(){return $.toArray(this)},indexOf:function(x){for(var P=this.length;P--&&this[P]!==x;);return P},reverse:function(){return new k($.toArray(this).reverse())},hasClass:function(x){return!!this[0]&&this[0].classes.contains(x)},prop:function(x,w){var I,P=this;return void 0!==w?(P.each(function(L){L[x]&&L[x](w)}),P):(I=P[0])&&I[x]?I[x]():void 0},exec:function(x){var w=this,P=$.toArray(arguments).slice(1);return w.each(function(T){T[x]&&T[x].apply(T,P)}),w},remove:function(){for(var x=this.length;x--;)this[x].remove();return this},addClass:function(x){return this.each(function(w){w.classes.add(x)})},removeClass:function(x){return this.each(function(w){w.classes.remove(x)})}},$.each("fire on off show hide append prepend before after reflow".split(" "),function(x){b[x]=function(){var w=$.toArray(arguments);return this.each(function(P){x in P&&P[x].apply(P,w)}),this}}),$.each("text name disabled active selected checked visible parent value data".split(" "),function(x){b[x]=function(w){return this.prop(x,w)}}),k=R.extend(b),W.Collection=k,k}),He(Bn,[St,Fe,Ve],function($,W,R){var k=0,b={id:function(){return"mceu_"+k++},create:function(S,y,x){var w=document.createElement(S);return R.DOM.setAttribs(w,y),"string"==typeof x?w.innerHTML=x:W.each(x,function(P){P.nodeType&&w.appendChild(P)}),w},createFragment:function(S){return R.DOM.createFragment(S)},getWindowSize:function(){return R.DOM.getViewPort()},getSize:function(S){var y,x;if(S.getBoundingClientRect){var w=S.getBoundingClientRect();y=Math.max(w.width||w.right-w.left,S.offsetWidth),x=Math.max(w.height||w.bottom-w.bottom,S.offsetHeight)}else y=S.offsetWidth,x=S.offsetHeight;return{width:y,height:x}},getPos:function(S,y){return R.DOM.getPos(S,y||b.getContainer())},getContainer:function(){return $.container?$.container:document.body},getViewPort:function(S){return R.DOM.getViewPort(S)},get:function(S){return document.getElementById(S)},addClass:function(S,y){return R.DOM.addClass(S,y)},removeClass:function(S,y){return R.DOM.removeClass(S,y)},hasClass:function(S,y){return R.DOM.hasClass(S,y)},toggleClass:function(S,y,x){return R.DOM.toggleClass(S,y,x)},css:function(S,y,x){return R.DOM.setStyle(S,y,x)},getRuntimeStyle:function(S,y){return R.DOM.getStyle(S,y,!0)},on:function(S,y,x,w){return R.DOM.bind(S,y,x,w)},off:function(S,y,x){return R.DOM.unbind(S,y,x)},fire:function(S,y,x){return R.DOM.fire(S,y,x)},innerHtml:function(S,y){R.DOM.setHTML(S,y)}};return b}),He(Gn,[],function(){return{parseBox:function($){var W;if($)return"number"==typeof $?{top:$=$||0,left:$,bottom:$,right:$}:(1===(W=($=$.split(" ")).length)?$[1]=$[2]=$[3]=$[0]:2===W?($[2]=$[0],$[3]=$[1]):3===W&&($[3]=$[1]),{top:parseInt($[0],10)||0,right:parseInt($[1],10)||0,bottom:parseInt($[2],10)||0,left:parseInt($[3],10)||0})},measureBox:function($,W){function k(b){var S=parseFloat(function R(b){var S=document.defaultView;return S?(b=b.replace(/[A-Z]/g,function(y){return"-"+y}),S.getComputedStyle($,null).getPropertyValue(b)):$.currentStyle[b]}(b),10);return isNaN(S)?0:S}return{top:k(W+"TopWidth"),right:k(W+"RightWidth"),bottom:k(W+"BottomWidth"),left:k(W+"LeftWidth")}}}}),He(ui,[Fe],function($){function W(){}function R(k){this.cls=[],this.cls._map={},this.onchange=k||W,this.prefix=""}return $.extend(R.prototype,{add:function(k){return k&&!this.contains(k)&&(this.cls._map[k]=!0,this.cls.push(k),this._change()),this},remove:function(k){if(this.contains(k)){for(var b=0;b<this.cls.length&&this.cls[b]!==k;b++);this.cls.splice(b,1),delete this.cls._map[k],this._change()}return this},toggle:function(k,b){var S=this.contains(k);return S!==b&&(S?this.remove(k):this.add(k),this._change()),this},contains:function(k){return!!this.cls._map[k]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),R.prototype.toString=function(){var k;if(this.clsValue)return this.clsValue;k="";for(var b=0;b<this.cls.length;b++)b>0&&(k+=" "),k+=this.prefix+this.cls[b];return k},R}),He(Li,[Ze],function($){var R,W={};return{add:function(k){var b=k.parent();if(b){if(!b._layout||b._layout.isNative())return;W[b._id]||(W[b._id]=b),R||(R=!0,$.requestAnimationFrame(function(){var S,y;for(S in R=!1,W)(y=W[S]).state.get("rendered")&&y.reflow();W={}},document.body))}},remove:function(k){W[k._id]&&delete W[k._id]}}}),He(ji,[qt,Fe,ln,nn,Nn,Bn,rt,Gn,ui,Li],function($,W,R,k,b,S,y,x,w,P){function T(M){return M._eventDispatcher||(M._eventDispatcher=new R({scope:M,toggleEvent:function(A,C){C&&R.isNative(A)&&(M._nativeEvents||(M._nativeEvents={}),M._nativeEvents[A]=!0,M.state.get("rendered")&&I(M))}})),M._eventDispatcher}function I(M){function A(ae){var ue=M.getParentCtrl(ae.target);ue&&ue.fire(ae.type,ae)}function C(){var ae=Z._lastHoverCtrl;ae&&(ae.fire("mouseleave",{target:ae.getEl()}),ae.parents().each(function(ue){ue.fire("mouseleave",{target:ue.getEl()})}),Z._lastHoverCtrl=null)}function g(ae){var ye,K,ie,ue=M.getParentCtrl(ae.target),le=Z._lastHoverCtrl,ve=0;if(ue!==le){if(Z._lastHoverCtrl=ue,(K=ue.parents().toArray().reverse()).push(ue),le){for((ie=le.parents().toArray().reverse()).push(le),ve=0;ve<ie.length&&K[ve]===ie[ve];ve++);for(ye=ie.length-1;ye>=ve;ye--)(le=ie[ye]).fire("mouseleave",{target:le.getEl()})}for(ye=ve;ye<K.length;ye++)(ue=K[ye]).fire("mouseenter",{target:ue.getEl()})}}function m(ae){ae.preventDefault(),"mousewheel"==ae.type?(ae.deltaY=-.025*ae.wheelDelta,ae.wheelDeltaX&&(ae.deltaX=-.025*ae.wheelDeltaX)):(ae.deltaX=0,ae.deltaY=ae.detail),ae=M.fire("wheel",ae)}var O,U,H,Z,J,de;if(J=M._nativeEvents){for((H=M.parents().toArray()).unshift(M),O=0,U=H.length;!Z&&O<U;O++)Z=H[O]._eventsRoot;for(Z||(Z=H[H.length-1]||M),M._eventsRoot=Z,U=O,O=0;O<U;O++)H[O]._eventsRoot=Z;var se=Z._delegates;for(de in se||(se=Z._delegates={}),J){if(!J)return!1;"wheel"!==de||B?("mouseenter"===de||"mouseleave"===de?Z._hasMouseEnter||(y(Z.getEl()).on("mouseleave",C).on("mouseover",g),Z._hasMouseEnter=1):se[de]||(y(Z.getEl()).on(de,A),se[de]=!0),J[de]=!1):L?y(M.getEl()).on("mousewheel",m):y(M.getEl()).on("DOMMouseScroll",m)}}}var z,L="onmousewheel"in document,B=!1,D="mce-",N=0,G={Statics:{classPrefix:D},isRtl:function(){return z.rtl},classPrefix:D,init:function(M){function A(O){var U;for(O=O.split(" "),U=0;U<O.length;U++)C.classes.add(O[U])}var g,m,C=this;C.settings=M=W.extend({},C.Defaults,M),C._id=M.id||"mceu_"+N++,C._aria={role:M.role},C._elmCache={},C.$=y,C.state=new k({visible:!0,active:!1,disabled:!1,value:""}),C.data=new k(M.data),C.classes=new w(function(){C.state.get("rendered")&&(C.getEl().className=this.toString())}),C.classes.prefix=C.classPrefix,(g=M.classes)&&(C.Defaults&&(m=C.Defaults.classes)&&g!=m&&A(m),A(g)),W.each("title text name visible disabled active value".split(" "),function(O){O in M&&C[O](M[O])}),C.on("click",function(){if(C.disabled())return!1}),C.settings=M,C.borderBox=x.parseBox(M.border),C.paddingBox=x.parseBox(M.padding),C.marginBox=x.parseBox(M.margin),M.hidden&&C.hide()},Properties:"parent,name",getContainerElm:function(){return S.getContainer()},getParentCtrl:function(M){for(var A,C=this.getRoot().controlIdLookup;M&&C&&!(A=C[M.id]);)M=M.parentNode;return A},initLayoutRect:function(){var C,g,O,U,H,Z,J,de,se,ae,M=this,A=M.settings,m=M.getEl();C=M.borderBox=M.borderBox||x.measureBox(m,"border"),M.paddingBox=M.paddingBox||x.measureBox(m,"padding"),M.marginBox=M.marginBox||x.measureBox(m,"margin"),ae=S.getSize(m),H=(de=A.minWidth)||ae.width,Z=(se=A.minHeight)||ae.height,O=A.width,U=A.height,J=typeof(J=A.autoResize)<"u"?J:!O&&!U;var ue=C.left+C.right,le=C.top+C.bottom,ve=A.maxWidth||65535,ye=A.maxHeight||65535;return M._layoutRect=g={x:A.x||0,y:A.y||0,w:O=O||H,h:U=U||Z,deltaW:ue,deltaH:le,contentW:O-ue,contentH:U-le,innerW:O-ue,innerH:U-le,startMinWidth:de||0,startMinHeight:se||0,minW:Math.min(H,ve),minH:Math.min(Z,ye),maxW:ve,maxH:ye,autoResize:J,scrollW:0},M._lastLayoutRect={},g},layoutRect:function(M){var g,m,O,U,H,Z,A=this,C=A._layoutRect;return C||(C=A.initLayoutRect()),M?(O=C.deltaW,U=C.deltaH,M.x!==H&&(C.x=M.x),M.y!==H&&(C.y=M.y),M.minW!==H&&(C.minW=M.minW),M.minH!==H&&(C.minH=M.minH),(m=M.w)!==H&&(C.w=m=(m=m<C.minW?C.minW:m)>C.maxW?C.maxW:m,C.innerW=m-O),(m=M.h)!==H&&(C.h=m=(m=m<C.minH?C.minH:m)>C.maxH?C.maxH:m,C.innerH=m-U),(m=M.innerW)!==H&&(C.innerW=m=(m=m<C.minW-O?C.minW-O:m)>C.maxW-O?C.maxW-O:m,C.w=m+O),(m=M.innerH)!==H&&(C.innerH=m=(m=m<C.minH-U?C.minH-U:m)>C.maxH-U?C.maxH-U:m,C.h=m+U),M.contentW!==H&&(C.contentW=M.contentW),M.contentH!==H&&(C.contentH=M.contentH),(g=A._lastLayoutRect).x===C.x&&g.y===C.y&&g.w===C.w&&g.h===C.h||((Z=z.repaintControls)&&Z.map&&!Z.map[A._id]&&(Z.push(A),Z.map[A._id]=!0),g.x=C.x,g.y=C.y,g.w=C.w,g.h=C.h),A):C},repaint:function(){var A,C,g,m,O,U,H,Z,J,de,M=this;J=document.createRange?function(se){return se}:Math.round,A=M.getEl().style,U=(O=M.borderBox).left+O.right,H=O.top+O.bottom,(m=M._layoutRect).x!==(Z=M._lastRepaintRect||{}).x&&(A.left=J(m.x)+"px",Z.x=m.x),m.y!==Z.y&&(A.top=J(m.y)+"px",Z.y=m.y),m.w!==Z.w&&(de=J(m.w-U),A.width=(de>=0?de:0)+"px",Z.w=m.w),m.h!==Z.h&&(de=J(m.h-H),A.height=(de>=0?de:0)+"px",Z.h=m.h),M._hasBody&&m.innerW!==Z.innerW&&(de=J(m.innerW),(g=M.getEl("body"))&&((C=g.style).width=(de>=0?de:0)+"px"),Z.innerW=m.innerW),M._hasBody&&m.innerH!==Z.innerH&&(de=J(m.innerH),(g=g||M.getEl("body"))&&((C=C||g.style).height=(de>=0?de:0)+"px"),Z.innerH=m.innerH),M._lastRepaintRect=Z,M.fire("repaint",{},!1)},updateLayoutRect:function(){var M=this;M.parent()._lastRect=null,S.css(M.getEl(),{width:"",height:""}),M._layoutRect=M._lastRepaintRect=M._lastLayoutRect=null,M.initLayoutRect()},on:function(M,A){var g=this;return T(g).on(M,function C(m){var O,U;return"string"!=typeof m?m:function(H){return O||g.parentsAndSelf().each(function(Z){var J=Z.settings.callbacks;if(J&&(O=J[m]))return U=Z,!1}),O?O.call(U,H):(H.action=m,void this.fire("execute",H))}}(A)),g},off:function(M,A){return T(this).off(M,A),this},fire:function(M,A,C){var g=this;if((A=A||{}).control||(A.control=g),A=T(g).fire(M,A),!1!==C&&g.parent)for(var m=g.parent();m&&!A.isPropagationStopped();)m.fire(M,A,!1),m=m.parent();return A},hasEventListeners:function(M){return T(this).has(M)},parents:function(M){var C,g=new b;for(C=this.parent();C;C=C.parent())g.add(C);return M&&(g=g.filter(M)),g},parentsAndSelf:function(M){return new b(this).add(this.parents(M))},next:function(){var M=this.parent().items();return M[M.indexOf(this)+1]},prev:function(){var M=this.parent().items();return M[M.indexOf(this)-1]},innerHtml:function(M){return this.$el.html(M),this},getEl:function(M){var A=M?this._id+"-"+M:this._id;return this._elmCache[A]||(this._elmCache[A]=y("#"+A)[0]),this._elmCache[A]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch{}return this},blur:function(){return this.getEl().blur(),this},aria:function(M,A){var C=this,g=C.getEl(C.ariaTarget);return typeof A>"u"?C._aria[M]:(C._aria[M]=A,C.state.get("rendered")&&g.setAttribute("role"==M?M:"aria-"+M,A),C)},encode:function(M,A){return!1!==A&&(M=this.translate(M)),(M||"").replace(/[&<>"]/g,function(C){return"&#"+C.charCodeAt(0)+";"})},translate:function(M){return z.translate?z.translate(M):M},before:function(M){var A=this,C=A.parent();return C&&C.insert(M,C.items().indexOf(A),!0),A},after:function(M){var A=this,C=A.parent();return C&&C.insert(M,C.items().indexOf(A)),A},remove:function(){var g,m,M=this,A=M.getEl(),C=M.parent();if(M.items){var O=M.items().toArray();for(m=O.length;m--;)O[m].remove()}C&&C.items&&(g=[],C.items().each(function(H){H!==M&&g.push(H)}),C.items().set(g),C._lastRect=null),M._eventsRoot&&M._eventsRoot==M&&y(A).off();var U=M.getRoot().controlIdLookup;return U&&delete U[M._id],A&&A.parentNode&&A.parentNode.removeChild(A),M.state.set("rendered",!1),M.state.destroy(),M.fire("remove"),M},renderBefore:function(M){return y(M).before(this.renderHtml()),this.postRender(),this},renderTo:function(M){return y(M||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var C,g,m,O,U,M=this,A=M.settings;for(O in M.$el=y(M.getEl()),M.state.set("rendered",!0),A)0===O.indexOf("on")&&M.on(O.substr(2),A[O]);if(M._eventsRoot){for(m=M.parent();!U&&m;m=m.parent())U=m._eventsRoot;if(U)for(O in U._nativeEvents)M._nativeEvents[O]=!0}I(M),A.style&&(C=M.getEl())&&(C.setAttribute("style",A.style),C.style.cssText=A.style),M.settings.border&&M.$el.css({"border-top-width":(g=M.borderBox).top,"border-right-width":g.right,"border-bottom-width":g.bottom,"border-left-width":g.left});var H=M.getRoot();for(var Z in H.controlIdLookup||(H.controlIdLookup={}),H.controlIdLookup[M._id]=M,M._aria)M.aria(Z,M._aria[Z]);!1===M.state.get("visible")&&(M.getEl().style.display="none"),M.bindStates(),M.state.on("change:visible",function(J){var se,de=J.value;M.state.get("rendered")&&(M.getEl().style.display=!1===de?"none":"",M.getEl().getBoundingClientRect()),(se=M.parent())&&(se._lastRect=null),M.fire(de?"show":"hide"),P.add(M)}),M.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(M){var m,O,U,H,Z,J,C=this.getEl(),g=C.parentNode,de=function A(se,ae){var ue,le,ve=se;for(ue=le=0;ve&&ve!=ae&&ve.nodeType;)ue+=ve.offsetLeft||0,le+=ve.offsetTop||0,ve=ve.offsetParent;return{x:ue,y:le}}(C,g);return m=de.x,O=de.y,U=C.offsetWidth,H=C.offsetHeight,Z=g.clientWidth,J=g.clientHeight,"end"==M?(m-=Z-U,O-=J-H):"center"==M&&(m-=Z/2-U/2,O-=J/2-H/2),g.scrollLeft=m,g.scrollTop=O,this},getRoot:function(){for(var A,M=this,C=[];M;){if(M.rootControl){A=M.rootControl;break}C.push(M),A=M,M=M.parent()}A||(A=this);for(var g=C.length;g--;)C[g].rootControl=A;return A},reflow:function(){P.remove(this);var M=this.parent();return M._layout&&!M._layout.isNative()&&M.reflow(),this}};return W.each("text title visible disabled active value".split(" "),function(M){G[M]=function(A){return 0===arguments.length?this.state.get(M):(typeof A<"u"&&this.state.set(M,A),this)}}),z=$.extend(G)}),He(ti,[],function(){var W,$={};return{add:function(R,k){$[R.toLowerCase()]=k},has:function(R){return!!$[R.toLowerCase()]},create:function(R,k){var b,S,y;if(!W){for(S in y=tinymce.ui)$[S.toLowerCase()]=y[S];W=!0}if("string"==typeof R?(k=k||{}).type=R:R=(k=R).type,R=R.toLowerCase(),!(b=$[R]))throw new Error("Could not find control by type: "+R);return(b=new b(k)).type=R,b}}}),He(dr,[],function(){return function($){function W(m){return m&&1===m.nodeType}function R(m){return W(m=m||C)?m.getAttribute("role"):null}function k(m){for(var O,U=m||C;U=U.parentNode;)if(O=R(U))return O}function b(m){var O=C;if(W(O))return O.getAttribute("aria-"+m)}function S(m){var O=m.tagName.toUpperCase();return"INPUT"==O||"TEXTAREA"==O||"SELECT"==O}function x(m){var U=[];return function O(H){if(1==H.nodeType&&"none"!=H.style.display&&!H.disabled){(function y(m){return!(!S(m)||m.hidden)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(R(m))})(H)&&U.push(H);for(var Z=0;Z<H.childNodes.length;Z++)O(H.childNodes[Z])}}(m||A.getEl()),U}function w(m){var O,U;(U=(m=m||g).parents().toArray()).unshift(m);for(var H=0;H<U.length&&!(O=U[H]).settings.ariaRoot;H++);return O}function T(m,O){return m<0?m=O.length-1:m>=O.length&&(m=0),O[m]&&O[m].focus(),m}function I(m,O){var U=-1,H=w();O=O||x(H.getEl());for(var Z=0;Z<O.length;Z++)O[Z]===C&&(U=Z);H.lastAriaIndex=T(U+=m,O)}function L(){"tablist"==k()?I(-1,x(C.parentNode)):g.parent().submenu?G():I(-1)}function B(){var m=R(),O=k();"tablist"==O?I(1,x(C.parentNode)):"menuitem"==m&&"menu"==O&&b("haspopup")?M():I(1)}function D(){I(-1)}function z(){var m=R(),O=k();"menuitem"==m&&"menubar"==O?M():"button"==m&&b("haspopup")?M({key:"down"}):I(1)}function G(){g.fire("cancel")}function M(m){g.fire("click",{target:C,aria:m=m||{}})}var C,g,A=$.root;try{C=document.activeElement}catch{C=document.body}return g=A.getParentCtrl(C),A.on("keydown",function(m){function O(U,H){S(C)||"slider"!==R(C)&&!1!==H(U)&&U.preventDefault()}if(!m.isDefaultPrevented())switch(m.keyCode){case 37:O(m,L);break;case 39:O(m,B);break;case 38:O(m,D);break;case 40:O(m,z);break;case 27:G();break;case 14:case 13:case 32:O(m,M);break;case 9:!1!==function N(m){if("tablist"==k()){var U=x(g.getEl("body"))[0];U&&U.focus()}else I(m.shiftKey?-1:1)}(m)&&m.preventDefault()}}),A.on("focusin",function(m){C=m.target,g=m.control}),{focusFirst:function P(m){var O=w(m),U=x(O.getEl());T(O.settings.ariaRemember&&"lastAriaIndex"in O?O.lastAriaIndex:0,U)}}}}),He(qi,[ji,Nn,bn,ti,dr,Fe,rt,ui,Li],function($,W,R,k,b,S,y,x,w){var P={};return $.extend({init:function(T){var I=this;I._super(T),(T=I.settings).fixed&&I.state.set("fixed",!0),I._items=new W,I.isRtl()&&I.classes.add("rtl"),I.bodyClasses=new x(function(){I.state.get("rendered")&&(I.getEl("body").className=this.toString())}),I.bodyClasses.prefix=I.classPrefix,I.classes.add("container"),I.bodyClasses.add("container-body"),T.containerCls&&I.classes.add(T.containerCls),I._layout=k.create((T.layout||"")+"layout"),I.add(I.settings.items?I.settings.items:I.render()),I._hasBody=!0},items:function(){return this._items},find:function(T){return(T=P[T]=P[T]||new R(T)).find(this)},add:function(T){var I=this;return I.items().add(I.create(T)).parent(I),I},focus:function(T){var L,B,D,I=this;return T&&(B=I.keyboardNav||I.parents().eq(-1)[0].keyboardNav)?void B.focusFirst(I):(D=I.find("*"),I.statusbar&&D.add(I.statusbar.items()),D.each(function(z){return z.settings.autofocus?(L=null,!1):void(z.canFocus&&(L=L||z))}),L&&L.focus(),I)},replace:function(T,I){for(var L,B=this.items(),D=B.length;D--;)if(B[D]===T){B[D]=I;break}D>=0&&((L=I.getEl())&&L.parentNode.removeChild(L),(L=T.getEl())&&L.parentNode.removeChild(L)),I.parent(this)},create:function(T){var L,I=this,B=[];return S.isArray(T)||(T=[T]),S.each(T,function(D){D&&(D instanceof $||("string"==typeof D&&(D={type:D}),L=S.extend({},I.settings.defaults,D),D.type=L.type=L.type||D.type||I.settings.defaultType||(L.defaults?L.defaults.type:null),D=k.create(L)),B.push(D))}),B},renderNew:function(){var T=this;return T.items().each(function(I,L){var B;I.parent(T),I.state.get("rendered")||((B=T.getEl("body")).hasChildNodes()&&L<=B.childNodes.length-1?y(B.childNodes[L]).before(I.renderHtml()):y(B).append(I.renderHtml()),I.postRender(),w.add(I))}),T._layout.applyClasses(T.items().filter(":visible")),T._lastRect=null,T},append:function(T){return this.add(T).renderNew()},prepend:function(T){var I=this;return I.items().set(I.create(T).concat(I.items().toArray())),I.renderNew()},insert:function(T,I,L){var D,z,N,B=this;return T=B.create(T),D=B.items(),!L&&I<D.length-1&&(I+=1),I>=0&&I<D.length&&(z=D.slice(0,I).toArray(),N=D.slice(I).toArray(),D.set(z.concat(T,N))),B.renderNew()},fromJSON:function(T){for(var L in T)this.find("#"+L).value(T[L]);return this},toJSON:function(){var I={};return this.find("*").each(function(L){var B=L.name(),D=L.value();B&&typeof D<"u"&&(I[B]=D)}),I},renderHtml:function(){var T=this,I=T._layout,L=this.settings.role;return T.preRender(),I.preRender(T),'<div id="'+T._id+'" class="'+T.classes+'"'+(L?' role="'+this.settings.role+'"':"")+'><div id="'+T._id+'-body" class="'+T.bodyClasses+'">'+(T.settings.html||"")+I.renderHtml(T)+"</div></div>"},postRender:function(){var I,T=this;return T.items().exec("postRender"),T._super(),T._layout.postRender(T),T.state.set("rendered",!0),T.settings.style&&T.$el.css(T.settings.style),T.settings.border&&T.$el.css({"border-top-width":(I=T.borderBox).top,"border-right-width":I.right,"border-bottom-width":I.bottom,"border-left-width":I.left}),T.parent()||(T.keyboardNav=new b({root:T})),T},initLayoutRect:function(){var T=this,I=T._super();return T._layout.recalc(T),I},recalc:function(){var T=this,I=T._layoutRect,L=T._lastRect;if(!L||L.w!=I.w||L.h!=I.h)return T._layout.recalc(T),I=T.layoutRect(),T._lastRect={x:I.x,y:I.y,w:I.w,h:I.h},!0},reflow:function(){var T;if(w.remove(this),this.visible()){for($.repaintControls=[],$.repaintControls.map={},this.recalc(),T=$.repaintControls.length;T--;)$.repaintControls[T].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),$.repaintControls=[]}return this}})}),He(pr,[rt],function($){function R(k){var b,S;if(k.changedTouches)for(b="screenX screenY pageX pageY clientX clientY".split(" "),S=0;S<b.length;S++)k[b[S]]=k.changedTouches[0][b[S]]}return function(k,b){function S(){return x.getElementById(b.handle||k)}var y,w,P,T,I,L,B,x=b.document||document;b=b||{},P=function(D){var N,G,z=function W(k){var b,S,y,x,w,P,T,L=Math.max;return y=L((b=k.documentElement).scrollWidth,(S=k.body).scrollWidth),x=L(b.clientWidth,S.clientWidth),w=L(b.offsetWidth,S.offsetWidth),P=L(b.scrollHeight,S.scrollHeight),T=L(b.clientHeight,S.clientHeight),{width:y<w?x:y,height:P<L(b.offsetHeight,S.offsetHeight)?T:P}}(x);R(D),D.preventDefault(),w=D.button,N=S(),L=D.screenX,B=D.screenY,G=window.getComputedStyle?window.getComputedStyle(N,null).getPropertyValue("cursor"):N.runtimeStyle.cursor,y=$("<div></div>").css({position:"absolute",top:0,left:0,width:z.width,height:z.height,zIndex:2147483647,opacity:1e-4,cursor:G}).appendTo(x.body),$(x).on("mousemove touchmove",I).on("mouseup touchend",T),b.start(D)},I=function(D){return R(D),D.button!==w?T(D):(D.deltaX=D.screenX-L,D.deltaY=D.screenY-B,D.preventDefault(),void b.drag(D))},T=function(D){R(D),$(x).off("mousemove touchmove",I).off("mouseup touchend",T),y.remove(),b.stop&&b.stop(D)},this.destroy=function(){$(S()).off()},$(S()).on("mousedown touchstart",P)}}),He(ar,[rt,pr],function($,W){return{init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){function R(){function y(T,I,L,B,D,z){var N,G,M,A,g,m,O,U;if(G=b.getEl("scroll"+T)){if(O=I.toLowerCase(),U=L.toLowerCase(),$(b.getEl("absend")).css(O,b.layoutRect()[B]-1),!D)return void $(G).css("display","none");$(G).css("display","block"),N=b.getEl("body"),M=b.getEl("scroll"+T+"t"),A=N["client"+L]-2*S,g=(A-=x&&w?G["client"+z]:0)/N["scroll"+L],(m={})[O]=N["offset"+I]+S,m[U]=A,$(G).css(m),(m={})[O]=N["scroll"+I]*g,m[U]=A*g,$(M).css(m)}}var x,w,P;P=b.getEl("body"),w=P.scrollHeight>P.clientHeight,y("h","Left","Width","contentW",x=P.scrollWidth>P.clientWidth,"Height"),y("v","Top","Height","contentH",w,"Width")}var b=this,S=2;b.settings.autoScroll&&(b._hasScroll||(b._hasScroll=!0,function k(){function y(x,w,P,T,I){var L,B=b._id+"-scroll"+x,D=b.classPrefix;$(b.getEl()).append('<div id="'+B+'" class="'+D+"scrollbar "+D+"scrollbar-"+x+'"><div id="'+B+'t" class="'+D+'scrollbar-thumb"></div></div>'),b.draghelper=new W(B+"t",{start:function(){L=b.getEl("body")["scroll"+w],$("#"+B).addClass(D+"active")},drag:function(z){var N,G,M,A,C=b.layoutRect();G=C.contentW>C.innerW,M=C.contentH>C.innerH,A=b.getEl("body")["client"+P]-2*S,N=(A-=G&&M?b.getEl("scroll"+x)["client"+I]:0)/b.getEl("body")["scroll"+P],b.getEl("body")["scroll"+w]=L+z["delta"+T]/N},stop:function(){$("#"+B).removeClass(D+"active")}})}b.classes.add("scroll"),y("v","Top","Height","Y","Width"),y("h","Left","Width","X","Height")}(),b.on("wheel",function(y){var x=b.getEl("body");x.scrollLeft+=10*(y.deltaX||0),x.scrollTop+=10*y.deltaY,R()}),$(b.getEl("body")).on("scroll",R)),R())}}}),He(Zi,[qi,ar],function($,W){return $.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[W],renderHtml:function(){var R=this,k=R._layout,b=R.settings.html;return R.preRender(),k.preRender(R),typeof b>"u"?b='<div id="'+R._id+'-body" class="'+R.bodyClasses+'">'+k.renderHtml(R)+"</div>":("function"==typeof b&&(b=b.call(R)),R._hasBody=!1),'<div id="'+R._id+'" class="'+R.classes+'" hidefocus="1" tabindex="-1" role="group">'+(R._preBodyHtml||"")+b+"</div>"}})}),He(Kr,[Bn],function($){function W(R,k,b){var S,y,x,w,P,T,I,L,B,D;return B=$.getViewPort(),x=(y=$.getPos(k)).x,w=y.y,R.state.get("fixed")&&"static"==$.getRuntimeStyle(document.body,"position")&&(x-=B.x,w-=B.y),S=R.getEl(),P=(D=$.getSize(S)).width,T=D.height,I=(D=$.getSize(k)).width,L=D.height,"b"===(b=(b||"").split(""))[0]&&(w+=L),"r"===b[1]&&(x+=I),"c"===b[0]&&(w+=Math.round(L/2)),"c"===b[1]&&(x+=Math.round(I/2)),"b"===b[3]&&(w-=T),"r"===b[4]&&(x-=P),"c"===b[3]&&(w-=Math.round(T/2)),"c"===b[4]&&(x-=Math.round(P/2)),{x,y:w,w:P,h:T}}return{testMoveRel:function(R,k){for(var b=$.getViewPort(),S=0;S<k.length;S++){var y=W(this,R,k[S]);if(this.state.get("fixed")){if(y.x>0&&y.x+y.w<b.w&&y.y>0&&y.y+y.h<b.h)return k[S]}else if(y.x>b.x&&y.x+y.w<b.w+b.x&&y.y>b.y&&y.y+y.h<b.h+b.y)return k[S]}return k[0]},moveRel:function(R,k){"string"!=typeof k&&(k=this.testMoveRel(R,k));var b=W(this,R,k);return this.moveTo(b.x,b.y)},moveBy:function(R,k){var b=this,S=b.layoutRect();return b.moveTo(S.x+R,S.y+k),b},moveTo:function(R,k){function b(w,P,T){return w<0||w+T>P&&(w=P-T)<0?0:w}var S=this;if(S.settings.constrainToViewport){var y=$.getViewPort(window),x=S.layoutRect();R=b(R,y.w+y.x,x.w),k=b(k,y.h+y.y,x.h)}return S.state.get("rendered")?S.layoutRect({x:R,y:k}).repaint():(S.settings.x=R,S.settings.y=k),S.fire("move",{x:R,y:k}),S}}}),He(ki,[Bn],function($){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(W,R){if(W<=1||R<=1){var k=$.getWindowSize();W=W<=1?W*k.w:W,R=R<=1?R*k.h:R}return this._layoutRect.autoResize=!1,this.layoutRect({minW:W,minH:R,w:W,h:R}).reflow()},resizeBy:function(W,R){var b=this.layoutRect();return this.resizeTo(b.w+W,b.h+R)}}}),He(zr,[Zi,Kr,ki,Bn,rt,Ze],function($,W,R,k,b,S){function y(g,m){for(;g;){if(g==m)return!0;g=g.parent()}}function I(g){function m(U,H){for(var Z,J=0;J<G.length;J++)if(G[J]!=g)for(Z=G[J].parent();Z&&(Z=Z.parent());)Z==g&&G[J].fixed(U).moveBy(0,H).repaint()}var O=k.getViewPort().y;g.settings.autofix&&(g.state.get("fixed")?g._autoFixY>O&&(g.fixed(!1).layoutRect({y:g._autoFixY}).repaint(),m(!1,g._autoFixY-O)):(g._autoFixY=g.layoutRect().y,g._autoFixY<O&&(g.fixed(!0).layoutRect({y:0}).repaint(),m(!0,O-g._autoFixY))))}function L(g,m){var O,H,U=C.zIndex||65535;if(g)M.push(m);else for(O=M.length;O--;)M[O]===m&&M.splice(O,1);if(M.length)for(O=0;O<M.length;O++)M[O].modal&&(U++,H=M[O]),M[O].getEl().style.zIndex=U,M[O].zIndex=U,U++;var Z=b("#"+m.classPrefix+"modal-block",m.getContainerElm())[0];H?b(Z).css("z-index",H.zIndex-1):Z&&(Z.parentNode.removeChild(Z),A=!1),C.currentZIndex=U}function B(g){var m;for(m=G.length;m--;)G[m]===g&&G.splice(m,1);for(m=M.length;m--;)M[m]===g&&M.splice(m,1)}var D,z,N,A,G=[],M=[],C=$.extend({Mixins:[W,R],init:function(g){var m=this;m._super(g),m._eventsRoot=m,m.classes.add("floatpanel"),g.autohide&&(function w(){D||(D=function(g){2!=g.button&&function x(g){for(var m=G.length;m--;){var O=G[m],U=O.getParentCtrl(g.target);if(O.settings.autohide){if(U&&(y(U,O)||O.parent()===U))continue;(g=O.fire("autohide",{target:g.target})).isDefaultPrevented()||O.hide()}}}(g)},b(document).on("click touchstart",D))}(),function T(){if(!N){var g=document.documentElement,m=g.clientWidth,O=g.clientHeight;N=function(){document.all&&m==g.clientWidth&&O==g.clientHeight||(m=g.clientWidth,O=g.clientHeight,C.hideAll())},b(window).on("resize",N)}}(),G.push(m)),g.autofix&&(function P(){z||(z=function(){var g;for(g=G.length;g--;)I(G[g])},b(window).on("scroll",z))}(),m.on("move",function(){I(this)})),m.on("postrender show",function(O){if(O.control==m){var U,H=m.classPrefix;m.modal&&!A&&((U=b("#"+H+"modal-block",m.getContainerElm()))[0]||(U=b('<div id="'+H+'modal-block" class="'+H+"reset "+H+'fade"></div>').appendTo(m.getContainerElm())),S.setTimeout(function(){U.addClass(H+"in"),b(m.getEl()).addClass(H+"in")}),A=!0),L(!0,m)}}),m.on("show",function(){m.parents().each(function(O){if(O.state.get("fixed"))return m.fixed(!0),!1})}),g.popover&&(m._preBodyHtml='<div class="'+m.classPrefix+'arrow"></div>',m.classes.add("popover").add("bottom").add(m.isRtl()?"end":"start")),m.aria("label",g.ariaLabel),m.aria("labelledby",m._id),m.aria("describedby",m.describedBy||m._id+"-none")},fixed:function(g){var m=this;if(m.state.get("fixed")!=g){if(m.state.get("rendered")){var O=k.getViewPort();g?m.layoutRect().y-=O.y:m.layoutRect().y+=O.y}m.classes.toggle("fixed",g),m.state.set("fixed",g)}return m},show:function(){var m,g=this,O=g._super();for(m=G.length;m--&&G[m]!==g;);return-1===m&&G.push(g),O},hide:function(){return B(this),L(!1,this),this._super()},hideAll:function(){C.hideAll()},close:function(){var g=this;return g.fire("close").isDefaultPrevented()||(g.remove(),L(!1,g)),g},remove:function(){B(this),this._super()},postRender:function(){var g=this;return g.settings.bodyRole&&this.getEl("body").setAttribute("role",g.settings.bodyRole),g._super()}});return C.hideAll=function(){for(var g=G.length;g--;){var m=G[g];m&&m.settings.autohide&&(m.hide(),G.splice(g,1))}},C}),He(Aa,[zr,Zi,Bn,rt,pr,Gn,St,Ze],function($,W,R,k,b,S,y,x){function w(z){var M,G=k("meta[name=viewport]")[0];!1!==y.overrideViewPort&&(G||((G=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(G)),(M=G.getAttribute("content"))&&typeof B<"u"&&(B=M),G.setAttribute("content",z?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":B))}var L=[],B="",D=$.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(z){var N=this;N._super(z),N.isRtl()&&N.classes.add("rtl"),N.classes.add("window"),N.bodyClasses.add("window-body"),N.state.set("fixed",!0),z.buttons&&(N.statusbar=new W({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:N.isRtl()?"start":"end",defaults:{type:"button"},items:z.buttons}),N.statusbar.classes.add("foot"),N.statusbar.parent(N)),N.on("click",function(G){var M=N.classPrefix+"close";(R.hasClass(G.target,M)||R.hasClass(G.target.parentNode,M))&&N.close()}),N.on("cancel",function(){N.close()}),N.aria("describedby",N.describedBy||N._id+"-none"),N.aria("label",z.title),N._fullscreen=!1},recalc:function(){var G,M,A,C,z=this,N=z.statusbar;z._fullscreen&&(z.layoutRect(R.getWindowSize()),z.layoutRect().contentH=z.layoutRect().innerH),z._super(),G=z.layoutRect(),z.settings.title&&!z._fullscreen&&(M=G.headerW)>G.w&&(A=G.x-Math.max(0,M/2),z.layoutRect({w:M,x:A}),C=!0),N&&(N.layoutRect({w:z.layoutRect().innerW}).recalc(),(M=N.layoutRect().minW+G.deltaW)>G.w&&(A=G.x-Math.max(0,M-G.w),z.layoutRect({w:M,x:A}),C=!0)),C&&z.recalc()},initLayoutRect:function(){var M,z=this,N=z._super(),G=0;if(z.settings.title&&!z._fullscreen){M=z.getEl("head");var A=R.getSize(M);N.headerW=A.width,N.headerH=A.height,G+=N.headerH}z.statusbar&&(G+=z.statusbar.layoutRect().h),N.deltaH+=G,N.minH+=G,N.h+=G;var C=R.getWindowSize();return N.x=z.settings.x||Math.max(0,C.w/2-N.w/2),N.y=z.settings.y||Math.max(0,C.h/2-N.h/2),N},renderHtml:function(){var z=this,N=z._layout,G=z._id,M=z.classPrefix,A=z.settings,C="",g="",m=A.html;return z.preRender(),N.preRender(z),A.title&&(C='<div id="'+G+'-head" class="'+M+'window-head"><div id="'+G+'-title" class="'+M+'title">'+z.encode(A.title)+'</div><div id="'+G+'-dragh" class="'+M+'dragh"></div><button type="button" class="'+M+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),A.url&&(m='<iframe src="'+A.url+'" tabindex="-1"></iframe>'),typeof m>"u"&&(m=N.renderHtml(z)),z.statusbar&&(g=z.statusbar.renderHtml()),'<div id="'+G+'" class="'+z.classes+'" hidefocus="1"><div class="'+z.classPrefix+'reset" role="application">'+C+'<div id="'+G+'-body" class="'+z.bodyClasses+'">'+m+"</div>"+g+"</div></div>"},fullscreen:function(z){var M,C,N=this,G=document.documentElement,A=N.classPrefix;if(z!=N._fullscreen)if(k(window).on("resize",function(){var m;if(N._fullscreen)if(M)N._timer||(N._timer=x.setTimeout(function(){var U=R.getWindowSize();N.moveTo(0,0).resizeTo(U.w,U.h),N._timer=0},50));else{m=(new Date).getTime();var O=R.getWindowSize();N.moveTo(0,0).resizeTo(O.w,O.h),(new Date).getTime()-m>50&&(M=!0)}}),C=N.layoutRect(),N._fullscreen=z,z){N._initial={x:C.x,y:C.y,w:C.w,h:C.h},N.borderBox=S.parseBox("0"),N.getEl("head").style.display="none",C.deltaH-=C.headerH+2,k([G,document.body]).addClass(A+"fullscreen"),N.classes.add("fullscreen");var g=R.getWindowSize();N.moveTo(0,0).resizeTo(g.w,g.h)}else N.borderBox=S.parseBox(N.settings.border),N.getEl("head").style.display="",C.deltaH+=C.headerH,k([G,document.body]).removeClass(A+"fullscreen"),N.classes.remove("fullscreen"),N.moveTo(N._initial.x,N._initial.y).resizeTo(N._initial.w,N._initial.h);return N.reflow()},postRender:function(){var N,z=this;setTimeout(function(){z.classes.add("in"),z.fire("open")},0),z._super(),z.statusbar&&z.statusbar.postRender(),z.focus(),this.dragHelper=new b(z._id+"-dragh",{start:function(){N={x:z.layoutRect().x,y:z.layoutRect().y}},drag:function(G){z.moveTo(N.x+G.deltaX,N.y+G.deltaY)}}),z.on("submit",function(G){G.isDefaultPrevented()||z.close()}),L.push(z),w(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var N,z=this;for(z.dragHelper.destroy(),z._super(),z.statusbar&&this.statusbar.remove(),function P(z,N){(function T(){for(var z=0;z<L.length;z++)if(L[z]._fullscreen)return!0;return!1})()&&!1===N&&k([document.documentElement,document.body]).removeClass(z+"fullscreen")}(z.classPrefix,!1),N=L.length;N--;)L[N]===z&&L.splice(N,1);w(L.length>0)},getContentWindow:function(){var z=this.getEl().getElementsByTagName("iframe")[0];return z?z.contentWindow:null}});return function I(){if(!y.desktop){var N={w:window.innerWidth,h:window.innerHeight};x.setInterval(function(){var G=window.innerWidth,M=window.innerHeight;N.w==G&&N.h==M||(N={w:G,h:M},k(window).trigger("resize"))},100)}k(window).on("resize",function z(){var G,A,M=R.getWindowSize();for(G=0;G<L.length;G++)A=L[G].layoutRect(),L[G].moveTo(L[G].settings.x||Math.max(0,M.w/2-A.w/2),L[G].settings.y||Math.max(0,M.h/2-A.h/2))})}(),D}),He(wt,[Aa],function($){var W=$.extend({init:function(R){this._super({border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}})},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(R){function k(y,x,w){return{type:"button",text:y,subtype:w?"primary":"",onClick:function(P){P.control.parents()[1].close(),S(x)}}}var b,S=R.callback||function(){};switch(R.buttons){case W.OK_CANCEL:b=[k("Ok",!0,!0),k("Cancel",!1)];break;case W.YES_NO:case W.YES_NO_CANCEL:b=[k("Yes",1,!0),k("No",0)],R.buttons==W.YES_NO_CANCEL&&b.push(k("Cancel",-1));break;default:b=[k("Ok",!0,!0)]}return new $({padding:20,x:R.x,y:R.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:b,title:R.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:R.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:R.onClose,onCancel:function(){S(!1)}}).renderTo(document.body).reflow()},alert:function(R,k){return"string"==typeof R&&(R={text:R}),R.callback=k,W.msgBox(R)},confirm:function(R,k){return"string"==typeof R&&(R={text:R}),R.callback=k,R.buttons=W.OK_CANCEL,W.msgBox(R)}}});return W}),He(Ht,[Aa,wt],function($,W){return function(R){function k(){if(x.length)return x[x.length-1]}function b(w){R.fire("OpenWindow",{win:w})}function S(w){R.fire("CloseWindow",{win:w})}var y=this,x=[];y.windows=x,R.on("remove",function(){for(var w=x.length;w--;)x[w].close()}),y.open=function(w,P){var T;return R.editorManager.setActive(R),w.title=w.title||" ",w.url=w.url||w.file,w.url&&(w.width=parseInt(w.width||320,10),w.height=parseInt(w.height||240,10)),w.body&&(w.items={defaults:w.defaults,type:w.bodyType||"form",items:w.body,data:w.data,callbacks:w.commands}),w.url||w.buttons||(w.buttons=[{text:"Ok",subtype:"primary",onclick:function(){T.find("form")[0].submit()}},{text:"Cancel",onclick:function(){T.close()}}]),T=new $(w),x.push(T),T.on("close",function(){for(var I=x.length;I--;)x[I]===T&&x.splice(I,1);x.length||R.focus(),S(T)}),w.data&&T.on("postRender",function(){this.find("*").each(function(I){var L=I.name();L in w.data&&I.value(w.data[L])})}),T.features=w||{},T.params=P||{},1===x.length&&R.nodeChanged(),b(T=T.renderTo().reflow()),T},y.alert=function(w,P,T){var I;(I=W.alert(w,function(){P?P.call(T||this):R.focus()})).on("close",function(){S(I)}),b(I)},y.confirm=function(w,P,T){var I;(I=W.confirm(w,function(L){P.call(T||this,L)})).on("close",function(){S(I)}),b(I)},y.close=function(){k()&&k().close()},y.getParams=function(){return k()?k().params:null},y.setParams=function(w){k()&&(k().params=w)},y.getWindows=function(){return x}}}),He(mn,[ji,Kr],function($,W){return $.extend({Mixins:[W],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var R=this,k=R.classPrefix;return'<div id="'+R._id+'" class="'+R.classes+'" role="presentation"><div class="'+k+'tooltip-arrow"></div><div class="'+k+'tooltip-inner">'+R.encode(R.state.get("text"))+"</div></div>"},bindStates:function(){var R=this;return R.state.on("change:text",function(k){R.getEl().lastChild.innerHTML=R.encode(k.value)}),R._super()},repaint:function(){var k,b;(k=this.getEl().style).left=(b=this._layoutRect).x+"px",k.top=b.y+"px",k.zIndex=131070}})}),He(sn,[ji,mn],function($,W){var R,k=$.extend({init:function(b){var S=this;S._super(b),b=S.settings,S.canFocus=!0,b.tooltip&&!1!==k.tooltips&&(S.on("mouseenter",function(y){var x=S.tooltip().moveTo(-65535);if(y.control==S){var w=x.text(b.tooltip).show().testMoveRel(S.getEl(),["bc-tc","bc-tl","bc-tr"]);x.classes.toggle("tooltip-n","bc-tc"==w),x.classes.toggle("tooltip-nw","bc-tl"==w),x.classes.toggle("tooltip-ne","bc-tr"==w),x.moveRel(S.getEl(),w)}else x.hide()}),S.on("mouseleave mousedown click",function(){S.tooltip().hide()})),S.aria("label",b.ariaLabel||b.tooltip)},tooltip:function(){return R||(R=new W({type:"tooltip"})).renderTo(),R},postRender:function(){var b=this,S=b.settings;b._super(),b.parent()||!S.width&&!S.height||(b.initLayoutRect(),b.repaint()),S.autofocus&&b.focus()},bindStates:function(){function b(x){y.aria("disabled",x),y.classes.toggle("disabled",x)}function S(x){y.aria("pressed",x),y.classes.toggle("active",x)}var y=this;return y.state.on("change:disabled",function(x){b(x.value)}),y.state.on("change:active",function(x){S(x.value)}),y.state.get("disabled")&&b(!0),y.state.get("active")&&S(!0),y._super()},remove:function(){this._super(),R&&(R.remove(),R=null)}});return k}),He(An,[sn],function($){return $.extend({Defaults:{value:0},init:function(W){var R=this;R._super(W),R.classes.add("progress"),R.settings.filter||(R.settings.filter=function(k){return Math.round(k)})},renderHtml:function(){var k=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div class="'+k+'bar-container"><div class="'+k+'bar"></div></div><div class="'+k+'text">0%</div></div>'},postRender:function(){var W=this;return W._super(),W.value(W.settings.value),W},bindStates:function(){function W(k){k=R.settings.filter(k),R.getEl().lastChild.innerHTML=k+"%",R.getEl().firstChild.firstChild.style.width=k+"%"}var R=this;return R.state.on("change:value",function(k){W(k.value)}),W(R.state.get("value")),R._super()}})}),He(Wn,[ji,Kr,An,Ze],function($,W,R,k){return $.extend({Mixins:[W],Defaults:{classes:"widget notification"},init:function(b){var S=this;S._super(b),b.text&&S.text(b.text),b.icon&&(S.icon=b.icon),b.color&&(S.color=b.color),b.type&&S.classes.add("notification-"+b.type),b.timeout&&(b.timeout<0||b.timeout>0)&&!b.closeButton?S.closeButton=!1:(S.classes.add("has-close"),S.closeButton=!0),b.progressBar&&(S.progressBar=new R),S.on("click",function(y){-1!=y.target.className.indexOf(S.classPrefix+"close")&&S.close()})},renderHtml:function(){var b=this,S=b.classPrefix,y="",x="",w="",P="";return b.icon&&(y='<i class="'+S+"ico "+S+"i-"+b.icon+'"></i>'),b.color&&(P=' style="background-color: '+b.color+'"'),b.closeButton&&(x='<button type="button" class="'+S+'close" aria-hidden="true">\xd7</button>'),b.progressBar&&(w=b.progressBar.renderHtml()),'<div id="'+b._id+'" class="'+b.classes+'"'+P+' role="presentation">'+y+'<div class="'+S+'notification-inner">'+b.state.get("text")+"</div>"+w+x+"</div>"},postRender:function(){var b=this;return k.setTimeout(function(){b.$el.addClass(b.classPrefix+"in")}),b._super()},bindStates:function(){var b=this;return b.state.on("change:text",function(S){b.getEl().childNodes[1].innerHTML=S.value}),b.progressBar&&b.progressBar.bindStates(),b._super()},close:function(){var b=this;return b.fire("close").isDefaultPrevented()||b.remove(),b},repaint:function(){var S,y;(S=this.getEl().style).left=(y=this._layoutRect).x+"px",S.top=y.y+"px",S.zIndex=65534}})}),He(jn,[Wn,Ze,Fe],function($,W,R){return function(k){function b(){if(L.length)return L[L.length-1]}function x(){if(L.length>0){var B=L.slice(0,1)[0],D=k.inline?k.getElement():k.getContentAreaContainer();if(B.moveRel(D,"tc-tc"),L.length>1)for(var z=1;z<L.length;z++)L[z].moveRel(L[z-1].getEl(),"bc-tc")}}var I=this,L=[];I.notifications=L,k.on("remove",function(){for(var B=L.length;B--;)L[B].close()}),k.on("ResizeEditor",x),k.on("ResizeWindow",function S(){W.requestAnimationFrame(function(){(function y(){for(var B=0;B<L.length;B++)L[B].moveTo(0,0)})(),x()})}),I.open=function(B){if(!k.removed){var D;k.editorManager.setActive(k);var z=function w(B,D){if(!function T(B){return!B.progressBar&&!B.timeout}(D))return null;var z=R.grep(B,function(N){return function P(B,D){return B.type===D.settings.type&&B.text===D.settings.text}(D,N)});return 0===z.length?null:z[0]}(L,B);return null===z?(D=new $(B),L.push(D),B.timeout>0&&(D.timer=setTimeout(function(){D.close()},B.timeout)),D.on("close",function(){var N=L.length;for(D.timer&&k.getWin().clearTimeout(D.timer);N--;)L[N]===D&&L.splice(N,1);x()}),D.renderTo(),x()):D=z,D}},I.close=function(){b()&&b().close()},I.getNotifications=function(){return L},k.on("SkinLoaded",function(){var B=k.settings.service_message;B&&k.notificationManager.open({text:B,type:"warning",timeout:0,icon:""})})}}),He(qn,[Ve],function($){return{create:function W(k,b,S){for(var y=[];b&&b!=k;b=b.parentNode)y.push($.nodeIndex(b,S));return y},resolve:function R(k,b){var S,y,x;for(y=k,S=b.length-1;S>=0;S--){if(b[S]>(x=y.childNodes).length-1)return null;y=x[b[S]]}return y}}}),He(Zn,[on,Ke,fe,qn,nt,Ee,St,Fe,Ze,re,pn,wn],function($,W,R,k,b,S,y,x,w,P,T,I){return function(L){function B(kt,Yt){try{L.getDoc().execCommand(kt,!1,Yt)}catch{}}function D(){return L.getDoc().documentMode||6}function z(kt){return kt.isDefaultPrevented()}function N(kt){var Yt,je;kt.dataTransfer&&(L.selection.isCollapsed()&&"IMG"==kt.target.tagName&&vn.select(kt.target),(Yt=L.selection.getContent()).length>0&&(je=gi+escape(L.id)+","+escape(Yt),kt.dataTransfer.setData(mi,je)))}function G(kt){var Yt;return kt.dataTransfer&&(Yt=kt.dataTransfer.getData(mi))&&Yt.indexOf(gi)>=0?(Yt=Yt.substr(gi.length).split(","),{id:unescape(Yt[0]),html:unescape(Yt[1])}):null}function M(kt){L.queryCommandSupported("mceInsertClipboardContent")?L.execCommand("mceInsertClipboardContent",!1,{content:kt}):L.execCommand("mceInsertContent",!1,kt)}function g(){L.shortcuts.add("meta+a",null,"SelectAll")}function O(){L.on("keydown",function(kt){if(!z(kt)&&kt.keyCode===ct){if(!L.getBody().getElementsByTagName("hr").length)return;if(vn.isCollapsed()&&0===vn.getRng(!0).startOffset){var Yt=vn.getNode(),je=Yt.previousSibling;if("HR"==Yt.nodeName)return yt.remove(Yt),void kt.preventDefault();je&&je.nodeName&&"hr"===je.nodeName.toLowerCase()&&(yt.remove(je),kt.preventDefault())}}})}function de(){L.on("keydown",function(kt){if(!z(kt)&&kt.keyCode===ct&&vn.isCollapsed()&&0===vn.getRng(!0).startOffset){var Yt=vn.getNode().previousSibling;if(Yt&&Yt.nodeName&&"table"===Yt.nodeName.toLowerCase())return kt.preventDefault(),!1}})}function Ot(){L.inline||(L.contentStyles.push("body {min-height: 150px}"),L.on("click",function(kt){var Yt;if("HTML"==kt.target.nodeName){if(y.ie>11)return void L.getBody().focus();Yt=L.selection.getRng(),L.getBody().focus(),L.selection.setRng(Yt),L.selection.normalize(),L.nodeChanged()}}))}function Qe(){function kt(Yt){var je=new I(Yt.getBody()),pt=Yt.selection.getRng(),Sn=T.fromRangeStart(pt),dn=T.fromRangeEnd(pt),En=je.prev(Sn),Te=je.next(dn);return!Yt.selection.isCollapsed()&&(!En||En.isAtStart()&&Sn.isEqual(En))&&(!Te||Te.isAtEnd()&&Sn.isEqual(Te))}L.on("keypress",function(Yt){!z(Yt)&&!vn.isCollapsed()&&Yt.charCode>31&&!$.metaKeyPressed(Yt)&&kt(L)&&(Yt.preventDefault(),L.setContent(String.fromCharCode(Yt.charCode)),L.selection.select(L.getBody(),!0),L.selection.collapse(!1),L.nodeChanged())}),L.on("keydown",function(Yt){var je=Yt.keyCode;z(Yt)||je!=ft&&je!=ct||kt(L)&&(Yt.preventDefault(),L.setContent(""),L.nodeChanged())})}var Be=x.each,mt=L.$,ct=$.BACKSPACE,ft=$.DELETE,yt=L.dom,vn=L.selection,Pn=L.settings,Yn=L.parser,si=L.serializer,Jn=y.gecko,Kn=y.ie,wi=y.webkit,gi="data:text/mce-internal,",mi=Kn?"Text":"URL";return function ue(){L.on("keydown",function(kt){var Yt,je,pt,Sn,dn;if(!z(kt)&&kt.keyCode==$.BACKSPACE&&(je=(Yt=vn.getRng()).startContainer,pt=Yt.startOffset,Sn=yt.getRoot(),dn=je,Yt.collapsed&&0===pt)){for(;dn&&dn.parentNode&&dn.parentNode.firstChild==dn&&dn.parentNode!=Sn;)dn=dn.parentNode;"BLOCKQUOTE"===dn.tagName&&(L.formatter.toggle("blockquote",null,dn),(Yt=yt.createRng()).setStart(je,0),Yt.setEnd(je,0),vn.setRng(Yt))}})}(),function C(){function kt(je){var pt=yt.create("body"),Sn=je.cloneContents();return pt.appendChild(Sn),vn.serializer.serialize(pt,{format:"html"})}L.on("keydown",function(je){var Sn,dn,pt=je.keyCode;if(!z(je)&&(pt==ft||pt==ct)){if(Sn=L.selection.isCollapsed(),dn=L.getBody(),Sn&&!yt.isEmpty(dn)||!Sn&&!function Yt(je){if(!je.setStart){if(je.item)return!1;var pt=je.duplicate();return pt.moveToElementText(L.getBody()),W.compareRanges(je,pt)}var Sn=kt(je),dn=yt.createRng();return dn.selectNode(L.getBody()),Sn===kt(dn)}(L.selection.getRng()))return;je.preventDefault(),L.setContent(""),dn.firstChild&&yt.isBlock(dn.firstChild)?L.selection.setCursorLocation(dn.firstChild,0):L.selection.setCursorLocation(dn,0),L.nodeChanged()}})}(),y.windowsPhone||function Me(){L.on("keyup focusin mouseup",function(kt){65==kt.keyCode&&$.metaKeyPressed(kt)||vn.normalize()},!0)}(),wi&&(Qe(),function A(){function kt(_e){var at=pe.schema.getBlockElements(),dt=L.getBody();if("BR"!=_e.nodeName)return!1;for(;_e!=dt&&!at[_e.nodeName];_e=_e.parentNode)if(_e.nextSibling)return!1;return!0}function Yt(_e,at){var dt;for(dt=_e.nextSibling;dt&&dt!=at;dt=dt.nextSibling)if((3!=dt.nodeType||0!==mt.trim(dt.data).length)&&dt!==at)return!1;return dt===at}function je(_e,at,dt){var Xt,Le,vt;if(pe.isChildOf(_e,L.getBody()))for(vt=pe.schema.getNonEmptyElements(),Xt=new R(dt||_e,_e);Le=Xt[at?"next":"prev"]();)if(vt[Le.nodeName]&&!kt(Le)||3==Le.nodeType&&Le.data.length>0)return Le}function Te(_e){var at,dt,Xt;(function dn(_e){var at=Ne.getRng();if(at=function Sn(_e,at){var dt,Xt,Le,vt,$e,Rt;if(!_e.collapsed)return _e;if(Rt=_e.startOffset,3==($e=_e.startContainer).nodeType)if(at){if(Rt<$e.data.length)return _e}else if(Rt>0)return _e;dt=W.getNode($e,Rt),Le=pe.getParent(dt,pe.isBlock),Xt=je(L.getBody(),at,dt),vt=pe.getParent(Xt,pe.isBlock);var Ut=1===$e.nodeType&&Rt>$e.childNodes.length-1;if(!dt||!Xt)return _e;if(vt&&Le!=vt)if(at){if(!Yt(Le,vt))return _e;1==dt.nodeType?"BR"==dt.nodeName?_e.setStartBefore(dt):_e.setStartAfter(dt):_e.setStart(dt,dt.data.length),1==Xt.nodeType?_e.setEnd(Xt,0):_e.setEndBefore(Xt)}else{if(!Yt(vt,Le))return _e;1==Xt.nodeType?"BR"==Xt.nodeName?_e.setStartBefore(Xt):_e.setStartAfter(Xt):_e.setStart(Xt,Xt.data.length),1==dt.nodeType&&Ut?_e.setEndAfter(dt):_e.setEndBefore(dt)}return _e}(at,_e),function pt(_e){var at,dt,Xt,Le,vt;if(!_e.collapsed&&(at=pe.getParent(W.getNode(_e.startContainer,_e.startOffset),pe.isBlock),dt=pe.getParent(W.getNode(_e.endContainer,_e.endOffset),pe.isBlock),vt=L.schema.getTextBlockElements(),at!=dt&&vt[at.nodeName]&&vt[dt.nodeName]&&"false"!==pe.getContentEditable(at)&&"false"!==pe.getContentEditable(dt)))return _e.deleteContents(),Xt=je(at,!1),Le=je(dt,!0),pe.isEmpty(dt)||mt(at).append(dt.childNodes),mt(dt).remove(),Xt?1==Xt.nodeType?"BR"==Xt.nodeName?(_e.setStartBefore(Xt),_e.setEndBefore(Xt)):(_e.setStartAfter(Xt),_e.setEndAfter(Xt)):(_e.setStart(Xt,Xt.data.length),_e.setEnd(Xt,Xt.data.length)):Le&&(1==Le.nodeType?(_e.setStartBefore(Le),_e.setEndBefore(Le)):(_e.setStart(Le,0),_e.setEnd(Le,0))),Ne.setRng(_e),!0}(at))return!0})(_e)||(x.each(L.getBody().getElementsByTagName("*"),function(Le){"SPAN"==Le.tagName&&Le.setAttribute("mce-data-marked",1),!Le.hasAttribute("data-mce-style")&&Le.hasAttribute("style")&&L.dom.setAttrib(Le,"style",L.dom.getAttrib(Le,"style"))}),(at=new Xe(function(){})).observe(L.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),L.getDoc().execCommand(_e?"ForwardDelete":"Delete",!1,null),dt=L.selection.getRng(),Xt=dt.startContainer.parentNode,x.each(at.takeRecords(),function(Le){if(pe.isChildOf(Le.target,L.getBody())){if("style"==Le.attributeName){var vt=Le.target.getAttribute("data-mce-style");vt?Le.target.setAttribute("style",vt):Le.target.removeAttribute("style")}x.each(Le.addedNodes,function($e){var Rt,Ut;"SPAN"!=$e.nodeName||$e.getAttribute("mce-data-marked")||($e==Xt&&(Rt=dt.startOffset,Ut=$e.firstChild),pe.remove($e,!0),Ut&&(dt.setStart(Ut,Rt),dt.setEnd(Ut,Rt),L.selection.setRng(dt)))})}}),at.disconnect(),x.each(L.dom.select("span[mce-data-marked]"),function(Le){Le.removeAttribute("mce-data-marked")}))}function We(_e){L.undoManager.transact(function(){Te(_e)})}var xt,et,te=L.getDoc(),pe=L.dom,Ne=L.selection,Xe=window.MutationObserver;Xe||(xt=!0,Xe=function(){function _e(Le){var vt=Le.relatedNode||Le.target;dt.push({target:vt,addedNodes:[vt]})}function at(Le){dt.push({target:Le.relatedNode||Le.target,attributeName:Le.attrName})}var Xt,dt=[];this.observe=function(Le){(Xt=Le).addEventListener("DOMSubtreeModified",_e,!1),Xt.addEventListener("DOMNodeInsertedIntoDocument",_e,!1),Xt.addEventListener("DOMNodeInserted",_e,!1),Xt.addEventListener("DOMAttrModified",at,!1)},this.disconnect=function(){Xt.removeEventListener("DOMSubtreeModified",_e,!1),Xt.removeEventListener("DOMNodeInsertedIntoDocument",_e,!1),Xt.removeEventListener("DOMNodeInserted",_e,!1),Xt.removeEventListener("DOMAttrModified",at,!1)},this.takeRecords=function(){return dt}}),L.on("keydown",function(_e){var at=_e.keyCode==ft,dt=_e.ctrlKey||_e.metaKey;if(!z(_e)&&(at||_e.keyCode==ct)){var Xt=L.selection.getRng(),Le=Xt.startContainer,vt=Xt.startOffset;if(at&&_e.shiftKey)return;if(function En(_e,at){function dt(Hn,In){return _n=mt(In).parents().filter(function(ii,Ci){return!!L.schema.getTextInlineElements()[Ci.nodeName]}),$e=Hn.cloneNode(!1),(_n=x.map(_n,function(ii){return ii=ii.cloneNode(!1),$e.hasChildNodes()&&ii.appendChild($e.firstChild),$e.appendChild(ii),$e.appendChild(ii),ii})).length?(tn=pe.create("br"),_n[0].appendChild(tn),pe.replace($e,Hn),at.setStartBefore(tn),at.setEndBefore(tn),L.selection.setRng(at),tn):null}function Xt(Hn){return Hn&&L.schema.getTextBlockElements()[Hn.tagName]}var Le,vt,$e,Rt,Ut,Bt,jt,tn,_n;if(at.collapsed&&(jt=at.startOffset,Xt(vt=pe.getParent(Bt=at.startContainer,pe.isBlock))))if(1==Bt.nodeType){if((Bt=Bt.childNodes[jt])&&"BR"!=Bt.tagName)return;if(Ut=_e?vt.nextSibling:vt.previousSibling,pe.isEmpty(vt)&&Xt(Ut)&&pe.isEmpty(Ut)&&dt(vt,Bt))return pe.remove(Ut),!0}else if(3==Bt.nodeType){if(Le=k.create(vt,Bt),Rt=vt.cloneNode(!0),Bt=k.resolve(Rt,Le),_e){if(jt>=Bt.data.length)return;Bt.deleteData(jt,1)}else{if(jt<=0)return;Bt.deleteData(jt-1,1)}if(pe.isEmpty(Rt))return dt(vt,Bt)}}(at,Xt))return void _e.preventDefault();if(!dt&&Xt.collapsed&&3==Le.nodeType&&(at?vt<Le.data.length:vt>0))return;_e.preventDefault(),dt&&L.selection.getSel().modify("extend",at?"forward":"backward",_e.metaKey?"lineboundary":"word"),Te(at)}}),L.on("keypress",function(_e){var at,dt,Xt,Le,vt,$e;!z(_e)&&!Ne.isCollapsed()&&_e.charCode>31&&!$.metaKeyPressed(_e)&&(at=L.selection.getRng(),$e=String.fromCharCode(_e.charCode),_e.preventDefault(),dt=mt(at.startContainer).parents().filter(function(Rt,Ut){return!!L.schema.getTextInlineElements()[Ut.nodeName]}),Te(!0),(dt=dt.filter(function(Rt,Ut){return!mt.contains(L.getBody(),Ut)})).length?(Xt=pe.createFragment(),dt.each(function(Rt,Ut){Ut=Ut.cloneNode(!1),Xt.hasChildNodes()?(Ut.appendChild(Xt.firstChild),Xt.appendChild(Ut)):(vt=Ut,Xt.appendChild(Ut)),Xt.appendChild(Ut)}),vt.appendChild(L.getDoc().createTextNode($e)),Le=pe.getParent(at.startContainer,pe.isBlock),pe.isEmpty(Le)?mt(Le).empty().append(Xt):at.insertNode(Xt),at.setStart(vt.firstChild,1),at.setEnd(vt.firstChild,1),L.selection.setRng(at)):L.selection.setContent($e))}),L.addCommand("Delete",function(){Te()}),L.addCommand("ForwardDelete",function(){Te(!0)}),xt||(L.on("dragstart",function(_e){et=Ne.getRng(),N(_e)}),L.on("drop",function(_e){if(!z(_e)){var at=G(_e);at&&(_e.preventDefault(),w.setEditorTimeout(L,function(){var dt=W.getCaretRangeFromPoint(_e.x,_e.y,te);et&&(Ne.setRng(et),et=null,We()),Ne.setRng(dt),M(at.html)}))}}),L.on("cut",function(_e){z(_e)||!_e.clipboardData||L.selection.isCollapsed()||(_e.preventDefault(),_e.clipboardData.clearData(),_e.clipboardData.setData("text/html",L.selection.getContent()),_e.clipboardData.setData("text/plain",L.selection.getContent({format:"text"})),w.setEditorTimeout(L,function(){We(!0)}))}))}(),function m(){L.settings.content_editable||yt.bind(L.getDoc(),"mousedown mouseup",function(kt){var Yt;if(kt.target==L.getDoc().documentElement)if(Yt=vn.getRng(),L.getBody().focus(),"mousedown"==kt.type){if(P.isCaretContainer(Yt.startContainer))return;vn.placeCaretAt(kt.clientX,kt.clientY)}else vn.setRng(Yt)})}(),function H(){L.on("click",function(kt){var Yt=kt.target;/^(IMG|HR)$/.test(Yt.nodeName)&&"false"!==yt.getContentEditableParent(Yt)&&(kt.preventDefault(),vn.select(Yt),L.nodeChanged()),"A"==Yt.nodeName&&yt.hasClass(Yt,"mce-item-anchor")&&(kt.preventDefault(),vn.select(Yt))})}(),function ye(){Pn.forced_root_block&&L.on("init",function(){B("DefaultParagraphSeparator",Pn.forced_root_block)})}(),function ne(){L.on("init",function(){L.dom.bind(L.getBody(),"submit",function(kt){kt.preventDefault()})})}(),de(),function ee(){Yn.addNodeFilter("br",function(kt){for(var Yt=kt.length;Yt--;)"Apple-interchange-newline"==kt[Yt].attr("class")&&kt[Yt].remove()})}(),y.iOS?(function At(){L.inline||L.on("keydown",function(){document.activeElement==document.body&&L.getWin().focus()})}(),Ot(),function Se(){L.on("click",function(kt){var Yt=kt.target;do{if("A"===Yt.tagName)return void kt.preventDefault()}while(Yt=Yt.parentNode)}),L.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}()):g()),Kn&&y.ie<11&&(O(),function J(){document.body.setAttribute("role","application")}(),function se(){D()>7||(B("RespectVisibilityInDesign",!0),L.contentStyles.push(".mceHideBrInPre pre br {display: none}"),yt.addClass(L.getBody(),"mceHideBrInPre"),Yn.addNodeFilter("pre",function(kt){for(var je,pt,Sn,dn,Yt=kt.length;Yt--;)for(pt=(je=kt[Yt].getAll("br")).length;pt--;)(dn=(Sn=je[pt]).prev)&&3===dn.type&&"\n"!=dn.value.charAt(dn.value-1)?dn.value+="\n":Sn.parent.insert(new b("#text",3),Sn,!0).value="\n"}),si.addNodeFilter("pre",function(kt){for(var je,pt,dn,Yt=kt.length;Yt--;)for(pt=(je=kt[Yt].getAll("br")).length;pt--;)(dn=je[pt].prev)&&3==dn.type&&(dn.value=dn.value.replace(/\r?\n$/,""))}))}(),function ae(){yt.bind(L.getBody(),"mouseup",function(){var kt,Yt=vn.getNode();"IMG"==Yt.nodeName&&((kt=yt.getStyle(Yt,"width"))&&(yt.setAttrib(Yt,"width",kt.replace(/[^0-9%]+/g,"")),yt.setStyle(Yt,"width","")),(kt=yt.getStyle(Yt,"height"))&&(yt.setAttrib(Yt,"height",kt.replace(/[^0-9%]+/g,"")),yt.setStyle(Yt,"height","")))})}(),function K(){L.on("keydown",function(kt){var Yt;z(kt)||kt.keyCode!=ct||(Yt=L.getDoc().selection.createRange())&&Yt.item&&(kt.preventDefault(),L.undoManager.beforeChange(),yt.remove(Yt.item(0)),L.undoManager.add())})}(),function ie(){var kt;D()>=10&&(kt="",Be("p div h1 h2 h3 h4 h5 h6".split(" "),function(Yt,je){kt+=(je>0?",":"")+Yt+":empty"}),L.contentStyles.push(kt+"{padding-right: 1px !important}"))}(),function he(){D()<9&&(Yn.addNodeFilter("noscript",function(kt){for(var je,pt,Yt=kt.length;Yt--;)(pt=(je=kt[Yt]).firstChild)&&je.attr("data-mce-innertext",pt.value)}),si.addNodeFilter("noscript",function(kt){for(var je,pt,Sn,Yt=kt.length;Yt--;)je=kt[Yt],(pt=kt[Yt].firstChild)?pt.value=S.decode(pt.value):(Sn=je.attributes.map["data-mce-innertext"])&&(je.attr("data-mce-innertext",null),(pt=new b("#text",3)).value=Sn,pt.raw=!0,je.append(pt))}))}(),function xe(){function kt(We,te){var pe=Sn.createTextRange();try{pe.moveToPoint(We,te)}catch{pe=null}return pe}function Yt(We){var te;We.button?(te=kt(We.x,We.y))&&(te.compareEndPoints("StartToStart",En)>0?te.setEndPoint("StartToStart",En):te.setEndPoint("EndToEnd",En),te.select()):je()}function je(){var We=pt.selection.createRange();En&&!We.item&&0===We.compareEndPoints("StartToEnd",We)&&En.select(),yt.unbind(pt,"mouseup",je),yt.unbind(pt,"mousemove",Yt),En=dn=0}var dn,En,Te,pt=yt.doc,Sn=pt.body;pt.documentElement.unselectable=!0,yt.bind(pt,"mousedown contextmenu",function(We){if("HTML"===We.target.nodeName){if(dn&&je(),(Te=pt.documentElement).scrollHeight>Te.clientHeight)return;dn=1,(En=kt(We.x,We.y))&&(yt.bind(pt,"mouseup",je),yt.bind(pt,"mousemove",Yt),yt.getRoot().focus(),En.select())}})}()),y.ie>=11&&(Ot(),de()),y.ie&&(g(),function zt(){B("AutoUrlDetect",!1)}(),function me(){L.on("dragstart",function(kt){N(kt)}),L.on("drop",function(kt){if(!z(kt)){var Yt=G(kt);if(Yt&&Yt.id!=L.id){kt.preventDefault();var je=W.getCaretRangeFromPoint(kt.x,kt.y,L.getDoc());vn.setRng(je),M(Yt.html)}}})}()),Jn&&(Qe(),O(),function U(){window.Range.prototype.getClientRects||L.on("mousedown",function(kt){if(!z(kt)&&"HTML"===kt.target.nodeName){var Yt=L.getBody();Yt.blur(),w.setEditorTimeout(L,function(){Yt.focus()})}})}(),function Z(){function kt(){var je=yt.getAttribs(vn.getStart().cloneNode(!1));return function(){var pt=vn.getStart();pt!==L.getBody()&&(yt.setAttrib(pt,"style",null),Be(je,function(Sn){pt.setAttributeNode(Sn.cloneNode(!0))}))}}function Yt(){return!vn.isCollapsed()&&yt.getParent(vn.getStart(),yt.isBlock)!=yt.getParent(vn.getEnd(),yt.isBlock)}L.on("keypress",function(je){var pt;if(!z(je)&&(8==je.keyCode||46==je.keyCode)&&Yt())return pt=kt(),L.getDoc().execCommand("delete",!1,null),pt(),je.preventDefault(),!1}),yt.bind(L.getDoc(),"cut",function(je){var pt;!z(je)&&Yt()&&(pt=kt(),w.setEditorTimeout(L,function(){pt()}))})}(),function le(){Pn.readonly||L.on("BeforeExecCommand MouseDown",function kt(){B("StyleWithCSS",!1),B("enableInlineTableEditing",!1),Pn.object_resizing||B("enableObjectResizing",!1)})}(),function ve(){L.on("SetContent ExecCommand",function(Yt){"setcontent"!=Yt.type&&"mceInsertLink"!==Yt.command||function kt(){Be(yt.select("a"),function(Yt){var je=Yt.parentNode,pt=yt.getRoot();if(je.lastChild===Yt){for(;je&&!yt.isBlock(je);){if(je.parentNode.lastChild!==je||je===pt)return;je=je.parentNode}yt.add(je,"br",{"data-mce-bogus":1})}})}()})}(),function ot(){L.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}(),function Jt(){y.mac&&L.on("keydown",function(kt){!$.metaKeyPressed(kt)||kt.shiftKey||37!=kt.keyCode&&39!=kt.keyCode||(kt.preventDefault(),L.selection.getSel().modify("move",37==kt.keyCode?"backward":"forward","lineboundary"))})}(),de()),{refreshContentEditable:function ke(){},isHidden:function qe(){var kt;return Jn?!(kt=L.selection.getSel())||!kt.rangeCount||0===kt.rangeCount:0}}}}),He(ni,[cn,Ve,Fe],function($,W,R){function k(w,P){return"selectionchange"==P?w.getDoc():!w.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(P)?w.getDoc().documentElement:w.settings.event_root?(w.eventRoot||(w.eventRoot=S.select(w.settings.event_root)[0]),w.eventRoot):w.getBody()}function b(w,P){function T(B){return!B.hidden&&!B.readonly}var L,I=k(w,P);if(w.delegates||(w.delegates={}),!w.delegates[P])if(w.settings.event_root){if(y||(y={},w.editorManager.on("removeEditor",function(){var B;if(!w.editorManager.activeEditor&&y){for(B in y)w.dom.unbind(k(w,B));y=null}})),y[P])return;y[P]=L=function(B){for(var D=B.target,z=w.editorManager.editors,N=z.length;N--;){var G=z[N].getBody();(G===D||S.isChildOf(D,G))&&T(z[N])&&z[N].fire(P,B)}},S.bind(I,P,L)}else S.bind(I,P,L=function(B){T(w)&&w.fire(P,B)}),w.delegates[P]=L}var y,S=W.DOM,x={bindPendingEventDelegates:function(){var w=this;R.each(w._pendingNativeEvents,function(P){b(w,P)})},toggleNativeEvent:function(w,P){var T=this;"focus"!=w&&"blur"!=w&&(P?T.initialized?b(T,w):T._pendingNativeEvents?T._pendingNativeEvents.push(w):T._pendingNativeEvents=[w]:T.initialized&&(T.dom.unbind(k(T,w),w,T.delegates[w]),delete T.delegates[w]))},unbindAllNativeEvents:function(){var P,w=this;if(w.delegates){for(P in w.delegates)w.dom.unbind(k(w,P),P,w.delegates[P]);delete w.delegates}w.inline||(w.getBody().onload=null,w.dom.unbind(w.getWin()),w.dom.unbind(w.getDoc())),w.dom.unbind(w.getBody()),w.dom.unbind(w.getContainer())}};return R.extend({},$,x)}),He(pi,[],function(){function $(b,S,y){try{b.getDoc().execCommand(S,!1,y)}catch{}}function R(b,S){b._clickBlocker&&(b._clickBlocker.unbind(),b._clickBlocker=null),S?(b._clickBlocker=function W(b){var S,y;return S=b.getBody(),y=function(x){b.dom.getParents(x.target,"a").length>0&&x.preventDefault()},b.dom.bind(S,"click",y),{unbind:function(){b.dom.unbind(S,"click",y)}}}(b),b.selection.controlSelection.hideResizeRect(),b.readonly=!0,b.getBody().contentEditable=!1):(b.readonly=!1,b.getBody().contentEditable=!0,$(b,"StyleWithCSS",!1),$(b,"enableInlineTableEditing",!1),$(b,"enableObjectResizing",!1),b.focus(),b.nodeChanged())}return{setMode:function k(b,S){S!=(b.readonly?"readonly":"design")&&(b.initialized?R(b,"readonly"==S):b.on("init",function(){R(b,"readonly"==S)}),b.fire("SwitchMode",{mode:S}))}}}),He(xi,[Fe,St],function($,W){var R=$.each,k=$.explode,b={f9:120,f10:121,f11:122},S=$.makeMap("alt,ctrl,shift,meta,access");return function(y){function x(N){var G,M,A={};for(M in R(k(N,"+"),function(C){C in S?A[C]=!0:/^[0-9]{2,}$/.test(C)?A.keyCode=parseInt(C,10):(A.charCode=C.charCodeAt(0),A.keyCode=b[C]||C.toUpperCase().charCodeAt(0))}),G=[A.keyCode],S)A[M]?G.push(M):A[M]=!1;return A.id=G.join(","),A.access&&(A.alt=!0,W.mac?A.ctrl=!0:A.shift=!0),A.meta&&(W.mac?A.meta=!0:(A.ctrl=!0,A.meta=!1)),A}function w(N,G,M,A){var C;return(C=$.map(k(N,">"),x))[C.length-1]=$.extend(C[C.length-1],{func:M,scope:A||y}),$.extend(C[0],{desc:y.translate(G),subpatterns:C.slice(1)})}function I(N,G){return!!G&&G.ctrl==N.ctrlKey&&G.meta==N.metaKey&&G.alt==N.altKey&&G.shift==N.shiftKey&&!!(N.keyCode==G.keyCode||N.charCode&&N.charCode==G.charCode)&&(N.preventDefault(),!0)}function L(N){return N.func?N.func.call(N.scope):null}var D={},z=[];y.on("keyup keypress keydown",function(N){!function P(N){return N.altKey||N.ctrlKey||N.metaKey}(N)&&!function T(N){return"keydown"===N.type&&N.keyCode>=112&&N.keyCode<=123}(N)||N.isDefaultPrevented()||(R(D,function(G){if(I(N,G))return z=G.subpatterns.slice(0),"keydown"==N.type&&L(G),!0}),I(N,z[0])&&(1===z.length&&"keydown"==N.type&&L(z[0]),z.shift()))}),this.add=function(N,G,M,A){var C;return C=M,"string"==typeof M?M=function(){y.execCommand(C,!1,null)}:$.isArray(C)&&(M=function(){y.execCommand(C[0],C[1],C[2])}),R(k($.trim(N.toLowerCase())),function(g){var m=w(g,G,M,A);D[m.id]=m}),!0},this.remove=function(N){var G=w(N);return!!D[G.id]&&(delete D[G.id],!0)}}}),He(Ai,[be,Fe,lt],function($,W,R){return function(k,b){function S(A){var C;return C={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[A.blob().type.toLowerCase()]||"dat",A.filename()+"."+C}function w(A,C,g,m){var O,U;(O=new XMLHttpRequest).open("POST",b.url),O.withCredentials=b.credentials,O.upload.onprogress=function(H){m(H.loaded/H.total*100)},O.onerror=function(){g("Image upload failed due to a XHR Transport error. Code: "+O.status)},O.onload=function(){var H;return 200!=O.status?void g("HTTP Error: "+O.status):(H=JSON.parse(O.responseText))&&"string"==typeof H.location?void C(function y(A,C){return A?A.replace(/\/$/,"")+"/"+C.replace(/^\//,""):C}(b.basePath,H.location)):void g("Invalid JSON: "+O.responseText)},(U=new FormData).append("file",A.blob(),A.filename()),O.send(U)}function T(A,C){return{url:C,blobInfo:A,status:!0}}function I(A,C){return{url:"",blobInfo:A,status:!1,error:C}}function L(A,C){W.each(M[A],function(g){g(C)}),delete M[A]}function N(A,C){return A=W.grep(A,function(g){return!k.isUploaded(g.blobUri())}),$.all(W.map(A,function(g){return k.isPending(g.blobUri())?function z(A){var C=A.blobUri();return new $(function(g){M[C]=M[C]||[],M[C].push(g)})}(g):function B(A,C,g){return k.markPending(A.blobUri()),new $(function(m){var O,U,H=function(){};try{var Z=function(){O&&(O.close(),U=H)};U=function(se){se<0||se>100||(O||(O=g()),O.progressBar.value(se))},C(function x(A){return{id:A.id,blob:A.blob,base64:A.base64,filename:R.constant(S(A))}}(A),function(se){Z(),k.markUploaded(A.blobUri(),se),L(A.blobUri(),T(A,se)),m(T(A,se))},function(se){Z(),k.removeFailed(A.blobUri()),L(A.blobUri(),I(A,se)),m(I(A,se))},U)}catch(se){m(I(A,se.message))}})}(g,b.handler,C)}))}var M={};return b=W.extend({credentials:!1,handler:w},b),{upload:function G(A,C){return!b.url&&function D(A){return A===w}(b.handler)?function P(){return new $(function(A){A([])})}():N(A,C)}}}}),He(Yi,[be],function($){function R(y){var x,w;return y=decodeURIComponent(y).split(","),(w=/data:([^;]+)/.exec(y[0]))&&(x=w[1]),{type:x,data:y[1]}}return{uriToBlob:function b(y){return 0===y.indexOf("blob:")?function W(y){return new $(function(x){var w=new XMLHttpRequest;w.open("GET",y,!0),w.responseType="blob",w.onload=function(){200==this.status&&x(this.response)},w.send()})}(y):0===y.indexOf("data:")?function k(y){return new $(function(x){var w,P,T;y=R(y);try{w=atob(y.data)}catch{return void x(new Blob([]))}for(P=new Uint8Array(w.length),T=0;T<P.length;T++)P[T]=w.charCodeAt(T);x(new Blob([P],{type:y.type}))})}(y):null},blobToDataUri:function S(y){return new $(function(x){var w=new FileReader;w.onloadend=function(){x(w.result)},w.readAsDataURL(y)})},parseDataUri:R}}),He(Vi,[be,Vt,lt,Yi,St],function($,W,R,k,b){var S=0,y=function(x){return(x||"blobid")+S++};return function(x,w){var T={};return{findAll:function P(I,L){var D,z;return L||(L=R.constant(!0)),D=W.filter(I.getElementsByTagName("img"),function(N){var G=N.src;return!!b.fileApi&&!N.hasAttribute("data-mce-bogus")&&!N.hasAttribute("data-mce-placeholder")&&!(!G||G==b.transparentSrc)&&(0===G.indexOf("blob:")?!x.isUploaded(G):0===G.indexOf("data:")&&L(N))}),z=W.map(D,function(N){var G;return T[N.src]?new $(function(M){T[N.src].then(function(A){M({image:N,blobInfo:A.blobInfo})})}):(G=new $(function(M){!function B(N,G){var M,A;0===N.src.indexOf("blob:")?(A=w.getByUri(N.src))?G({image:N,blobInfo:A}):k.uriToBlob(N.src).then(function(C){k.blobToDataUri(C).then(function(g){M=k.parseDataUri(g).data,A=w.create(y(),C,M),w.add(A),G({image:N,blobInfo:A})})}):(M=k.parseDataUri(N.src).data,(A=w.findFirst(function(C){return C.base64()===M}))?G({image:N,blobInfo:A}):k.uriToBlob(N.src).then(function(C){A=w.create(y(),C,M),w.add(A),G({image:N,blobInfo:A})}))}(N,M)}).then(function(M){return delete T[M.image.src],M}).catch(function(M){return delete T[N.src],M}),T[N.src]=G,G)}),$.all(z)}}}}),He(_r,[Vt,lt],function($,W){return function(){function b(I){return S(function(L){return L.id()===I})}function S(I){return $.filter(P,I)[0]}var P=[],T=W.constant;return{create:function R(I,L,B,D){return{id:T(I),filename:T(D||I),blob:T(L),base64:T(B),blobUri:T(URL.createObjectURL(L))}},add:function k(I){b(I.id())||P.push(I)},get:b,getByUri:function y(I){return S(function(L){return L.blobUri()==I})},findFirst:S,removeByUri:function x(I){P=$.filter(P,function(L){return L.blobUri()!==I||(URL.revokeObjectURL(L.blobUri()),!1)})},destroy:function w(){$.each(P,function(I){URL.revokeObjectURL(I.blobUri())}),P=[]}}}}),He(Er,[],function(){return function(){function $(L,B){return{status:L,resultUri:B}}function W(L){return L in I}var I={};return{hasBlobUri:W,getResultUri:function R(L){var B=I[L];return B?B.resultUri:null},isPending:function k(L){return!!W(L)&&1===I[L].status},isUploaded:function b(L){return!!W(L)&&2===I[L].status},markPending:function S(L){I[L]=$(1,null)},markUploaded:function y(L,B){I[L]=$(2,B)},removeFailed:function x(L){delete I[L]},destroy:function w(){I={}}}}}),He(Vr,[Ue],function($){var W=$.PluginManager,b=function(w,P){w.notificationManager.open({type:"error",text:P})},S=function(w,P){w._skinLoaded?b(w,P):w.on("SkinLoaded",function(){b(w,P)})};return{pluginLoadError:function(w,P){S(w,function(w,P){var T=function(w,P){for(var T in W.urls)if(W.urls[T]+"/plugin"+P+".js"===w)return T;return null}(P,w.suffix);return T?"Failed to load plugin: "+T+" from url "+P:"Failed to load plugin url: "+P}(w,P))},uploadError:function(w,P){S(w,"Failed to upload image: "+P)}}}),He(Lr,[Vt,Ai,Vi,_r,Er,Vr],function($,W,R,k,b,S){return function(y){function x(H){return function(Z){return y.selection?H(Z):[]}}function P(H,Z,J){var de=0;do{-1!==(de=H.indexOf(Z,de))&&(H=H.substring(0,de)+J+H.substr(de+Z.length),de+=J.length-Z.length+1)}while(-1!==de);return H}function T(H,Z,J){return H=P(H,'src="'+Z+'"','src="'+J+'"'),P(H,'data-mce-src="'+Z+'"','data-mce-src="'+J+'"')}function I(H,Z){$.each(y.undoManager.data,function(J){"fragmented"===J.type?J.fragments=$.map(J.fragments,function(de){return T(de,H,Z)}):J.content=T(J.content,H,Z)})}function L(){return y.notificationManager.open({text:y.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function D(H){return g||(g=new W(U,{url:O.images_upload_url,basePath:O.images_upload_base_path,credentials:O.images_upload_credentials,handler:O.images_upload_handler})),G().then(x(function(Z){var J;return J=$.map(Z,function(de){return de.blobInfo}),g.upload(J,L).then(x(function(de){return de=$.map(de,function(se,ae){var ue=Z[ae].image;return se.status&&!1!==y.settings.images_replace_blob_uris?function B(H,Z){C.removeByUri(H.src),I(H.src,Z),y.$(H).attr({src:O.images_reuse_filename?Z+"?"+(new Date).getTime():Z,"data-mce-src":y.convertURL(Z,"src")})}(ue,se.url):se.error&&S.uploadError(y,se.error),{element:ue,status:se.status}}),H&&H(de),de}))}))}function z(H){if(!1!==O.automatic_uploads)return D(H)}function N(H){return!O.images_dataimg_filter||O.images_dataimg_filter(H)}function G(){return m||(m=new R(U,C)),m.findAll(y.getBody(),N).then(x(function(H){return $.each(H,function(Z){I(Z.image.src,Z.blobInfo.blobUri()),Z.image.src=Z.blobInfo.blobUri(),Z.image.removeAttribute("data-mce-src")}),H}))}function A(H){return H.replace(/src="(blob:[^"]+)"/g,function(Z,J){var de=U.getResultUri(J);if(de)return'src="'+de+'"';var se=C.getByUri(J);return se||(se=$.reduce(y.editorManager.editors,function(ae,ue){return ae||ue.editorUpload.blobCache.getByUri(J)},null)),se?'src="data:'+se.blob().type+";base64,"+se.base64()+'"':Z})}var g,m,C=new k,O=y.settings,U=new b;return y.on("setContent",function(){!1!==y.settings.automatic_uploads?z():G()}),y.on("RawSaveContent",function(H){H.content=A(H.content)}),y.on("getContent",function(H){H.source_view||"raw"==H.format||(H.content=A(H.content))}),y.on("PostRender",function(){y.parser.addNodeFilter("img",function(H){$.each(H,function(Z){var J=Z.attr("src");if(!C.getByUri(J)){var de=U.getResultUri(J);de&&Z.attr("src",de)}})})}),{blobCache:C,uploadImages:D,uploadImagesAuto:z,scanForImages:G,destroy:function M(){C.destroy(),U.destroy(),m=g=null}}}}),He(na,[re,pn,tt,Ke,rt,an,Ze],function($,W,R,k,b,S,y){var x=R.isContentEditableFalse;return function(w,P){function B(){(function I(){var C,g,m,O,U;for(C=b("*[contentEditable=false]",w),O=0;O<C.length;O++)$.endsWithCaretContainer(m=(g=C[O]).previousSibling)&&(1==(U=m.data).length?m.parentNode.removeChild(m):m.deleteData(U.length-1,1)),$.startsWithCaretContainer(m=g.nextSibling)&&(1==(U=m.data).length?m.parentNode.removeChild(m):m.deleteData(0,1))})(),A&&($.remove(A),A=null),M&&(M.remove(),M=null),clearInterval(G)}var G,M,A;return{show:function L(C,g){var m,O;return B(),P(g)?(A=$.insertBlock("p",g,C),m=function T(C,g){var O,U,H,Z,J,m=S.collapse(C.getBoundingClientRect(),g);return"BODY"==w.tagName?(O=w.ownerDocument.documentElement,U=w.scrollLeft||O.scrollLeft,H=w.scrollTop||O.scrollTop):(J=w.getBoundingClientRect(),U=w.scrollLeft-J.left,H=w.scrollTop-J.top),m.left+=U,m.right+=U,m.top+=H,m.bottom+=H,m.width=1,(Z=C.offsetWidth-C.clientWidth)>0&&(g&&(Z*=-1),m.left+=Z,m.right+=Z),m}(g,C),b(A).css("top",m.top),M=b('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(m).appendTo(w),C&&M.addClass("mce-visual-caret-before"),function D(){G=y.setInterval(function(){b("div.mce-visual-caret",w).toggleClass("mce-visual-caret-hidden")},500)}(),(O=g.ownerDocument.createRange()).setStart(A,0),O.setEnd(A,0),O):(A=$.insertInline(g,C),O=g.ownerDocument.createRange(),x(A.nextSibling)?(O.setStart(A,0),O.setEnd(A,0)):(O.setStart(A,1),O.setEnd(A,1)),O)},hide:B,getCss:function N(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},destroy:function z(){y.clearInterval(G)}}}}),He(Co,[Vt,tt,an],function($,W,R){return{getClientRects:function k(b){function S(x){return $.map(x,function(w){return(w=R.clone(w)).node=b,w})}if($.isArray(b))return $.reduce(b,function(x,w){return x.concat(k(w))},[]);if(W.isElement(b))return S(b.getClientRects());if(W.isText(b)){var y=b.ownerDocument.createRange();return y.setStart(b,0),y.setEnd(b,b.data.length),S(y.getClientRects())}}}}),He(lu,[lt,Vt,Co,Wt,hn,wn,pn,an],function($,W,R,k,b,S,y,x){function P(N,G,M,A,C,g){function m(J){var de,se,ae;for(ae=R.getClientRects(J),-1==N&&(ae=ae.reverse()),de=0;de<ae.length;de++)if(!M(se=ae[de],Z)){if(H.length>0&&G(se,W.last(H))&&O++,se.line=O,C(se))return!0;H.push(se)}}var U,Z,O=0,H=[];return(Z=W.last(g.getClientRects()))&&(m(U=g.getNode()),function w(N,G,M,A){for(;A=b.findNode(A,N,k.isEditableCaretCandidate,G);)if(M(A))return}(N,A,m,U)),H}var B=$.curry;return{upUntil:B(P,-1,x.isAbove,x.isBelow),downUntil:B(P,1,x.isBelow,x.isAbove),positionsUntil:function L(N,G,M,A){function C(ae){return W.last(ae.getClientRects())}var m,O,U,H,de,se,g=new S(G),Z=[],J=0;1==N?(m=g.next,O=x.isBelow,U=x.isAbove,H=y.after(A)):(m=g.prev,O=x.isAbove,U=x.isBelow,H=y.before(A)),se=C(H);do{if(H.isVisible()&&!U(de=C(H),se)){if(Z.length>0&&O(de,W.last(Z))&&J++,(de=x.clone(de)).position=H,de.line=J,M(de))return Z;Z.push(de)}}while(H=m(H));return Z},isAboveLine:B(function T(N,G){return G.line>N}),isLine:B(function I(N,G){return G.line===N})}}),He(ia,[lt,Vt,tt,Co,an,hn,Wt],function($,W,R,k,b,S,y){function x(M,A){return Math.abs(M.left-A)}function w(M,A){return Math.abs(M.right-A)}function P(M,A){function C(g,m){return g>=m.left&&g<=m.right}return W.reduce(M,function(g,m){var O,U;return O=Math.min(x(g,A),w(g,A)),U=Math.min(x(m,A),w(m,A)),C(A,m)?m:C(A,g)?g:U==O&&z(m.node)||U<O?m:g})}function T(M,A,C,g){for(;g=N(g,M,y.isEditableCaretCandidate,A);)if(C(g))return}function I(M,A){function C(m,O){var U;return U=W.filter(k.getClientRects(O),function(H){return!m(H,A)}),g=g.concat(U),0===U.length}var g=[];return g.push(A),T(-1,M,G(C,b.isAbove),A.node),T(1,M,G(C,b.isBelow),A.node),g}var z=R.isContentEditableFalse,N=S.findNode,G=$.curry;return{findClosestClientRect:P,findLineNodeRects:I,closestCaret:function D(M,A,C){var g,m;return g=k.getClientRects(function L(M){return W.filter(W.toArray(M.getElementsByTagName("*")),z)}(M)),(m=P(g=W.filter(g,function(O){return C>=O.top&&C<=O.bottom}),A))&&(m=P(I(M,m),A))&&z(m.node)?function B(M,A){return{node:M.node,before:x(M,A)<w(M,A)}}(m,A):null}}}),He(Kc,[],function(){var $=function(x){var w,P,T,I;return{top:(I=x.getBoundingClientRect()).top+(T=(w=x.ownerDocument).defaultView).pageYOffset-(P=w.documentElement).clientTop,left:I.left+T.pageXOffset-P.clientLeft}};return{calc:function(x,w){return function(x,w,P){return{pageX:P.left-x.left+w.left,pageY:P.top-x.top+w.top}}(function(x){return x.inline?$(x.getBody()):{left:0,top:0}}(x),function(x){var w=x.getBody();return x.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:0,top:0}}(x),function(x,w){if(w.target.ownerDocument!==x.getDoc()){var P=$(x.getContentAreaContainer()),T=function(x){var w=x.getBody(),P=x.getDoc().documentElement;return x.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:w.scrollLeft||P.scrollLeft,top:w.scrollTop||P.scrollTop}}(x);return{left:w.pageX-P.left+T.left,top:w.pageY-P.top+T.top}}return{left:w.pageX,top:w.pageY}}(x,w))}}}),He(Jc,[tt,Vt,lt,Ze,Ve,Kc],function($,W,R,k,b,S){var y=$.isContentEditableFalse,x=$.isContentEditableTrue,D=function(J){J&&J.parentNode&&J.parentNode.removeChild(J)},O=function(J){J.dragging=!1,J.element=null,D(J.ghost)},U=function(J){var se,ae,ue,le,ve,ye,de={};se=b.DOM,ye=document,ae=function(J,de){return function(se){if(function(J){return 0===J.button}(se)){var ae=W.find(de.dom.getParents(se.target),R.or(y,x));if(function(J,de){return y(de)&&de!==J}(de.getBody(),ae)){var ue=de.dom.getPos(ae),le=de.getBody(),ve=de.getDoc().documentElement;J.element=ae,J.screenX=se.screenX,J.screenY=se.screenY,J.maxX=(de.inline?le.scrollWidth:ve.offsetWidth)-2,J.maxY=(de.inline?le.scrollHeight:ve.offsetHeight)-2,J.relX=se.pageX-ue.x,J.relY=se.pageY-ue.y,J.width=ae.offsetWidth,J.height=ae.offsetHeight,J.ghost=function(J,de,se,ae){var ue=de.cloneNode(!0);J.dom.setStyles(ue,{width:se,height:ae}),J.dom.setAttrib(ue,"data-mce-selected",null);var le=J.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return J.dom.setStyles(le,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:se,height:ae}),J.dom.setStyles(ue,{margin:0,boxSizing:"border-box"}),le.appendChild(ue),le}(de,ae,J.width,J.height)}}}}(de,J),ue=function(J,de){var se=k.throttle(function(ae,ue){de._selectionOverrides.hideFakeCaret(),de.selection.placeCaretAt(ae,ue)},0);return function(ae){var ue=Math.max(Math.abs(ae.screenX-J.screenX),Math.abs(ae.screenY-J.screenY));if(function(J){return J.element}(J)&&!J.dragging&&ue>10){if(de.fire("dragstart",{target:J.element}).isDefaultPrevented())return;J.dragging=!0,de.focus()}if(J.dragging){var ve=function(J,de){return{pageX:de.pageX-J.relX,pageY:de.pageY+5}}(J,S.calc(de,ae));(function(J,de){J.parentNode!==de&&de.appendChild(J)})(J.ghost,de.getBody()),function(J,de,se,ae,ue,le){var ve=0,ye=0;J.style.left=de.pageX+"px",J.style.top=de.pageY+"px",de.pageX+se>ue&&(ve=de.pageX+se-ue),de.pageY+ae>le&&(ye=de.pageY+ae-le),J.style.width=se-ve+"px",J.style.height=ae-ye+"px"}(J.ghost,ve,J.width,J.height,J.maxX,J.maxY),se(ae.clientX,ae.clientY)}}}(de,J),le=function(J,de){return function(se){if(J.dragging&&function(J,de,se){return de!==se&&!J.dom.isChildOf(de,se)&&!y(de)}(de,function(J){var se=J.getSel().getRangeAt(0).startContainer;return 3===se.nodeType?se.parentNode:se}(de.selection),J.element)){var ae=function(J){var de=J.cloneNode(!0);return de.removeAttribute("data-mce-selected"),de}(J.element),ue=de.fire("drop",{targetClone:ae,clientX:se.clientX,clientY:se.clientY});ue.isDefaultPrevented()||(ae=ue.targetClone,de.undoManager.transact(function(){D(J.element),de.insertContent(de.dom.getOuterHTML(ae)),de._selectionOverrides.hideFakeCaret()}))}O(J)}}(de,J),ve=function(J,de){return function(){O(J),J.dragging&&de.fire("dragend")}}(de,J),J.on("mousedown",ae),J.on("mousemove",ue),J.on("mouseup",le),se.bind(ye,"mousemove",ue),se.bind(ye,"mouseup",ve),J.on("remove",function(){se.unbind(ye,"mousemove",ue),se.unbind(ye,"mouseup",ve)})};return{init:function(J){U(J),function(J){J.on("drop",function(de){var se=typeof de.clientX<"u"?J.getDoc().elementFromPoint(de.clientX,de.clientY):null;(y(se)||y(J.dom.getContentEditableParent(se)))&&de.preventDefault()})}(J)}}}),He(uu,[St,wn,pn,re,hn,na,lu,ia,tt,Ke,an,on,lt,Vt,Ze,Jc],function($,W,R,k,b,S,y,x,w,P,T,I,L,B,D,z){function N(H,Z){for(;Z=H(Z);)if(Z.isVisible())return Z;return Z}var M=L.curry,A=w.isContentEditableTrue,C=w.isContentEditableFalse,g=w.isElement,m=b.isAfterContentEditableFalse,O=b.isBeforeContentEditableFalse,U=P.getSelectedNode;return function G(H){function de(je){return H.dom.isBlock(je)}function se(je){je&&H.selection.setRng(je)}function ae(){return H.selection.getRng()}function ue(je,pt){H.selection.scrollIntoView(je,pt)}function le(je,pt,Sn){return H.fire("ShowCaret",{target:pt,direction:je,before:Sn}).isDefaultPrevented()?null:(ue(pt,-1===je),gi.show(Sn,pt))}function ve(je){return H.fire("BeforeObjectSelected",{target:je}).isDefaultPrevented()?null:function ye(je){var pt=je.ownerDocument.createRange();return pt.selectNode(je),pt}(je)}function ie(je,pt){return pt=b.normalizeRange(je,si,pt),-1==je?R.fromRangeStart(pt):R.fromRangeEnd(pt)}function ot(je,pt){var dn,Te;if(pt.collapsed&&H.settings.forced_root_block){if(!(dn=H.dom.getParent(pt.startContainer,"PRE")))return;(1==je?Kn(R.fromRangeStart(pt)):wi(R.fromRangeStart(pt)))||(Te=function Sn(){var We=H.dom.create(H.settings.forced_root_block);return(!$.ie||$.ie>=11)&&(We.innerHTML='<br data-mce-bogus="1">'),We}(),1==je?H.$(dn).after(Te):H.$(dn).before(Te),H.selection.select(Te,!0),H.selection.collapse())}}function At(je,pt,Sn,dn){var En;return(En=function xe(je,pt,Sn,dn){var En,Te,We,te;return!dn.collapsed&&(En=U(dn),C(En))?le(je,En,-1==je):(te=function he(je){return k.isCaretContainerBlock(je.startContainer)}(dn),Sn(Te=ie(je,dn))?ve(Te.getNode(-1==je)):(Te=pt(Te))?Sn(Te)?le(je,Te.getNode(-1==je),1==je):Sn(We=pt(Te))&&function K(je,pt){var Sn=b.isInSameBlock(je,pt);return!(Sn||!w.isBr(je.getNode()))||Sn}(Te,We)?le(je,We.getNode(-1==je),1==je):te?ne(Te.toRange()):null:te?dn:null)}(je,pt,Sn,dn))?En:(En=ot(je,dn))||null}function Ot(je,pt,Sn){var dn;return(dn=function Me(je,pt,Sn){var dn,En,Te,We,te,pe,Ne,Xe,xt;if(xt=U(Sn),dn=ie(je,Sn),En=pt(si,y.isAboveLine(1),dn),Te=B.filter(En,y.isLine(1)),te=B.last(dn.getClientRects()),O(dn)&&(xt=dn.getNode()),m(dn)&&(xt=dn.getNode(!0)),!te)return null;if((We=x.findClosestClientRect(Te,pe=te.left))&&C(We.node))return Ne=Math.abs(pe-We.left),Xe=Math.abs(pe-We.right),le(je,We.node,Ne<Xe);if(xt){var et=y.positionsUntil(je,si,y.isAboveLine(1),xt);if((We=x.findClosestClientRect(B.filter(et,y.isLine(1)),pe))||(We=B.last(B.filter(et,y.isLine(0)))))return ne(We.position.toRange())}}(je,pt,Sn))?dn:(dn=ot(je,Sn))||null}function zt(je){je.hasAttribute("data-mce-caret")&&(k.showCaretContainerBlock(je),se(ae()),ue(je[0]))}function Se(je){var pt,Sn;return je=b.normalizeRange(1,si,je),pt=R.fromRangeStart(je),C(pt.getNode())?le(1,pt.getNode(),!pt.isAtEnd()):C(pt.getNode(!0))?le(1,pt.getNode(!0),!1):(Sn=H.dom.getParent(pt.getNode(),L.or(C,A)),C(Sn)?le(1,Sn,!1):null)}function ne(je){return je&&je.collapsed&&Se(je)||je}function ee(je){var pt,Sn,dn,En;return C(je)?(C(je.previousSibling)&&(dn=je.previousSibling),(Sn=wi(R.before(je)))||(pt=Kn(R.after(je))),pt&&g(pt.getNode())&&(En=pt.getNode()),k.remove(je.previousSibling),k.remove(je.nextSibling),H.dom.remove(je),H.dom.isEmpty(H.getBody())?(H.setContent(""),void H.focus()):dn?R.after(dn).toRange():En?R.before(En).toRange():Sn?Sn.toRange():pt?pt.toRange():null):null}function me(je){var pt=H.schema.getTextBlockElements();return je.nodeName in pt}function ke(je){return H.dom.isEmpty(je)}function qe(je,pt,Sn){var En,Te,We,te,dn=H.dom;if(En=dn.getParent(pt.getNode(),dn.isBlock),Te=dn.getParent(Sn.getNode(),dn.isBlock),-1===je){if(te=Sn.getNode(!0),m(Sn)&&de(te))return me(En)?(ke(En)&&dn.remove(En),R.after(te).toRange()):ee(Sn.getNode(!0))}else if(te=pt.getNode(),O(pt)&&de(te))return me(Te)?(ke(Te)&&dn.remove(Te),R.before(te).toRange()):ee(pt.getNode());if(En===Te||!me(En)||!me(Te))return null;for(;We=En.firstChild;)Te.appendChild(We);return H.dom.remove(En),Sn.toRange()}function Qe(je,pt,Sn,dn){var En,Te,We,te;return!dn.collapsed&&(En=U(dn),C(En))?ne(ee(En)):Sn(Te=ie(je,dn))&&k.isCaretContainerBlock(dn.startContainer)?(te=-1==je?Jn.prev(Te):Jn.next(Te))?ne(te.toRange()):dn:pt(Te)?ne(ee(Te.getNode(-1==je))):pt(We=-1==je?Jn.prev(Te):Jn.next(Te))?-1===je?qe(je,Te,We):qe(je,We,Te):void 0}function ct(je){return k.isCaretContainer(je)||k.startsWithCaretContainer(je)||k.endsWithCaretContainer(je)}function ft(je){return ct(je.startContainer)||ct(je.endContainer)}function yt(je){var pt,En,Te,We,te,pe,Ne,Xe,xt,et,Sn=H.$,dn=H.dom;if(!je)return null;if(je.collapsed){if(!ft(je)){if(Xe=ie(1,je),C(Xe.getNode()))return le(1,Xe.getNode(),!Xe.isAtEnd());if(C(Xe.getNode(!0)))return le(1,Xe.getNode(!0),!1)}return null}return te=je.startOffset,pe=je.endOffset,3==(We=je.startContainer).nodeType&&0==te&&C(We.parentNode)&&(te=dn.nodeIndex(We=We.parentNode),We=We.parentNode),1!=We.nodeType?null:(pe==te+1&&(pt=We.childNodes[te]),C(pt)?(xt=et=pt.cloneNode(!0),(Ne=H.fire("ObjectSelected",{target:pt,targetClone:xt})).isDefaultPrevented()?null:(xt=Ne.targetClone,0===(En=Sn("#"+mi)).length&&(En=Sn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",mi)).appendTo(H.getBody()),je=H.dom.createRng(),xt===et&&$.ie?(En.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(xt),je.setStartAfter(En[0].firstChild.firstChild),je.setEndAfter(xt)):(En.empty().append("\xa0").append(xt).append("\xa0"),je.setStart(En[0].firstChild,1),je.setEnd(En[0].lastChild,0)),En.css({top:dn.getPos(pt,H.getBody()).y}),En[0].focus(),(Te=H.selection.getSel()).removeAllRanges(),Te.addRange(je),H.$("*[data-mce-selected]").removeAttr("data-mce-selected"),pt.setAttribute("data-mce-selected",1),kt=pt,Yn(),je)):null)}function vn(){kt&&(kt.removeAttribute("data-mce-selected"),H.$("#"+mi).remove(),kt=null)}function Yn(){gi.hide()}var kt,si=H.getBody(),Jn=new W(si),Kn=M(N,Jn.next),wi=M(N,Jn.prev),gi=new S(H.getBody(),de),mi="sel-"+H.dom.uniqueId(),Yt=H.$;return $.ceFalse&&(function Be(){function je(Le,vt){if(!1===Le.isDefaultPrevented()){var $e=vt(ae());$e&&(Le.preventDefault(),se($e))}}function pt(Le){for(var vt=H.getBody();Le&&Le!=vt;){if(A(Le)||C(Le))return Le;Le=Le.parentNode}return null}var te=M(At,1,Kn,O),pe=M(At,-1,wi,m),Ne=M(Qe,1,O,m),Xe=M(Qe,-1,m,O),xt=M(Ot,-1,y.upUntil),et=M(Ot,1,y.downUntil);H.on("mouseup",function(){var Le=ae();Le.collapsed&&se(Se(Le))}),H.on("click",function(Le){var vt;(vt=pt(Le.target))&&(C(vt)&&(Le.preventDefault(),H.focus()),A(vt)&&H.dom.isChildOf(vt,H.selection.getNode())&&vn())}),H.on("blur NewBlock",function(){vn(),Yn()});(function dn(Le){var vt=!1;Le.on("touchstart",function(){vt=!1}),Le.on("touchmove",function(){vt=!0}),Le.on("touchend",function($e){var Rt=pt($e.target);C(Rt)&&(vt||($e.preventDefault(),yt(ve(Rt))))})})(H),H.on("mousedown",function(Le){var vt;if(vt=pt(Le.target))C(vt)?(Le.preventDefault(),yt(ve(vt))):function Sn(Le,vt,$e){return!$e.collapsed&&B.reduce($e.getClientRects(),function(Rt,Ut){return Rt||T.containsXY(Ut,Le,vt)},!1)}(Le.clientX,Le.clientY,H.selection.getRng())||H.selection.placeCaretAt(Le.clientX,Le.clientY);else{vn(),Yn();var $e=x.closestCaret(si,Le.clientX,Le.clientY);$e&&(function(Le,vt){var $e=H.dom.getParent(Le,H.dom.isBlock),Rt=H.dom.getParent(vt,H.dom.isBlock);return $e&&!function(Le,vt){return H.dom.getParent(Le,H.dom.isBlock)===H.dom.getParent(vt,H.dom.isBlock)}($e,Rt)&&function(Le){var vt=new W(Le);if(!Le.firstChild)return!1;var $e=R.before(Le.firstChild),Rt=vt.next($e);return Rt&&!O(Rt)&&!m(Rt)}($e)}(Le.target,$e.node)||(Le.preventDefault(),H.getBody().focus(),se(le(1,$e.node,$e.before))))}}),H.on("keydown",function(Le){if(!I.modifierPressed(Le))switch(Le.keyCode){case I.RIGHT:je(Le,te);break;case I.DOWN:je(Le,et);break;case I.LEFT:je(Le,pe);break;case I.UP:je(Le,xt);break;case I.DELETE:je(Le,Ne);break;case I.BACKSPACE:je(Le,Xe);break;default:C(H.selection.getNode())&&function(Le){return!(Le.keyCode>=112&&Le.keyCode<=123)}(Le)&&Le.preventDefault()}}),H.on("keyup compositionstart",function(Le){(function Te(Le){var vt=function Jt(){return Yt("*[data-mce-caret]")[0]}();if(vt)return"compositionstart"==Le.type?(Le.preventDefault(),Le.stopPropagation(),void zt(vt)):void(k.hasContent(vt)&&zt(vt))})(Le),function We(Le){var vt;switch(Le.keyCode){case I.DELETE:case I.BACKSPACE:vt=function En(){var Le,vt=pt(H.selection.getNode());A(vt)&&de(vt)&&H.dom.isEmpty(vt)&&(Le=H.dom.create("br",{"data-mce-bogus":"1"}),H.$(vt).empty().append(Le),H.selection.setRng(R.before(Le).toRange()))}()}vt&&Le.preventDefault()}(Le)},!0),H.on("cut",function(){var Le=H.selection.getNode();C(Le)&&D.setEditorTimeout(H,function(){se(ne(ee(Le)))})}),H.on("getSelectionRange",function(Le){var vt=Le.range;if(kt){if(!kt.parentNode)return void(kt=null);(vt=vt.cloneRange()).selectNode(kt),Le.range=vt}}),H.on("setSelectionRange",function(Le){var vt;(vt=yt(Le.range))&&(Le.range=vt)}),H.on("AfterSetSelectionRange",function(Le){var vt=Le.range;ft(vt)||Yn(),function Z(je){return H.dom.hasClass(je,"mce-offscreen-selection")}(vt.startContainer.parentNode)||vn()}),H.on("focus",function(){D.setEditorTimeout(H,function(){H.selection.setRng(ne(H.selection.getRng()))},0)}),H.on("copy",function(Le){var vt=Le.clipboardData;if(!Le.isDefaultPrevented()&&Le.clipboardData&&!$.ie){var $e=function J(){var je=H.dom.get(mi);return je&&je.getElementsByTagName("*")[0]}();$e&&(Le.preventDefault(),vt.clearData(),vt.setData("text/html",$e.outerHTML),vt.setData("text/plain",$e.outerText))}}),z.init(H)}(),function mt(){var je=H.contentStyles,pt=".mce-content-body";je.push(gi.getCss()),je.push(pt+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+pt+" *[contentEditable=false] {cursor: default;}"+pt+" *[contentEditable=true] {cursor: text;}")}()),{showBlockCaretContainer:zt,hideFakeCaret:Yn,destroy:function Pn(){gi.destroy(),kt=null}}}}),He(cu,[],function(){var $=0;return{uuid:function(k){return k+$+++function(){var k=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+k()+k()+k()}()}}}),He(gr,[],function(){return{add:function(W,R,k){var b=W.sidebars?W.sidebars:[];b.push({name:R,settings:k}),W.sidebars=b}}}),He(Ro,[Ve,rt,Ue,Tt,nt,it,gn,ei,ri,en,un,Gt,zn,It,Je,Dt,Ht,jn,gt,Lt,Zn,St,Fe,Ze,ni,pi,xi,Lr,uu,cu,gr,Vr],function($,W,R,k,b,S,y,x,w,P,T,I,L,B,D,z,N,G,M,A,C,g,m,O,U,H,Z,J,de,se,ae,ue){function le(Se,ne,ee){var ke,qe,Qe,me=this;ke=me.documentBaseUrl=ee.documentBaseURL,qe=ee.baseURI,ne=ie({id:Se,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:ke,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:me.convertURL,url_converter_scope:me,ie7_compat:!0},Qe=ee.defaultSettings,ne),Qe&&Qe.external_plugins&&ne.external_plugins&&(ne.external_plugins=ie({},Qe.external_plugins,ne.external_plugins)),me.settings=ne,R.language=ne.language||"en",R.languageLoad=ne.language_load,R.baseURL=ee.baseURL,me.id=ne.id=Se,me.setDirty(!1),me.plugins={},me.documentBaseURI=new B(ne.document_base_url||ke,{base_uri:qe}),me.baseURI=qe,me.contentCSS=[],me.contentStyles=[],me.shortcuts=new Z(me),me.loadedCSS={},me.editorCommands=new L(me),me.suffix=ee.suffix,me.editorManager=ee,me.inline=ne.inline,me.settings.content_editable=me.inline,ne.cache_suffix&&(g.cacheSuffix=ne.cache_suffix.replace(/^[\?\&]+/,"")),!1===ne.override_viewport&&(g.overrideViewPort=!1),ee.fire("SetupEditor",me),me.execCallback("setup",me),me.$=W.overrideDefaults(function(){return{context:me.inline?me.getBody():me.getDoc(),element:me.getBody()}})}var ve=$.DOM,ye=R.ThemeManager,K=R.PluginManager,ie=m.extend,he=m.each,xe=m.explode,Me=m.inArray,ot=m.trim,At=m.resolve,Ot=z.Event,Jt=g.gecko,zt=g.ie;return le.prototype={render:function(){var ee=this,me=ee.settings,ke=ee.id,qe=ee.suffix;if(Ot.domLoaded){if(ee.getElement()&&g.contentEditable){me.inline?ee.inline=!0:(ee.orgVisibility=ee.getElement().style.visibility,ee.getElement().style.visibility="hidden");var Qe=ee.getElement().form||ve.getParent(ke,"form");Qe&&(ee.formElement=Qe,me.hidden_input&&!/TEXTAREA|INPUT/i.test(ee.getElement().nodeName)&&(ve.insertAfter(ve.create("input",{type:"hidden",name:ke}),ke),ee.hasHiddenInput=!0),ee.formEventDelegate=function(Be){ee.fire(Be.type,Be)},ve.bind(Qe,"submit reset",ee.formEventDelegate),ee.on("reset",function(){ee.setContent(ee.startContent,{format:"raw"})}),!me.submit_patch||Qe.submit.nodeType||Qe.submit.length||Qe._mceOldSubmit||(Qe._mceOldSubmit=Qe.submit,Qe.submit=function(){return ee.editorManager.triggerSave(),ee.setDirty(!1),Qe._mceOldSubmit(Qe)})),ee.windowManager=new N(ee),ee.notificationManager=new G(ee),"xml"==me.encoding&&ee.on("GetContent",function(Be){Be.save&&(Be.content=ve.encode(Be.content))}),me.add_form_submit_trigger&&ee.on("submit",function(){ee.initialized&&ee.save()}),me.add_unload_trigger&&(ee._beforeUnload=function(){!ee.initialized||ee.destroyed||ee.isHidden()||ee.save({format:"raw",no_events:!0,set_dirty:!1})},ee.editorManager.on("BeforeUnload",ee._beforeUnload)),ee.editorManager.add(ee),function ne(){var Be=D.ScriptLoader;if(me.language&&"en"!=me.language&&!me.language_url&&(me.language_url=ee.editorManager.baseURL+"/langs/"+me.language+".js"),me.language_url&&Be.add(me.language_url),me.theme&&"function"!=typeof me.theme&&"-"!=me.theme.charAt(0)&&!ye.urls[me.theme]){var mt=me.theme_url;mt=mt?ee.documentBaseURI.toAbsolute(mt):"themes/"+me.theme+"/theme"+qe+".js",ye.load(me.theme,mt)}m.isArray(me.plugins)&&(me.plugins=me.plugins.join(" ")),he(me.external_plugins,function(ct,ft){K.load(ft,ct),me.plugins+=" "+ft}),he(me.plugins.split(/[ ,]/),function(ct){if((ct=ot(ct))&&!K.urls[ct])if("-"==ct.charAt(0)){ct=ct.substr(1,ct.length);var ft=K.dependencies(ct);he(ft,function(yt){yt=K.createUrl({prefix:"plugins/",resource:yt,suffix:"/plugin"+qe+".js"},yt),K.load(yt.resource,yt)})}else K.load(ct,{prefix:"plugins/",resource:ct,suffix:"/plugin"+qe+".js"})}),Be.loadQueue(function(){ee.removed||ee.init()},ee,function(ct){ue.pluginLoadError(ee,ct[0]),ee.removed||ee.init()})}()}}else ve.bind(window,"ready",function Se(){ve.unbind(window,"ready",Se),ee.render()})},init:function(){var ke,qe,Qe,Be,mt,ct,ft,yt,vn,Pn,Yn,ne=this,ee=ne.settings,me=ne.getElement(),si=[];if(ne.rtl=ee.rtl_ui||ne.editorManager.i18n.rtl,ne.editorManager.i18n.setCode(ee.language),ee.aria_label=ee.aria_label||ve.getAttrib(me,"aria-label",ne.getLang("aria.rich_text_area")),ne.fire("ScriptsLoaded"),ee.theme&&("function"!=typeof ee.theme?(ee.theme=ee.theme.replace(/-/,""),ct=ye.get(ee.theme),ne.theme=new ct(ne,ye.urls[ee.theme]),ne.theme.init&&ne.theme.init(ne,ye.urls[ee.theme]||ne.documentBaseUrl.replace(/\/$/,""),ne.$)):ne.theme=ee.theme),he(ee.plugins.replace(/\-/g,"").split(/[ ,]/),function Se(gi){var kt,Yt,mi=K.get(gi);if(kt=K.urls[gi]||ne.documentBaseUrl.replace(/\/$/,""),gi=ot(gi),mi&&-1===Me(si,gi)){if(he(K.dependencies(gi),function(je){Se(je)}),ne.plugins[gi])return;Yt=new mi(ne,kt,ne.$),ne.plugins[gi]=Yt,Yt.init&&(Yt.init(ne,kt),si.push(gi))}}),ee.render_ui&&ne.theme&&(ne.orgDisplay=me.style.display,"function"!=typeof ee.theme?(qe=ee.height||me.style.height||me.offsetHeight,Qe=ee.min_height||100,(Pn=/^[0-9\.]+(|px)$/i).test(""+(ke=ee.width||me.style.width||me.offsetWidth))&&(ke=Math.max(parseInt(ke,10),100)),Pn.test(""+qe)&&(qe=Math.max(parseInt(qe,10),Qe)),mt=ne.theme.renderUI({targetNode:me,width:ke,height:qe,deltaWidth:ee.delta_width,deltaHeight:ee.delta_height}),ee.content_editable||(qe=(mt.iframeHeight||qe)+("number"==typeof qe?mt.deltaHeight||0:""))<Qe&&(qe=Qe)):((mt=ee.theme(ne,me)).editorContainer.nodeType&&(mt.editorContainer.id=mt.editorContainer.id||ne.id+"_parent"),mt.iframeContainer.nodeType&&(mt.iframeContainer.id=mt.iframeContainer.id||ne.id+"_iframecontainer"),qe=mt.iframeHeight||me.offsetHeight),ne.editorContainer=mt.editorContainer),ee.content_css&&he(xe(ee.content_css),function(gi){ne.contentCSS.push(ne.documentBaseURI.toAbsolute(gi))}),ee.content_style&&ne.contentStyles.push(ee.content_style),ee.content_editable)return me=Be=mt=null,ne.initContentBody();if(ne.iframeHTML=ee.doctype+"<html><head>",ee.document_base_url!=ne.documentBaseUrl&&(ne.iframeHTML+='<base href="'+ne.documentBaseURI.getURI()+'" />'),!g.caretAfter&&ee.ie7_compat&&(ne.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),ne.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',!/#$/.test(document.location.href))for(Yn=0;Yn<ne.contentCSS.length;Yn++){var Jn=ne.contentCSS[Yn];ne.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+m._addCacheSuffix(Jn)+'" />',ne.loadedCSS[Jn]=!0}-1!=(yt=ee.body_id||"tinymce").indexOf("=")&&(yt=(yt=ne.getParam("body_id","","hash"))[ne.id]||yt),-1!=(vn=ee.body_class||"").indexOf("=")&&(vn=(vn=ne.getParam("body_class","","hash"))[ne.id]||""),ee.content_security_policy&&(ne.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+ee.content_security_policy+'" />'),ne.iframeHTML+='</head><body id="'+yt+'" class="mce-content-body '+vn+'" data-id="'+ne.id+'"><br></body></html>';var Kn='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+ne.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&g.ie&&g.ie<12&&(ft=Kn);var wi=ve.create("iframe",{id:ne.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:ne.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:qe,display:"block"}});if(wi.onload=function(){wi.onload=null,ne.fire("load")},ve.setAttrib(wi,"src",ft||'javascript:""'),ne.contentAreaContainer=mt.iframeContainer,ne.iframeElement=wi,Be=ve.add(mt.iframeContainer,wi),zt)try{ne.getDoc()}catch{Be.src=ft=Kn}mt.editorContainer&&(ve.get(mt.editorContainer).style.display=ne.orgDisplay,ne.hidden=ve.isHidden(mt.editorContainer)),ne.getElement().style.display="none",ve.setAttrib(ne.id,"aria-hidden",!0),ft||ne.initContentBody(),me=Be=mt=null},initContentBody:function(Se){var qe,Qe,ne=this,ee=ne.settings,me=ne.getElement(),ke=ne.getDoc();ee.inline||(ne.getElement().style.visibility=ne.orgVisibility),Se||ee.content_editable||(ke.open(),ke.write(ne.iframeHTML),ke.close()),ee.content_editable&&(ne.on("remove",function(){var Be=this.getBody();ve.removeClass(Be,"mce-content-body"),ve.removeClass(Be,"mce-edit-focus"),ve.setAttrib(Be,"contentEditable",null)}),ve.addClass(me,"mce-content-body"),ne.contentDocument=ke=ee.content_document||document,ne.contentWindow=ee.content_window||window,ne.bodyElement=me,ee.content_document=ee.content_window=null,ee.root_name=me.nodeName.toLowerCase()),(qe=ne.getBody()).disabled=!0,ne.readonly=ee.readonly,ne.readonly||(ne.inline&&"static"==ve.getStyle(qe,"position",!0)&&(qe.style.position="relative"),qe.contentEditable=ne.getParam("content_editable_state",!0)),qe.disabled=!1,ne.editorUpload=new J(ne),ne.schema=new M(ee),ne.dom=new $(ke,{keep_values:!0,url_converter:ne.convertURL,url_converter_scope:ne,hex_colors:ee.force_hex_style_colors,class_filter:ee.class_filter,update_styles:!0,root_element:ne.inline?ne.getBody():null,collect:ee.content_editable,schema:ne.schema,onSetAttrib:function(Be){ne.fire("SetAttrib",Be)}}),ne.parser=new A(ee,ne.schema),ne.parser.addAttributeFilter("src,href,style,tabindex",function(Be,mt){for(var ft,vn,Pn,ct=Be.length,yt=ne.dom;ct--;)if(vn=(ft=Be[ct]).attr(mt),!ft.attributes.map[Pn="data-mce-"+mt]){if(0===vn.indexOf("data:")||0===vn.indexOf("blob:"))continue;"style"===mt?((vn=yt.serializeStyle(yt.parseStyle(vn),ft.name)).length||(vn=null),ft.attr(Pn,vn),ft.attr(mt,vn)):"tabindex"===mt?(ft.attr(Pn,vn),ft.attr(mt,null)):ft.attr(Pn,ne.convertURL(vn,mt,ft.name))}}),ne.parser.addNodeFilter("script",function(Be){for(var ct,ft,mt=Be.length;mt--;)0!==(ft=(ct=Be[mt]).attr("type")||"no/type").indexOf("mce-")&&ct.attr("type","mce-"+ft)}),ne.parser.addNodeFilter("#cdata",function(Be){for(var ct,mt=Be.length;mt--;)(ct=Be[mt]).type=8,ct.name="#comment",ct.value="[CDATA["+ct.value+"]]"}),ne.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(Be){for(var ct,mt=Be.length,ft=ne.schema.getNonEmptyElements();mt--;)(ct=Be[mt]).isEmpty(ft)&&0===ct.getAll("br").length&&(ct.append(new b("br",1)).shortEnded=!0)}),ne.serializer=new S(ee,ne),ne.selection=new x(ne.dom,ne.getWin(),ne.serializer,ne),ne.formatter=new w(ne),ne.undoManager=new P(ne),ne.forceBlocks=new I(ne),ne.enterKey=new T(ne),ne._nodeChangeDispatcher=new k(ne),ne._selectionOverrides=new de(ne),ne.fire("PreInit"),ee.browser_spellcheck||ee.gecko_spellcheck||(ke.body.spellcheck=!1,ve.setAttrib(qe,"spellcheck","false")),ne.quirks=new C(ne),ne.fire("PostRender"),ee.directionality&&(qe.dir=ee.directionality),ee.nowrap&&(qe.style.whiteSpace="nowrap"),ee.protect&&ne.on("BeforeSetContent",function(Be){he(ee.protect,function(mt){Be.content=Be.content.replace(mt,function(ct){return"\x3c!--mce:protected "+escape(ct)+"--\x3e"})})}),ne.on("SetContent",function(){ne.addVisual(ne.getBody())}),ee.padd_empty_editor&&ne.on("PostProcess",function(Be){Be.content=Be.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),ne.load({initial:!0,format:"html"}),ne.startContent=ne.getContent({format:"raw"}),ne.initialized=!0,ne.bindPendingEventDelegates(),ne.fire("init"),ne.focus(!0),ne.nodeChanged({initial:!0}),ne.execCallback("init_instance_callback",ne),ne.on("compositionstart compositionend",function(Be){ne.composing="compositionstart"===Be.type}),ne.contentStyles.length>0&&(Qe="",he(ne.contentStyles,function(Be){Qe+=Be+"\r\n"}),ne.dom.addStyle(Qe)),he(ne.contentCSS,function(Be){ne.loadedCSS[Be]||(ne.dom.loadCSS(Be),ne.loadedCSS[Be]=!0)}),ee.auto_focus&&O.setEditorTimeout(ne,function(){var Be;(Be=!0===ee.auto_focus?ne:ne.editorManager.get(ee.auto_focus)).destroyed||Be.focus()},100),me=ke=qe=null},focus:function(Se){var qe,Qe,ct,ee=this,me=ee.selection,ke=ee.settings.content_editable,Be=ee.getDoc(),mt=ee.getBody();if(!Se){if((qe=me.getRng()).item&&(Qe=qe.item(0)),ee.quirks.refreshContentEditable(),ct=function ne(ft){return ee.dom.getParent(ft,function(yt){return"true"===ee.dom.getContentEditable(yt)})}(me.getNode()),ee.$.contains(mt,ct))return ct.focus(),me.normalize(),void ee.editorManager.setActive(ee);if(ke||(g.opera||ee.getBody().focus(),ee.getWin().focus()),Jt||ke){if(mt.setActive)try{mt.setActive()}catch{mt.focus()}else mt.focus();ke&&me.normalize()}Qe&&Qe.ownerDocument==Be&&((qe=Be.body.createControlRange()).addElement(Qe),qe.select())}ee.editorManager.setActive(ee)},execCallback:function(Se){var me,ne=this,ee=ne.settings[Se];if(ee)return ne.callbackLookup&&(me=ne.callbackLookup[Se])&&(ee=me.func,me=me.scope),"string"==typeof ee&&(me=(me=ee.replace(/\.\w+$/,""))?At(me):0,ee=At(ee),ne.callbackLookup=ne.callbackLookup||{},ne.callbackLookup[Se]={func:ee,scope:me}),ee.apply(me||ne,Array.prototype.slice.call(arguments,1))},translate:function(Se){var ne=this.settings.language||"en",ee=this.editorManager.i18n;return Se?(Se=ee.data[ne+"."+Se]||Se.replace(/\{\#([^\}]+)\}/g,function(me,ke){return ee.data[ne+"."+ke]||"{#"+ke+"}"}),this.editorManager.translate(Se)):""},getLang:function(Se,ne){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+Se]||(ne!==Dn?ne:"{#"+Se+"}")},getParam:function(Se,ne,ee){var ke,me=Se in this.settings?this.settings[Se]:ne;return"hash"===ee?(ke={},"string"==typeof me?he(me.indexOf("=")>0?me.split(/[;,](?![^=;,]*(?:[;,]|$))/):me.split(","),function(qe){qe=qe.split("="),ke[ot(qe[0])]=ot(qe.length>1?qe[1]:qe)}):ke=me,ke):me},nodeChanged:function(Se){this._nodeChangeDispatcher.nodeChanged(Se)},addButton:function(Se,ne){var ee=this;ne.cmd&&(ne.onclick=function(){ee.execCommand(ne.cmd)}),ne.text||ne.icon||(ne.icon=Se),ee.buttons=ee.buttons||{},ne.tooltip=ne.tooltip||ne.title,ee.buttons[Se]=ne},addSidebar:function(Se,ne){return ae.add(this,Se,ne)},addMenuItem:function(Se,ne){var ee=this;ne.cmd&&(ne.onclick=function(){ee.execCommand(ne.cmd)}),ee.menuItems=ee.menuItems||{},ee.menuItems[Se]=ne},addContextToolbar:function(Se,ne){var me,ee=this;ee.contextToolbars=ee.contextToolbars||[],"string"==typeof Se&&(me=Se,Se=function(ke){return ee.dom.is(ke,me)}),ee.contextToolbars.push({id:se.uuid("mcet"),predicate:Se,items:ne})},addCommand:function(Se,ne,ee){this.editorCommands.addCommand(Se,ne,ee)},addQueryStateHandler:function(Se,ne,ee){this.editorCommands.addQueryStateHandler(Se,ne,ee)},addQueryValueHandler:function(Se,ne,ee){this.editorCommands.addQueryValueHandler(Se,ne,ee)},addShortcut:function(Se,ne,ee,me){this.shortcuts.add(Se,ne,ee,me)},execCommand:function(Se,ne,ee,me){return this.editorCommands.execCommand(Se,ne,ee,me)},queryCommandState:function(Se){return this.editorCommands.queryCommandState(Se)},queryCommandValue:function(Se){return this.editorCommands.queryCommandValue(Se)},queryCommandSupported:function(Se){return this.editorCommands.queryCommandSupported(Se)},show:function(){var Se=this;Se.hidden&&(Se.hidden=!1,Se.inline?Se.getBody().contentEditable=!0:(ve.show(Se.getContainer()),ve.hide(Se.id)),Se.load(),Se.fire("show"))},hide:function(){var Se=this,ne=Se.getDoc();Se.hidden||(zt&&ne&&!Se.inline&&ne.execCommand("SelectAll"),Se.save(),Se.inline?(Se.getBody().contentEditable=!1,Se==Se.editorManager.focusedEditor&&(Se.editorManager.focusedEditor=null)):(ve.hide(Se.getContainer()),ve.setStyle(Se.id,"display",Se.orgDisplay)),Se.hidden=!0,Se.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(Se,ne){this.fire("ProgressState",{state:Se,time:ne})},load:function(Se){var me,ee=this.getElement();if(ee)return(Se=Se||{}).load=!0,me=this.setContent(ee.value!==Dn?ee.value:ee.innerHTML,Se),Se.element=ee,Se.no_events||this.fire("LoadContent",Se),Se.element=ee=null,me},save:function(Se){var me,ke,ne=this,ee=ne.getElement();if(ee&&ne.initialized)return(Se=Se||{}).save=!0,Se.element=ee,Se.content=ne.getContent(Se),Se.no_events||ne.fire("SaveContent",Se),"raw"==Se.format&&ne.fire("RawSaveContent",Se),me=Se.content,/TEXTAREA|INPUT/i.test(ee.nodeName)?ee.value=me:(ne.inline||(ee.innerHTML=me),(ke=ve.getParent(ne.id,"form"))&&he(ke.elements,function(qe){if(qe.name==ne.id)return qe.value=me,!1})),Se.element=ee=null,!1!==Se.set_dirty&&ne.setDirty(!1),me},setContent:function(Se,ne){var ke,qe,ee=this,me=ee.getBody();return(ne=ne||{}).format=ne.format||"html",ne.set=!0,ne.content=Se,ne.no_events||ee.fire("BeforeSetContent",ne),0===(Se=ne.content).length||/^\s+$/.test(Se)?(qe=zt&&zt<11?"":'<br data-mce-bogus="1">',"TABLE"==me.nodeName?Se="<tr><td>"+qe+"</td></tr>":/^(UL|OL)$/.test(me.nodeName)&&(Se="<li>"+qe+"</li>"),(ke=ee.settings.forced_root_block)&&ee.schema.isValidChild(me.nodeName.toLowerCase(),ke.toLowerCase())?Se=ee.dom.createHTML(ke,ee.settings.forced_root_block_attrs,Se=qe):zt||Se||(Se='<br data-mce-bogus="1">'),ee.dom.setHTML(me,Se),ee.fire("SetContent",ne)):("raw"!==ne.format&&(Se=new y({validate:ee.validate},ee.schema).serialize(ee.parser.parse(Se,{isRootContent:!0}))),ne.content=ot(Se),ee.dom.setHTML(me,ne.content),ne.no_events||ee.fire("SetContent",ne)),ne.content},getContent:function(Se){var ee,ne=this,me=ne.getBody();return(Se=Se||{}).format=Se.format||"html",Se.get=!0,Se.getInner=!0,Se.no_events||ne.fire("BeforeGetContent",Se),ee="raw"==Se.format?m.trim(ne.serializer.getTrimmedContent()):"text"==Se.format?me.innerText||me.textContent:ne.serializer.serialize(me,Se),Se.content="text"!=Se.format?ot(ee):ee,Se.no_events||ne.fire("GetContent",Se),Se.content},insertContent:function(Se,ne){ne&&(Se=ie({content:Se},ne)),this.execCommand("mceInsertContent",!1,Se)},isDirty:function(){return!this.isNotDirty},setDirty:function(Se){var ne=!this.isNotDirty;this.isNotDirty=!Se,Se&&Se!=ne&&this.fire("dirty")},setMode:function(Se){H.setMode(this,Se)},getContainer:function(){var Se=this;return Se.container||(Se.container=ve.get(Se.editorContainer||Se.id+"_parent")),Se.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=ve.get(this.id)),this.targetElm},getWin:function(){var ne;return this.contentWindow||(ne=this.iframeElement)&&(this.contentWindow=ne.contentWindow),this.contentWindow},getDoc:function(){var ne;return this.contentDocument||(ne=this.getWin())&&(this.contentDocument=ne.document),this.contentDocument},getBody:function(){var Se=this.getDoc();return this.bodyElement||(Se?Se.body:null)},convertURL:function(Se,ne,ee){var ke=this.settings;return ke.urlconverter_callback?this.execCallback("urlconverter_callback",Se,ee,!0,ne):!ke.convert_urls||ee&&"LINK"==ee.nodeName||0===Se.indexOf("file:")||0===Se.length?Se:ke.relative_urls?this.documentBaseURI.toRelative(Se):Se=this.documentBaseURI.toAbsolute(Se,ke.remove_script_host)},addVisual:function(Se){var ke,ne=this,ee=ne.settings,me=ne.dom;Se=Se||ne.getBody(),ne.hasVisual===Dn&&(ne.hasVisual=ee.visual),he(me.select("table,a",Se),function(qe){var Qe;switch(qe.nodeName){case"TABLE":return ke=ee.visual_table_class||"mce-item-table",void((Qe=me.getAttrib(qe,"border"))&&"0"!=Qe||!ne.hasVisual?me.removeClass(qe,ke):me.addClass(qe,ke));case"A":return void(me.getAttrib(qe,"href",!1)||(Qe=me.getAttrib(qe,"name")||qe.id,ke=ee.visual_anchor_class||"mce-item-anchor",Qe&&ne.hasVisual?me.addClass(qe,ke):me.removeClass(qe,ke)))}}),ne.fire("VisualAid",{element:Se,hasVisual:ne.hasVisual})},remove:function(){var Se=this;Se.removed||(Se.save(),Se.removed=1,Se.unbindAllNativeEvents(),Se.hasHiddenInput&&ve.remove(Se.getElement().nextSibling),Se.inline||(zt&&zt<10&&Se.getDoc().execCommand("SelectAll",!1,null),ve.setStyle(Se.id,"display",Se.orgDisplay),Se.getBody().onload=null),Se.fire("remove"),Se.editorManager.remove(Se),ve.remove(Se.getContainer()),Se._selectionOverrides.destroy(),Se.editorUpload.destroy(),Se.destroy())},destroy:function(Se){var ee,ne=this;if(!ne.destroyed){if(!Se&&!ne.removed)return void ne.remove();Se||(ne.editorManager.off("beforeunload",ne._beforeUnload),ne.theme&&ne.theme.destroy&&ne.theme.destroy(),ne.selection.destroy(),ne.dom.destroy()),(ee=ne.formElement)&&(ee._mceOldSubmit&&(ee.submit=ee._mceOldSubmit,ee._mceOldSubmit=null),ve.unbind(ee,"submit reset",ne.formEventDelegate)),ne.contentAreaContainer=ne.formElement=ne.container=ne.editorContainer=null,ne.bodyElement=ne.contentDocument=ne.contentWindow=null,ne.iframeElement=ne.targetElm=null,ne.selection&&(ne.selection=ne.selection.win=ne.selection.dom=ne.selection.dom.doc=null),ne.destroyed=1}},uploadImages:function(Se){return this.editorUpload.uploadImages(Se)},_scanForImages:function(){return this.editorUpload.scanForImages()}},ie(le.prototype,U),le}),He(ra,[Fe],function($){var W={},R="en";return{setCode:function(k){k&&(R=k,this.rtl=!!this.data[k]&&"rtl"===this.data[k]._dir)},getCode:function(){return R},rtl:!1,add:function(k,b){var S=W[k];for(var y in S||(W[k]=S={}),b)S[y]=b[y];this.setCode(k)},translate:function(k){function b(P){return $.is(P,"function")?Object.prototype.toString.call(P):S(P)?"":""+P}function S(P){return""===P||null===P||$.is(P,"undefined")}function y(P){return P=b(P),$.hasOwn(x,P)?b(x[P]):P}var x=W[R]||{};if(S(k))return"";if($.is(k,"object")&&$.hasOwn(k,"raw"))return b(k.raw);if($.is(k,"array")){var w=k.slice(1);k=y(k[0]).replace(/\{([0-9]+)\}/g,function(P,T){return $.hasOwn(w,T)?b(w[T]):P})}return y(k).replace(/{context:\w+}$/,"")},data:W}}),He(lo,[Ve,Ze,St],function($,W,R){function k(P){function T(){try{return document.activeElement}catch{return document.body}}P.on("AddEditor",function B(z){var N=z.editor;N.on("init",function(){(N.inline||R.ie)&&("onbeforedeactivate"in document&&R.ie<9?N.dom.bind(N.getBody(),"beforedeactivate",function(G){if(G.target==N.getBody())try{N.lastRng=N.selection.getRng()}catch{}}):N.on("nodechange mouseup keyup",function(G){var M=T();"nodechange"==G.type&&G.selectionChange||(M&&M.id==N.id+"_ifr"&&(M=N.getBody()),N.dom.isChildOf(M,N.getBody())&&(N.lastRng=N.selection.getRng()))}),R.webkit&&!b&&(b=function(){var G=P.activeEditor;if(G&&G.selection){var M=G.selection.getRng();M&&!M.collapsed&&(N.lastRng=M)}},x.bind(document,"selectionchange",b)))}),N.on("setcontent",function(){N.lastRng=null}),N.on("mousedown",function(){N.selection.lastFocusBookmark=null}),N.on("focusin",function(){var M,G=P.focusedEditor;N.selection.lastFocusBookmark&&(M=function L(z,N){var G;return N.startContainer?((G=z.getDoc().createRange()).setStart(N.startContainer,N.startOffset),G.setEnd(N.endContainer,N.endOffset)):G=N,G}(N,N.selection.lastFocusBookmark),N.selection.lastFocusBookmark=null,N.selection.setRng(M)),G!=N&&(G&&G.fire("blur",{focusedEditor:N}),P.setActive(N),P.focusedEditor=N,N.fire("focus",{blurredEditor:G}),N.focus(!0)),N.lastRng=null}),N.on("focusout",function(){W.setEditorTimeout(N,function(){var G=P.focusedEditor;w(N,T())||G!=N||(N.fire("blur",{focusedEditor:null}),P.focusedEditor=null,N.selection&&(N.selection.lastFocusBookmark=null))})}),S||(S=function(G){var A,M=P.activeEditor;A=G.target,M&&A.ownerDocument==document&&(M.selection&&A!=M.getBody()&&(M.selection.lastFocusBookmark=function I(z,N){return N&&N.startContainer?z.isChildOf(N.startContainer,z.getRoot())&&z.isChildOf(N.endContainer,z.getRoot())?{startContainer:N.startContainer,startOffset:N.startOffset,endContainer:N.endContainer,endOffset:N.endOffset}:void 0:N}(M.dom,M.lastRng)),A==document.body||w(M,A)||P.focusedEditor!=M||(M.fire("blur",{focusedEditor:null}),P.focusedEditor=null))},x.bind(document,"focusin",S)),N.inline&&!y&&(y=function(G){var M=P.activeEditor,A=M.dom;if(M.inline&&A&&!A.isChildOf(G.target,M.getBody())){var C=M.selection.getRng();C.collapsed||(M.lastRng=C)}},x.bind(document,"mouseup",y))}),P.on("RemoveEditor",function D(z){P.focusedEditor==z.editor&&(P.focusedEditor=null),P.activeEditor||(x.unbind(document,"selectionchange",b),x.unbind(document,"focusin",S),x.unbind(document,"mouseup",y),b=S=y=null)})}var b,S,y,x=$.DOM,w=function(P,T){var I=P?P.settings.custom_ui_selector:"";return null!==x.getParent(T,function(B){return k.isEditorUIElement(B)||!!I&&P.dom.is(B,I)})};return k.isEditorUIElement=function(P){return-1!==P.className.toString().indexOf("mce-")},k._isUIElement=w,k}),He(wr,[Ro,rt,Ve,It,St,Fe,be,cn,ra,lo,Ue],function($,W,R,k,b,S,y,x,w,P,T){function I(O){G(g.editors,function(U){U.fire("scroll"===O.type?"ScrollWindow":"ResizeWindow",O)})}function L(O,U){U!==m&&(U?W(window).on("resize scroll",I):W(window).off("resize scroll",I),m=U)}function B(O){var H,U=g.editors;delete U[O.id];for(var Z=0;Z<U.length;Z++)if(U[Z]==O){U.splice(Z,1),H=!0;break}return g.activeEditor==O&&(g.activeEditor=U[0]),g.focusedEditor==O&&(g.focusedEditor=null),H}var C,g,z=R.DOM,N=S.explode,G=S.each,M=S.extend,A=0,m=!1;return g={$:W,majorVersion:"4",minorVersion:"5.7",releaseDate:"2017-04-25",editors:[],i18n:w,activeEditor:null,setup:function(){var U,H,J,de,O=this,Z="";if(H=k.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(H)&&(H=H.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(H)||(H+="/")),J=window.tinymce||window.tinyMCEPreInit)U=J.base||J.baseURL,Z=J.suffix;else{for(var se=document.getElementsByTagName("script"),ae=0;ae<se.length;ae++){var ue=(de=se[ae].src).substring(de.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(de)){-1!=ue.indexOf(".min")&&(Z=".min"),U=de.substring(0,de.lastIndexOf("/"));break}}!U&&document.currentScript&&(-1!=(de=document.currentScript.src).indexOf(".min")&&(Z=".min"),U=de.substring(0,de.lastIndexOf("/")))}O.baseURL=new k(H).toAbsolute(U),O.documentBaseURL=H,O.baseURI=new k(O.baseURL),O.suffix=Z,O.focusManager=new P(O)},overrideDefaults:function(O){var U;(U=O.base_url)&&(this.baseURL=new k(this.documentBaseURL).toAbsolute(U.replace(/\/+$/,"")),this.baseURI=new k(this.baseURL)),O.suffix&&(this.suffix=O.suffix),this.defaultSettings=O;var Z=O.plugin_base_urls;for(var J in Z)T.PluginManager.urls[J]=Z[J]},init:function(O){function Z(K){var ie=K.id;return ie||(ie=(ie=K.name)&&!z.get(ie)?K.name:z.uniqueId(),K.setAttribute("id",ie)),ie}function de(K,ie){return ie.constructor===RegExp?ie.test(K.className):z.hasClass(K,ie)}var le,ve,ue=this;ve=S.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var ye=function(K){le=K};return ue.settings=O,z.bind(window,"ready",function ae(){function K(Me,ot,At){var Ot=new $(Me,ot,ue);he.push(Ot),Ot.on("init",function(){++ie===xe.length&&ye(he)}),Ot.targetElm=Ot.targetElm||At,Ot.render()}var xe,ie=0,he=[];return z.unbind(window,"ready",ae),function J(K){var ie=O[K];if(ie)ie.apply(ue,Array.prototype.slice.call(arguments,2))}("onpageload"),xe=W.unique(function se(K){var ie,he=[];if(K.types)return G(K.types,function(xe){he=he.concat(z.select(xe.selector))}),he;if(K.selector)return z.select(K.selector);if(K.target)return[K.target];switch(K.mode){case"exact":(ie=K.elements||"").length>0&&G(N(ie),function(xe){var Me;(Me=z.get(xe))?he.push(Me):G(document.forms,function(ot){G(ot.elements,function(At){At.name===xe&&(xe="mce_editor_"+A++,z.setAttrib(At,"id",xe),he.push(At))})})});break;case"textareas":case"specific_textareas":G(z.select("textarea"),function(xe){K.editor_deselector&&de(xe,K.editor_deselector)||K.editor_selector&&!de(xe,K.editor_selector)||he.push(xe)})}return he}(O)),O.types?void G(O.types,function(Me){S.each(xe,function(ot){return!z.is(ot,Me.selector)||(K(Z(ot),M({},O,Me),ot),!1)})}):(S.each(xe,function(Me){!function D(O){O&&O.initialized&&!(O.getContainer()||O.getBody()).parentNode&&(B(O),O.unbindAllNativeEvents(),O.destroy(!0),O.removed=!0,O=null)}(ue.get(Me.id))}),xe=S.grep(xe,function(Me){return!ue.get(Me.id)}),void G(xe,function(Me){!function U(K,ie){return K.inline&&ie.tagName.toLowerCase()in ve}(O,Me)?K(Z(Me),O,Me):function H(K,ie){window.console&&!window.test&&window.console.log(K,ie)}("Could not initialize inline editor on invalid inline target element",Me)}))}),new y(function(K){le?K(le):ye=function(ie){K(ie)}})},get:function(O){return arguments.length?O in this.editors?this.editors[O]:null:this.editors},add:function(O){var U=this,H=U.editors;return H[O.id]=O,H.push(O),L(0,!0),U.activeEditor=O,U.fire("AddEditor",{editor:O}),C||(C=function(){U.fire("BeforeUnload")},z.bind(window,"beforeunload",C)),O},createEditor:function(O,U){return this.add(new $(O,U,this))},remove:function(O){var H,J,U=this,Z=U.editors;if(O)return"string"==typeof O?void G(z.select(O=O.selector||O),function(de){(J=Z[de.id])&&U.remove(J)}):Z[(J=O).id]?(B(J)&&U.fire("RemoveEditor",{editor:J}),Z.length||z.unbind(window,"beforeunload",C),J.remove(),L(0,Z.length>0),J):null;for(H=Z.length-1;H>=0;H--)U.remove(Z[H])},execCommand:function(O,U,H){var Z=this,J=Z.get(H);switch(O){case"mceAddEditor":return Z.get(H)||new $(H,Z.settings,Z).render(),!0;case"mceRemoveEditor":return J&&J.remove(),!0;case"mceToggleEditor":return J?(J.isHidden()?J.show():J.hide(),!0):(Z.execCommand("mceAddEditor",0,H),!0)}return!!Z.activeEditor&&Z.activeEditor.execCommand(O,U,H)},triggerSave:function(){G(this.editors,function(O){O.save()})},addI18n:function(O,U){w.add(O,U)},translate:function(O){return w.translate(O)},setActive:function(O){var U=this.activeEditor;this.activeEditor!=O&&(U&&U.fire("deactivate",{relatedTarget:O}),O.fire("activate",{relatedTarget:U})),this.activeEditor=O}},M(g,x),g.setup(),window.tinymce=window.tinyMCE=g,g}),He("tinymce/LegacyInput",[wr,Fe],function($,W){var R=W.each,k=W.explode;$.on("AddEditor",function(b){var S=b.editor;S.on("preInit",function(){function y(L,B){R(B,function(D,z){D&&T.setStyle(L,z,D)}),T.rename(L,"span")}var w,P,T,I=S.settings;I.inline_styles&&(P=k(I.font_size_legacy_values),w={font:function(L,B){y(B,{backgroundColor:B.style.backgroundColor,color:B.color,fontFamily:B.face,fontSize:P[parseInt(B.size,10)-1]})},u:function(L,B){"html4"===S.settings.schema&&y(B,{textDecoration:"underline"})},strike:function(L,B){y(B,{textDecoration:"line-through"})}},S.on("PreProcess SetContent",function x(L){T=S.dom,I.convert_fonts_to_spans&&R(T.select("font,u,strike",L.node),function(B){w[B.nodeName.toLowerCase()](T,B)})}))})})}),He(oa,[cn,Fe],function($,W){var R={send:function(k){function b(){!k.async||4==S.readyState||y++>1e4?(k.success&&y<1e4&&200==S.status?k.success.call(k.success_scope,""+S.responseText,S,k):k.error&&k.error.call(k.error_scope,y>1e4?"TIMED_OUT":"GENERAL",S,k),S=null):setTimeout(b,10)}var S,y=0;if(k.scope=k.scope||this,k.success_scope=k.success_scope||k.scope,k.error_scope=k.error_scope||k.scope,k.async=!1!==k.async,k.data=k.data||"",R.fire("beforeInitialize",{settings:k}),S=new XMLHttpRequest){if(S.overrideMimeType&&S.overrideMimeType(k.content_type),S.open(k.type||(k.data?"POST":"GET"),k.url,k.async),k.crossDomain&&(S.withCredentials=!0),k.content_type&&S.setRequestHeader("Content-Type",k.content_type),k.requestheaders&&W.each(k.requestheaders,function(x){S.setRequestHeader(x.key,x.value)}),S.setRequestHeader("X-Requested-With","XMLHttpRequest"),(S=R.fire("beforeSend",{xhr:S,settings:k}).xhr).send(k.data),!k.async)return b();setTimeout(b,10)}}};return W.extend(R,$),R}),He(Ia,[],function(){return{serialize:function $(W,R){var k,b,S,y;if(R=R||'"',null===W)return"null";if("string"==(S=typeof W))return b="\bb\tt\nn\ff\rr\"\"''\\\\",R+W.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(x,w){return'"'===R&&"'"===x?x:(k=b.indexOf(w))+1?"\\"+b.charAt(k+1):(x=w.charCodeAt().toString(16),"\\u"+"0000".substring(x.length)+x)})+R;if("object"==S){if(W.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(W)){for(k=0,b="[";k<W.length;k++)b+=(k>0?",":"")+$(W[k],R);return b+"]"}for(y in b="{",W)W.hasOwnProperty(y)&&(b+="function"!=typeof W[y]?(b.length>1?","+R:R)+y+R+":"+$(W[y],R):"");return b+"}"}return""+W},parse:function(W){try{return window[String.fromCharCode(101)+"val"]("("+W+")")}catch{}}}}),He(du,[Ia,oa,Fe],function($,W,R){function k(S){this.settings=b({},S),this.count=0}var b=R.extend;return k.sendRPC=function(S){return(new k).send(S)},k.prototype={send:function(S){var y=S.error,x=S.success;(S=b(this.settings,S)).success=function(w,P){typeof(w=$.parse(w))>"u"&&(w={error:"JSON Parse error."}),w.error?y.call(S.error_scope||S.scope,w.error,P):x.call(S.success_scope||S.scope,w.result)},S.error=function(w,P){y&&y.call(S.error_scope||S.scope,w,P)},S.data=$.serialize({id:S.id||"c"+this.count++,method:S.method,params:S.params}),S.content_type="application/json",W.send(S)}},k}),He(Qc,[Ve],function($){return{callbacks:{},count:0,send:function(W){var R=this,k=$.DOM,b=W.count!==Dn?W.count:R.count,S="tinymce_jsonp_"+b;R.callbacks[b]=function(y){k.remove(S),delete R.callbacks[b],W.callback(y)},k.add(k.doc.body,"script",{id:S,src:W.url,type:"text/javascript"}),R.count++}}}),He(rl,[],function(){function $(){for(var P in y=[],S)y.push(P);k.length=y.length}function R(){var P,T="";if(w){for(var I in S)P=S[I],T+=(T?",":"")+I.length.toString(32)+","+I+","+P.length.toString(32)+","+P;b.setAttribute(x,T);try{b.save(x)}catch{}$()}}var k,b,S,y,x,w;try{if(window.localStorage)return localStorage}catch{}return x="tinymce",b=document.documentElement,(w=!!b.addBehavior)&&b.addBehavior("#default#userData"),k={key:function(P){return y[P]},getItem:function(P){return P in S?S[P]:null},setItem:function(P,T){S[P]=""+T,R()},removeItem:function(P){delete S[P],R()},clear:function(){S={},R()}},function W(){function P(z){var N,G;return-1===(G=z!==Dn?B+z:I.indexOf(",",B))||G>I.length?null:(N=I.substring(B,G),B=G+1,N)}var T,I,L,B=0;if(S={},w){b.load(x),I=b.getAttribute(x)||"";do{var D=P();if(null===D)break;if(null!==(T=P(parseInt(D,32)||0))){if(null===(D=P()))break;L=P(parseInt(D,32)||0),T&&(S[T]=L)}}while(null!==T);$()}}(),k}),He(Po,[Ve,Dt,Je,Ue,Fe,St],function($,W,R,k,b,S){var y=window.tinymce;return y.DOM=$.DOM,y.ScriptLoader=R.ScriptLoader,y.PluginManager=k.PluginManager,y.ThemeManager=k.ThemeManager,y.dom=y.dom||{},y.dom.Event=W.Event,b.each("trim isArray is toArray makeMap each map grep inArray extend create walk createNS resolve explode _addCacheSuffix".split(" "),function(x){y[x]=b[x]}),b.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(x){y[x]=S[x.substr(2).toLowerCase()]}),{}}),He(Cr,[qt,Fe],function($,W){return $.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(R){this.settings=W.extend({},this.Defaults,R)},preRender:function(R){R.bodyClasses.add(this.settings.containerClass)},applyClasses:function(R){var S,y,x,w,b=this.settings;S=b.firstControlClass,y=b.lastControlClass,R.each(function(P){P.classes.remove(S).remove(y).add(b.controlClass),P.visible()&&(x||(x=P),w=P)}),x&&x.classes.add(S),w&&w.classes.add(y)},renderHtml:function(R){var b="";return this.applyClasses(R.items()),R.items().each(function(S){b+=S.renderHtml()}),b},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),He(mr,[Cr],function($){return $.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(W){W.items().filter(":visible").each(function(R){var k=R.settings;R.layoutRect({x:k.x,y:k.y,w:k.w,h:k.h}),R.recalc&&R.recalc()})},renderHtml:function(W){return'<div id="'+W._id+'-absend" class="'+W.classPrefix+'abs-end"></div>'+this._super(W)}})}),He(uo,[sn],function($){return $.extend({Defaults:{classes:"widget btn",role:"button"},init:function(W){var k,R=this;R._super(W),W=R.settings,k=R.settings.size,R.on("click mousedown",function(b){b.preventDefault()}),R.on("touchstart",function(b){R.fire("click",b),b.preventDefault()}),W.subtype&&R.classes.add(W.subtype),k&&R.classes.add("btn-"+k),W.icon&&R.icon(W.icon)},icon:function(W){return arguments.length?(this.state.set("icon",W),this):this.state.get("icon")},repaint:function(){var R,W=this.getEl().firstChild;W&&((R=W.style).width=R.height="100%"),this._super()},renderHtml:function(){var S,W=this,R=W._id,k=W.classPrefix,b=W.state.get("icon"),y=W.state.get("text"),x="";return(S=W.settings.image)?(b="none","string"!=typeof S&&(S=window.getSelection?S[0]:S[1]),S=" style=\"background-image: url('"+S+"')\""):S="",y&&(W.classes.add("btn-has-text"),x='<span class="'+k+'txt">'+W.encode(y)+"</span>"),'<div id="'+R+'" class="'+W.classes+'" tabindex="-1" aria-labelledby="'+R+'"><button role="presentation" type="button" tabindex="-1">'+((b=b?k+"ico "+k+"i-"+b:"")?'<i class="'+b+'"'+S+"></i>":"")+x+"</button></div>"},bindStates:function(){function W(S){var y=k("span."+b,R.getEl());S?(y[0]||(k("button:first",R.getEl()).append('<span class="'+b+'"></span>'),y=k("span."+b,R.getEl())),y.html(R.encode(S))):y.remove(),R.classes.toggle("btn-has-text",!!S)}var R=this,k=R.$,b=R.classPrefix+"txt";return R.state.on("change:text",function(S){W(S.value)}),R.state.on("change:icon",function(S){var y=S.value,x=R.classPrefix;R.settings.icon=y,y=y?x+"ico "+x+"i-"+R.settings.icon:"";var w=R.getEl().firstChild,P=w.getElementsByTagName("i")[0];y?(P&&P==w.firstChild||(P=document.createElement("i"),w.insertBefore(P,w.firstChild)),P.className=y):P&&w.removeChild(P),W(R.state.get("text"))}),R._super()}})}),He(aa,[qi],function($){return $.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var W=this,R=W._layout;return W.classes.add("btn-group"),W.preRender(),R.preRender(W),'<div id="'+W._id+'" class="'+W.classes+'"><div id="'+W._id+'-body">'+(W.settings.html||"")+R.renderHtml(W)+"</div></div>"}})}),He(ls,[sn],function($){return $.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(W){var R=this;R._super(W),R.on("click mousedown",function(k){k.preventDefault()}),R.on("click",function(k){k.preventDefault(),R.disabled()||R.checked(!R.checked())}),R.checked(R.settings.checked)},checked:function(W){return arguments.length?(this.state.set("checked",W),this):this.state.get("checked")},value:function(W){return arguments.length?this.checked(W):this.checked()},renderHtml:function(){var W=this,R=W._id,k=W.classPrefix;return'<div id="'+R+'" class="'+W.classes+'" unselectable="on" aria-labelledby="'+R+'-al" tabindex="-1"><i class="'+k+"ico "+k+'i-checkbox"></i><span id="'+R+'-al" class="'+k+'label">'+W.encode(W.state.get("text"))+"</span></div>"},bindStates:function(){function W(k){R.classes.toggle("checked",k),R.aria("checked",k)}var R=this;return R.state.on("change:text",function(k){R.getEl("al").firstChild.data=R.translate(k.value)}),R.state.on("change:checked change:value",function(k){R.fire("change"),W(k.value)}),R.state.on("change:icon",function(k){var b=k.value,S=R.classPrefix;if(typeof b>"u")return R.settings.icon;R.settings.icon=b,b=b?S+"ico "+S+"i-"+R.settings.icon:"";var y=R.getEl().firstChild,x=y.getElementsByTagName("i")[0];b?(x&&x==y.firstChild||(x=document.createElement("i"),y.insertBefore(x,y.firstChild)),x.className=b):x&&y.removeChild(x)}),R.state.get("checked")&&W(!0),R._super()}})}),He(sa,[sn,ti,Bn,rt,on,Fe],function($,W,R,k,b,S){return $.extend({init:function(y){var x=this;x._super(y),y=x.settings,x.classes.add("combobox"),x.subinput=!0,x.ariaTarget="inp",y.menu=y.menu||y.values,y.menu&&(y.icon="caret"),x.on("click",function(w){var P=w.target,T=x.getEl();if(k.contains(T,P)||P==T)for(;P&&P!=T;)P.id&&-1!=P.id.indexOf("-open")&&(x.fire("action"),y.menu&&(x.showMenu(),w.aria&&x.menu.items()[0].focus())),P=P.parentNode}),x.on("keydown",function(w){var P;13==w.keyCode&&"INPUT"===w.target.nodeName&&(w.preventDefault(),x.parents().reverse().each(function(T){if(T.toJSON)return P=T,!1}),x.fire("submit",{data:P.toJSON()}))}),x.on("keyup",function(w){if("INPUT"==w.target.nodeName){var P=x.state.get("value"),T=w.target.value;T!==P&&(x.state.set("value",T),x.fire("autocomplete",w))}}),x.on("mouseover",function(w){var P=x.tooltip().moveTo(-65535);if(x.statusLevel()&&-1!==w.target.className.indexOf(x.classPrefix+"status")){var T=x.statusMessage()||"Ok",I=P.text(T).show().testMoveRel(w.target,["bc-tc","bc-tl","bc-tr"]);P.classes.toggle("tooltip-n","bc-tc"==I),P.classes.toggle("tooltip-nw","bc-tl"==I),P.classes.toggle("tooltip-ne","bc-tr"==I),P.moveRel(w.target,I)}})},statusLevel:function(y){return arguments.length>0&&this.state.set("statusLevel",y),this.state.get("statusLevel")},statusMessage:function(y){return arguments.length>0&&this.state.set("statusMessage",y),this.state.get("statusMessage")},showMenu:function(){var w,y=this;y.menu||((w=y.settings.menu||[]).length?w={type:"menu",items:w}:w.type=w.type||"menu",y.menu=W.create(w).parent(y).renderTo(y.getContainerElm()),y.fire("createmenu"),y.menu.reflow(),y.menu.on("cancel",function(P){P.control===y.menu&&y.focus()}),y.menu.on("show hide",function(P){P.control.items().each(function(T){T.active(T.value()==y.value())})}).fire("show"),y.menu.on("select",function(P){y.value(P.control.value())}),y.on("focusin",function(P){"INPUT"==P.target.tagName.toUpperCase()&&y.menu.hide()}),y.aria("expanded",!0)),y.menu.show(),y.menu.layoutRect({w:y.layoutRect().w}),y.menu.moveRel(y.getEl(),y.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var T,I,y=this,x=y.getEl(),w=y.getEl("open"),P=y.layoutRect(),L=0,B=x.firstChild;y.statusLevel()&&"none"!==y.statusLevel()&&(L=parseInt(R.getRuntimeStyle(B,"padding-right"),10)-parseInt(R.getRuntimeStyle(B,"padding-left"),10)),T=w?P.w-R.getSize(w).width-10:P.w-10;var D=document;return D.all&&(!D.documentMode||D.documentMode<=8)&&(I=y.layoutRect().h-2+"px"),k(B).css({width:T-L,lineHeight:I}),y._super(),y},postRender:function(){var y=this;return k(this.getEl("inp")).on("change",function(x){y.state.set("value",x.target.value),y.fire("change",x)}),y._super()},renderHtml:function(){var I,L,z,y=this,x=y._id,w=y.settings,P=y.classPrefix,T=y.state.get("value")||"",B="",D="";return"spellcheck"in w&&(D+=' spellcheck="'+w.spellcheck+'"'),w.maxLength&&(D+=' maxlength="'+w.maxLength+'"'),w.size&&(D+=' size="'+w.size+'"'),w.subtype&&(D+=' type="'+w.subtype+'"'),z='<i id="'+x+'-status" class="mce-status mce-ico" style="display: none"></i>',y.disabled()&&(D+=' disabled="disabled"'),(I=w.icon)&&"caret"!=I&&(I=P+"ico "+P+"i-"+w.icon),L=y.state.get("text"),(I||L)&&(B='<div id="'+x+'-open" class="'+P+"btn "+P+'open" tabIndex="-1" role="button"><button id="'+x+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=I?'<i class="'+I+'"></i>':'<i class="'+P+'caret"></i>')+(L?(I?" ":"")+L:"")+"</button></div>",y.classes.add("has-open")),'<div id="'+x+'" class="'+y.classes+'"><input id="'+x+'-inp" class="'+P+'textbox" value="'+y.encode(T,!1)+'" hidefocus="1"'+D+' placeholder="'+y.encode(w.placeholder)+'" />'+z+B+"</div>"},value:function(y){return arguments.length?(this.state.set("value",y),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(y,x){var w=this;if(0!==y.length){var P=function(I,L){return function(){w.fire("selectitem",{title:L,value:I})}};w.menu?w.menu.items().remove():w.menu=W.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(w).renderTo(),S.each(y,function(I){w.menu.add({text:I.title,url:I.previewUrl,match:x,classes:"menu-item-ellipsis",onclick:P(I.value,I.title)})}),w.menu.renderNew(),w.hideMenu(),w.menu.on("cancel",function(I){I.control.parent()===w.menu&&(I.stopPropagation(),w.focus(),w.hideMenu())}),w.menu.on("select",function(){w.focus()});var T=w.layoutRect().w;w.menu.layoutRect({w:T,minW:0,maxW:T}),w.menu.reflow(),w.menu.show(),w.menu.moveRel(w.getEl(),w.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else w.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var y=this;y.state.on("change:value",function(w){y.getEl("inp").value!=w.value&&(y.getEl("inp").value=w.value)}),y.state.on("change:disabled",function(w){y.getEl("inp").disabled=w.value}),y.state.on("change:statusLevel",function(w){var P=y.getEl("status"),T=y.classPrefix,I=w.value;R.css(P,"display","none"===I?"none":""),R.toggleClass(P,T+"i-checkmark","ok"===I),R.toggleClass(P,T+"i-warning","warn"===I),R.toggleClass(P,T+"i-error","error"===I),y.classes.toggle("has-status","none"!==I),y.repaint()}),R.on(y.getEl("status"),"mouseleave",function(){y.tooltip().hide()}),y.on("cancel",function(w){y.menu&&y.menu.visible()&&(w.stopPropagation(),y.hideMenu())});var x=function(w,P){P&&P.items().length>0&&P.items().eq(w)[0].focus()};return y.on("keydown",function(w){var P=w.keyCode;"INPUT"===w.target.nodeName&&(P===b.DOWN?(w.preventDefault(),y.fire("autocomplete"),x(0,y.menu)):P===b.UP&&(w.preventDefault(),x(-1,y.menu)))}),y._super()},remove:function(){k(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}})}),He(ol,[sa],function($){return $.extend({init:function(W){var R=this;W.spellcheck=!1,W.onaction&&(W.icon="none"),R._super(W),R.classes.add("colorbox"),R.on("change keyup postrender",function(){R.repaintColor(R.value())})},repaintColor:function(W){var R=this.getEl("open"),k=R?R.getElementsByTagName("i")[0]:null;if(k)try{k.style.background=W}catch{}},bindStates:function(){var W=this;return W.state.on("change:value",function(R){W.state.get("rendered")&&W.repaintColor(R.value)}),W._super()}})}),He(al,[uo,zr],function($,W){return $.extend({showPanel:function(){var R=this,k=R.settings;if(R.active(!0),R.panel)R.panel.show();else{var b=k.panel;b.type&&(b={layout:"grid",items:b}),b.role=b.role||"dialog",b.popover=!0,b.autohide=!0,b.ariaRoot=!0,R.panel=new W(b).on("hide",function(){R.active(!1)}).on("cancel",function(S){S.stopPropagation(),R.focus(),R.hidePanel()}).parent(R).renderTo(R.getContainerElm()),R.panel.fire("show"),R.panel.reflow()}R.panel.moveRel(R.getEl(),k.popoverAlign||(R.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var R=this;return R.aria("haspopup",!0),R.on("click",function(k){k.control===R&&(R.panel&&R.panel.visible()?R.hidePanel():(R.showPanel(),R.panel.focus(!!k.aria)))}),R._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),He(Da,[al,Ve],function($,W){var R=W.DOM;return $.extend({init:function(k){this._super(k),this.classes.add("colorbutton")},color:function(k){return k?(this._color=k,this.getEl("preview").style.backgroundColor=k,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var k=this,b=k._id,S=k.classPrefix,y=k.state.get("text"),x=k.settings.icon?S+"ico "+S+"i-"+k.settings.icon:"",w=k.settings.image?" style=\"background-image: url('"+k.settings.image+"')\"":"",P="";return y&&(k.classes.add("btn-has-text"),P='<span class="'+S+'txt">'+k.encode(y)+"</span>"),'<div id="'+b+'" class="'+k.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(x?'<i class="'+x+'"'+w+"></i>":"")+'<span id="'+b+'-preview" class="'+S+'preview"></span>'+P+'</button><button type="button" class="'+S+'open" hidefocus="1" tabindex="-1"> <i class="'+S+'caret"></i></button></div>'},postRender:function(){var k=this,b=k.settings.onclick;return k.on("click",function(S){S.aria&&"down"==S.aria.key||S.control!=k||R.getParent(S.target,"."+k.classPrefix+"open")||(S.stopImmediatePropagation(),b.call(k,S))}),delete k.settings.onclick,k._super()}})}),He(us,[],function(){var W=Math.min,R=Math.max,k=Math.round;return function $(b){function T(z){var N;return"object"==typeof z?"r"in z?(L=z.r,B=z.g,D=z.b):"v"in z&&function y(z,N,G){var M,A,C,g;if(z=(parseInt(z,10)||0)%360,N=parseInt(N,10)/100,G=parseInt(G,10)/100,N=R(0,W(N,1)),G=R(0,W(G,1)),0!==N){switch(M=z/60,C=(A=G*N)*(1-Math.abs(M%2-1)),g=G-A,Math.floor(M)){case 0:L=A,B=C,D=0;break;case 1:L=C,B=A,D=0;break;case 2:L=0,B=A,D=C;break;case 3:L=0,B=C,D=A;break;case 4:L=C,B=0,D=A;break;case 5:L=A,B=0,D=C;break;default:L=B=D=0}L=k(255*(L+g)),B=k(255*(B+g)),D=k(255*(D+g))}else L=B=D=k(255*G)}(z.h,z.s,z.v):(N=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(z))?(L=parseInt(N[1],10),B=parseInt(N[2],10),D=parseInt(N[3],10)):(N=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(z))?(L=parseInt(N[1],16),B=parseInt(N[2],16),D=parseInt(N[3],16)):(N=/#([0-F])([0-F])([0-F])/gi.exec(z))&&(L=parseInt(N[1]+N[1],16),B=parseInt(N[2]+N[2],16),D=parseInt(N[3]+N[3],16)),L=L<0?0:L>255?255:L,B=B<0?0:B>255?255:B,D=D<0?0:D>255?255:D,I}var I=this,L=0,B=0,D=0;b&&T(b),I.toRgb=function w(){return{r:L,g:B,b:D}},I.toHsv=function P(){return function S(z,N,G){var A,C,m,O;return A=0,C=0,(m=W(z/=255,W(N/=255,G/=255)))==(O=R(z,R(N,G)))?{h:0,s:0,v:100*(C=m)}:(A=(O-m)/O,C=O,{h:k(60*((z==m?3:G==m?1:5)-(z==m?N-G:G==m?z-N:G-z)/(O-m))),s:k(100*A),v:k(100*C)})}(L,B,D)},I.toHex=function x(){function z(N){return(N=parseInt(N,10).toString(16)).length>1?N:"0"+N}return"#"+z(L)+z(B)+z(D)},I.parse=T}}),He(hu,[sn,pr,Bn,us],function($,W,R,k){return $.extend({Defaults:{classes:"widget colorpicker"},init:function(b){this._super(b)},postRender:function(){function b(z,N){var M,A,G=R.getPos(z);return M=N.pageX-G.x,A=N.pageY-G.y,{x:M=Math.max(0,Math.min(M/z.clientWidth,1)),y:A=Math.max(0,Math.min(A/z.clientHeight,1))}}function S(z,N){R.css(L,{top:(360-z.h)/360*100+"%"}),N||R.css(D,{left:z.s+"%",top:100-z.v+"%"}),B.style.background=new k({s:100,v:100,h:z.h}).toHex(),w.color().parse({s:z.s,v:z.v,h:z.h})}function y(z){var N;N=b(B,z),T.s=100*N.x,T.v=100*(1-N.y),S(T),w.fire("change")}function x(z){var N;N=b(I,z),(T=P.toHsv()).h=360*(1-N.y),S(T,!0),w.fire("change")}var T,I,L,B,D,w=this,P=w.color();I=w.getEl("h"),L=w.getEl("hp"),B=w.getEl("sv"),D=w.getEl("svp"),w._repaint=function(){S(T=P.toHsv())},w._super(),w._svdraghelper=new W(w._id+"-sv",{start:y,drag:y}),w._hdraghelper=new W(w._id+"-h",{start:x,drag:x}),w._repaint()},rgb:function(){return this.color().toRgb()},value:function(b){var S=this;return arguments.length?(S.color().parse(b),void(S._rendered&&S._repaint())):S.color().toHex()},color:function(){return this._color||(this._color=new k),this._color},renderHtml:function(){var w,S=this,y=S._id,x=S.classPrefix,P="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return w='<div id="'+y+'-h" class="'+x+'colorpicker-h" style="background: -ms-linear-gradient(top,'+P+");background: linear-gradient(to bottom,"+P+');">'+function b(){var I,L,D,z,B="";for(D="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",I=0,L=(z=P.split(",")).length-1;I<L;I++)B+='<div class="'+x+'colorpicker-h-chunk" style="height:'+100/L+"%;"+D+z[I]+",endColorstr="+z[I+1]+");-ms-"+D+z[I]+",endColorstr="+z[I+1]+')"></div>';return B}()+'<div id="'+y+'-hp" class="'+x+'colorpicker-h-marker"></div></div>','<div id="'+y+'" class="'+S.classes+'"><div id="'+y+'-sv" class="'+x+'colorpicker-sv"><div class="'+x+'colorpicker-overlay1"><div class="'+x+'colorpicker-overlay2"><div id="'+y+'-svp" class="'+x+'colorpicker-selector1"><div class="'+x+'colorpicker-selector2"></div></div></div></div></div>'+w+"</div>"}})}),He(cs,[sn],function($){return $.extend({init:function(W){var R=this;W.delimiter||(W.delimiter="\xbb"),R._super(W),R.classes.add("path"),R.canFocus=!0,R.on("click",function(k){var b;(b=k.target.getAttribute("data-index"))&&R.fire("select",{value:R.row()[b],index:b})}),R.row(R.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(W){return arguments.length?(this.state.set("row",W),this):this.state.get("row")},renderHtml:function(){var W=this;return'<div id="'+W._id+'" class="'+W.classes+'">'+W._getDataPathHtml(W.state.get("row"))+"</div>"},bindStates:function(){var W=this;return W.state.on("change:row",function(R){W.innerHtml(W._getDataPathHtml(R.value))}),W._super()},_getDataPathHtml:function(W){var b,S,R=this,k=W||[],y="",x=R.classPrefix;for(b=0,S=k.length;b<S;b++)y+=(b>0?'<div class="'+x+'divider" aria-hidden="true"> '+R.settings.delimiter+" </div>":"")+'<div role="button" class="'+x+"path-item"+(b==S-1?" "+x+"last":"")+'" data-index="'+b+'" tabindex="-1" id="'+R._id+"-"+b+'" aria-level="'+(b+1)+'">'+k[b].name+"</div>";return y||(y='<div class="'+x+'path-item">\xa0</div>'),y}})}),He(fu,[cs],function($){return $.extend({postRender:function(){function W(b){return!(1!==b.nodeType||"BR"!=b.nodeName&&!b.getAttribute("data-mce-bogus")&&"bookmark"!==b.getAttribute("data-mce-type"))}var R=this,k=R.settings.editor;return!1!==k.settings.elementpath&&(R.on("select",function(b){k.focus(),k.selection.select(this.row()[b.index].element),k.nodeChanged()}),k.on("nodeChange",function(b){for(var S=[],y=b.parents,x=y.length;x--;)if(1==y[x].nodeType&&!W(y[x])){var w=k.fire("ResolveName",{name:y[x].nodeName.toLowerCase(),target:y[x]});if(w.isDefaultPrevented()||S.push({name:w.name,element:y[x]}),w.isPropagationStopped())break}R.row(S)})),R._super()}})}),He(Rr,[qi],function($){return $.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var W=this,R=W._layout,k=W.classPrefix;return W.classes.add("formitem"),R.preRender(W),'<div id="'+W._id+'" class="'+W.classes+'" hidefocus="1" tabindex="-1">'+(W.settings.title?'<div id="'+W._id+'-title" class="'+k+'title">'+W.settings.title+"</div>":"")+'<div id="'+W._id+'-body" class="'+W.bodyClasses+'">'+(W.settings.html||"")+R.renderHtml(W)+"</div></div>"}})}),He(la,[qi,Rr,Fe],function($,W,R){return $.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var k=this,b=k.items();k.settings.formItemDefaults||(k.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),b.each(function(S){var y,x=S.settings.label;x&&((y=new W(R.extend({items:{type:"label",id:S._id+"-l",text:x,flex:0,forId:S._id,disabled:S.disabled()}},k.settings.formItemDefaults))).type="formitem",S.aria("labelledby",S._id+"-l"),typeof S.settings.flex>"u"&&(S.settings.flex=1),k.replace(S,y),y.add(S))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var k=this;k._super(),k.fromJSON(k.settings.data)},bindStates:function(){function k(){var x,w,S=0,y=[];if(!1!==b.settings.labelGapCalc)for(("children"==b.settings.labelGapCalc?b.find("formitem"):b.items()).filter("formitem").each(function(T){var I=T.items()[0],L=I.getEl().clientWidth;S=L>S?L:S,y.push(I)}),w=b.settings.labelGap||0,x=y.length;x--;)y[x].settings.minWidth=S+w}var b=this;b._super(),b.on("show",k),k()}})}),He(sl,[la],function($){return $.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var W=this,R=W._layout,k=W.classPrefix;return W.preRender(),R.preRender(W),'<fieldset id="'+W._id+'" class="'+W.classes+'" hidefocus="1" tabindex="-1">'+(W.settings.title?'<legend id="'+W._id+'-title" class="'+k+'fieldset-title">'+W.settings.title+"</legend>":"")+'<div id="'+W._id+'-body" class="'+W.bodyClasses+'">'+(W.settings.html||"")+R.renderHtml(W)+"</div></fieldset>"}})}),He(ua,[Ve,lt,Vt,cu,Fe,tt],function($,W,R,k,b,S){var y=b.trim,x=function(H,Z,J,de,se){return{type:H,title:Z,url:J,level:de,attach:se}},T=function(H){return H.innerText||H.textContent},B=function(H){return function(H){return H&&"A"===H.nodeName&&(H.id||H.name)}(H)&&z(H)},D=function(H){return H&&/^(H[1-6])$/.test(H.nodeName)},z=function(H){return function(H){for(;H=H.parentNode;){var Z=H.contentEditable;if(Z&&"inherit"!==Z)return S.isContentEditableTrue(H)}return!1}(H)&&!S.isContentEditableFalse(H)},N=function(H){return D(H)&&z(H)},M=function(H){var Z=function(H){return H.id?H.id:k.uuid("h")}(H);return x("header",T(H),"#"+Z,function(H){return D(H)?parseInt(H.nodeName.substr(1),10):0}(H),function(){H.id=Z})},A=function(H){var Z=H.id||H.name,J=T(H);return x("anchor",J||"#"+Z,"#"+Z,0,W.noop)},O=function(H){return y(H.title).length>0};return{find:function(H){var Z=function(H){return function(H,Z){return $.DOM.select("h1,h2,h3,h4,h5,h6,a:not([href])",Z)}(0,H)}(H);return R.filter(function(H){return R.map(R.filter(H,N),M)}(Z).concat(function(H){return R.map(R.filter(H,B),A)}(Z)),O)}}}),He(ll,[sa,Fe,Vt,lt,on,ua],function($,W,R,k,b,S){var y={},w=function(C){return{title:C.title,value:{title:{raw:C.title},url:C.url,attach:C.attach}}},T=function(C,g){return{title:C,value:{title:C,url:g,attach:k.noop}}},L=function(C,g,m){var O=g in C?C[g]:m;return!1===O?null:O},z=function(C,g){var m=C.toLowerCase(),O=W.grep(g,function(U){return-1!==U.title.toLowerCase().indexOf(m)});return 1===O.length&&O[0].title===C?[]:O},G=function(C,g,m,O){var U=function(H){var J=function(C,g,m,O){var se,ae,ue,U={title:"-"},H=function(se){var ae=R.filter(se[m],function(ue){return function(C,g){return!R.find(g,function(O){return O.url===C})}(ue,g)});return W.map(ae,function(ue){return{title:ue,value:{title:ue,url:ue,attach:k.noop}}})},Z=function(se){return function(C){return W.map(C,w)}(R.filter(g,function(ue){return ue.type==se}))};return!1===O.typeahead_urls?[]:"file"===m?function(se){return R.reduce(se,function(ae,ue){return 0===ae.length||0===ue.length?ae.concat(ue):ae.concat(U,ue)},[])}([z(C,H(y)),z(C,Z("header")),z(C,(se=Z("anchor"),ae=L(O,"anchor_top","#top"),ue=L(O,"anchor_bottom","#bottom"),null!==ae&&se.unshift(T("<top>",ae)),null!==ue&&se.push(T("<bottom>",ue)),se))]):z(C,H(y))}(H,S.find(m),O,g);C.showAutoComplete(J,H)};C.on("autocomplete",function(){U(C.value())}),C.on("selectitem",function(H){var Z=H.value;C.value(Z.url);var J=function(C){var g=C.title;return g.raw?g.raw:g}(Z);C.fire("change","image"===O?{meta:{alt:J,attach:Z.attach}}:{meta:{text:J,attach:Z.attach}}),C.focus()}),C.on("click",function(H){0===C.value().length&&"INPUT"===H.target.nodeName&&U("")}),C.on("PostRender",function(){C.getRoot().on("submit",function(H){H.isDefaultPrevented()||function(C,g){var m=y[g];/^https?/.test(C)&&(m?-1===R.indexOf(m,C)&&(y[g]=m.slice(0,5).concat(C)):y[g]=[C])}(C.value(),O)})})};return $.extend({init:function(C){var U,H,Z,g=this,m=tinymce.activeEditor,O=m.settings,J=C.filetype;C.spellcheck=!1,(Z=O.file_picker_types||O.file_browser_callback_types)&&(Z=W.makeMap(Z,/[, ]/)),Z&&!Z[J]||(!(H=O.file_picker_callback)||Z&&!Z[J]?!(H=O.file_browser_callback)||Z&&!Z[J]||(U=function(){H(g.getEl("inp").id,g.value(),J,window)}):U=function(){var de=g.fire("beforecall").meta;de=W.extend({filetype:J},de),H.call(m,function(se,ae){g.value(se).fire("change",{meta:ae})},g.value(),de)}),U&&(C.icon="browse",C.onaction=U),g._super(C),G(g,O,m.getBody(),J),function(C,g,m){var O=g.filepicker_validator_handler;O&&C.state.on("change:value",function(H){!function(H){0===H.length?C.statusLevel("none"):O({url:H,type:m},function(Z){var J=function(C){var g=C.status,m=C.message;return"valid"===g?{status:"ok",message:m}:"unknown"===g||"invalid"===g?{status:"warn",message:m}:{status:"none",message:""}}(Z);C.statusMessage(J.message),C.statusLevel(J.status)})}(H.value)})}(g,O,J)}})}),He(Mo,[mr],function($){return $.extend({recalc:function(W){var R=W.layoutRect(),k=W.paddingBox;W.items().filter(":visible").each(function(b){b.layoutRect({x:k.left,y:k.top,w:R.innerW-k.right-k.left,h:R.innerH-k.top-k.bottom}),b.recalc&&b.recalc()})}})}),He(Hr,[mr],function($){return $.extend({recalc:function(W){var R,k,b,S,y,x,w,P,T,I,L,B,D,z,G,A,C,g,m,O,U,H,Z,J,de,se,ae,ue,le,ve,ye,K,ie,he,xe,Me,ot,M=[],At=Math.max,Ot=Math.min;for(b=W.items().filter(":visible"),S=W.layoutRect(),y=W.paddingBox,x=W.settings,B=W.isRtl()?x.direction||"row-reversed":x.direction,w=x.align,P=W.isRtl()?x.pack||"end":x.pack,T=x.spacing||0,"row-reversed"!=B&&"column-reverse"!=B||(b=b.set(b.toArray().reverse()),B=B.split("-")[0]),"column"==B?(J="y",H="h",Z="minH",de="maxH",ae="innerH",se="top",ue="deltaH",le="contentH",he="left",K="w",ve="x",ye="innerW",ie="minW",xe="right",Me="deltaW",ot="contentW"):(J="x",H="w",Z="minW",de="maxW",ae="innerW",se="left",ue="deltaW",le="contentW",he="top",K="h",ve="y",ye="innerH",ie="minH",xe="bottom",Me="deltaH",ot="contentH"),L=S[ae]-y[se]-y[se],U=I=0,R=0,k=b.length;R<k;R++)z=(D=b[R]).layoutRect(),L-=R<k-1?T:0,(G=D.settings.flex)>0&&(I+=G,z[de]&&M.push(D),z.flex=G),L-=z[Z],(A=y[he]+z[ie]+y[xe])>U&&(U=A);if((m={})[Z]=L<0?S[Z]-L+S[ue]:S[ae]-L+S[ue],m[ie]=U+S[Me],m[le]=S[ae]-L,m[ot]=U,m.minW=Ot(m.minW,S.maxW),m.minH=Ot(m.minH,S.maxH),m.minW=At(m.minW,S.startMinWidth),m.minH=At(m.minH,S.startMinHeight),!S.autoResize||m.minW==S.minW&&m.minH==S.minH){for(g=L/I,R=0,k=M.length;R<k;R++)(A=(z=(D=M[R]).layoutRect())[Z]+z.flex*g)>(C=z[de])?(L-=z[de]-z[Z],I-=z.flex,z.flex=0,z.maxFlexSize=C):z.maxFlexSize=0;for(g=L/I,O=y[se],m={},0===I&&("end"==P?O=L+y[se]:"center"==P?(O=Math.round(S[ae]/2-(S[ae]-L)/2)+y[se])<0&&(O=y[se]):"justify"==P&&(O=y[se],T=Math.floor(L/(b.length-1)))),m[ve]=y[he],R=0,k=b.length;R<k;R++)A=(z=(D=b[R]).layoutRect()).maxFlexSize||z[Z],"center"===w?m[ve]=Math.round(S[ye]/2-z[K]/2):"stretch"===w?(m[K]=At(z[ie]||0,S[ye]-y[he]-y[xe]),m[ve]=y[he]):"end"===w&&(m[ve]=S[ye]-z[K]-y.top),z.flex>0&&(A+=z.flex*g),m[H]=A,m[J]=O,D.layoutRect(m),D.recalc&&D.recalc(),O+=A+T}else if(m.w=m.minW,m.h=m.minH,W.layoutRect(m),this.recalc(W),null===W._lastRect){var Jt=W.parent();Jt&&(Jt._lastRect=null,Jt.recalc())}}})}),He(ds,[Cr],function($){return $.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(W){W.items().filter(":visible").each(function(R){R.recalc&&R.recalc()})},isNative:function(){return!0}})}),He(pu,[Ve],function($){var W=function(x,w,P){for(;P!==w;){if(P.style[x])return P.style[x];P=P.parentNode}return""},b=function(x,w){return $.DOM.getStyle(w,x,!0)};return{getFontSize:function(x,w){var P=W("fontSize",x,w);return""!==P?P:b("fontSize",w)},getFontFamily:function(x,w){var P=W("fontFamily",x,w),T=""!==P?P:b("fontFamily",w);return T!==Dn?function(x){return x.replace(/[\'\"]/g,"").replace(/,\s+/g,",")}(T):""},toPt:function(x){return/[0-9.]+px$/.test(x)?Math.round(72*parseInt(x,10)/96)+"pt":x}}}),He(hs,[ji,sn,zr,Fe,Vt,Ve,wr,St,pu],function($,W,R,k,b,S,y,x,w){function I(D){function z(ue,le){return function(){var ve=this;D.on("nodeChange",function(ye){var K=D.formatter,ie=null;L(ye.parents,function(he){if(L(ue,function(xe){if(le?K.matchNode(he,le,{value:xe.value})&&(ie=xe.value):K.matchNode(he,xe.value)&&(ie=xe.value),ie)return!1}),ie)return!1}),ve.value(ie)})}}function G(ue){return function(){var le=this;D.on("nodeChange",function(ve){var ye,K,ie=null;ye=w.getFontSize(D.getBody(),ve.element),K=w.toPt(ye),L(ue,function(he){he.value===ye?ie=ye:he.value===K&&(ie=K)}),le.value(ie),ie||le.text(K)})}}function M(ue){for(var le=(ue=ue.replace(/;$/,"").split(";")).length;le--;)ue[le]=ue[le].split("=");return ue}function C(ue){return function(){var le=this;D.formatter?D.formatter.formatChanged(ue,function(ve){le.active(ve)}):D.on("init",function(){D.formatter.formatChanged(ue,function(ve){le.active(ve)})})}}function g(ue){return function(){function le(){return!!D.undoManager&&D.undoManager["redo"==ue?"hasRedo":"hasUndo"]()}var ve=this;ve.disabled(!le()),D.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){ve.disabled(D.readonly||!le())})}}function O(ue){ue.control&&(ue=ue.control.value()),ue&&D.execCommand("mceToggleFormat",!1,ue)}function U(ue){var le=ue.length;return k.each(ue,function(ve){ve.menu&&(ve.hidden=0===U(ve.menu));var ye=ve.format;ye&&(ve.hidden=!D.formatter.canApply(ye)),ve.hidden&&le--}),le}function H(ue){var le=ue.items().length;return ue.items().each(function(ve){ve.menu&&ve.visible(H(ve.menu)>0),!ve.menu&&ve.settings.menu&&ve.visible(U(ve.settings.menu)>0);var ye=ve.settings.format;ye&&ve.visible(D.formatter.canApply(ye)),ve.visible()||le--}),le}var Z;Z=function A(){function ue(ie){var he=[];if(ie)return L(ie,function(xe){var Me={text:xe.title,icon:xe.icon};if(xe.items)Me.menu=ue(xe.items);else{var ot=xe.format||"custom"+ve++;xe.format||(xe.name=ot,ye.push(xe)),Me.format=ot,Me.cmd=xe.cmd}he.push(Me)}),he}var ve=0,ye=[],K=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return D.on("init",function(){L(ye,function(ie){D.formatter.register(ie.name,ie)})}),{type:"menu",items:function le(){return ue(D.settings.style_formats_merge?D.settings.style_formats?K.concat(D.settings.style_formats):K:D.settings.style_formats||K)}(),onPostRender:function(ie){D.fire("renderFormatsMenu",{control:ie.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return D.formatter.getCssText(this.settings.format)},onPostRender:function(){var ie=this;ie.parent().on("show",function(){var he,xe;(he=ie.settings.format)&&(ie.disabled(!D.formatter.canApply(he)),ie.active(D.formatter.match(he))),(xe=ie.settings.cmd)&&ie.active(D.queryCommandState(xe))})},onclick:function(){this.settings.format&&O(this.settings.format),this.settings.cmd&&D.execCommand(this.settings.cmd)}}}}(),L({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(ue,le){D.addButton(le,{tooltip:ue,onPostRender:C(le),onclick:function(){O(le)}})}),L({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(ue,le){D.addButton(le,{tooltip:ue[0],cmd:ue[1]})}),L({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(ue,le){D.addButton(le,{tooltip:ue[0],cmd:ue[1],onPostRender:C(le)})});var de=function(ue){var le,ve;if("string"==typeof ue)ve=ue.split(" ");else if(k.isArray(ue))return B(k.map(ue,de));return le=k.grep(ve,function(ye){return"|"===ye||ye in D.menuItems}),k.map(le,function(ye){return"|"===ye?{text:"-"}:D.menuItems[ye]})};D.addButton("undo",{tooltip:"Undo",onPostRender:g("undo"),cmd:"undo"}),D.addButton("redo",{tooltip:"Redo",onPostRender:g("redo"),cmd:"redo"}),D.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),D.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:g("undo"),cmd:"undo"}),D.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:g("redo"),cmd:"redo"}),D.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function m(){var ue=this;D.on("VisualAid",function(le){ue.active(le.hasVisual)}),ue.active(D.hasVisual)},cmd:"mceToggleVisualAid"}),D.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),D.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){var ue,le,ve;this.menu.add(function(ue){var le=ue;return le.length>0&&"-"===le[0].text&&(le=le.slice(1)),le.length>0&&"-"===le[le.length-1].text&&(le=le.slice(0,le.length-1)),le}((ue=D.settings).insert_button_items?de(ue.insert_button_items):(le=[{text:"-"}],ve=k.grep(D.menuItems,function(ye){return"insert"===ye.context}),k.each(ve,function(ye){"before"==ye.separator&&le.push({text:"|"}),ye.prependToContext?le.unshift(ye):le.push(ye),"after"==ye.separator&&le.push({text:"|"})}),le))),this.menu.renderNew()}}),L({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(ue,le){D.addMenuItem(le,{text:ue[0],icon:le,shortcut:ue[2],cmd:ue[1]})}),D.on("mousedown",function(){R.hideAll()}),D.addButton("styleselect",{type:"menubutton",text:"Formats",menu:Z,onShowMenu:function(){D.settings.style_formats_autohide&&H(this.menu)}}),D.addButton("formatselect",function(){var ue=[],le=M(D.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return L(le,function(ve){ue.push({text:ve[0],value:ve[1],textStyle:function(){return D.formatter.getCssText(ve[1])}})}),{type:"listbox",text:le[0][0],values:ue,fixedWidth:!0,onselect:O,onPostRender:z(ue)}}),D.addButton("fontselect",function(){var ue,le=[],ve=M(D.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return L(ve,function(ye){le.push({text:{raw:ye[0]},value:ye[1],textStyle:-1==ye[1].indexOf("dings")?"font-family:"+ye[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:le,fixedWidth:!0,onPostRender:(ue=le,function(){var le=this,ve=function(ye){return ye?ye.split(",")[0]:""};D.on("nodeChange",function(ye){var K,ie=null;K=w.getFontFamily(D.getBody(),ye.element),L(ue,function(he){he.value.toLowerCase()===K.toLowerCase()&&(ie=he.value)}),L(ue,function(he){ie||ve(he.value).toLowerCase()!==ve(K).toLowerCase()||(ie=he.value)}),le.value(ie),!ie&&K&&le.text(ve(K))})}),onselect:function(ye){ye.control.settings.value&&D.execCommand("FontName",!1,ye.control.settings.value)}}}),D.addButton("fontsizeselect",function(){var ue=[];return L((D.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt").split(" "),function(ye){var K=ye,ie=ye,he=ye.split("=");he.length>1&&(K=he[0],ie=he[1]),ue.push({text:K,value:ie})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:ue,fixedWidth:!0,onPostRender:G(ue),onclick:function(ye){ye.control.settings.value&&D.execCommand("FontSize",!1,ye.control.settings.value)}}}),D.addMenuItem("formats",{text:"Formats",menu:Z})}var L=k.each,B=function(D){return b.reduce(D,function(z,N){return z.concat(N)},[])};y.on("AddEditor",function(D){var z=D.editor;(function T(D){D.on("ScriptsLoaded",function(){D.rtl&&($.rtl=!0)})})(z),I(z),function P(D){D.settings.ui_container&&(x.container=S.DOM.select(D.settings.ui_container)[0])}(z)}),$.translate=function(D){return y.translate(D)},W.tooltips=!x.iOS}),He(ca,[mr],function($){return $.extend({recalc:function(W){var R,k,b,S,y,x,w,P,T,I,L,B,D,z,N,G,M,A,C,g,m,O,U,J,de,se,ae,ue,H=[],Z=[];for((R=W.settings,S=W.items().filter(":visible"),y=W.layoutRect(),b=R.columns||Math.ceil(Math.sqrt(S.length)),k=Math.ceil(S.length/b),A=R.spacingH||R.spacing||0,C=R.spacingV||R.spacing||0,g=R.alignH||R.align,m=R.alignV||R.align,G=W.paddingBox,ue="reverseRows"in R?R.reverseRows:W.isRtl(),g&&"string"==typeof g&&(g=[g]),m&&"string"==typeof m&&(m=[m]),L=0);L<b;L++)H.push(0);for(B=0;B<k;B++)Z.push(0);for(B=0;B<k;B++)for(L=0;L<b&&(I=S[B*b+L]);L++)de=(T=I.layoutRect()).minH,H[L]=(J=T.minW)>H[L]?J:H[L],Z[B]=de>Z[B]?de:Z[B];for(se=y.innerW-G.left-G.right,O=0,L=0;L<b;L++)O+=H[L]+(L>0?A:0),se-=(L>0?A:0)+H[L];for(ae=y.innerH-G.top-G.bottom,U=0,B=0;B<k;B++)U+=Z[B]+(B>0?C:0),ae-=(B>0?C:0)+Z[B];if(U+=G.top+G.bottom,(P={}).minW=(O+=G.left+G.right)+(y.w-y.innerW),P.minH=U+(y.h-y.innerH),P.contentW=P.minW-y.deltaW,P.contentH=P.minH-y.deltaH,P.minW=Math.min(P.minW,y.maxW),P.minH=Math.min(P.minH,y.maxH),P.minW=Math.max(P.minW,y.startMinWidth),P.minH=Math.max(P.minH,y.startMinHeight),!y.autoResize||P.minW==y.minW&&P.minH==y.minH){var ve;y.autoResize&&((P=W.layoutRect(P)).contentW=P.minW-y.deltaW,P.contentH=P.minH-y.deltaH),ve="start"==R.packV?0:ae>0?Math.floor(ae/k):0;var ye=0,K=R.flexWidths;if(K)for(L=0;L<K.length;L++)ye+=K[L];else ye=b;var ie=se/ye;for(L=0;L<b;L++)H[L]+=K?K[L]*ie:ie;for(z=G.top,B=0;B<k;B++){for(D=G.left,w=Z[B]+ve,L=0;L<b&&(I=S[ue?B*b+b-1-L:B*b+L]);L++)N=I.settings,T=I.layoutRect(),x=Math.max(H[L],T.startMinWidth),T.x=D,T.y=z,"center"==(M=N.alignH||(g?g[L]||g[0]:null))?T.x=D+x/2-T.w/2:"right"==M?T.x=D+x-T.w:"stretch"==M&&(T.w=x),"center"==(M=N.alignV||(m?m[L]||m[0]:null))?T.y=z+w/2-T.h/2:"bottom"==M?T.y=z+w-T.h:"stretch"==M&&(T.h=w),I.layoutRect(T),D+=x+A,I.recalc&&I.recalc();z+=w+C}}else if(P.w=P.minW,P.h=P.minH,W.layoutRect(P),this.recalc(W),null===W._lastRect){var he=W.parent();he&&(he._lastRect=null,he.recalc())}}})}),He(Sr,[sn,Ze],function($,W){return $.extend({renderHtml:function(){var R=this;return R.classes.add("iframe"),R.canFocus=!1,'<iframe id="'+R._id+'" class="'+R.classes+'" tabindex="-1" src="'+(R.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(R){this.getEl().src=R},html:function(R,k){var b=this,S=this.getEl().contentWindow.document.body;return S?(S.innerHTML=R,k&&k()):W.setTimeout(function(){b.html(R)}),this}})}),He(ul,[sn],function($){return $.extend({init:function(W){var R=this;R._super(W),R.classes.add("widget").add("infobox"),R.canFocus=!1},severity:function(W){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(W)},help:function(W){this.state.set("help",W)},renderHtml:function(){var W=this,R=W.classPrefix;return'<div id="'+W._id+'" class="'+W.classes+'"><div id="'+W._id+'-body">'+W.encode(W.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+R+"ico "+R+'i-help"></i></button></div></div>'},bindStates:function(){var W=this;return W.state.on("change:text",function(R){W.getEl("body").firstChild.data=W.encode(R.value),W.state.get("rendered")&&W.updateLayoutRect()}),W.state.on("change:help",function(R){W.classes.toggle("has-help",R.value),W.state.get("rendered")&&W.updateLayoutRect()}),W._super()}})}),He(gu,[sn,Bn],function($,W){return $.extend({init:function(R){var k=this;k._super(R),k.classes.add("widget").add("label"),k.canFocus=!1,R.multiline&&k.classes.add("autoscroll"),R.strong&&k.classes.add("strong")},initLayoutRect:function(){var R=this,k=R._super();return R.settings.multiline&&(W.getSize(R.getEl()).width>k.maxW&&(k.minW=k.maxW,R.classes.add("multiline")),R.getEl().style.width=k.minW+"px",k.startMinH=k.h=k.minH=Math.min(k.maxH,W.getSize(R.getEl()).height)),k},repaint:function(){var R=this;return R.settings.multiline||(R.getEl().style.lineHeight=R.layoutRect().h+"px"),R._super()},severity:function(R){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(R)},renderHtml:function(){var k,b,R=this,S=R.settings.forId;return!S&&(b=R.settings.forName)&&(k=R.getRoot().find("#"+b)[0])&&(S=k._id),S?'<label id="'+R._id+'" class="'+R.classes+'"'+(S?' for="'+S+'"':"")+">"+R.encode(R.state.get("text"))+"</label>":'<span id="'+R._id+'" class="'+R.classes+'">'+R.encode(R.state.get("text"))+"</span>"},bindStates:function(){var R=this;return R.state.on("change:text",function(k){R.innerHtml(R.encode(k.value)),R.state.get("rendered")&&R.updateLayoutRect()}),R._super()}})}),He(fs,[qi],function($){return $.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(W){this._super(W),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(R){R.classes.add("toolbar-item")}),this._super()}})}),He(da,[fs],function($){return $.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),He(cl,[uo,ti,da],function($,W,R){var b=$.extend({init:function(S){var y=this;y._renderOpen=!0,y._super(S),S=y.settings,y.classes.add("menubtn"),S.fixedWidth&&y.classes.add("fixed-width"),y.aria("haspopup",!0),y.state.set("menu",S.menu||y.render())},showMenu:function(S){var x,y=this;return y.menu&&y.menu.visible()&&!1!==S?y.hideMenu():(y.menu||((x=y.state.get("menu")||[]).length?x={type:"menu",items:x}:x.type=x.type||"menu",y.menu=x.renderTo?x.parent(y).show().renderTo():W.create(x).parent(y).renderTo(),y.fire("createmenu"),y.menu.reflow(),y.menu.on("cancel",function(w){w.control.parent()===y.menu&&(w.stopPropagation(),y.focus(),y.hideMenu())}),y.menu.on("select",function(){y.focus()}),y.menu.on("show hide",function(w){w.control==y.menu&&y.activeMenu("show"==w.type),y.aria("expanded","show"==w.type)}).fire("show")),y.menu.show(),y.menu.layoutRect({w:y.layoutRect().w}),y.menu.moveRel(y.getEl(),y.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),void y.fire("showmenu"))},hideMenu:function(){var S=this;S.menu&&(S.menu.items().each(function(y){y.hideMenu&&y.hideMenu()}),S.menu.hide())},activeMenu:function(S){this.classes.toggle("active",S)},renderHtml:function(){var P,S=this,y=S._id,x=S.classPrefix,w=S.settings.icon,T=S.state.get("text"),I="";return(P=S.settings.image)?(w="none","string"!=typeof P&&(P=window.getSelection?P[0]:P[1]),P=" style=\"background-image: url('"+P+"')\""):P="",T&&(S.classes.add("btn-has-text"),I='<span class="'+x+'txt">'+S.encode(T)+"</span>"),w=S.settings.icon?x+"ico "+x+"i-"+w:"",S.aria("role",S.parent()instanceof R?"menuitem":"button"),'<div id="'+y+'" class="'+S.classes+'" tabindex="-1" aria-labelledby="'+y+'"><button id="'+y+'-open" role="presentation" type="button" tabindex="-1">'+(w?'<i class="'+w+'"'+P+"></i>":"")+I+' <i class="'+x+'caret"></i></button></div>'},postRender:function(){var S=this;return S.on("click",function(y){y.control===S&&function k(S,y){for(;S;){if(y===S)return!0;S=S.parentNode}return!1}(y.target,S.getEl())&&(S.focus(),S.showMenu(!y.aria),y.aria&&S.menu.items().filter(":visible")[0].focus())}),S.on("mouseenter",function(y){var P,x=y.control,w=S.parent();x&&w&&x instanceof b&&x.parent()==w&&(w.items().filter("MenuButton").each(function(T){T.hideMenu&&T!=x&&(T.menu&&T.menu.visible()&&(P=!0),T.hideMenu())}),P&&(x.focus(),x.showMenu()))}),S._super()},bindStates:function(){var S=this;return S.state.on("change:menu",function(){S.menu&&S.menu.remove(),S.menu=null}),S._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return b}),He(dl,[sn,ti,St,Ze],function($,W,R,k){return $.extend({Defaults:{border:0,role:"menuitem"},init:function(b){var y,S=this;S._super(b),b=S.settings,S.classes.add("menu-item"),b.menu&&S.classes.add("menu-item-expand"),b.preview&&S.classes.add("menu-item-preview"),"-"!==(y=S.state.get("text"))&&"|"!==y||(S.classes.add("menu-item-sep"),S.aria("role","separator"),S.state.set("text","-")),b.selectable&&(S.aria("role","menuitemcheckbox"),S.classes.add("menu-item-checkbox"),b.icon="selected"),b.preview||b.selectable||S.classes.add("menu-item-normal"),S.on("mousedown",function(x){x.preventDefault()}),b.menu&&!b.ariaHideMenu&&S.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var y,b=this,S=b.settings,x=b.parent();if(x.items().each(function(P){P!==b&&P.hideMenu()}),S.menu){(y=b.menu)?y.show():((y=S.menu).length?y={type:"menu",items:y}:y.type=y.type||"menu",x.settings.itemDefaults&&(y.itemDefaults=x.settings.itemDefaults),(y=b.menu=W.create(y).parent(b).renderTo()).reflow(),y.on("cancel",function(P){P.stopPropagation(),b.focus(),y.hide()}),y.on("show hide",function(P){P.control.items&&P.control.items().each(function(T){T.active(T.settings.selected)})}).fire("show"),y.on("hide",function(P){P.control===y&&b.classes.remove("selected")}),y.submenu=!0),y._parentMenu=x,y.classes.add("menu-sub");var w=y.testMoveRel(b.getEl(),b.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);y.moveRel(b.getEl(),w),y.rel=w,w="menu-sub-"+w,y.classes.remove(y._lastRel).add(w),y._lastRel=w,b.classes.add("selected"),b.aria("expanded",!0)}},hideMenu:function(){var b=this;return b.menu&&(b.menu.items().each(function(S){S.hideMenu&&S.hideMenu()}),b.menu.hide(),b.aria("expanded",!1)),b},renderHtml:function(){function S(M){return M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(M){var A=T.match||"";return A?M.replace(new RegExp(S(A),"gi"),function(C){return"!mce~match["+C+"]mce~match!"}):M}function x(M){return M.replace(new RegExp(S("!mce~match["),"g"),"<b>").replace(new RegExp(S("]mce~match!"),"g"),"</b>")}var G,w=this,P=w._id,T=w.settings,I=w.classPrefix,L=w.state.get("text"),B=w.settings.icon,D="",z=T.shortcut,N=w.encode(T.url);return B&&w.parent().classes.add("menu-has-icons"),T.image&&(D=" style=\"background-image: url('"+T.image+"')\""),z&&(z=function b(M){var A,C,g;for(g=R.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},M=M.split("+"),A=0;A<M.length;A++)(C=g[M[A].toLowerCase()])&&(M[A]=C);return M.join("+")}(z)),B=I+"ico "+I+"i-"+(w.settings.icon||"none"),G="-"!==L?'<i class="'+B+'"'+D+"></i>\xa0":"",L=x(w.encode(y(L))),N=x(w.encode(y(N))),'<div id="'+P+'" class="'+w.classes+'" tabindex="-1">'+G+("-"!==L?'<span id="'+P+'-text" class="'+I+'text">'+L+"</span>":"")+(z?'<div id="'+P+'-shortcut" class="'+I+'menu-shortcut">'+z+"</div>":"")+(T.menu?'<div class="'+I+'caret"></div>':"")+(N?'<div class="'+I+'menu-item-link">'+N+"</div>":"")+"</div>"},postRender:function(){var b=this,S=b.settings,y=S.textStyle;if("function"==typeof y&&(y=y.call(this)),y){var x=b.getEl("text");x&&x.setAttribute("style",y)}return b.on("mouseenter click",function(w){w.control===b&&(S.menu||"click"!==w.type?(b.showMenu(),w.aria&&b.menu.focus(!0)):(b.fire("select"),k.requestAnimationFrame(function(){b.parent().hideAll()})))}),b._super(),b},hover:function(){var b=this;return b.parent().items().each(function(S){S.classes.remove("selected")}),b.classes.toggle("selected",!0),b},active:function(b){return typeof b<"u"&&this.aria("checked",b),this._super(b)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),He(mu,[rt,ji,Ze],function($,W,R){return function(k,b){var y,w,S=this,x=W.classPrefix;S.show=function(P,T){function I(){y&&($(k).append('<div class="'+x+"throbber"+(b?" "+x+"throbber-inline":"")+'"></div>'),T&&T())}return S.hide(),y=!0,P?w=R.setTimeout(I,P):I(),S},S.hide=function(){var P=k.lastChild;return R.clearTimeout(w),P&&-1!=P.className.indexOf("throbber")&&P.parentNode.removeChild(P),y=!1,S}}}),He(Bo,[zr,dl,mu,Fe],function($,W,R,k){return $.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(b){if(b.autohide=!0,b.constrainToViewport=!0,"function"==typeof b.items&&(b.itemsFactory=b.items,b.items=[]),b.itemDefaults)for(var y=b.items,x=y.length;x--;)y[x]=k.extend({},b.itemDefaults,y[x]);this._super(b),this.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){function b(){S.throbber&&(S.throbber.hide(),S.throbber=null)}var y,S=this;S.settings.itemsFactory&&(S.throbber||(S.throbber=new R(S.getEl("body"),!0),0===S.items().length?(S.throbber.show(),S.fire("loading")):S.throbber.show(100,function(){S.items().remove(),S.fire("loading")}),S.on("hide close",b)),S.requestTime=y=(new Date).getTime(),S.settings.itemsFactory(function(w){return 0===w.length?void S.hide():void(S.requestTime===y&&(S.getEl().style.width="",S.getEl("body").style.width="",b(),S.items().remove(),S.getEl("body").innerHTML="",S.add(w),S.renderNew(),S.fire("loaded")))}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var b=this;return b.items().each(function(S){var y=S.settings;if(y.icon||y.image||y.selectable)return b._hasIcons=!0,!1}),b.settings.itemsFactory&&b.on("postrender",function(){b.settings.itemsFactory&&b.load()}),b._super()}})}),He(ps,[cl,Bo],function($,W){return $.extend({init:function(R){var S,y,x,w,b=this;b._super(R),b._values=S=(R=b.settings).values,S&&(typeof R.value<"u"&&function k(P){for(var T=0;T<P.length;T++){if(y=P[T].selected||R.value===P[T].value)return x=x||P[T].text,b.state.set("value",P[T].value),!0;if(P[T].menu&&k(P[T].menu))return!0}}(S),!y&&S.length>0&&(x=S[0].text,b.state.set("value",S[0].value)),b.state.set("menu",S)),b.state.set("text",R.text||x),b.classes.add("listbox"),b.on("select",function(P){var T=P.control;w&&(P.lastControl=w),R.multiple?T.active(!T.active()):b.value(P.control.value()),w=T})},bindStates:function(){function k(S,y){var x;if(S)for(var w=0;w<S.length;w++){if(S[w].value===y)return S[w];if(S[w].menu&&(x=k(S[w].menu,y)))return x}}var b=this;return b.on("show",function(S){!function R(S,y){S instanceof W&&S.items().each(function(x){x.hasMenus()||x.active(x.value()===y)})}(S.control,b.value())}),b.state.on("change:value",function(S){var y=k(b.state.get("menu"),S.value);b.text(y?y.text:b.settings.text)}),b._super()}})}),He(co,[ls],function($){return $.extend({Defaults:{classes:"radio",role:"radio"}})}),He(ed,[sn,pr],function($,W){return $.extend({renderHtml:function(){var R=this,k=R.classPrefix;return R.classes.add("resizehandle"),"both"==R.settings.direction&&R.classes.add("resizehandle-both"),R.canFocus=!1,'<div id="'+R._id+'" class="'+R.classes+'"><i class="'+k+"ico "+k+'i-resize"></i></div>'},postRender:function(){var R=this;R._super(),R.resizeDragHelper=new W(this._id,{start:function(){R.fire("ResizeStart")},drag:function(k){"both"!=R.settings.direction&&(k.deltaX=0),R.fire("Resize",k)},stop:function(){R.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),He(hl,[sn],function($){function W(R){var k="";if(R)for(var b=0;b<R.length;b++)k+='<option value="'+R[b]+'">'+R[b]+"</option>";return k}return $.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(R){var k=this;k._super(R),k.settings.size&&(k.size=k.settings.size),k.settings.options&&(k._options=k.settings.options),k.on("keydown",function(b){var S;13==b.keyCode&&(b.preventDefault(),k.parents().reverse().each(function(y){if(y.toJSON)return S=y,!1}),k.fire("submit",{data:S.toJSON()}))})},options:function(R){return arguments.length?(this.state.set("options",R),this):this.state.get("options")},renderHtml:function(){var k,R=this,b="";return k=W(R._options),R.size&&(b=' size = "'+R.size+'"'),'<select id="'+R._id+'" class="'+R.classes+'"'+b+">"+k+"</select>"},bindStates:function(){var R=this;return R.state.on("change:options",function(k){R.getEl().innerHTML=W(k.value)}),R._super()}})}),He(td,[sn,pr,Bn],function($,W,R){function k(y,x,w){return y<x&&(y=x),y>w&&(y=w),y}function b(y,x,w){y.setAttribute("aria-"+x,w)}function S(y,x){var w,P,T,I,B;"v"==y.settings.orientation?(I="top",T="height",P="h"):(I="left",T="width",P="w"),B=y.getEl("handle"),w=(y.layoutRect()[P]||100)-R.getSize(B)[T],B.style[I]=w*((x-y._minValue)/(y._maxValue-y._minValue))+"px",B.style.height=y.layoutRect().h+"px",b(B,"valuenow",x),b(B,"valuetext",""+y.settings.previewFilter(x)),b(B,"valuemin",y._minValue),b(B,"valuemax",y._maxValue)}return $.extend({init:function(y){var x=this;y.previewFilter||(y.previewFilter=function(w){return Math.round(100*w)/100}),x._super(y),x.classes.add("slider"),"v"==y.orientation&&x.classes.add("vertical"),x._minValue=y.minValue||0,x._maxValue=y.maxValue||100,x._initValue=x.state.get("value")},renderHtml:function(){var y=this,x=y._id;return'<div id="'+x+'" class="'+y.classes+'"><div id="'+x+'-handle" class="'+y.classPrefix+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var I,L,B,D,z,N,T=this;I=T._minValue,L=T._maxValue,"v"==T.settings.orientation?(B="screenY",D="top",z="height",N="h"):(B="screenX",D="left",z="width",N="w"),T._super(),function w(G,M){function A(C){var g;g=T.value(),g=function x(G,M,A){return A*(M-G)-G}(G,M,function y(G,M,A){return(A+G)/(M-G)}(G,M,g)+.05*C),g=k(g,G,M),T.value(g),T.fire("dragstart",{value:g}),T.fire("drag",{value:g}),T.fire("dragend",{value:g})}T.on("keydown",function(C){switch(C.keyCode){case 37:case 38:A(-1);break;case 39:case 40:A(1)}})}(I,L,T.getEl("handle")),function P(G,M,A){var C,g,m,O,U;T._dragHelper=new W(T._id,{handle:T._id+"-handle",start:function(H){C=H[B],g=parseInt(T.getEl("handle").style[D],10),m=(T.layoutRect()[N]||100)-R.getSize(A)[z],T.fire("dragstart",{value:U})},drag:function(H){O=k(g+(H[B]-C),0,m),A.style[D]=O+"px",T.value(U=G+O/m*(M-G)),T.tooltip().text(""+T.settings.previewFilter(U)).show().moveRel(A,"bc tc"),T.fire("drag",{value:U})},stop:function(){T.tooltip().hide(),T.fire("dragend",{value:U})}})}(I,L,T.getEl("handle"))},repaint:function(){this._super(),S(this,this.value())},bindStates:function(){var y=this;return y.state.on("change:value",function(x){S(y,x.value)}),y._super()}})}),He(nd,[sn],function($){return $.extend({renderHtml:function(){var W=this;return W.classes.add("spacer"),W.canFocus=!1,'<div id="'+W._id+'" class="'+W.classes+'"></div>'}})}),He(fl,[cl,Bn,rt],function($,W,R){return $.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var x,k=this,b=k.getEl(),S=k.layoutRect();return k._super(),x=b.lastChild,R(b.firstChild).css({width:S.w-W.getSize(x).width,height:S.h-2}),R(x).css({height:S.h-2}),k},activeMenu:function(k){R(this.getEl().lastChild).toggleClass(this.classPrefix+"active",k)},renderHtml:function(){var y,k=this,b=k._id,S=k.classPrefix,x=k.state.get("icon"),w=k.state.get("text"),P="";return(y=k.settings.image)?(x="none","string"!=typeof y&&(y=window.getSelection?y[0]:y[1]),y=" style=\"background-image: url('"+y+"')\""):y="",x=k.settings.icon?S+"ico "+S+"i-"+x:"",w&&(k.classes.add("btn-has-text"),P='<span class="'+S+'txt">'+k.encode(w)+"</span>"),'<div id="'+b+'" class="'+k.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(x?'<i class="'+x+'"'+y+"></i>":"")+P+'</button><button type="button" class="'+S+'open" hidefocus="1" tabindex="-1">'+(k._menuBtnText?(x?"\xa0":"")+k._menuBtnText:"")+' <i class="'+S+'caret"></i></button></div>'},postRender:function(){var k=this,b=k.settings.onclick;return k.on("click",function(S){var y=S.target;if(S.control==this)for(;y;){if(S.aria&&"down"!=S.aria.key||"BUTTON"==y.nodeName&&-1==y.className.indexOf("open"))return S.stopImmediatePropagation(),void(b&&b.call(this,S));y=y.parentNode}}),delete k.settings.onclick,k._super()}})}),He(vu,[ds],function($){return $.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),He(yu,[Zi,rt,Bn],function($,W,R){return $.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(k){var b;this.activeTabId&&(b=this.getEl(this.activeTabId),W(b).removeClass(this.classPrefix+"active"),b.setAttribute("aria-selected","false")),this.activeTabId="t"+k,(b=this.getEl("t"+k)).setAttribute("aria-selected","true"),W(b).addClass(this.classPrefix+"active"),this.items()[k].show().fire("showtab"),this.reflow(),this.items().each(function(S,y){k!=y&&S.hide()})},renderHtml:function(){var k=this,b=k._layout,S="",y=k.classPrefix;return k.preRender(),b.preRender(k),k.items().each(function(x,w){var P=k._id+"-t"+w;x.aria("role","tabpanel"),x.aria("labelledby",P),S+='<div id="'+P+'" class="'+y+'tab" unselectable="on" role="tab" aria-controls="'+x._id+'" aria-selected="false" tabIndex="-1">'+k.encode(x.settings.title)+"</div>"}),'<div id="'+k._id+'" class="'+k.classes+'" hidefocus="1" tabindex="-1"><div id="'+k._id+'-head" class="'+y+'tabs" role="tablist">'+S+'</div><div id="'+k._id+'-body" class="'+k.bodyClasses+'">'+b.renderHtml(k)+"</div></div>"},postRender:function(){var k=this;k._super(),k.settings.activeTab=k.settings.activeTab||0,k.activateTab(k.settings.activeTab),this.on("click",function(b){var S=b.target.parentNode;if(S&&S.id==k._id+"-head")for(var y=S.childNodes.length;y--;)S.childNodes[y]==b.target&&k.activateTab(y)})},initLayoutRect:function(){var b,S,y,k=this;S=(S=R.getSize(k.getEl("head")).width)<0?0:S,y=0,k.items().each(function(w){S=Math.max(S,w.layoutRect().minW),y=Math.max(y,w.layoutRect().minH)}),k.items().each(function(w){w.settings.x=0,w.settings.y=0,w.settings.w=S,w.settings.h=y,w.layoutRect({x:0,y:0,w:S,h:y})});var x=R.getSize(k.getEl("head")).height;return k.settings.minWidth=S,k.settings.minHeight=y+x,(b=k._super()).deltaH+=x,b.innerH=b.h-b.deltaH,b}})}),He(xu,[sn,Fe,Bn],function($,W,R){return $.extend({init:function(k){var b=this;b._super(k),b.classes.add("textbox"),k.multiline?b.classes.add("multiline"):(b.on("keydown",function(S){var y;13==S.keyCode&&(S.preventDefault(),b.parents().reverse().each(function(x){if(x.toJSON)return y=x,!1}),b.fire("submit",{data:y.toJSON()}))}),b.on("keyup",function(S){b.state.set("value",S.target.value)}))},repaint:function(){var b,S,y,x,P,k=this,w=0;b=k.getEl().style,S=k._layoutRect,P=k._lastRepaintRect||{};var T=document;return!k.settings.multiline&&T.all&&(!T.documentMode||T.documentMode<=8)&&(b.lineHeight=S.h-w+"px"),x=(y=k.borderBox).left+y.right+8,w=y.top+y.bottom+(k.settings.multiline?8:0),S.x!==P.x&&(b.left=S.x+"px",P.x=S.x),S.y!==P.y&&(b.top=S.y+"px",P.y=S.y),S.w!==P.w&&(b.width=S.w-x+"px",P.w=S.w),S.h!==P.h&&(b.height=S.h-w+"px",P.h=S.h),k._lastRepaintRect=P,k.fire("repaint",{},!1),k},renderHtml:function(){var S,y,k=this,b=k.settings;return S={id:k._id,hidefocus:"1"},W.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(x){S[x]=b[x]}),k.disabled()&&(S.disabled="disabled"),b.subtype&&(S.type=b.subtype),(y=R.create(b.multiline?"textarea":"input",S)).value=k.state.get("value"),y.className=k.classes,y.outerHTML},value:function(k){return arguments.length?(this.state.set("value",k),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var k=this;k.getEl().value=k.state.get("value"),k._super(),k.$el.on("change",function(b){k.state.set("value",b.target.value),k.fire("change",b)})},bindStates:function(){var k=this;return k.state.on("change:value",function(b){k.getEl().value!=b.value&&(k.getEl().value=b.value)}),k.state.on("change:disabled",function(b){k.getEl().disabled=b.value}),k._super()},remove:function(){this.$el.off(),this._super()}})}),He("tinymce/Register",[],function(){var $=this||window;return"function"==typeof $.define&&($.define.amd||$.define("ephox/tinymce",[],function(){return $.tinymce})),"object"==typeof module&&(module.exports=window.tinymce),{}}),function Et($){var W,R,k,b,S;for(W=0;W<$.length;W++){R=Qt,b=(k=$[W]).split(/[.\/]/);for(var y=0;y<b.length-1;++y)R[b[y]]===Dn&&(R[b[y]]={}),R=R[b[y]];R[b[b.length-1]]=$t[k]}if(Qt.AMDLC_TESTS){for(k in S=Qt.privateModules||{},$t)S[k]=$t[k];for(W=0;W<$.length;W++)delete S[$[W]];Qt.privateModules=S}}([ht,be,Ze,St,Dt,Re,Fe,rt,Ie,fe,Ee,Ve,Je,Ue,Ke,nt,gt,ut,Lt,Ye,gn,it,on,xn,Tn,ei,ri,en,zn,It,qt,ln,cn,bn,Nn,Li,ji,ti,dr,qi,pr,ar,Zi,Kr,ki,zr,Aa,wt,Ht,mn,sn,An,Wn,jn,ni,xi,Ro,ra,lo,wr,oa,Ia,du,Qc,rl,Po,Cr,mr,uo,aa,ls,sa,ol,al,Da,us,hu,cs,fu,Rr,la,sl,ll,Mo,Hr,ds,hs,ca,Sr,ul,gu,fs,da,cl,dl,mu,Bo,ps,co,ed,hl,td,nd,fl,vu,yu,xu])}(window),function(){var Qt={},He=function(ht){var be=Qt[ht];if(void 0===be)throw"module ["+ht+"] was undefined";return void 0===be.instance&&function(ht){for(var be=Qt[ht],Ze=be.deps,St=be.defn,Dt=Ze.length,Re=new Array(Dt),Vt=0;Vt<Dt;++Vt)Re[Vt]=He(Ze[Vt]);var Fe=St.apply(null,Re);if(void 0===Fe)throw"module ["+ht+"] returned undefined";be.instance=Fe}(ht),be.instance},Et=function(ht,be,Ze){if("string"!=typeof ht)throw"module id must be a string";if(void 0===be)throw"no dependencies for "+ht;if(void 0===Ze)throw"no definition function for "+ht;Qt[ht]={deps:be,defn:Ze,instance:void 0}},$t=function(ht,be){Et(ht,[],function(){return be})};$t("1",tinymce.Env),$t("2",tinymce.EditorManager),$t("3",tinymce.ThemeManager),$t("8",tinymce.util.Tools),$t("9",tinymce.ui.Factory),$t("a",tinymce.DOM),Et("b",["8","9"],function(ht,be){var St=function(Re,Vt,Fe){var rt,Ie=[];if(Vt)return ht.each(Vt.split(/[ ,]/),function(fe){var Ee=function(){var ze=Re.selection;fe.settings.stateSelector&&ze.selectorChanged(fe.settings.stateSelector,function(Ve){fe.active(Ve)},!0),fe.settings.disabledStateSelector&&ze.selectorChanged(fe.settings.disabledStateSelector,function(Ve){fe.disabled(Ve)})};"|"==fe?rt=null:be.has(fe)?(Ie.push(fe={type:fe,size:Fe}),rt=null):(rt||Ie.push(rt={type:"buttongroup",items:[]}),Re.buttons[fe]&&("function"==typeof(fe=Re.buttons[fe])&&(fe=fe()),fe.type=fe.type||"button",fe.size=Fe,fe=be.create(fe),rt.items.push(fe),Re.initialized?Ee():Re.on("init",Ee)))}),{type:"toolbar",layout:"flow",items:Ie}};return{createToolbar:St,createToolbars:function(Re,Vt){var Fe=[],rt=Re.settings,Ie=function(De){if(De)return Fe.push(St(Re,De,Vt)),!0};if(ht.isArray(rt.toolbar)){if(0===rt.toolbar.length)return;ht.each(rt.toolbar,function(De,Ee){rt["toolbar"+(Ee+1)]=De}),delete rt.toolbar}for(var fe=1;fe<10&&Ie(rt["toolbar"+fe]);fe++);if(Fe.length||!1===rt.toolbar||Ie(rt.toolbar||"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),Fe.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:Fe}}}}),Et("c",["8"],function(ht){var be={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},Ze=function(Re,Vt){return"|"==Vt?{text:"|"}:Re[Vt]},St=function(Re,Vt,Fe){var rt,Ie,fe,De,Ee;if(Ee=ht.makeMap((Vt.removed_menuitems||"").split(/[ ,]/)),Vt.menu?(Ie=Vt.menu[Fe],De=!0):Ie=be[Fe],Ie){rt={text:Ie.title},fe=[],ht.each((Ie.items||"").split(/[ ,]/),function(Ve){Ze(Re,Ve)&&!Ee[Ve]&&fe.push(Ze(Re,Ve))}),De||ht.each(Re,function(Ve){Ve.context==Fe&&("before"==Ve.separator&&fe.push({text:"|"}),Ve.prependToContext?fe.unshift(Ve):fe.push(Ve),"after"==Ve.separator&&fe.push({text:"|"}))});for(var ze=0;ze<fe.length;ze++)"|"==fe[ze].text&&(0!==ze&&ze!=fe.length-1||fe.splice(ze,1));if(rt.menu=fe,!rt.menu.length)return null}return rt};return{createMenuButtons:function(Re){var Vt,Fe=[],rt=Re.settings,Ie=[];if(rt.menu)for(Vt in rt.menu)Ie.push(Vt);else for(Vt in be)Ie.push(Vt);for(var fe="string"==typeof rt.menubar?rt.menubar.split(/[ ,]/):Ie,De=0;De<fe.length;De++){var Ee=fe[De];(Ee=St(Re.menuItems,Re.settings,Ee))&&Fe.push(Ee)}return Fe}}}),$t("j",tinymce.util.Delay),$t("k",tinymce.geom.Rect),Et("d",["a","8","j","b","9","k"],function(ht,be,Ze,St,Dt,Re){var Vt=function(Ee){return{left:Ee.x,top:Ee.y,width:Ee.w,height:Ee.h,right:Ee.x+Ee.w,bottom:Ee.y+Ee.h}},rt=function(Ee,ze){Ee.moveTo(ze.left,ze.top)},fe=function(Ee,ze,Ve,Je,Ue,tt){return tt=Vt({x:ze,y:Ve,w:tt.w,h:tt.h}),Ee&&(tt=Ee({elementRect:Vt(Je),contentAreaRect:Vt(Ue),panelRect:tt})),tt};return{addContextualToolbars:function(Ee){var ze,Ve=Ee.settings,Je=function(){return Ee.contextToolbars||[]},tt=function(gt,ut){var Lt,Ye,gn,it,Mt,on,xn,Wt=Ve.inline_toolbar_position_handler;if(!Ee.removed){if(!gt||!gt.toolbar.panel)return void function(Ee){be.each(Ee.contextToolbars,function(ze){ze.panel&&ze.panel.hide()})}(Ee);xn=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],Mt=gt.toolbar.panel,ut&&Mt.show(),gn=function(gt){var ut,Lt,Ye;return ut=ht.getPos(Ee.getContentAreaContainer()),Lt=Ee.dom.getRect(gt),"BODY"===(Ye=Ee.dom.getRoot()).nodeName&&(Lt.x-=Ye.ownerDocument.documentElement.scrollLeft||Ye.scrollLeft,Lt.y-=Ye.ownerDocument.documentElement.scrollTop||Ye.scrollTop),Lt.x+=ut.x,Lt.y+=ut.y,Lt}(gt.element),Ye=ht.getRect(Mt.getEl()),it=ht.getRect(Ee.getContentAreaContainer()||Ee.getBody()),"inline"!==ht.getStyle(gt.element,"display",!0)&&(gn.w=gt.element.clientWidth,gn.h=gt.element.clientHeight),Ee.inline||(it.w=Ee.getDoc().documentElement.offsetWidth),Ee.selection.controlSelection.isResizable(gt.element)&&gn.w<25&&(gn=Re.inflate(gn,0,8)),Lt=Re.findBestRelativePosition(Ye,gn,it,xn),gn=Re.clamp(gn,it),Lt?(on=Re.relativePosition(Ye,gn,Lt),rt(Mt,fe(Wt,on.x,on.y,gn,it,Ye))):(it.h+=Ye.h,(gn=Re.intersect(it,gn))?(Lt=Re.findBestRelativePosition(Ye,gn,it,["bc-tc","bl-tl","br-tr"]))?(on=Re.relativePosition(Ye,gn,Lt),rt(Mt,fe(Wt,on.x,on.y,gn,it,Ye))):rt(Mt,fe(Wt,gn.x,gn.y,gn,it,Ye)):Mt.hide()),function(Ee,ze,Ve){ze=ze?ze.substr(0,2):"",be.each({t:"down",b:"up"},function(Je,Ue){Ee.classes.toggle("arrow-"+Je,Ve(Ue,ze.substr(0,1)))}),be.each({l:"left",r:"right"},function(Je,Ue){Ee.classes.toggle("arrow-"+Je,Ve(Ue,ze.substr(1,1)))})}(Mt,Lt,function(an,_t){return an===_t})}},Kt=function(gt){return function(){Ze.requestAnimationFrame(function(){Ee.selection&&tt(nt(Ee.selection.getNode()),gt)})}},Tt=function(){be.each(Je(),function(gt){gt.panel&&gt.panel.hide()})},nt=function(gt){var ut,Lt,Ye,gn=Je();for(ut=(Ye=Ee.$(gt).parents().add(gt)).length-1;ut>=0;ut--)for(Lt=gn.length-1;Lt>=0;Lt--)if(gn[Lt].predicate(Ye[ut]))return{toolbar:gn[Lt],element:Ye[ut]};return null};Ee.on("click keyup setContent ObjectResized",function(gt){("setcontent"!==gt.type||gt.selection)&&Ze.setEditorTimeout(Ee,function(){var ut;(ut=nt(Ee.selection.getNode()))?(Tt(),function(gt){var ut;gt.toolbar.panel?(gt.toolbar.panel.show(),tt(gt)):(ze||(ze=Ee.selection.getScrollContainer()||Ee.getWin(),ht.bind(ze,"scroll",Kt(!0)),Ee.on("remove",function(){ht.unbind(ze,"scroll")})),ut=Dt.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:St.createToolbar(Ee,gt.toolbar.items),oncancel:function(){Ee.focus()}}),gt.toolbar.panel=ut,ut.renderTo(document.body).reflow(),tt(gt))}(ut)):Tt()})}),Ee.on("blur hide contextmenu",Tt),Ee.on("ObjectResizeStart",function(){var gt=nt(Ee.selection.getNode());gt&&gt.toolbar.panel&&gt.toolbar.panel.hide()}),Ee.on("ResizeEditor ResizeWindow",Kt(!0)),Ee.on("nodeChange",Kt(!1)),Ee.on("remove",function(){be.each(Je(),function(gt){gt.panel&&gt.panel.remove()}),Ee.contextToolbars={}}),Ee.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var gt=nt(Ee.selection.getNode());gt&&gt.toolbar.panel&&gt.toolbar.panel.items()[0].focus()})}}}),Et("e",[],function(){var ht=function(Ze,St){return function(){var Dt=Ze.find(St)[0];Dt&&Dt.focus(!0)}};return{addKeys:function(Ze,St){Ze.shortcuts.add("Alt+F9","",ht(St,"menubar")),Ze.shortcuts.add("Alt+F10,F10","",ht(St,"toolbar")),Ze.shortcuts.add("Alt+F11","",ht(St,"elementpath")),St.on("cancel",function(){Ze.focus()})}}}),Et("f",["8","9","1"],function(ht,be,Ze){var Dt=function(Ee,ze,Ve){var Je=Ee.settings[Ve];Je&&Je(function(Ee){return{element:function(){return Ee}}}(ze.getEl("body")))},rt=function(Ee,ze,Ve){return function(Je){var Ue=Je.control,tt=Ue.parents().filter("panel")[0],Kt=tt.find("#"+ze)[0],re=function(Ee,ze){return ht.grep(Ee,function(Ve){return Ve.name===ze})[0]}(Ve,ze);(function(Ee,ze,Ve){ht.each(Ve,function(Je){var Ue=ze.items().filter("#"+Je.name)[0];Ue&&Ue.visible()&&Je.name!==Ee&&(Dt(Je,Ue,"onhide"),Ue.visible(!1))})})(ze,tt,Ve),function(Ee){Ee.items().each(function(ze){ze.active(!1)})}(Ue.parent()),Kt&&Kt.visible()?(Dt(re,Kt,"onhide"),Kt.hide(),Ue.active(!1)):(Kt?(Kt.show(),Dt(re,Kt,"onshow")):(Kt=be.create({type:"container",name:ze,layout:"stack",classes:"sidebar-panel",html:""}),tt.prepend(Kt),Dt(re,Kt,"onrender"),Dt(re,Kt,"onshow")),Ue.active(!0)),Ee.fire("ResizeEditor")}};return{hasSidebar:function(Ee){return!(Ze.ie&&!(Ze.ie>=11)||!Ee.sidebars)&&Ee.sidebars.length>0},createSidebar:function(Ee){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:ht.map(Ee.sidebars,function(Ve){var Je=Ve.settings;return{type:"button",icon:Je.icon,image:Je.image,tooltip:Je.tooltip,onclick:rt(Ee,Ve.name,Ee.sidebars)}})}]}}}}),Et("g",[],function(){return{fireSkinLoaded:function(be){var Ze=function(){be._skinLoaded=!0,be.fire("SkinLoaded")};return function(){be.initialized?Ze():be.on("init",Ze)}}}}),Et("6",["a"],function(ht){var be=function(Dt){return{width:Dt.clientWidth,height:Dt.clientHeight}},Ze=function(Dt,Re,Vt){var Fe,rt,Ie,fe,De=Dt.settings;Fe=Dt.getContainer(),rt=Dt.getContentAreaContainer().firstChild,Ie=be(Fe),fe=be(rt),null!==Re&&(Re=Math.max(De.min_width||100,Re),Re=Math.min(De.max_width||65535,Re),ht.setStyle(Fe,"width",Re+(Ie.width-fe.width)),ht.setStyle(rt,"width",Re)),Vt=Math.max(De.min_height||100,Vt),Vt=Math.min(De.max_height||65535,Vt),ht.setStyle(rt,"height",Vt),Dt.fire("ResizeEditor")};return{resizeTo:Ze,resizeBy:function(Dt,Re,Vt){var Fe=Dt.getContentAreaContainer();Ze(Dt,Fe.clientWidth+Re,Fe.clientHeight+Vt)}}}),Et("4",["8","9","a","b","c","d","e","f","g","6"],function(ht,be,Ze,St,Dt,Re,Vt,Fe,rt,Ie){var De=function(Ve){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:Ve,html:""}},Ee=function(Ve){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[De("0"),Fe.createSidebar(Ve)]}};return{render:function(Ve,Je,Ue){var tt,Kt,re,Ke=Ve.settings;return Ue.skinUiCss&&Ze.styleSheetLoader.load(Ue.skinUiCss,rt.fireSkinLoaded(Ve)),tt=Je.panel=be.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===Ke.menubar?null:{type:"menubar",border:"0 0 1 0",items:Dt.createMenuButtons(Ve)},St.createToolbars(Ve,Ke.toolbar_items_size),Fe.hasSidebar(Ve)?Ee(Ve):De("1 0 0 0")]}),!1!==Ke.resize&&(Kt={type:"resizehandle",direction:Ke.resize,onResizeStart:function(){var Tt=Ve.getContentAreaContainer().firstChild;re={width:Tt.clientWidth,height:Tt.clientHeight}},onResize:function(Tt){Ie.resizeTo(Ve,"both"===Ke.resize?re.width+Tt.deltaX:null,re.height+Tt.deltaY)}}),!1!==Ke.statusbar&&tt.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:Ve},Kt]}),Ve.fire("BeforeRenderUI"),Ve.on("SwitchMode",function(Ve){return function(Je){Ve.find("*").disabled("readonly"===Je.mode)}}(tt)),tt.renderBefore(Ue.targetNode).reflow(),Ke.readonly&&Ve.setMode("readonly"),Ke.width&&Ze.setStyle(tt.getEl(),"width",Ke.width),Ve.on("remove",function(){tt.remove(),tt=null}),Vt.addKeys(Ve,tt),Re.addContextualToolbars(Ve),{iframeContainer:tt.find("#iframe")[0].getEl(),editorContainer:tt.getEl()}}}}),$t("h",tinymce.ui.FloatPanel),Et("5",["8","9","a","h","b","c","d","e","g"],function(ht,be,Ze,St,Dt,Re,Vt,Fe,rt){return{render:function(fe,De,Ee){var ze,Ve,Je=fe.settings;Je.fixed_toolbar_container&&(Ve=Ze.select(Je.fixed_toolbar_container)[0]);var Ue=function(){if(ze&&ze.moveRel&&ze.visible()&&!ze._fixed){var Ke=fe.selection.getScrollContainer(),Tt=fe.getBody(),nt=0,gt=0;if(Ke){var ut=Ze.getPos(Tt),Lt=Ze.getPos(Ke);nt=Math.max(0,Lt.x-ut.x),gt=Math.max(0,Lt.y-ut.y)}ze.fixed(!1).moveRel(Tt,fe.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(nt,gt)}},tt=function(){ze&&(ze.show(),Ue(),Ze.addClass(fe.getBody(),"mce-edit-focus"))},Kt=function(){ze&&(ze.hide(),St.hideAll(),Ze.removeClass(fe.getBody(),"mce-edit-focus"))},re=function(){return ze?void(ze.visible()||tt()):(ze=De.panel=be.create({type:Ve?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!Ve,border:1,items:[!1===Je.menubar?null:{type:"menubar",border:"0 0 1 0",items:Re.createMenuButtons(fe)},Dt.createToolbars(fe,Je.toolbar_items_size)]}),fe.fire("BeforeRenderUI"),ze.renderTo(Ve||document.body).reflow(),Fe.addKeys(fe,ze),tt(),Vt.addContextualToolbars(fe),fe.on("nodeChange",Ue),fe.on("activate",tt),fe.on("deactivate",Kt),void fe.nodeChanged())};return Je.content_editable=!0,fe.on("focus",function(){Ee.skinUiCss?Ze.styleSheetLoader.load(Ee.skinUiCss,re,re):re()}),fe.on("blur hide",Kt),fe.on("remove",function(){ze&&(ze.remove(),ze=null)}),Ee.skinUiCss&&Ze.styleSheetLoader.load(Ee.skinUiCss,rt.fireSkinLoaded(fe)),{}}}}),$t("i",tinymce.ui.Throbber),Et("7",["i"],function(ht){return{setup:function(Ze,St){var Dt;Ze.on("ProgressState",function(Re){Dt=Dt||new ht(St.panel.getEl("body")),Re.state?Dt.show(Re.time):Dt.hide()})}}}),Et("0",["1","2","3","4","5","6","7"],function(ht,be,Ze,St,Dt,Re,Vt){return Ze.add("modern",function(rt){return{renderUI:function(Ie){return function(rt,Ie,fe){var De=rt.settings,Ee=!1!==De.skin&&(De.skin||"lightgray");if(Ee){var ze=De.skin_url;ze=ze?rt.documentBaseURI.toAbsolute(ze):be.baseURL+"/skins/"+Ee,fe.skinUiCss=ht.documentMode<=7?ze+"/skin.ie7.min.css":ze+"/skin.min.css",rt.contentCSS.push(ze+"/content"+(rt.inline?".inline":"")+".min.css")}return Vt.setup(rt,Ie),De.inline?Dt.render(rt,Ie,fe):St.render(rt,Ie,fe)}(rt,this,Ie)},resizeTo:function(Ie,fe){return Re.resizeTo(rt,Ie,fe)},resizeBy:function(Ie,fe){return Re.resizeBy(rt,Ie,fe)}}}),function(){}}),He("0")()}(),tinymce.PluginManager.add("link",function(Qt){function Dn(fe){return fe&&"A"===fe.nodeName&&fe.href}function _i(fe){return tinymce.util.Tools.grep(fe,Dn).length>0}function He(fe){return Qt.dom.getParent(fe,"a[href]")}function rr(){return He(Qt.selection.getStart())}function Ze(fe){if(fe){var De=function or(fe){return fe.getAttribute("data-mce-href")||fe.getAttribute("href")}(fe);if(/^#/.test(De)){var Ee=Qt.$(De);Ee.length&&Qt.selection.scrollIntoView(Ee[0],!0)}else!function be(fe){if(!tinymce.Env.ie||tinymce.Env.ie>10){var De=document.createElement("a");De.target="_blank",De.href=fe,De.rel="noreferrer noopener";var Ee=document.createEvent("MouseEvents");Ee.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function ht(fe,De){document.body.appendChild(fe),fe.dispatchEvent(De),document.body.removeChild(fe)}(De,Ee)}else{var ze=window.open("","_blank");if(ze){ze.opener=null;var Ve=ze.document;Ve.open(),Ve.write('<meta http-equiv="refresh" content="0; url='+tinymce.DOM.encode(fe)+'">'),Ve.close()}}}(fe.href)}}function St(){Ze(rr())}function Re(fe){return function(){var De=Qt.settings.link_list;"string"==typeof De?tinymce.util.XHR.send({url:De,success:function(Ee){fe(tinymce.util.JSON.parse(Ee))}}):"function"==typeof De?De(fe):fe(De)}}function Vt(fe,De,Ee){return function ze(Ve,Je){return Je=Je||[],tinymce.each(Ve,function(Ue){var tt={text:Ue.text||Ue.title};Ue.menu?tt.menu=ze(Ue.menu):(tt.value=Ue.value,De&&De(tt)),Je.push(tt)}),Je}(fe,Ee||[])}function Fe(fe){function De(lt){var Wt=Ke.find("#text");(!Wt.value()||lt.lastControl&&Wt.value()==lt.lastControl.text())&&Wt.value(lt.control.text()),Ke.find("#href").value(lt.control.value())}function ze(){!re&&0===Mt.text.length&&Tt&&this.parent().parent().find("#text")[0].value(this.value())}var tt,Kt,re,Ke,Tt,nt,gt,ut,Lt,Ye,gn,it,Mt={},on=Qt.selection,xn=Qt.dom;tt=on.getNode(),Kt=xn.getParent(tt,"a[href]"),Tt=function Je(lt){var Wt=on.getContent();if(/</.test(Wt)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(Wt)||-1==Wt.indexOf("href=")))return!1;if(lt){var an,_t=lt.childNodes;if(0===_t.length)return!1;for(an=_t.length-1;an>=0;an--)if(3!=_t[an].nodeType)return!1}return!0}(),Mt.text=re=Kt?Kt.innerText||Kt.textContent:on.getContent({format:"text"}),Mt.href=Kt?xn.getAttrib(Kt,"href"):"",Kt?Mt.target=xn.getAttrib(Kt,"target"):Qt.settings.default_link_target&&(Mt.target=Qt.settings.default_link_target),(it=xn.getAttrib(Kt,"rel"))&&(Mt.rel=it),(it=xn.getAttrib(Kt,"class"))&&(Mt.class=it),(it=xn.getAttrib(Kt,"title"))&&(Mt.title=it),Tt&&(nt={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){Mt.text=this.value()}}),fe&&(gt={type:"listbox",label:"Link list",values:Vt(fe,function(lt){lt.value=Qt.convertURL(lt.value||lt.url,"href")},[{text:"None",value:""}]),onselect:De,value:Qt.convertURL(Mt.href,"href"),onPostRender:function(){gt=this}}),!1!==Qt.settings.target_list&&(Qt.settings.target_list||(Qt.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),Lt={name:"target",type:"listbox",label:"Target",values:Vt(Qt.settings.target_list)}),Qt.settings.rel_list&&(ut={name:"rel",type:"listbox",label:"Rel",values:Vt(Qt.settings.rel_list)}),Qt.settings.link_class_list&&(Ye={name:"class",type:"listbox",label:"Class",values:Vt(Qt.settings.link_class_list,function(lt){lt.value&&(lt.textStyle=function(){return Qt.formatter.getCssText({inline:"a",classes:[lt.value]})})})}),!1!==Qt.settings.link_title&&(gn={name:"title",type:"textbox",label:"Title",value:Mt.title}),Ke=Qt.windowManager.open({title:"Insert link",data:Mt,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function Ve(lt){var Wt=lt.meta||{};gt&&gt.value(Qt.convertURL(this.value(),"href")),tinymce.each(lt.meta,function(an,_t){var pn=Ke.find("#"+_t);"text"===_t?0===re.length&&(pn.value(an),Mt.text=an):pn.value(an)}),Wt.attach&&(rt={href:this.value(),attach:Wt.attach}),Wt.text||ze.call(this)},onkeyup:ze,onbeforecall:function Ue(lt){lt.meta=Ke.toJSON()}},nt,gn,function Ee(lt){var Wt=[];if(tinymce.each(Qt.dom.select("a:not([href])"),function(an){var _t=an.name||an.id;_t&&Wt.push({text:_t,value:"#"+_t,selected:-1!=lt.indexOf("#"+_t)})}),Wt.length)return Wt.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:Wt,onselect:De}}(Mt.href),gt,ut,Lt,Ye],onSubmit:function(lt){function Wt(Tn,ei){var Un=Qt.selection.getRng();tinymce.util.Delay.setEditorTimeout(Qt,function(){Qt.windowManager.confirm(Tn,function($n){Qt.selection.setRng(Un),ei($n)})})}function _t(){var Tn={href:Mn,target:Mt.target?Mt.target:null,rel:Mt.rel?Mt.rel:null,class:Mt.class?Mt.class:null,title:Mt.title?Mt.title:null};Qt.settings.allow_unsafe_link_target||(Tn.rel=function an(Tn,ei){function $n(ri){var Ei=new RegExp("("+Bi.replace(" ","|")+")","g");return ri&&(ri=tinymce.trim(ri.replace(Ei,""))),ri||null}var Bi="noopener noreferrer";return ei?function Un(ri){return(ri=$n(ri))?[ri,Bi].join(" "):Bi}(Tn):$n(Tn)}(Tn.rel,"_blank"==Tn.target)),Mn===rt.href&&(rt.attach(),rt={}),Kt?(Qt.focus(),Tt&&Mt.text!=re&&("innerText"in Kt?Kt.innerText=Mt.text:Kt.textContent=Mt.text),xn.setAttribs(Kt,Tn),on.select(Kt),Qt.undoManager.add()):Tt?Qt.insertContent(xn.createHTML("a",Tn,xn.encode(Mt.text))):Qt.execCommand("mceInsertLink",!1,Tn)}function pn(){Qt.undoManager.transact(_t)}var Mn;return Mt=tinymce.extend(Mt,lt.data),(Mn=Mt.href)?Mn.indexOf("@")>0&&-1==Mn.indexOf("//")&&-1==Mn.indexOf("mailto:")?void Wt("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(Tn){Tn&&(Mn="mailto:"+Mn),pn()}):Qt.settings.link_assume_external_targets&&!/^\w+:/i.test(Mn)||!Qt.settings.link_assume_external_targets&&/^\s*www[\.|\d\.]/i.test(Mn)?void Wt("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(Tn){Tn&&(Mn="http://"+Mn),pn()}):void pn():void Qt.execCommand("unlink")}})}var rt={};Qt.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:Re(Fe),stateSelector:"a[href]"}),Qt.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),Qt.addContextToolbar&&(Qt.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:St}),Qt.addContextToolbar(function $t(fe){var De,Ee,ze;return!!(Qt.settings.link_context_toolbar&&!function Et(){var fe=Qt.plugins.contextmenu;return!!fe&&fe.isContextMenuVisible()}()&&Dn(fe)&&(De=Qt.selection,Ee=De.getRng(),ze=Ee.startContainer,3==ze.nodeType&&De.isCollapsed()&&Ee.startOffset>0&&Ee.startOffset<ze.data.length))},"openlink | link unlink")),Qt.addShortcut("Meta+K","",Re(Fe)),Qt.addCommand("mceLink",Re(Fe)),Qt.on("click",function(fe){var De=He(fe.target);De&&tinymce.util.VK.metaKeyPressed(fe)&&(fe.preventDefault(),Ze(De))}),Qt.on("keydown",function(fe){var De=rr();De&&13===fe.keyCode&&function(fe){return!0===fe.altKey&&!1===fe.shiftKey&&!1===fe.ctrlKey&&!1===fe.metaKey}(fe)&&(fe.preventDefault(),Ze(De))}),this.showDialog=Fe,Qt.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:St,onPostRender:function Dt(){var fe=this,De=function(Ee){_i(Ee.parents)?fe.show():fe.hide()};_i(Qt.dom.getParents(Qt.selection.getStart()))||fe.hide(),Qt.on("nodechange",De),fe.on("remove",function(){Qt.off("nodechange",De)})},prependToContext:!0}),Qt.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:Re(Fe),stateSelector:"a[href]",context:"insert",prependToContext:!0})}),function(Qt,Dn){"use strict";function He($t,ht,be){if("string"!=typeof $t)throw"invalid module definition, module id must be defined and be a string";if(ht===Dn)throw"invalid module definition, dependencies must be specified";if(be===Dn)throw"invalid module definition, definition function must be specified";!function _i($t,ht){for(var be,Ze=[],St=0;St<$t.length;++St){if(!(be=Et[$t[St]]||rr($t[St])))throw"module definition dependecy not found: "+$t[St];Ze.push(be)}ht.apply(null,Ze)}(ht,function(){Et[$t]=be.apply(null,arguments)})}function rr($t){for(var ht=Qt,be=$t.split(/[.\/]/),Ze=0;Ze<be.length;++Ze){if(!ht[be[Ze]])return;ht=ht[be[Ze]]}return ht}var Et={};He("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function($t,ht,be){function Ze(Fe,rt){return $t.each(rt,function(Ie){Fe=Ie.constructor==RegExp?Fe.replace(Ie,""):Fe.replace(Ie[0],Ie[1])}),Fe}return{filter:Ze,innerText:function St(Fe){var Ie=new be,fe=new ht({},Ie),De="",Ee=Ie.getShortEndedElements(),ze=$t.makeMap("script noscript style textarea video audio iframe object"," "),Ve=Ie.getBlockElements();return Fe=Ze(Fe,[/<!\[[^\]]+\]>/g]),function rt(Je){var Ue=Je.name,tt=Je;if("br"!==Ue)if(Ee[Ue]&&(De+=" "),ze[Ue])De+=" ";else{if(3==Je.type&&(De+=Je.value),!Je.shortEnded&&(Je=Je.firstChild))do{rt(Je)}while(Je=Je.next);Ve[Ue]&&tt.next&&(De+="\n","p"==Ue&&(De+="\n"))}else De+="\n"}(fe.parse(Fe)),De},trimHtml:function Dt(Fe){return Ze(function(Fe){var rt="\x3c!--StartFragment--\x3e",Ie="\x3c!--EndFragment--\x3e",fe=Fe.indexOf(rt);if(-1!==fe){var De=Fe.substr(fe+rt.length),Ee=De.indexOf(Ie);if(-1!==Ee&&/^<\/(p|h[1-6]|li)>/i.test(De.substr(Ee+Ie.length,5)))return De.substr(0,Ee)}return Fe}(Fe),[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function rt(Ie,fe,De){return fe||De?"\xa0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function Re(Fe){var rt=0;return function(){return Fe+rt++}}}}),He("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function($t){var ht=function(Ie){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(Ie)},be=function(Ie){return ht(Ie)&&/.(gif|jpe?g|png)$/.test(Ie)},Dt=function(Ie,fe,De){return!(!1!==Ie.selection.isCollapsed()||!ht(fe))&&function(Ie,fe,De){return Ie.undoManager.extra(function(){De(Ie,fe)},function(){Ie.execCommand("mceInsertLink",!1,fe)}),!0}(Ie,fe,De)},Re=function(Ie,fe,De){return!!be(fe)&&function(Ie,fe,De){return Ie.undoManager.extra(function(){De(Ie,fe)},function(){Ie.insertContent('<img src="'+fe+'">')}),!0}(Ie,fe,De)},Vt=function(Ie,fe){return Ie.insertContent(fe,{merge:!1!==Ie.settings.paste_merge_formats,paste:!0}),!0};return{isImageUrl:be,isAbsoluteUrl:ht,insertContent:function(Ie,fe){!1===Ie.settings.smart_paste?Vt(Ie,fe):function(Ie,fe){$t.each([Dt,Re,Vt],function(De){return!0!==De(Ie,fe,Vt)})}(Ie,fe)}}}),He("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function($t,ht,be,Ze,St,Dt){return function(Re){function Vt(lt){var Wt,an=Re.dom;if(Wt=Re.fire("BeforePastePreProcess",{content:lt}),lt=(Wt=Re.fire("PastePreProcess",Wt)).content,!Wt.isDefaultPrevented()){if(Re.hasEventListeners("PastePostProcess")&&!Wt.isDefaultPrevented()){var _t=an.add(Re.getBody(),"div",{style:"display:none"},lt);Wt=Re.fire("PastePostProcess",{node:_t}),an.remove(_t),lt=Wt.node.innerHTML}Wt.isDefaultPrevented()||St.insertContent(Re,lt)}}function Fe(lt){lt=Re.dom.encode(lt).replace(/\r\n/g,"\n");var Wt,an=Re.dom.getParent(Re.selection.getStart(),Re.dom.isBlock),_t=Re.settings.forced_root_block;_t&&(Wt=(Wt=Re.dom.createHTML(_t,Re.settings.forced_root_block_attrs)).substr(0,Wt.length-3)+">"),an&&/^(PRE|DIV)$/.test(an.nodeName)||!_t?lt=Ze.filter(lt,[[/\n/g,"<br>"]]):-1!=(lt=Ze.filter(lt,[[/\n\n/g,"</p>"+Wt],[/^(.*<\/p>)(<p>)$/,Wt+"$1"],[/\n/g,"<br />"]])).indexOf("<p>")&&(lt=Wt+lt),Vt(lt)}function rt(){var Wt,an=Re.dom,_t=Re.getBody(),Mn=Re.dom.getViewPort(Re.getWin()).y,Tn=20;if(ut=Re.selection.getRng(),Re.inline&&(Wt=Re.selection.getScrollContainer())&&Wt.scrollTop>0&&(Mn=Wt.scrollTop),ut.getClientRects){var ei=function lt($n){var Bi,ri,Ei,Ct=$n.startContainer;if((Bi=$n.getClientRects()).length)return Bi[0];if($n.collapsed&&1==Ct.nodeType){for(Ei=Ct.childNodes[ut.startOffset];Ei&&3==Ei.nodeType&&!Ei.data.length;)Ei=Ei.nextSibling;if(Ei)return"BR"==Ei.tagName&&(ri=an.doc.createTextNode("\ufeff"),Ei.parentNode.insertBefore(ri,Ei),($n=an.createRng()).setStartBefore(ri),$n.setEndAfter(ri),Bi=$n.getClientRects(),an.remove(ri)),Bi.length?Bi[0]:void 0}}(ut);if(ei)Tn=Mn+(ei.top-an.getPos(_t).y);else{Tn=Mn;var Un=ut.startContainer;Un&&(3==Un.nodeType&&Un.parentNode!=_t&&(Un=Un.parentNode),1==Un.nodeType&&(Tn=an.getPos(Un,Wt||_t).y))}}gt=an.add(Re.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+Tn+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},Mt),($t.ie||$t.gecko)&&an.setStyle(gt,"left","rtl"==an.getStyle(_t,"direction",!0)?65535:-65535),an.bind(gt,"beforedeactivate focusin focusout",function($n){$n.stopPropagation()}),gt.focus(),Re.selection.select(gt,!0)}function Ie(){if(gt){for(var lt;lt=Re.dom.get("mcepastebin");)Re.dom.remove(lt),Re.dom.unbind(lt);ut&&Re.selection.setRng(ut)}gt=ut=null}function fe(){var lt,Wt,an,pn="";for(lt=Re.dom.select("div[id=mcepastebin]"),Wt=0;Wt<lt.length;Wt++)(an=lt[Wt]).firstChild&&"mcepastebin"==an.firstChild.id&&(an=an.firstChild),pn!=Mt&&(pn+=an.innerHTML);return pn}function De(lt){var Wt={};if(lt){if(lt.getData){var an=lt.getData("Text");an&&an.length>0&&-1==an.indexOf(on)&&(Wt["text/plain"]=an)}if(lt.types)for(var _t=0;_t<lt.types.length;_t++){var pn=lt.types[_t];Wt[pn]=lt.getData(pn)}}return Wt}function ze(lt){return Ke(lt,"text/html")||Ke(lt,"text/plain")}function Ue(lt,Wt,an){lt&&(Re.selection.setRng(lt),lt=null);var _t=Wt.result,pn=function Ve(lt){var Wt;return-1!==(Wt=lt.indexOf(","))?lt.substr(Wt+1):null}(_t),Mn=new Image;if(Mn.src=_t,function Je(lt,Wt){return!lt.images_dataimg_filter||lt.images_dataimg_filter(Wt)}(Re.settings,Mn)){var Tn,ei,Un=Re.editorUpload.blobCache;(ei=Un.findFirst(function($n){return $n.base64()===pn}))?Tn=ei:(Tn=Un.create(xn(),an,pn),Un.add(Tn)),Vt('<img src="'+Tn.blobUri()+'">')}else Vt('<img src="'+_t+'">')}function tt(lt,Wt){function an(pn){var Mn,Tn,ei,Un=!1;if(pn)for(Mn=0;Mn<pn.length;Mn++)if(/^image\/(jpeg|png|gif|bmp)$/.test((Tn=pn[Mn]).type)){var $n=Tn.getAsFile?Tn.getAsFile():Tn;(ei=new FileReader).onload=Ue.bind(null,Wt,ei,$n),ei.readAsDataURL($n),lt.preventDefault(),Un=!0}return Un}var _t=lt.clipboardData||lt.dataTransfer;if(Re.settings.paste_data_images&&_t)return an(_t.items)||an(_t.files)}function Ke(lt,Wt){return Wt in lt&&lt[Wt].length>0}function Tt(lt){return be.metaKeyPressed(lt)&&86==lt.keyCode||lt.shiftKey&&45==lt.keyCode}var gt,ut,Lt,Ye=this,gn=0,it=!1,Mt="%MCEPASTEBIN%",on="data:text/mce-internal,",xn=Ze.createIdGenerator("mceclip");Ye.pasteHtml=Vt,Ye.pasteText=Fe,Ye.pasteImageData=tt,Re.on("preInit",function(){(function nt(){function lt(_t,pn,Mn){var Tn;return Ke(_t,"text/html")?Tn=_t["text/html"]:(Tn=fe())==Mt&&(Mn=!0),Tn=Ze.trimHtml(Tn),gt&&gt.firstChild&&"mcepastebin"===gt.firstChild.id&&(Mn=!0),Ie(),Tn.length||(Mn=!0),Mn&&(Tn=Ke(_t,"text/plain")&&-1==Tn.indexOf("</p>")?_t["text/plain"]:Ze.innerText(Tn)),Tn==Mt?void(pn||Re.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(Mn?Fe(Tn):Vt(Tn))}Re.on("keydown",function(_t){function pn(Mn){Tt(Mn)&&!Mn.isDefaultPrevented()&&Ie()}if(Tt(_t)&&!_t.isDefaultPrevented()){if((Lt=_t.shiftKey&&86==_t.keyCode)&&$t.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(_t.stopImmediatePropagation(),gn=(new Date).getTime(),$t.ie&&Lt)return _t.preventDefault(),void Re.fire("paste",{ieFake:!0});Ie(),rt(),Re.once("keyup",pn),Re.once("paste",function(){Re.off("keyup",pn)})}}),Re.on("paste",function(_t){var pn=(new Date).getTime(),Mn=function Ee(lt){return De(lt.clipboardData||Re.getDoc().dataTransfer)}(_t),Tn=(new Date).getTime()-pn,ei=(new Date).getTime()-gn-Tn<1e3,Un="text"==Ye.pasteFormat||Lt;return Lt=!1,_t.isDefaultPrevented()||function Kt(lt){var Wt=lt.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&Wt&&Wt.items&&0===Wt.items.length}(_t)||!ze(Mn)&&tt(_t,ut||Re.selection.getRng())?void Ie():(ei||_t.preventDefault(),!$t.ie||ei&&!_t.ieFake||(rt(),Re.dom.bind(gt,"paste",function($n){$n.stopPropagation()}),Re.getDoc().execCommand("Paste",!1,null),Mn["text/html"]=fe()),void(Ke(Mn,"text/html")?(_t.preventDefault(),lt(Mn,ei,Un)):Dt.setEditorTimeout(Re,function(){lt(Mn,ei,Un)},0)))}),Re.on("dragstart dragend",function(_t){it="dragstart"==_t.type}),Re.on("drop",function(_t){var pn,Mn;if(Mn=function re(lt){return ht.getCaretRangeFromPoint(lt.clientX,lt.clientY,Re.getDoc())}(_t),!_t.isDefaultPrevented()&&!it&&(ze(pn=De(_t.dataTransfer))&&!function Wt(_t){var pn=_t["text/plain"];return!!pn&&0===pn.indexOf("file://")}(pn)||!tt(_t,Mn))&&Mn&&!1!==Re.settings.paste_filter_drop){var Tn=pn["mce-internal"]||pn["text/html"]||pn["text/plain"];Tn&&(_t.preventDefault(),Dt.setEditorTimeout(Re,function(){Re.undoManager.transact(function(){pn["mce-internal"]&&Re.execCommand("Delete"),Re.selection.setRng(Mn),Tn=Ze.trimHtml(Tn),pn["text/html"]?Vt(Tn):Fe(Tn)})}))}}),Re.on("dragover dragend",function(_t){Re.settings.paste_data_images&&_t.preventDefault()})})(),Re.parser.addNodeFilter("img",function(lt,Wt,an){function pn($n){$n.attr("data-mce-object")||Un===$t.transparentSrc||$n.remove()}if(!Re.settings.paste_data_images&&function _t($n){return $n.data&&!0===$n.data.paste}(an))for(var ei=lt.length;ei--;){var Un=lt[ei].attributes.map.src;Un&&(0===Un.indexOf("webkit-fake-url")||!Re.settings.allow_html_data_urls&&0===Un.indexOf("data:"))&&pn(lt[ei])}})})}}),He("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function($t,ht,be,Ze,St,Dt){function Re(Ie){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(Ie)||/class="OutlineElement/.test(Ie)||/id="?docs\-internal\-guid\-/.test(Ie)}function Vt(Ie){var fe,De;return De=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],Ie=Ie.replace(/^[\u00a0 ]+/,""),$t.each(De,function(Ee){if(Ee.test(Ie))return fe=!0,!1}),fe}function Fe(Ie){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(Ie)}function rt(Ie){var fe=Ie.settings;Ie.on("BeforePastePreProcess",function(De){function ze(Tt,nt){var gt,ut={},Lt=Ie.dom.parseStyle(nt);return $t.each(Lt,function(Ye,gn){switch(gn){case"mso-list":(gt=/\w+ \w+([0-9]+)/i.exec(nt))&&(Tt._listLevel=parseInt(gt[1],10)),/Ignore/i.test(Ye)&&Tt.firstChild&&(Tt._listIgnore=!0,Tt.firstChild._listIgnore=!0);break;case"horiz-align":gn="text-align";break;case"vert-align":gn="vertical-align";break;case"font-color":case"mso-foreground":gn="color";break;case"mso-background":case"mso-highlight":gn="background";break;case"font-weight":case"font-style":return void("normal"!=Ye&&(ut[gn]=Ye));case"mso-element":if(/^(comment|comment-list)$/i.test(Ye))return void Tt.remove()}return 0===gn.indexOf("mso-comment")?void Tt.remove():void(0!==gn.indexOf("mso-")&&("all"==Ve||Je&&Je[gn])&&(ut[gn]=Ye))}),/(bold)/i.test(ut["font-weight"])&&(delete ut["font-weight"],Tt.wrap(new St("b",1))),/(italic)/i.test(ut["font-style"])&&(delete ut["font-style"],Tt.wrap(new St("i",1))),(ut=Ie.dom.serializeStyle(ut,Tt.name))||null}var Ve,Je,Ue=De.content;if(Ue=(Ue=Ue.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"")).replace(/<br class="?Apple-interchange-newline"?>/gi,""),(Ve=fe.paste_retain_style_properties)&&(Je=$t.makeMap(Ve.split(/[, ]/))),!1!==fe.paste_enable_default_filters&&Re(De.content)){De.wordContent=!0,Ue=Dt.filter(Ue,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(Tt,nt){return nt.length>0?nt.replace(/./," ").slice(Math.floor(nt.length/2)).split("").join("\xa0"):""}]]);var tt=fe.paste_word_valid_elements;tt||(tt="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var Kt=new be({valid_elements:tt,valid_children:"-li[p]"});$t.each(Kt.elements,function(Tt){Tt.attributes.class||(Tt.attributes.class={},Tt.attributesOrder.push("class")),Tt.attributes.style||(Tt.attributes.style={},Tt.attributesOrder.push("style"))});var re=new ht({},Kt);re.addAttributeFilter("style",function(Tt){for(var nt,gt=Tt.length;gt--;)(nt=Tt[gt]).attr("style",ze(nt,nt.attr("style"))),"span"==nt.name&&nt.parent&&!nt.attributes.length&&nt.unwrap()}),re.addAttributeFilter("class",function(Tt){for(var nt,gt,ut=Tt.length;ut--;)gt=(nt=Tt[ut]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(gt)&&nt.remove(),nt.attr("class",null)}),re.addNodeFilter("del",function(Tt){for(var nt=Tt.length;nt--;)Tt[nt].remove()}),re.addNodeFilter("a",function(Tt){for(var nt,gt,ut,Lt=Tt.length;Lt--;)if(gt=(nt=Tt[Lt]).attr("href"),ut=nt.attr("name"),gt&&-1!=gt.indexOf("#_msocom_"))nt.remove();else if(gt&&0===gt.indexOf("file://")&&(gt=gt.split("#")[1])&&(gt="#"+gt),gt||ut){if(ut&&!/^_?(?:toc|edn|ftn)/i.test(ut)){nt.unwrap();continue}nt.attr({href:gt,name:ut})}else nt.unwrap()});var Ke=re.parse(Ue);!1!==fe.paste_convert_word_fake_lists&&function Ee(Tt){function nt(_t){var pn="";if(3===_t.type)return _t.value;if(_t=_t.firstChild)do{pn+=nt(_t)}while(_t=_t.next);return pn}function gt(_t,pn){if(3===_t.type&&pn.test(_t.value))return _t.value=_t.value.replace(pn,""),!1;if(_t=_t.firstChild)do{if(!gt(_t,pn))return!1}while(_t=_t.next);return!0}function ut(_t){if(_t._listIgnore)_t.remove();else if(_t=_t.firstChild)do{ut(_t)}while(_t=_t.next)}function Lt(_t,pn,Mn){var Tn=_t._listLevel||it;Tn!=it&&(Tn<it?Ye&&(Ye=Ye.parent.parent):(gn=Ye,Ye=null)),Ye&&Ye.name==pn?Ye.append(_t):(gn=gn||Ye,Ye=new St(pn,1),Mn>1&&Ye.attr("start",""+Mn),_t.wrap(Ye)),_t.name="li",Tn>it&&gn&&gn.lastChild.append(Ye),it=Tn,ut(_t),gt(_t,/^\u00a0+/),gt(_t,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),gt(_t,/^\u00a0+/)}for(var Ye,gn,it=1,Mt=[],on=Tt.firstChild;typeof on<"u"&&null!==on;)if(Mt.push(on),null!==(on=on.walk()))for(;typeof on<"u"&&on.parent!==Tt;)on=on.walk();for(var xn=0;xn<Mt.length;xn++)if("p"==(Tt=Mt[xn]).name&&Tt.firstChild){var lt=nt(Tt);if(Fe(lt)){Lt(Tt,"ul");continue}if(Vt(lt)){var Wt=/([0-9]+)\./.exec(lt),an=1;Wt&&(an=parseInt(Wt[1],10)),Lt(Tt,"ol",an);continue}if(Tt._listLevel){Lt(Tt,"ul",1);continue}Ye=null}else gn=Ye,Ye=null}(Ke),De.content=new Ze({validate:fe.validate},Kt).serialize(Ke)}})}return rt.isWordContent=Re,rt}),He("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function($t,ht,be,Ze){return function(St){function Dt(Ie){St.on("BeforePastePreProcess",function(fe){fe.content=Ie(fe.content)})}$t.webkit&&Dt(function Fe(Ie){if(be.isWordContent(Ie))return Ie;var fe=St.settings.paste_webkit_styles;if(!1===St.settings.paste_remove_styles_if_webkit||"all"==fe)return Ie;if(fe&&(fe=fe.split(/[, ]/)),fe){var De=St.dom,Ee=St.selection.getNode();Ie=Ie.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(ze,Ve,Je,Ue){var tt=De.parseStyle(Je,"span"),Kt={};if("none"===fe)return Ve+Ue;for(var re=0;re<fe.length;re++){var Ke=tt[fe[re]],Tt=De.getStyle(Ee,fe[re],!0);/color/.test(fe[re])&&(Ke=De.toHex(Ke),Tt=De.toHex(Tt)),Tt!=Ke&&(Kt[fe[re]]=Ke)}return(Kt=De.serializeStyle(Kt,"span"))?Ve+' style="'+Kt+'"'+Ue:Ve+Ue})}else Ie=Ie.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return Ie.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(ze,Ve,Je,Ue){return Ve+' style="'+Je+'"'+Ue})}),$t.ie&&(Dt(function Vt(Ie){if(!be.isWordContent(Ie))return Ie;var fe=[];ht.each(St.schema.getBlockElements(),function(Ee,ze){fe.push(ze)});var De=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+fe.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return Ie=Ze.filter(Ie,[[De,"$1"]]),Ze.filter(Ie,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}),function Re(Ie){St.on("PastePostProcess",function(fe){Ie(fe.node)})}(function rt(Ie){St.$("a",Ie).find("font,u").each(function(fe,De){St.dom.remove(De,!0)})}))}}),He("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function($t,ht,be,Ze){var St;$t.add("paste",function(Dt){function Vt(){if("text"==rt.pasteFormat)rt.pasteFormat="html",Dt.fire("PastePlainTextToggle",{state:!1});else if(rt.pasteFormat="text",Dt.fire("PastePlainTextToggle",{state:!0}),!function Re(){return St||!1===Dt.settings.paste_plaintext_inform}()){var De=Dt.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");Dt.notificationManager.open({text:De,type:"info"}),St=!0}Dt.focus()}function Fe(){var De=this;De.active("text"===rt.pasteFormat),Dt.on("PastePlainTextToggle",function(Ee){De.active(Ee.state)})}var rt,Ie=this,fe=Dt.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(fe.plugins)&&$t.get("powerpaste")?void(typeof console<"u"&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(Ie.clipboard=rt=new ht(Dt),Ie.quirks=new Ze(Dt),Ie.wordFilter=new be(Dt),Dt.settings.paste_as_text&&(Ie.clipboard.pasteFormat="text"),fe.paste_preprocess&&Dt.on("PastePreProcess",function(De){fe.paste_preprocess.call(Ie,Ie,De)}),fe.paste_postprocess&&Dt.on("PastePostProcess",function(De){fe.paste_postprocess.call(Ie,Ie,De)}),Dt.addCommand("mceInsertClipboardContent",function(De,Ee){Ee.content&&Ie.clipboard.pasteHtml(Ee.content),Ee.text&&Ie.clipboard.pasteText(Ee.text)}),Dt.settings.paste_block_drop&&Dt.on("dragend dragover draggesture dragdrop drop drag",function(De){De.preventDefault(),De.stopPropagation()}),Dt.settings.paste_data_images||Dt.on("drop",function(De){var Ee=De.dataTransfer;Ee&&Ee.files&&Ee.files.length>0&&De.preventDefault()}),Dt.addCommand("mceTogglePlainTextPaste",Vt),Dt.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:Vt,onPostRender:Fe}),void Dt.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:rt.pasteFormat,onclick:Vt,onPostRender:Fe}))})}),function or($t){var ht,be,Ze,St,Dt;for(ht=0;ht<$t.length;ht++){be=Qt,St=(Ze=$t[ht]).split(/[.\/]/);for(var Re=0;Re<St.length-1;++Re)be[St[Re]]===Dn&&(be[St[Re]]={}),be=be[St[Re]];be[St[St.length-1]]=Et[Ze]}if(Qt.AMDLC_TESTS){for(Ze in Dt=Qt.privateModules||{},Et)Dt[Ze]=Et[Ze];for(ht=0;ht<$t.length;ht++)delete Dt[$t[ht]];Qt.privateModules=Dt}}(["tinymce/pasteplugin/Utils"])}(window),function(Qt,Dn){"use strict";function He(Et,$t,ht){if("string"!=typeof Et)throw"invalid module definition, module id must be defined and be a string";if($t===Dn)throw"invalid module definition, dependencies must be specified";if(ht===Dn)throw"invalid module definition, definition function must be specified";!function _i(Et,$t){for(var ht,be=[],Ze=0;Ze<Et.length;++Ze){if(!(ht=or[Et[Ze]]||rr(Et[Ze])))throw"module definition dependecy not found: "+Et[Ze];be.push(ht)}$t.apply(null,be)}($t,function(){or[Et]=ht.apply(null,arguments)})}function rr(Et){for(var $t=Qt,ht=Et.split(/[.\/]/),be=0;be<ht.length;++be){if(!$t[ht[be]])return;$t=$t[ht[be]]}return $t}var or={};He("tinymce/tableplugin/Utils",["tinymce/Env"],function(Et){var ht=function(Ze){return function(St,Dt){St&&(1===(Dt=parseInt(Dt,10))||0===Dt?St.removeAttribute(Ze,1):St.setAttribute(Ze,Dt,1))}},be=function(Ze){return function(St){return parseInt(St.getAttribute(Ze)||1,10)}};return{setColSpan:ht("colSpan"),setRowSpan:ht("rowspan"),getColSpan:be("colSpan"),getRowSpan:be("rowSpan"),setSpanVal:function(Ze,St,Dt){ht(St)(Ze,Dt)},getSpanVal:function(Ze,St){return be(St)(Ze)},paddCell:function $t(Ze){(!Et.ie||Et.ie>9)&&(Ze.hasChildNodes()||(Ze.innerHTML='<br data-mce-bogus="1" />'))}}}),He("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(Et,$t){var ht=function(fe,De,Ee){return fe[Ee]?fe[Ee][De]:null},be=function(fe,De,Ee){var ze=ht(fe,De,Ee);return ze?ze.elm:null},Ze=function(fe,De,Ee,ze){var Ve,Ue=0,tt=be(fe,De,Ee);for(Ve=Ee;(ze>0?Ve<fe.length:Ve>=0)&&tt===ht(fe,De,Ve).elm;Ve+=ze)Ue++;return Ue},St=function(fe,De,Ee){for(var ze,Ve=fe[Ee],Je=De;Je<Ve.length;Je++)if((ze=Ve[Je]).real)return ze.elm;return null},Re=function(fe,De){var ze=fe.elm.ownerDocument.createElement("td");return $t.setColSpan(ze,$t.getColSpan(fe.elm)),$t.setRowSpan(ze,De),$t.paddCell(ze),ze},Vt=function(fe,De,Ee,ze){var Ve=St(fe,Ee+1,ze);Ve?Ve.parentNode.insertBefore(De,Ve):(Ve=St(fe,0,ze)).parentNode.appendChild(De)};return{splitAt:function(fe,De,Ee,ze){var Ve=function(fe,De){for(var Ee,ze=[],Ve=fe[De],Je=0;Je<Ve.length;Je++)ze.push({elm:(Ee=Ve[Je]).elm,above:Ze(fe,Je,De,-1)-1,below:Ze(fe,Je,De,1)-1}),Je+=$t.getColSpan(Ee.elm)-1;return ze}(fe,Ee),Je=be(fe,De,Ee).parentNode,Ue=[];return Et.each(Ve,function(tt,Kt){var re=ze?function(fe,De,Ee,ze){if(0!==De.above){$t.setRowSpan(De.elm,De.above);var Ve=Re(De,De.below+1);return Vt(fe,Ve,Ee,ze),Ve}return null}(fe,tt,Kt,Ee):function(fe,De,Ee,ze){if(0!==De.below){$t.setRowSpan(De.elm,De.above+1);var Ve=Re(De,De.below);return Vt(fe,Ve,Ee,ze+1),Ve}return null}(fe,tt,Kt,Ee);null!==re&&Ue.push(Ue)}),{cells:Ue,row:Je}}}}),He("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(Et,$t,ht,be){var Ze=Et.each,St=ht.getSpanVal,Dt=ht.setSpanVal;return function(Re,Vt,Fe){function rt(){Re.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function Ie(It){return It===Re.getBody()}function fe(It,qt){return It?(qt=Et.map(qt.split(","),function(ln){return ln.toLowerCase()}),Et.grep(It.childNodes,function(ln){return-1!==Et.inArray(qt,ln.nodeName.toLowerCase())})):[]}function De(){var It=0;Gt=[],hn=0,Ze(["thead","tbody","tfoot"],function(qt){var ln=fe(Vt,qt)[0],Cn=fe(ln,"tr");Ze(Cn,function(cn,nn){nn+=It,Ze(fe(cn,"td,th"),function(bn,Nn){var Bn,Gn,ui,Li;if(Gt[nn])for(;Gt[nn][Nn];)Nn++;for(ui=St(bn,"rowspan"),Li=St(bn,"colspan"),Gn=nn;Gn<nn+ui;Gn++)for(Gt[Gn]||(Gt[Gn]=[]),Bn=Nn;Bn<Nn+Li;Bn++)Gt[Gn][Bn]={part:qt,real:Gn==nn&&Bn==Nn,elm:bn,rowspan:ui,colspan:Li};hn=Math.max(hn,Nn+1)})}),It+=Cn.length})}function Ee(It){return Re.fire("newrow",{node:It}),It}function ze(It){return Re.fire("newcell",{node:It}),It}function Ve(It,qt){return(It=It.cloneNode(qt)).removeAttribute("id"),It}function Je(It,qt){var ln;if(ln=Gt[qt])return ln[It]}function Ue(It,qt){return It[qt]?It[qt]:null}function tt(It,qt){for(var ln=[],Cn=0;Cn<It.length;Cn++)ln.push(Je(qt,Cn));return ln}function Kt(It){return It&&(!!zn.getAttrib(It.elm,"data-mce-selected")||It==Fe)}function re(){var It=[];return Ze(Vt.rows,function(qt){Ze(qt.cells,function(ln){if(zn.getAttrib(ln,"data-mce-selected")||Fe&&ln==Fe.elm)return It.push(qt),!1})}),It}function nt(It){var qt,ln={};return!1!==Re.settings.table_clone_elements&&(ln=Et.makeMap((Re.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),Et.walk(It,function(Cn){var cn;if(3==Cn.nodeType)return Ze(zn.getParents(Cn.parentNode,null,It).reverse(),function(nn){ln[nn.nodeName]&&(nn=Ve(nn,!1),qt?cn&&cn.appendChild(nn):qt=cn=nn,cn=nn)}),cn&&(cn.innerHTML=$t.ie&&$t.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),ze(It=Ve(It,!1)),Dt(It,"rowSpan",1),Dt(It,"colSpan",1),qt?It.appendChild(qt):ht.paddCell(It),It}function gt(){var It,qt=zn.createRng();return Ze(zn.select("tr",Vt),function(ln){0===ln.cells.length&&zn.remove(ln)}),0===zn.select("tr",Vt).length?(qt.setStartBefore(Vt),qt.setEndBefore(Vt),ai.setRng(qt),void zn.remove(Vt)):(Ze(zn.select("thead,tbody,tfoot",Vt),function(ln){0===ln.rows.length&&zn.remove(ln)}),De(),void(wn&&(It=Gt[Math.min(Gt.length-1,wn.y)],It&&(ai.select(It[Math.min(It.length-1,wn.x)].elm,!0),ai.collapse(!0)))))}function ut(It,qt,ln,Cn){var cn,nn,bn,Nn,Bn;for(cn=Gt[qt][It].elm.parentNode,bn=1;bn<=ln;bn++)if(cn=zn.getNext(cn,"tr")){for(nn=It;nn>=0;nn--)if((Bn=Gt[qt+bn][nn].elm).parentNode==cn){for(Nn=1;Nn<=Cn;Nn++)zn.insertAfter(nt(Bn),Bn);break}if(-1==nn)for(Nn=1;Nn<=Cn;Nn++)cn.insertBefore(nt(cn.cells[0]),cn.cells[0])}}function Lt(){Ze(Gt,function(It,qt){Ze(It,function(ln,Cn){var cn,nn,bn;if(Kt(ln)&&(cn=St(ln=ln.elm,"colspan"),nn=St(ln,"rowspan"),cn>1||nn>1)){for(Dt(ln,"rowSpan",1),Dt(ln,"colSpan",1),bn=0;bn<cn-1;bn++)zn.insertAfter(nt(ln),ln);ut(Cn,qt,nn-1,cn)}})})}function Ye(It,qt,ln){for(var Cn=[],cn=0;cn<It.length;cn++)(cn<qt||cn>ln)&&Cn.push(It[cn]);return Cn}function gn(It){return Et.grep(It,function(qt){return!1===qt.real})}function it(It){for(var qt=[],ln=0;ln<It.length;ln++){var Cn=It[ln].elm;qt[qt.length-1]!==Cn&&qt.push(Cn)}return qt}function lt(It){var qt,ln,Cn,cn,nn,bn,Nn,Bn,Gn,ui;if(Ze(Gt,function(Li,ji){if(Ze(Li,function(ti){if(Kt(ti)&&(bn=Ee(Ve(nn=(ti=ti.elm).parentNode,!1)),qt=ji,It))return!1}),It)return qt===Dn}),qt!==Dn){for(cn=0,ui=0;cn<Gt[0].length;cn+=ui)if(Gt[qt][cn]&&(ui=St(ln=Gt[qt][cn].elm,"colspan"),ln!=Cn)){if(It){if(qt>0&&Gt[qt-1][cn]&&(Gn=St(Bn=Gt[qt-1][cn].elm,"rowSpan"))>1){Dt(Bn,"rowSpan",Gn+1);continue}}else if((Gn=St(ln,"rowspan"))>1){Dt(ln,"rowSpan",Gn+1);continue}Nn=nt(ln),Dt(Nn,"colSpan",ln.colSpan),bn.appendChild(Nn),Cn=ln}bn.hasChildNodes()&&(It?nn.parentNode.insertBefore(bn,nn):zn.insertAfter(bn,nn))}}function an(It){var qt,ln;Ze(Gt,function(Cn){if(Ze(Cn,function(cn,nn){if(Kt(cn)&&(qt=nn,It))return!1}),It)return qt===Dn}),Ze(Gt,function(Cn,cn){var nn,bn,Nn;Cn[qt]&&(nn=Cn[qt].elm)!=ln&&(Nn=St(nn,"colspan"),bn=St(nn,"rowspan"),1==Nn?It?(nn.parentNode.insertBefore(nt(nn),nn),ut(qt,cn,bn-1,Nn)):(zn.insertAfter(nt(nn),nn),ut(qt,cn,bn-1,Nn)):Dt(nn,"colSpan",nn.colSpan+1),ln=nn)})}function Mn(It){var qt=[];return Ze(It,function(ln){Ze(ln,function(Cn){qt.push(Cn)})}),qt}function ri(It){var qt;return Ze(Gt,function(ln,Cn){return Ze(ln,function(cn,nn){if(cn.elm==It)return qt={x:nn,y:Cn},!1}),!qt}),qt}var Gt,hn,wn,On,ai=Re.selection,zn=ai.dom;Vt=Vt||zn.getParent(ai.getStart(!0),"table"),De(),(Fe=Fe||zn.getParent(ai.getStart(!0),"th,td"))&&(wn=ri(Fe),On=function Ct(){var It,qt;return It=qt=0,Ze(Gt,function(ln,Cn){Ze(ln,function(cn,nn){var bn,Nn;Kt(cn)&&(nn>It&&(It=nn),Cn>qt&&(qt=Cn),(cn=Gt[Cn][nn]).real&&((bn=cn.colspan-1)&&nn+bn>It&&(It=nn+bn),(Nn=cn.rowspan-1)&&Cn+Nn>qt&&(qt=Cn+Nn)))})}),{x:It,y:qt}}(),Fe=Je(wn.x,wn.y)),Et.extend(this,{deleteTable:function Tt(){var It=zn.createRng();Ie(Vt)||(It.setStartAfter(Vt),It.setEndAfter(Vt),ai.setRng(It),zn.remove(Vt))},split:Lt,merge:function xn(It,qt,ln){var Cn,cn,nn,bn,Nn,Bn,Gn,ui,Li,ji,ti,dr,qi;if(It?(bn=(cn=(Cn=ri(It)).x)+(qt-1),Nn=(nn=Cn.y)+(ln-1)):(wn=On=null,Ze(Gt,function(Zi,Kr){Ze(Zi,function(ki,zr){Kt(ki)&&(wn||(wn={x:zr,y:Kr}),On={x:zr,y:Kr})})}),wn&&(cn=wn.x,nn=wn.y,bn=On.x,Nn=On.y)),ui=Je(cn,nn),Li=Je(bn,Nn),ui&&Li&&ui.part==Li.part){Lt(),De(),dr=function Mt(It,qt,ln,Cn,cn){var nn=0;if(cn-ln<1)return 0;for(var bn=ln+1;bn<=cn;bn++){var Nn=Ye(Ue(It,bn),qt,Cn),Bn=gn(Nn);Nn.length===Bn.length&&(Et.each(it(Bn),function(Gn){ht.setRowSpan(Gn,ht.getRowSpan(Gn)-1)}),nn++)}return nn}(Gt,cn,nn,bn,Nn),qi=function on(It,qt,ln,Cn,cn){var nn=0;if(Cn-qt<1)return 0;for(var bn=qt+1;bn<=Cn;bn++){var Nn=Ye(tt(It,bn),ln,cn),Bn=gn(Nn);Nn.length===Bn.length&&(Et.each(it(Bn),function(Gn){ht.setColSpan(Gn,ht.getColSpan(Gn)-1)}),nn++)}return nn}(Gt,cn,nn,bn,Nn),ui=Je(cn,nn).elm;var pr=bn-cn-qi+1,ar=Nn-nn-dr+1;for(pr===hn&&ar===Gt.length&&(pr=1,ar=1),pr===hn&&ar>1&&(ar=1),Dt(ui,"colSpan",pr),Dt(ui,"rowSpan",ar),Gn=nn;Gn<=Nn;Gn++)for(Bn=cn;Bn<=bn;Bn++)Gt[Gn]&&Gt[Gn][Bn]&&(It=Gt[Gn][Bn].elm)!=ui&&(ji=Et.grep(It.childNodes),Ze(ji,function(Zi){ui.appendChild(Zi)}),ji.length&&(ji=Et.grep(ui.childNodes),ti=0,Ze(ji,function(Zi){"BR"==Zi.nodeName&&ti++<ji.length-1&&ui.removeChild(Zi)})),zn.remove(It));gt()}},insertRow:lt,insertRows:function Wt(It,qt){qt=qt||re().length||1;for(var ln=0;ln<qt;ln++)lt(It)},insertCol:an,insertCols:function _t(It,qt){qt=qt||function Ke(){var It=0;return Ze(Gt,function(qt){if(Ze(qt,function(ln){Kt(ln)&&It++}),It)return!1}),It}()||1;for(var ln=0;ln<qt;ln++)an(It)},splitCols:function un(It){if(wn){var qt=be.splitAt(Gt,wn.x,wn.y,It);Et.each(qt.cells,ze)}},deleteCols:function Tn(){var It=[];Ie(Vt)&&(1==Gt[0].length||function pn(It){return Et.grep(Mn(It),Kt)}(Gt).length==Mn(Gt).length)||(Ze(Gt,function(qt){Ze(qt,function(ln,Cn){Kt(ln)&&-1===Et.inArray(It,Cn)&&(Ze(Gt,function(cn){var nn,bn=cn[Cn].elm;(nn=St(bn,"colSpan"))>1?Dt(bn,"colSpan",nn-1):zn.remove(bn)}),It.push(Cn))})}),gt())},deleteRows:function ei(){var qt;qt=re(),Ie(Vt)&&qt.length==Vt.rows.length||(Ze(qt.reverse(),function(ln){!function It(ln){var Cn,cn;Ze(ln.cells,function(nn){var bn=St(nn,"rowSpan");bn>1&&(Dt(nn,"rowSpan",bn-1),ut((Cn=ri(nn)).x,Cn.y,1,1))}),Cn=ri(ln.cells[0]),Ze(Gt[Cn.y],function(nn){var bn;(nn=nn.elm)!=cn&&((bn=St(nn,"rowSpan"))<=1?zn.remove(nn):Dt(nn,"rowSpan",bn-1),cn=nn)})}(ln)}),gt())},cutRows:function Un(){var It=re();if(!Ie(Vt)||It.length!=Vt.rows.length)return zn.remove(It),gt(),It},copyRows:function $n(){var It=re();return Ze(It,function(qt,ln){It[ln]=Ve(qt,!0)}),It},pasteRows:function Bi(It,qt){var ln,Cn,cn;It&&(ln=be.splitAt(Gt,wn.x,wn.y,qt),Cn=ln.row,Et.each(ln.cells,ze),cn=Et.map(It,function(nn){return nn.cloneNode(!0)}),qt||cn.reverse(),Ze(cn,function(nn){var bn,Nn,Bn=nn.cells.length;for(Ee(nn),bn=0;bn<Bn;bn++)ze(Nn=nn.cells[bn]),Dt(Nn,"colSpan",1),Dt(Nn,"rowSpan",1);for(bn=Bn;bn<hn;bn++)nn.appendChild(ze(nt(nn.cells[Bn-1])));for(bn=hn;bn<Bn;bn++)zn.remove(nn.cells[bn]);qt?Cn.parentNode.insertBefore(nn,Cn):zn.insertAfter(nn,Cn)}),rt())},getPos:ri,setStartCell:function Ei(It){wn=ri(It)},setEndCell:function bt(It){var qt,ln,Cn,cn,nn,bn,Nn,Bn,Gn,ui;if(On=ri(It),wn&&On){for(qt=Math.min(wn.x,On.x),ln=Math.min(wn.y,On.y),nn=Cn=Math.max(wn.x,On.x),bn=cn=Math.max(wn.y,On.y),ui=ln;ui<=cn;ui++)for(Gn=qt;Gn<=Cn;Gn++)(It=Gt[ui][Gn]).real&&((Nn=It.colspan-1)&&Gn+Nn>nn&&(nn=Gn+Nn),(Bn=It.rowspan-1)&&ui+Bn>bn&&(bn=ui+Bn));for(rt(),ui=ln;ui<=bn;ui++)for(Gn=qt;Gn<=nn;Gn++)Gt[ui][Gn]&&zn.setAttrib(Gt[ui][Gn].elm,"data-mce-selected","1")}},moveRelIdx:function en(It,qt){var ln,Cn,cn;Cn=(ln=ri(It)).y*hn+ln.x;do{if(!(cn=Je((Cn+=qt)%hn,Math.floor(Cn/hn))))break;if(cn.elm!=It)return ai.select(cn.elm,!0),zn.isEmpty(cn.elm)&&ai.collapse(!0),!0}while(cn.elm==It);return!1},refresh:De})}}),He("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(Et,$t,ht,be,Ze){var St=be.each,Dt=Ze.getSpanVal;return function(Re){function Fe(){Re.on("KeyDown",function(ze){var Ve,Je,Ue=Re.dom;37!=ze.keyCode&&38!=ze.keyCode||(Ve=Re.selection.getRng(),(Je=Ue.getParent(Ve.startContainer,"table"))&&Re.getBody().firstChild==Je&&function Ee(ze,Ve){var Je,Ue=Ve.ownerDocument,tt=Ue.createRange();return tt.setStartBefore(Ve),tt.setEnd(ze.endContainer,ze.endOffset),(Je=Ue.createElement("body")).appendChild(tt.cloneContents()),0===Je.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}(Ve,Je)&&((Ve=Ue.createRng()).setStartBefore(Je),Ve.setEndBefore(Je),Re.selection.setRng(Ve),ze.preventDefault()))})}function rt(){Re.on("KeyDown SetContent VisualAid",function(){var Ee;for(Ee=Re.getBody().lastChild;Ee;Ee=Ee.previousSibling)if(3==Ee.nodeType){if(Ee.nodeValue.length>0)break}else if(1==Ee.nodeType&&("BR"==Ee.tagName||!Ee.getAttribute("data-mce-bogus")))break;Ee&&"TABLE"==Ee.nodeName&&(Re.settings.forced_root_block?Re.dom.add(Re.getBody(),Re.settings.forced_root_block,Re.settings.forced_root_block_attrs,ht.ie&&ht.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):Re.dom.add(Re.getBody(),"br",{"data-mce-bogus":"1"}))}),Re.on("PreProcess",function(Ee){var ze=Ee.node.lastChild;ze&&("BR"==ze.nodeName||1==ze.childNodes.length&&("BR"==ze.firstChild.nodeName||"\xa0"==ze.firstChild.nodeValue))&&ze.previousSibling&&"TABLE"==ze.previousSibling.nodeName&&Re.dom.remove(ze)})}(function fe(){function Ee(Ve){Re.selection.select(Ve,!0),Re.selection.collapse(!0)}function ze(Ve){Re.$(Ve).empty(),Ze.paddCell(Ve)}Re.on("keydown",function(Ve){var Je,Ue,tt,Kt;if((Ve.keyCode==Et.DELETE||Ve.keyCode==Et.BACKSPACE)&&!Ve.isDefaultPrevented()&&(Je=Re.dom.getParent(Re.selection.getStart(),"table"))){if(Ue=Re.dom.select("td,th",Je),0===(tt=be.grep(Ue,function(re){return!!Re.dom.getAttrib(re,"data-mce-selected")})).length)return Kt=Re.dom.getParent(Re.selection.getStart(),"td,th"),void(Re.selection.isCollapsed()&&Kt&&Re.dom.isEmpty(Kt)&&(Ve.preventDefault(),ze(Kt),Ee(Kt)));Ve.preventDefault(),Re.undoManager.transact(function(){Ue.length==tt.length?Re.execCommand("mceTableDelete"):(be.each(tt,ze),Ee(tt[0]))})}})})(),function De(){var ze=function(Tt,nt){var gt=Re.selection.getRng(),ut=Tt.ownerDocument.createTextNode("\xa0");gt.startOffset?Tt.insertBefore(ut,Tt.firstChild):Tt.appendChild(ut),nt&&(Re.selection.select(ut,!0),Re.selection.collapse(!0))},Je=function(Tt){return Tt.firstChild===Tt.lastChild&&Tt.firstChild},Ue=function(Tt){return Tt&&3===Tt.nodeType},tt=function(Tt){var nt=Je(Tt);return Ue(nt)&&1===nt.data.length?nt.data:null},re=function(Tt){return Re.dom.isEmpty(Tt)||Ke(tt(Tt))},Ke=function(Tt){return"\xa0"===Tt};Re.on("keydown",function(Tt){if(function(Tt){return(Tt.keyCode==Et.DELETE||Tt.keyCode==Et.BACKSPACE)&&!Tt.isDefaultPrevented()}(Tt)){var nt=Re.dom.getParent(Re.selection.getStart(),"caption");(function(Tt){return Tt&&"CAPTION"==Tt.nodeName&&"TABLE"==Tt.parentNode.nodeName})(nt)&&(ht.ie&&(Re.selection.isCollapsed()?function(Tt){var nt=Je(Tt),gt=tt(Tt);return nt&&!Ue(nt)||gt&&!Ke(gt)}(nt)&&ze(nt):(Re.undoManager.transact(function(){Re.execCommand("Delete"),re(nt)&&ze(nt,!0)}),Tt.preventDefault())),re(nt)&&Tt.preventDefault())}})}(),ht.webkit&&(function Vt(){function Ee(ze){function Ve(on,xn){var lt=on?"previousSibling":"nextSibling",Wt=Re.dom.getParent(xn,"tr"),an=Wt[lt];if(an)return Lt(0,xn,an,on),ze.preventDefault(),!0;var _t=Re.dom.getParent(Wt,"table"),pn=Wt.parentNode,Mn=pn.nodeName.toLowerCase();if("tbody"===Mn||Mn===(on?"tfoot":"thead")){var Tn=function Je(on,xn,lt,Wt){var an=Re.dom.select(">"+Wt,xn),_t=an.indexOf(lt);return on&&0===_t||!on&&_t===an.length-1?function Ue(on,xn){var Wt=Re.dom.select(">"+(on?"thead":"tfoot"),xn);return 0!==Wt.length?Wt[0]:null}(on,xn):-1===_t?an["thead"===lt.tagName.toLowerCase()?0:an.length-1]:an[_t+(on?-1:1)]}(on,_t,pn,"tbody");if(null!==Tn)return function tt(on,xn,lt){var Wt=re(xn,on);return Wt&&Lt(0,lt,Wt,on),ze.preventDefault(),!0}(on,Tn,xn)}return function Kt(on,xn,lt,Wt){var an=Wt[lt];if(an)return Ke(an),!0;var _t=Re.dom.getParent(Wt,"td,th");return _t?Ve(on,_t):(Ke(re(xn,!on)),ze.preventDefault(),!1)}(on,Wt,lt,_t)}function re(on,xn){var lt=on&&on[xn?"lastChild":"firstChild"];return lt&&"BR"===lt.nodeName?Re.dom.getParent(lt,"td,th"):lt}function Ke(on){Re.selection.setCursorLocation(on,0)}function Lt(on,xn,lt,Wt){var an=function gt(on){for(var xn=0,lt=on;lt.previousSibling;)xn+=Dt(lt=lt.previousSibling,"colspan");return xn}(Re.dom.getParent(xn,"td,th")),_t=function ut(on,xn){var lt=0,Wt=0;return St(on.children,function(an,_t){if(lt+=Dt(an,"colspan"),Wt=_t,lt>xn)return!1}),Wt}(lt,an),pn=lt.childNodes[_t];Ke(re(pn,Wt)||pn)}var it=ze.keyCode;if(function Tt(){return it==Et.UP||it==Et.DOWN}()&&function nt(on){var xn=on.selection.getNode();return null!==on.dom.getParent(xn,"tr")}(Re)){var Mt=Re.selection.getNode();$t.setEditorTimeout(Re,function(){(function Ye(on){var xn=Re.selection.getNode(),lt=Re.dom.getParent(xn,"td,th"),Wt=Re.dom.getParent(on,"td,th");return lt&&lt!==Wt&&function gn(on,xn){return Re.dom.getParent(on,"TABLE")===Re.dom.getParent(xn,"TABLE")}(lt,Wt)})(Mt)&&Ve(!ze.shiftKey&&it===Et.UP,Mt)},0)}}Re.on("KeyDown",function(ze){Ee(ze)})}(),function Ie(){function ze(){var Ve=Re.selection.getRng(),Je=Re.selection.getNode(),Ue=Re.dom.getParent(Ve.startContainer,"TD,TH");if(function Ee(Ve,Je,Ue,tt){var Kt,nt=Ve.dom.getParent(Je.startContainer,"TABLE");return nt&&(Kt=nt.parentNode),3==Je.startContainer.nodeType&&0===Je.startOffset&&0===Je.endOffset&&tt&&("TR"==Ue.nodeName||Ue==Kt)||("TD"==Ue.nodeName||"TH"==Ue.nodeName)&&!tt}(Re,Ve,Je,Ue)){Ue||(Ue=Je);for(var tt=Ue.lastChild;tt.lastChild;)tt=tt.lastChild;3==tt.nodeType&&(Ve.setEnd(tt,tt.data.length),Re.selection.setRng(Ve))}}Re.on("KeyDown",function(){ze()}),Re.on("MouseDown",function(Ve){2!=Ve.button&&ze()})}()),ht.gecko&&(Fe(),rt()),ht.ie>9&&(Fe(),rt())}}),He("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(Et,$t,ht){return function(be,Ze){function St(Je){be.getBody().style.webkitUserSelect="",(Je||ze)&&(be.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),ze=!1)}function Dt(Je,Ue){return!(!Je||!Ue)&&Je===Ee.getParent(Ue,"table")}function Re(Je){var Ue,tt,Kt=Je.target;if(!fe&&!De&&Kt!==Ie&&(Ie=Kt,rt&&Fe)){if(tt=Ee.getParent(Kt,"td,th"),Dt(rt,tt)||(tt=Ee.getParent(rt,"td,th")),Fe===tt&&!ze)return;if(Ze(!0),Dt(rt,tt)){Je.preventDefault(),Vt||(Vt=new Et(be,rt,Fe),be.getBody().style.webkitUserSelect="none"),Vt.setEndCell(tt),ze=!0,Ue=be.selection.getSel();try{Ue.removeAllRanges?Ue.removeAllRanges():Ue.empty()}catch{}}}}var Vt,Fe,rt,Ie,fe,De,Ee=be.dom,ze=!0,Ve=function(){Fe=Vt=rt=Ie=null,Ze(!1)};return be.on("SelectionChange",function(Je){ze&&Je.stopImmediatePropagation()},!0),be.on("MouseDown",function(Je){2==Je.button||fe||De||(St(),Fe=Ee.getParent(Je.target,"td,th"),rt=Ee.getParent(Fe,"table"))}),be.on("mouseover",Re),be.on("remove",function(){Ee.unbind(be.getDoc(),"mouseover",Re),St()}),be.on("MouseUp",function(){function Je(nt,gt){var ut=new $t(nt,nt);do{if(3==nt.nodeType&&0!==ht.trim(nt.nodeValue).length)return void(gt?Ue.setStart(nt,0):Ue.setEnd(nt,nt.nodeValue.length));if("BR"==nt.nodeName)return void(gt?Ue.setStartBefore(nt):Ue.setEndBefore(nt))}while(nt=gt?ut.next():ut.prev())}var Ue,tt,Kt,re,Ke,Tt=be.selection;if(Fe){if(Vt&&(be.getBody().style.webkitUserSelect=""),(tt=Ee.select("td[data-mce-selected],th[data-mce-selected]")).length>0){(Ue=Ee.createRng()).setStartBefore(re=tt[0]),Ue.setEndAfter(re),Je(re,1),Kt=new $t(re,Ee.getParent(tt[0],"table"));do{if("TD"==re.nodeName||"TH"==re.nodeName){if(!Ee.getAttrib(re,"data-mce-selected"))break;Ke=re}}while(re=Kt.next());Je(Ke),Tt.setRng(Ue)}be.nodeChanged(),Ve()}}),be.on("KeyUp Drop SetContent",function(Je){St("setcontent"==Je.type),Ve(),fe=!1}),be.on("ObjectResizeStart ObjectResized",function(Je){fe="objectresized"!=Je.type}),be.on("dragstart",function(){De=!0}),be.on("drop dragend",function(){De=!1}),{clear:St}}}),He("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(Et,$t){var ht=Et.each;return function(be){function Ze(){var ze=be.settings.color_picker_callback;if(ze)return function(){var Ve=this;ze.call(be,function(Je){Ve.value(Je).fire("change")},Ve.value())}}function St(ze){return{title:"Advanced",type:"form",defaults:{onchange:function(){Ie(ze,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:Ze()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:Ze()}]}]}}function Dt(ze){return ze?ze.replace(/px$/,""):""}function Re(ze){return/^[0-9]+$/.test(ze)&&(ze+="px"),ze}function Vt(ze){ht("left center right".split(" "),function(Ve){be.formatter.remove("align"+Ve,{},ze)})}function rt(ze,Ve,Je){return function Ue(tt,Kt){return Kt=Kt||[],Et.each(tt,function(re){var Ke={text:re.text||re.title};re.menu?Ke.menu=Ue(re.menu):(Ke.value=re.value,Ve&&Ve(Ke)),Kt.push(Ke)}),Kt}(ze,Je||[])}function Ie(ze,Ve,Je){var Ue=Ve.toJSON(),tt=ze.parseStyle(Ue.style);Je?(Ve.find("#borderColor").value(tt["border-color"]||"")[0].fire("change"),Ve.find("#backgroundColor").value(tt["background-color"]||"")[0].fire("change")):(tt["border-color"]=Ue.borderColor,tt["background-color"]=Ue.backgroundColor),Ve.find("#style").value(ze.serializeStyle(ze.parseStyle(ze.serializeStyle(tt))))}function fe(ze,Ve,Je){var Ue=ze.parseStyle(ze.getAttrib(Je,"style"));Ue["border-color"]&&(Ve.borderColor=Ue["border-color"]),Ue["background-color"]&&(Ve.backgroundColor=Ue["background-color"]),Ve.style=ze.serializeStyle(Ue)}var Ee=this;Ee.tableProps=function(){Ee.table(!0)},Ee.table=function(ze){function Ve(){function ut(Ye,gn,it){if("TD"===Ye.tagName||"TH"===Ye.tagName)nt.setStyle(Ye,gn,it);else if(Ye.children)for(var Mt=0;Mt<Ye.children.length;Mt++)ut(Ye.children[Mt],gn,it)}var Lt;Ie(nt,this),!1===(gt=Et.extend(gt,this.toJSON())).class&&delete gt.class,be.undoManager.transact(function(){if(Ue||(Ue=be.plugins.table.insertTable(gt.cols||1,gt.rows||1)),be.dom.setAttribs(Ue,{style:gt.style,class:gt.class}),be.settings.table_style_by_css){if((Tt=[]).push({name:"border",value:gt.border}),Tt.push({name:"border-spacing",value:Re(gt.cellspacing)}),function De(ze,Ve,Je){var Ue=ze.parseStyle(ze.getAttrib(Ve,"style"));ht(Je,function(tt){Ue[tt.name]=tt.value}),ze.setAttrib(Ve,"style",ze.serializeStyle(ze.parseStyle(ze.serializeStyle(Ue))))}(nt,Ue,Tt),nt.setAttribs(Ue,{"data-mce-border-color":gt.borderColor,"data-mce-cell-padding":gt.cellpadding,"data-mce-border":gt.border}),Ue.children)for(var Ye=0;Ye<Ue.children.length;Ye++)ut(Ue.children[Ye],"border",gt.border),ut(Ue.children[Ye],"padding",Re(gt.cellpadding))}else be.dom.setAttribs(Ue,{border:gt.border,cellpadding:gt.cellpadding,cellspacing:gt.cellspacing});nt.getAttrib(Ue,"width")&&!be.settings.table_style_by_css?nt.setAttrib(Ue,"width",Dt(gt.width)):nt.setStyle(Ue,"width",Re(gt.width)),nt.setStyle(Ue,"height",Re(gt.height)),(Lt=nt.select("caption",Ue)[0])&&!gt.caption&&nt.remove(Lt),!Lt&&gt.caption&&((Lt=nt.create("caption")).innerHTML=$t.ie?"\xa0":'<br data-mce-bogus="1"/>',Ue.insertBefore(Lt,Ue.firstChild)),Vt(Ue),gt.align&&be.formatter.apply("align"+gt.align,{},Ue),be.focus(),be.addVisual()})}function Je(ut,Lt){return function Ye(Mt,on){for(var xn=0;xn<on.length;xn++){var lt=nt.getStyle(on[xn],Lt);if(typeof Mt>"u"&&(Mt=lt),Mt!=lt)return""}return Mt}(undefined,be.dom.select("td,th",ut))}var Ue,tt,Kt,re,Ke,Tt,nt=be.dom,gt={};!0===ze?(Ue=nt.getParent(be.selection.getStart(),"table"))&&(gt={width:Dt(nt.getStyle(Ue,"width")||nt.getAttrib(Ue,"width")),height:Dt(nt.getStyle(Ue,"height")||nt.getAttrib(Ue,"height")),cellspacing:Dt(nt.getStyle(Ue,"border-spacing")||nt.getAttrib(Ue,"cellspacing")),cellpadding:nt.getAttrib(Ue,"data-mce-cell-padding")||nt.getAttrib(Ue,"cellpadding")||Je(Ue,"padding"),border:nt.getAttrib(Ue,"data-mce-border")||nt.getAttrib(Ue,"border")||Je(Ue,"border"),borderColor:nt.getAttrib(Ue,"data-mce-border-color"),caption:!!nt.select("caption",Ue)[0],class:nt.getAttrib(Ue,"class")},ht("left center right".split(" "),function(ut){be.formatter.matchNode(Ue,"align"+ut)&&(gt.align=ut)})):(tt={label:"Cols",name:"cols"},Kt={label:"Rows",name:"rows"}),be.settings.table_class_list&&(gt.class&&(gt.class=gt.class.replace(/\s*mce\-item\-table\s*/g,"")),re={name:"class",type:"listbox",label:"Class",values:rt(be.settings.table_class_list,function(ut){ut.value&&(ut.textStyle=function(){return be.formatter.getCssText({block:"table",classes:[ut.value]})})})}),Ke={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==be.settings.table_appearance_options?[tt,Kt,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[tt,Kt,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},re]},!1!==be.settings.table_advtab?(fe(nt,gt,Ue),be.windowManager.open({title:"Table properties",data:gt,bodyType:"tabpanel",body:[{title:"General",type:"form",items:Ke},St(nt)],onsubmit:Ve})):be.windowManager.open({title:"Table properties",data:gt,body:Ke,onsubmit:Ve})},Ee.merge=function(ze,Ve){be.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var Je=this.toJSON();be.undoManager.transact(function(){ze.merge(Ve,Je.cols,Je.rows)})}})},Ee.cell=function(){function ze(nt,gt,ut){(1===Ke.length||ut)&&re.setAttrib(nt,gt,ut)}function Ve(nt,gt,ut){(1===Ke.length||ut)&&re.setStyle(nt,gt,ut)}function Je(){Ie(re,this),tt=Et.extend(tt,this.toJSON()),be.undoManager.transact(function(){ht(Ke,function(nt){ze(nt,"scope",tt.scope),ze(nt,"style",tt.style),ze(nt,"class",tt.class),Ve(nt,"width",Re(tt.width)),Ve(nt,"height",Re(tt.height)),tt.type&&nt.nodeName.toLowerCase()!==tt.type&&(nt=re.rename(nt,tt.type)),1===Ke.length&&(Vt(nt),function Fe(ze){ht("top middle bottom".split(" "),function(Ve){be.formatter.remove("valign"+Ve,{},ze)})}(nt)),tt.align&&be.formatter.apply("align"+tt.align,{},nt),tt.valign&&be.formatter.apply("valign"+tt.valign,{},nt)}),be.focus()})}var Ue,tt,Kt,re=be.dom,Ke=[];if(Ke=be.dom.select("td[data-mce-selected],th[data-mce-selected]"),Ue=be.dom.getParent(be.selection.getStart(),"td,th"),!Ke.length&&Ue&&Ke.push(Ue),Ue=Ue||Ke[0]){Ke.length>1?tt={width:"",height:"",scope:"",class:"",align:"",style:"",type:Ue.nodeName.toLowerCase()}:((tt={width:Dt(re.getStyle(Ue,"width")||re.getAttrib(Ue,"width")),height:Dt(re.getStyle(Ue,"height")||re.getAttrib(Ue,"height")),scope:re.getAttrib(Ue,"scope"),class:re.getAttrib(Ue,"class")}).type=Ue.nodeName.toLowerCase(),ht("left center right".split(" "),function(nt){be.formatter.matchNode(Ue,"align"+nt)&&(tt.align=nt)}),ht("top middle bottom".split(" "),function(nt){be.formatter.matchNode(Ue,"valign"+nt)&&(tt.valign=nt)}),fe(re,tt,Ue)),be.settings.table_cell_class_list&&(Kt={name:"class",type:"listbox",label:"Class",values:rt(be.settings.table_cell_class_list,function(nt){nt.value&&(nt.textStyle=function(){return be.formatter.getCssText({block:"td",classes:[nt.value]})})})});var Tt={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},Kt]};be.windowManager.open(!1!==be.settings.table_cell_advtab?{title:"Cell properties",bodyType:"tabpanel",data:tt,body:[{title:"General",type:"form",items:Tt},St(re)],onsubmit:Je}:{title:"Cell properties",data:tt,body:Tt,onsubmit:Je})}},Ee.row=function(){function ze(ut,Lt,Ye){(1===gt.length||Ye)&&nt.setAttrib(ut,Lt,Ye)}function Je(){var ut,Lt,Ye;Ie(nt,this),Ke=Et.extend(Ke,this.toJSON()),be.undoManager.transact(function(){var gn=Ke.type;ht(gt,function(it){ze(it,"scope",Ke.scope),ze(it,"style",Ke.style),ze(it,"class",Ke.class),function Ve(ut,Lt,Ye){(1===gt.length||Ye)&&nt.setStyle(ut,Lt,Ye)}(it,"height",Re(Ke.height)),gn!==it.parentNode.nodeName.toLowerCase()&&(ut=nt.getParent(it,"table"),Lt=it.parentNode,(Ye=nt.select(gn,ut)[0])||(Ye=nt.create(gn),ut.firstChild?ut.insertBefore(Ye,ut.firstChild):ut.appendChild(Ye)),Ye.appendChild(it),Lt.hasChildNodes()||nt.remove(Lt)),1===gt.length&&Vt(it),Ke.align&&be.formatter.apply("align"+Ke.align,{},it)}),be.focus()})}var Ue,tt,Kt,re,Ke,Tt,nt=be.dom,gt=[];Ue=be.dom.getParent(be.selection.getStart(),"table"),tt=be.dom.getParent(be.selection.getStart(),"td,th"),ht(Ue.rows,function(ut){ht(ut.cells,function(Lt){if(nt.getAttrib(Lt,"data-mce-selected")||Lt==tt)return gt.push(ut),!1})}),(Kt=gt[0])&&(gt.length>1?Ke={height:"",scope:"",class:"",align:"",type:Kt.parentNode.nodeName.toLowerCase()}:((Ke={height:Dt(nt.getStyle(Kt,"height")||nt.getAttrib(Kt,"height")),scope:nt.getAttrib(Kt,"scope"),class:nt.getAttrib(Kt,"class")}).type=Kt.parentNode.nodeName.toLowerCase(),ht("left center right".split(" "),function(ut){be.formatter.matchNode(Kt,"align"+ut)&&(Ke.align=ut)}),fe(nt,Ke,Kt)),be.settings.table_row_class_list&&(re={name:"class",type:"listbox",label:"Class",values:rt(be.settings.table_row_class_list,function(ut){ut.value&&(ut.textStyle=function(){return be.formatter.getCssText({block:"tr",classes:[ut.value]})})})}),Tt={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},re]},be.windowManager.open(!1!==be.settings.table_row_advtab?{title:"Row properties",data:Ke,bodyType:"tabpanel",body:[{title:"General",type:"form",items:Tt},St(nt)],onsubmit:Je}:{title:"Row properties",data:Ke,body:Tt,onsubmit:Je}))}}}),He("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(Et,$t){var ht;return function(be){function Ze(wt,Ht){return{index:wt,y:be.dom.getPos(Ht).y}}function St(wt,Ht){return{index:wt,y:be.dom.getPos(Ht).y+Ht.offsetHeight}}function Dt(wt,Ht){return{index:wt,x:be.dom.getPos(Ht).x}}function Re(wt,Ht){return{index:wt,x:be.dom.getPos(Ht).x+Ht.offsetWidth}}function Vt(){return"rtl"===be.getBody().dir}function Fe(){return be.inline}function rt(){return Fe?be.getBody().ownerDocument.body:be.getBody()}function Ie(wt,Ht){return Vt()?Re(wt,Ht):Dt(wt,Ht)}function fe(wt,Ht){return Vt()?Dt(wt,Ht):Re(wt,Ht)}function Ee(wt,Ht){var mn=be.dom.getStyle(wt,Ht,!0);return parseInt(mn,10)}function ze(wt){return Ee(wt,"width")/Ee(wt.parentElement,"width")*100}function Ue(wt,Ht,mn){for(var sn=[],An=1;An<mn.length;An++)sn.push(wt(An-1,mn[An].element));return sn.push(Ht(mn.length-1,mn[mn.length-1].element)),sn}function tt(){var wt=be.dom.select("."+Bn,rt());Et.each(wt,function(Ht){be.dom.remove(Ht)})}function Kt(wt){tt(),it(wt)}function re(wt,Ht,mn,sn,An,Wn,jn,qn){var Zn={"data-mce-bogus":"all",class:Bn+" "+wt,unselectable:"on","data-mce-resize":!1,style:"cursor: "+Ht+"; margin: 0; padding: 0; position: absolute; left: "+mn+"px; top: "+sn+"px; height: "+An+"px; width: "+Wn+"px; "};return Zn[jn]=qn,Zn}function nt(wt){return Et.map(wt.rows,function(Ht){return{element:Ht,cells:Et.map(Ht.cells,function(sn){var An=sn.hasAttribute("rowspan")?parseInt(sn.getAttribute("rowspan"),10):1,Wn=sn.hasAttribute("colspan")?parseInt(sn.getAttribute("colspan"),10):1;return{element:sn,rowspan:An,colspan:Wn}})}})}function gt(wt){function Ht(ni,pi){return ni+","+pi}var Wn={},jn=[],qn=0,Zn=0;return Et.each(wt,function(ni,pi){var xi=[];Et.each(ni.cells,function(Ai){for(var Yi=0;Wn[Ht(pi,Yi)]!==Dn;)Yi++;for(var Vi={element:Ai.element,colspan:Ai.colspan,rowspan:Ai.rowspan,rowIndex:pi,colIndex:Yi},_r=0;_r<Ai.colspan;_r++)for(var Er=0;Er<Ai.rowspan;Er++){var Vr=pi+Er,Lr=Yi+_r;Wn[Ht(Vr,Lr)]=Vi,qn=Math.max(qn,Vr+1),Zn=Math.max(Zn,Lr+1)}xi.push(Vi)}),jn.push({element:ni.element,cells:xi})}),{grid:{maxRows:qn,maxCols:Zn},getAt:function mn(ni,pi){return Wn[Ht(ni,pi)]},getAllCells:function sn(){var ni=[];return Et.each(jn,function(pi){ni=ni.concat(pi.cells)}),ni},getAllRows:function An(){return jn}}}function ut(wt,Ht){for(var mn=[],sn=wt;sn<Ht;sn++)mn.push(sn);return mn}function Lt(wt,Ht,mn){for(var sn,An=wt(),Wn=0;Wn<An.length;Wn++)Ht(An[Wn])&&(sn=An[Wn]);return sn||mn()}function Ye(wt){var Ht=ut(0,wt.grid.maxCols),mn=ut(0,wt.grid.maxRows);return Et.map(Ht,function(sn){return Lt(function An(){for(var qn=[],Zn=0;Zn<mn.length;Zn++){var ni=wt.getAt(Zn,sn);ni&&ni.colIndex===sn&&qn.push(ni)}return qn},function Wn(qn){return 1===qn.colspan},function jn(){for(var qn,Zn=0;Zn<mn.length;Zn++)if(qn=wt.getAt(Zn,sn))return qn;return null})})}function gn(wt){var Ht=ut(0,wt.grid.maxCols),mn=ut(0,wt.grid.maxRows);return Et.map(mn,function(sn){return Lt(function An(){for(var qn=[],Zn=0;Zn<Ht.length;Zn++){var ni=wt.getAt(sn,Zn);ni&&ni.rowIndex===sn&&qn.push(ni)}return qn},function Wn(qn){return 1===qn.rowspan},function jn(){return wt.getAt(sn,0)})})}function it(wt){var mn=gt(nt(wt)),sn=gn(mn),An=Ye(mn),Wn=be.dom.getPos(wt),jn=sn.length>0?Ue(Ze,St,sn):[],qn=An.length>0?Ue(Ie,fe,An):[];(function Ke(wt,Ht,mn){Et.each(wt,function(sn){var An=mn.x,Wn=sn.y-ar/2,jn=ar,qn=Ht;be.dom.add(rt(),"div",re(Gn,ui,An,Wn,jn,qn,Li,sn.index))})})(jn,wt.offsetWidth,Wn),function Tt(wt,Ht,mn){Et.each(wt,function(sn){var An=sn.x-ar/2,Wn=mn.y,jn=Ht,qn=ar;be.dom.add(rt(),"div",re(ti,dr,An,Wn,jn,qn,qi,sn.index))})}(qn,wt.offsetHeight,Wn)}function Mt(wt,Ht,mn,sn){if(Ht<0||Ht>=wt.length-1)return"";var An=wt[Ht];if(An)An={value:An,delta:0};else for(var Wn=wt.slice(0,Ht).reverse(),jn=0;jn<Wn.length;jn++)Wn[jn]&&(An={value:Wn[jn],delta:jn+1});var qn=wt[Ht+1];if(qn)qn={value:qn,delta:1};else for(var Zn=wt.slice(Ht+1),ni=0;ni<Zn.length;ni++)Zn[ni]&&(qn={value:Zn[ni],delta:ni+1});var pi=qn.delta-An.delta,xi=Math.abs(qn.value-An.value)/pi;return mn?xi/Ee(sn,"width")*100:xi}function on(wt,Ht){var mn=be.dom.getStyle(wt,Ht);return mn||(mn=be.dom.getAttrib(wt,Ht)),mn||(mn=be.dom.getStyle(wt,Ht,!0)),mn}function xn(wt,Ht,mn){var sn=on(wt,"width"),An=parseInt(sn,10),Wn=Ht?function De(wt,Ht){return Ee(wt,"width")/Ee(Ht,"width")*100}(wt,mn):Ee(wt,"width");return(Ht&&!Un(sn)||!Ht&&!$n(sn))&&(An=0),!isNaN(An)&&An>0?An:Wn}function lt(wt,Ht,mn){for(var sn=Ye(wt),An=Et.map(sn,function(ni){return Ie(ni.colIndex,ni.element).x}),Wn=[],jn=0;jn<sn.length;jn++){var Zn=(sn[jn].element.hasAttribute("colspan")?parseInt(sn[jn].element.getAttribute("colspan"),10):1)>1?Mt(An,jn):xn(sn[jn].element,Ht,mn);Wn.push(Zn=Zn||Zi)}return Wn}function Wt(wt){var Ht=on(wt,"height"),mn=parseInt(Ht,10);return Un(Ht)&&(mn=0),!isNaN(mn)&&mn>0?mn:Ee(wt,"height")}function an(wt){for(var Ht=gn(wt),mn=Et.map(Ht,function(qn){return Ze(qn.rowIndex,qn.element).y}),sn=[],An=0;An<Ht.length;An++){var jn=(Ht[An].element.hasAttribute("rowspan")?parseInt(Ht[An].element.getAttribute("rowspan"),10):1)>1?Mt(mn,An):Wt(Ht[An].element);sn.push(jn=jn||Kr)}return sn}function _t(wt,Ht,mn,sn,An){function Wn(xi){return Et.map(xi,function(){return 0})}function qn(xi,Ai){var Yi,Vi=Wn(pi.slice(0,xi)),_r=Wn(pi.slice(Ai+1));if(mn>=0){var Er=Math.max(sn,pi[Ai]-mn);Yi=Vi.concat([mn,Er-pi[Ai]]).concat(_r)}else{var Vr=Math.max(sn,pi[xi]+mn);Yi=Vi.concat([Vr-pi[xi],pi[xi]-Vr]).concat(_r)}return Yi}var pi=wt.slice(0);return 0===wt.length?[]:1===wt.length?function jn(){return An?[100-pi[0]]:[Math.max(sn,pi[0]+mn)-pi[0]]}():0===Ht?qn(0,1):Ht>0&&Ht<wt.length-1?qn(Ht,Ht+1):Ht===wt.length-1?function Zn(xi,Ai){var Yi,Vi=Wn(pi.slice(0,Ai));if(mn>=0)Yi=Vi.concat([mn]);else{var _r=Math.max(sn,pi[Ai]+mn);Yi=Vi.concat([_r-pi[Ai]])}return Yi}(0,Ht):[]}function pn(wt,Ht,mn){for(var sn=0,An=wt;An<Ht;An++)sn+=mn[An];return sn}function Mn(wt,Ht){var mn=wt.getAllCells();return Et.map(mn,function(sn){var An=pn(sn.colIndex,sn.colIndex+sn.colspan,Ht);return{element:sn.element,width:An,colspan:sn.colspan}})}function Tn(wt,Ht){var mn=wt.getAllCells();return Et.map(mn,function(sn){var An=pn(sn.rowIndex,sn.rowIndex+sn.rowspan,Ht);return{element:sn.element,height:An,rowspan:sn.rowspan}})}function ei(wt,Ht){var mn=wt.getAllRows();return Et.map(mn,function(sn,An){return{element:sn.element,height:Ht[An]}})}function Un(wt){return zr.test(wt)}function $n(wt){return Aa.test(wt)}function Bi(wt,Ht,mn){for(var Zn=gt(nt(wt)),ni=Un(wt.width)||Un(wt.style.width),pi=lt(Zn,ni,wt),xi=ni?function Ve(wt,Ht){return Ht/Ee(wt,"width")*100}(wt,Ht):Ht,Ai=_t(pi,mn,xi,Zi,ni),Yi=[],Vi=0;Vi<Ai.length;Vi++)Yi.push(Ai[Vi]+pi[Vi]);var _r=Mn(Zn,Yi),Er=ni?"%":"px",Vr=ni?function An(){return mn<Zn.grid.maxCols-1?ze(wt):ze(wt)+function Je(wt,Ht){return Ht/Ee(wt.parentElement,"width")*100}(wt,Ht)}():function Wn(){return mn<Zn.grid.maxCols-1?Ee(wt,"width"):Ee(wt,"width")+Ht}();be.undoManager.transact(function(){(function sn(Lr,na){Et.each(Lr,function(Co){be.dom.setStyle(Co.element,"width",Co.width+na),be.dom.setAttrib(Co.element,"width",null)})})(_r,Er),function jn(Lr,na,Co){mn!=Zn.grid.maxCols-1&&Co||(be.dom.setStyle(wt,"width",Lr+na),be.dom.setAttrib(wt,"width",null))}(Vr,Er,ni)})}function ri(wt,Ht,mn){for(var An=gt(nt(wt)),Wn=an(An),jn=[],qn=0,Zn=0;Zn<Wn.length;Zn++)jn.push(Zn===mn?Ht+Wn[Zn]:Wn[Zn]),qn+=qn[Zn];var ni=Tn(An,jn),pi=ei(An,jn);be.undoManager.transact(function(){Et.each(pi,function(xi){be.dom.setStyle(xi.element,"height",xi.height+"px"),be.dom.setAttrib(xi.element,"height",null)}),Et.each(ni,function(xi){be.dom.setStyle(xi.element,"height",xi.height+"px"),be.dom.setAttrib(xi.element,"height",null)}),be.dom.setStyle(wt,"height",qn+"px"),be.dom.setAttrib(wt,"height",null)})}function un(){if(be.dom.remove(cn),Cn){var wt,Ht;if(be.dom.removeClass(nn,ki),Cn=!1,hn(nn)){var mn=parseInt(be.dom.getAttrib(nn,pr),10),sn=be.dom.getPos(nn).x;wt=parseInt(be.dom.getAttrib(nn,qi),10),Ht=Vt()?mn-sn:sn-mn,Math.abs(Ht)>=1&&Bi(ht,Ht,wt)}else if(wn(nn)){var An=parseInt(be.dom.getAttrib(nn,ji),10),Wn=be.dom.getPos(nn).y;wt=parseInt(be.dom.getAttrib(nn,Li),10),Ht=Wn-An,Math.abs(Ht)>=1&&ri(ht,Ht,wt)}Kt(ht),be.nodeChanged()}}function Gt(wt,Ht){cn=cn||function bt(){var wt=document.createElement("div");return wt.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),wt.setAttribute("data-mce-bogus","all"),wt}(),Cn=!0,be.dom.addClass(wt,ki),nn=wt,function en(wt,Ht){be.dom.bind(wt,"mouseup",function(){un()}),be.dom.bind(wt,"mousemove",function(mn){(function Ct(){clearTimeout(ln)})(),Cn&&Ht(mn)}),be.dom.bind(wt,"mouseout",function(){!function Ei(){ln=setTimeout(function(){un()},200)}()})}(cn,Ht),be.dom.add(rt(),cn)}function hn(wt){return be.dom.hasClass(wt,ti)}function wn(wt){return be.dom.hasClass(wt,Gn)}function On(wt){var Ht=wt.clientX-(bn=bn!==Dn?bn:wt.clientX);bn=wt.clientX;var mn=be.dom.getPos(nn).x;be.dom.setStyle(nn,"left",mn+Ht+"px")}function ai(wt){var Ht=wt.clientY-(Nn=Nn!==Dn?Nn:wt.clientY);Nn=wt.clientY;var mn=be.dom.getPos(nn).y;be.dom.setStyle(nn,"top",mn+Ht+"px")}function qt(wt){var Ht=wt.target,mn=be.getBody();if(be.$.contains(mn,ht)||ht===mn)if(hn(Ht)){wt.preventDefault();var sn=be.dom.getPos(Ht).x;be.dom.setAttrib(Ht,pr,sn),function zn(wt){bn=Dn,Gt(wt,On)}(Ht)}else if(wn(Ht)){wt.preventDefault();var An=be.dom.getPos(Ht).y;be.dom.setAttrib(Ht,ji,An),function It(wt){Nn=Dn,Gt(wt,ai)}(Ht)}else tt()}var ln,Cn,cn,nn,bn,Nn,Bn="mce-resize-bar",Gn="mce-resize-bar-row",ui="row-resize",Li="data-row",ji="data-initial-top",ti="mce-resize-bar-col",dr="col-resize",qi="data-col",pr="data-initial-left",ar=4,Zi=10,Kr=10,ki="mce-resize-bar-dragging",zr=new RegExp(/(\d+(\.\d+)?%)/),Aa=new RegExp(/px|em/);return be.on("init",function(){be.dom.bind(rt(),"mousedown",qt)}),be.on("ObjectResized",function(wt){var Ht=wt.target;if("TABLE"===Ht.nodeName){var mn=[];Et.each(Ht.rows,function(sn){Et.each(sn.cells,function(An){var Wn=be.dom.getStyle(An,"width",!0);mn.push({cell:An,width:Wn})})}),Et.each(mn,function(sn){be.dom.setStyle(sn.cell,"width",sn.width),be.dom.setAttrib(sn.cell,"width",null)})}}),be.on("mouseover",function(wt){if(!Cn){var Ht=be.dom.getParent(wt.target,"table");("TABLE"===wt.target.nodeName||Ht)&&(ht=Ht,Kt(Ht))}}),be.on("keydown",function(wt){switch(wt.keyCode){case $t.LEFT:case $t.RIGHT:case $t.UP:case $t.DOWN:tt()}}),be.on("remove",function(){tt(),be.dom.unbind(rt(),"mousedown",qt)}),{adjustWidth:Bi,adjustHeight:ri,clearBars:tt,drawBars:it,determineDeltas:_t,getTableGrid:gt,getTableDetails:nt,getWidths:lt,getPixelHeights:an,isPercentageBasedSize:Un,isPixelBasedSize:$n,recalculateWidths:Mn,recalculateCellHeights:Tn,recalculateRowHeights:ei}}}),He("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(Et,$t,ht,be,Ze,St,Dt,Re,Vt){var rt=St.each;Vt.add("table",function Fe(Ie){function fe(it){return function(){Ie.execCommand(it)}}function De(it,Mt){var on,xn,lt,Wt;for(lt='<table id="__mce"><tbody>',on=0;on<Mt;on++){for(lt+="<tr>",xn=0;xn<it;xn++)lt+="<td>"+(Re.ie&&Re.ie<10?"&nbsp;":"<br>")+"</td>";lt+="</tr>"}return lt+="</tbody></table>",Ie.undoManager.transact(function(){Ie.insertContent(lt),Wt=Ie.dom.get("__mce"),Ie.dom.setAttrib(Wt,"id",null),Ie.$("tr",Wt).each(function(an,_t){Ie.fire("newrow",{node:_t}),Ie.$("th,td",_t).each(function(pn,Mn){Ie.fire("newcell",{node:Mn})})}),Ie.dom.setAttribs(Wt,Ie.settings.table_default_attributes||{}),Ie.dom.setStyles(Wt,Ie.settings.table_default_styles||{})}),Wt}function Ee(it,Mt,on){function xn(){var lt,Wt,an,_t={},pn=0;(lt=(Wt=Ie.dom.select("td[data-mce-selected],th[data-mce-selected]"))[0])||(lt=Ie.selection.getStart()),on&&Wt.length>0?(rt(Wt,function(Mn){return _t[Mn.parentNode.parentNode.nodeName]=1}),rt(_t,function(Mn){pn+=Mn}),an=1!==pn):an=!Ie.dom.getParent(lt,Mt),it.disabled(an),Ie.selection.selectorChanged(Mt,function(Mn){it.disabled(!Mn)})}Ie.initialized?xn():Ie.on("init",xn)}function ze(){Ee(this,"table")}function Ve(){Ee(this,"td,th")}function tt(it,Mt,on){var xn,lt,Wt,an,_t,pn=on.getEl().getElementsByTagName("table")[0],Mn=on.isRtl()||"tl-tr"==on.parent().rel;for(pn.nextSibling.innerHTML=it+1+" x "+(Mt+1),Mn&&(it=9-it),lt=0;lt<10;lt++)for(xn=0;xn<10;xn++)Ie.dom.toggleClass(an=pn.rows[lt].childNodes[xn].firstChild,"mce-active",_t=(Mn?xn>=it:xn<=it)&&lt<=Mt),_t&&(Wt=an);return Wt.parentNode}function re(it){return Ie.dom.is(it,"table")&&Ie.getBody().contains(it)}var gt,ut,Lt=this,Ye=new be(Ie);!Ie.settings.object_resizing||!1===Ie.settings.table_resize_bars||!0!==Ie.settings.object_resizing&&"table"!==Ie.settings.object_resizing||(ut=Ze(Ie)),Ie.addMenuItem("inserttable",!1===Ie.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:Ye.table}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(it){it.aria&&(this.parent().hideAll(),it.stopImmediatePropagation(),Ye.table())},onshow:function(){tt(0,0,this.menu.items()[0])},onhide:function(){var it=this.menu.items()[0].getEl().getElementsByTagName("a");Ie.dom.removeClass(it,"mce-active"),Ie.dom.addClass(it[0],"mce-active")},menu:[{type:"container",html:function Ue(){var it="";it='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var Mt=0;Mt<10;Mt++){it+="<tr>";for(var on=0;on<10;on++)it+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*Mt+on)+'" href="#" data-mce-x="'+on+'" data-mce-y="'+Mt+'"></a></td>';it+="</tr>"}return(it+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(it){var Mt,on,xn=it.target;"A"==xn.tagName.toUpperCase()&&(Mt=parseInt(xn.getAttribute("data-mce-x"),10),on=parseInt(xn.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(Mt=9-Mt),Mt===this.lastX&&on===this.lastY||(tt(Mt,on,it.control),this.lastX=Mt,this.lastY=on))},onclick:function(it){var Mt=this;"A"==it.target.tagName.toUpperCase()&&(it.preventDefault(),it.stopPropagation(),Mt.parent().cancel(),Ie.undoManager.transact(function(){De(Mt.lastX+1,Mt.lastY+1)}),Ie.addVisual())}}]}),Ie.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:ze,onclick:Ye.tableProps}),Ie.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:ze,cmd:"mceTableDelete"}),Ie.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:fe("mceTableCellProps"),onPostRender:Ve},{text:"Merge cells",onclick:fe("mceTableMergeCells"),onPostRender:function Je(){Ee(this,"td,th",!0)}},{text:"Split cell",onclick:fe("mceTableSplitCells"),onPostRender:Ve}]}),Ie.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:fe("mceTableInsertRowBefore"),onPostRender:Ve},{text:"Insert row after",onclick:fe("mceTableInsertRowAfter"),onPostRender:Ve},{text:"Delete row",onclick:fe("mceTableDeleteRow"),onPostRender:Ve},{text:"Row properties",onclick:fe("mceTableRowProps"),onPostRender:Ve},{text:"-"},{text:"Cut row",onclick:fe("mceTableCutRow"),onPostRender:Ve},{text:"Copy row",onclick:fe("mceTableCopyRow"),onPostRender:Ve},{text:"Paste row before",onclick:fe("mceTablePasteRowBefore"),onPostRender:Ve},{text:"Paste row after",onclick:fe("mceTablePasteRowAfter"),onPostRender:Ve}]}),Ie.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:fe("mceTableInsertColBefore"),onPostRender:Ve},{text:"Insert column after",onclick:fe("mceTableInsertColAfter"),onPostRender:Ve},{text:"Delete column",onclick:fe("mceTableDeleteCol"),onPostRender:Ve}]});var gn=[];rt("inserttable tableprops deletetable | cell row column".split(" "),function(it){gn.push("|"==it?{text:"-"}:Ie.menuItems[it])}),Ie.addButton("table",{type:"menubutton",title:"Table",menu:gn}),Re.isIE||Ie.on("click",function(it){"TABLE"===(it=it.target).nodeName&&(Ie.selection.select(it),Ie.nodeChanged())}),Lt.quirks=new $t(Ie),Ie.on("Init",function(){Lt.cellSelection=new ht(Ie,function(it){it&&ut&&ut.clearBars()}),Lt.resizeBars=ut}),Ie.on("PreInit",function(){Ie.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(it,Mt){for(var on=it.length;on--;)it[on].attr(Mt,null)})}),rt({mceTableSplitCells:function(it){it.split()},mceTableMergeCells:function(it){var Mt;Mt=Ie.dom.getParent(Ie.selection.getStart(),"th,td"),Ie.dom.select("td[data-mce-selected],th[data-mce-selected]").length?it.merge():Ye.merge(it,Mt)},mceTableInsertRowBefore:function(it){it.insertRows(!0)},mceTableInsertRowAfter:function(it){it.insertRows()},mceTableInsertColBefore:function(it){it.insertCols(!0)},mceTableInsertColAfter:function(it){it.insertCols()},mceTableDeleteCol:function(it){it.deleteCols()},mceTableDeleteRow:function(it){it.deleteRows()},mceTableCutRow:function(it){gt=it.cutRows()},mceTableCopyRow:function(it){gt=it.copyRows()},mceTablePasteRowBefore:function(it){it.pasteRows(gt,!0)},mceTablePasteRowAfter:function(it){it.pasteRows(gt)},mceSplitColsBefore:function(it){it.splitCols(!0)},mceSplitColsAfter:function(it){it.splitCols(!1)},mceTableDelete:function(it){ut&&ut.clearBars(),it.deleteTable()}},function(it,Mt){Ie.addCommand(Mt,function(){var on=new Et(Ie);on&&(it(on),Ie.execCommand("mceRepaint"),Lt.cellSelection.clear())})}),rt({mceInsertTable:Ye.table,mceTableProps:function(){Ye.table(!0)},mceTableRowProps:Ye.row,mceTableCellProps:Ye.cell},function(it,Mt){Ie.addCommand(Mt,function(on,xn){it(xn)})}),function Kt(){Ie.addButton("tableprops",{title:"Table properties",onclick:Ye.tableProps,icon:"table"}),Ie.addButton("tabledelete",{title:"Delete table",onclick:fe("mceTableDelete")}),Ie.addButton("tablecellprops",{title:"Cell properties",onclick:fe("mceTableCellProps")}),Ie.addButton("tablemergecells",{title:"Merge cells",onclick:fe("mceTableMergeCells")}),Ie.addButton("tablesplitcells",{title:"Split cell",onclick:fe("mceTableSplitCells")}),Ie.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:fe("mceTableInsertRowBefore")}),Ie.addButton("tableinsertrowafter",{title:"Insert row after",onclick:fe("mceTableInsertRowAfter")}),Ie.addButton("tabledeleterow",{title:"Delete row",onclick:fe("mceTableDeleteRow")}),Ie.addButton("tablerowprops",{title:"Row properties",onclick:fe("mceTableRowProps")}),Ie.addButton("tablecutrow",{title:"Cut row",onclick:fe("mceTableCutRow")}),Ie.addButton("tablecopyrow",{title:"Copy row",onclick:fe("mceTableCopyRow")}),Ie.addButton("tablepasterowbefore",{title:"Paste row before",onclick:fe("mceTablePasteRowBefore")}),Ie.addButton("tablepasterowafter",{title:"Paste row after",onclick:fe("mceTablePasteRowAfter")}),Ie.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:fe("mceTableInsertColBefore")}),Ie.addButton("tableinsertcolafter",{title:"Insert column after",onclick:fe("mceTableInsertColAfter")}),Ie.addButton("tabledeletecol",{title:"Delete column",onclick:fe("mceTableDeleteCol")})}(),function Ke(){var it=Ie.settings.table_toolbar;""!==it&&!1!==it&&(it||(it="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),Ie.addContextToolbar(re,it))}(),!1!==Ie.settings.table_tab_navigation&&Ie.on("keydown",function(it){var Mt,on,xn;9==it.keyCode&&(Mt=Ie.dom.getParent(Ie.selection.getStart(),"th,td"))&&(it.preventDefault(),on=new Et(Ie),xn=it.shiftKey?-1:1,Ie.undoManager.transact(function(){!on.moveRelIdx(Mt,xn)&&xn>0&&(on.insertRow(),on.refresh(),on.moveRelIdx(Mt,xn))}))}),Lt.insertTable=De,Lt.setClipboardRows=function nt(it){gt=it},Lt.getClipboardRows=function Tt(){return gt}})})}(window),function(Qt,Dn){"object"==typeof exports&&typeof module<"u"?Dn(exports):"function"==typeof define&&define.amd?define(["exports"],Dn):Dn(Qt.echarts={})}(this,function(Qt){"use strict";var e,t,n,i,r,o,ze,Dn=2311,_i=function(){return Dn++},He="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:typeof document>"u"&&typeof self<"u"?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:typeof navigator>"u"?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:(t={},n=(e=navigator.userAgent).match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),r=e.match(/Edge\/([\d.]+)/),o=/micromessenger/i.test(e),n&&(t.firefox=!0,t.version=n[1]),i&&(t.ie=!0,t.version=i[1]),r&&(t.edge=!0,t.version=r[1]),o&&(t.weChat=!0),{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect<"u",touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&11<=t.version),domSupported:typeof document<"u"}),rr={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},or={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},Et=Object.prototype.toString,$t=Array.prototype,ht=$t.forEach,be=$t.filter,Ze=$t.slice,St=$t.map,Dt=$t.reduce,Re={};function Vt(e,t){"createCanvas"===e&&(ze=null),Re[e]=t}function Fe(e){if(null==e||"object"!=typeof e)return e;var t=e,n=Et.call(e);if("[object Array]"===n){if(!ri(e)){t=[];for(var i=0,r=e.length;i<r;i++)t[i]=Fe(e[i])}}else if(or[n]){if(!ri(e)){var o=e.constructor;if(e.constructor.from)t=o.from(e);else for(t=new o(e.length),i=0,r=e.length;i<r;i++)t[i]=Fe(e[i])}}else if(!rr[n]&&!ri(e)&&!lt(e))for(var a in t={},e)e.hasOwnProperty(a)&&(t[a]=Fe(e[a]));return t}function rt(e,t,n){if(!Mt(t)||!Mt(e))return n?Fe(t):e;for(var i in t)if(t.hasOwnProperty(i)){var r=e[i],o=t[i];!Mt(o)||!Mt(r)||Ye(o)||Ye(r)||lt(o)||lt(r)||on(o)||on(r)||ri(o)||ri(r)?!n&&i in e||(e[i]=Fe(t[i])):rt(r,o,n)}return e}function Ie(e,t){for(var n=e[0],i=1,r=e.length;i<r;i++)n=rt(n,e[i],t);return n}function fe(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function De(e,t,n){for(var i in t)t.hasOwnProperty(i)&&(n?null!=t[i]:null==e[i])&&(e[i]=t[i]);return e}function Ee(){return Re.createCanvas()}function Ve(){return ze=ze||Ee().getContext("2d")}function Je(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n}return-1}function Ue(e,t){var n=e.prototype;function i(){}for(var r in i.prototype=t.prototype,e.prototype=new i,n)n.hasOwnProperty(r)&&(e.prototype[r]=n[r]);(e.prototype.constructor=e).superClass=t}function tt(e,t,n){De(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,n)}function Kt(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function re(e,t,n){if(e&&t)if(e.forEach&&e.forEach===ht)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)}function Ke(e,t,n){if(e&&t){if(e.map&&e.map===St)return e.map(t,n);for(var i=[],r=0,o=e.length;r<o;r++)i.push(t.call(n,e[r],r,e));return i}}function Tt(e,t,n,i){if(e&&t){if(e.reduce&&e.reduce===Dt)return e.reduce(t,n,i);for(var r=0,o=e.length;r<o;r++)n=t.call(i,n,e[r],r,e);return n}}function nt(e,t,n){if(e&&t){if(e.filter&&e.filter===be)return e.filter(t,n);for(var i=[],r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)&&i.push(e[r]);return i}}function gt(e,t,n){if(e&&t)for(var i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i,e))return e[i]}function ut(e,t){var n=Ze.call(arguments,2);return function(){return e.apply(t,n.concat(Ze.call(arguments)))}}function Lt(e){var t=Ze.call(arguments,1);return function(){return e.apply(this,t.concat(Ze.call(arguments)))}}function Ye(e){return"[object Array]"===Et.call(e)}function gn(e){return"function"==typeof e}function it(e){return"[object String]"===Et.call(e)}function Mt(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function on(e){return!!rr[Et.call(e)]}function xn(e){return!!or[Et.call(e)]}function lt(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function Wt(e){return e!=e}function an(e){for(var t=0,n=arguments.length;t<n;t++)if(null!=arguments[t])return arguments[t]}function _t(e,t){return e??t}function pn(e,t,n){return e??t??n}function Mn(){return Function.call.apply(Ze,arguments)}function Tn(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function ei(e,t){if(!e)throw new Error(t)}function Un(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}Re.createCanvas=function(){return document.createElement("canvas")};var $n="__ec_primitive__";function Bi(e){e[$n]=!0}function ri(e){return e[$n]}function Ei(e){var t=Ye(e);this.data={};var n=this;function i(r,o){t?n.set(r,o):n.set(o,r)}e instanceof Ei?e.each(i):e&&re(e,i)}function Ct(e){return new Ei(e)}function bt(e,t){for(var n=new e.constructor(e.length+t.length),i=0;i<e.length;i++)n[i]=e[i];var r=e.length;for(i=0;i<t.length;i++)n[i+r]=t[i];return n}function en(){}Ei.prototype={constructor:Ei,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){for(var n in void 0!==t&&(e=ut(e,t)),this.data)this.data.hasOwnProperty(n)&&e(this.data[n],n)},removeKey:function(e){delete this.data[e]}};var un=(Object.freeze||Object)({$override:Vt,clone:Fe,merge:rt,mergeAll:Ie,extend:fe,defaults:De,createCanvas:Ee,getContext:Ve,indexOf:Je,inherits:Ue,mixin:tt,isArrayLike:Kt,each:re,map:Ke,reduce:Tt,filter:nt,find:gt,bind:ut,curry:Lt,isArray:Ye,isFunction:gn,isString:it,isObject:Mt,isBuiltInObject:on,isTypedArray:xn,isDom:lt,eqNaN:Wt,retrieve:an,retrieve2:_t,retrieve3:pn,slice:Mn,normalizeCssArray:Tn,assert:ei,trim:Un,setAsPrimitive:Bi,isPrimitive:ri,createHashMap:Ct,concatArray:bt,noop:en}),Gt=typeof Float32Array>"u"?Array:Float32Array;function hn(e,t){var n=new Gt(2);return null==e&&(e=0),null==t&&(t=0),n[0]=e,n[1]=t,n}function wn(e,t){return e[0]=t[0],e[1]=t[1],e}function On(e){var t=new Gt(2);return t[0]=e[0],t[1]=e[1],t}function ai(e,t,n){return e[0]=t,e[1]=n,e}function zn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function It(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e}function qt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function ln(e){return Math.sqrt(cn(e))}function cn(e){return e[0]*e[0]+e[1]*e[1]}function bn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Nn(e,t){var n=ln(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function Bn(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Gn=Bn;function ui(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Li=ui;function ji(e,t,n,i){return e[0]=t[0]+i*(n[0]-t[0]),e[1]=t[1]+i*(n[1]-t[1]),e}function ti(e,t,n){var i=t[0],r=t[1];return e[0]=n[0]*i+n[2]*r+n[4],e[1]=n[1]*i+n[3]*r+n[5],e}function dr(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function qi(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var pr=(Object.freeze||Object)({create:hn,copy:wn,clone:On,set:ai,add:zn,scaleAndAdd:It,sub:qt,len:ln,length:ln,lenSquare:cn,lengthSquare:cn,mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:bn,normalize:Nn,distance:Bn,dist:Gn,distanceSquare:ui,distSquare:Li,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:ji,applyTransform:ti,min:dr,max:qi});function ar(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function Zi(e,t){return{target:e,topTarget:t&&t.topTarget}}ar.prototype={constructor:ar,_dragStart:function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent;t&&((this._draggingTarget=t).dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(Zi(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,i=e.offsetY,r=n-this._x,o=i-this._y;this._x=n,this._y=i,t.drift(r,o,e),this.dispatchToElement(Zi(t,e),"drag",e.event);var a=this.findHover(n,i,t).target,s=this._dropTarget;t!==(this._dropTarget=a)&&(s&&a!==s&&this.dispatchToElement(Zi(s,e),"dragleave",e.event),a&&a!==s&&this.dispatchToElement(Zi(a,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(Zi(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(Zi(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var Kr=Array.prototype.slice,ki=function(e){this._$handlers={},this._$eventProcessor=e};function zr(e,t,n,i,r,o){var h,f,a=e._$handlers;if("function"==typeof n&&(r=i,i=n,n=null),!i||!t)return e;f=e._$eventProcessor,null!=(h=n)&&f&&f.normalizeQuery&&(h=f.normalizeQuery(h)),n=h,a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===i)return e;var l={h:i,one:o,query:n,ctx:r||e,callAtLast:i.zrEventfulCallAtLast},u=a[t].length-1,c=a[t][u];return c&&c.callAtLast?a[t].splice(u,0,l):a[t].push(l),e}ki.prototype={constructor:ki,one:function(e,t,n,i){return zr(this,e,t,n,i,!0)},on:function(e,t,n,i){return zr(this,e,t,n,i,!1)},isSilent:function(e){var t=this._$handlers;return!t[e]||!t[e].length},off:function(e,t){var n=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var i=[],r=0,o=n[e].length;r<o;r++)n[e][r].h!==t&&i.push(n[e][r]);n[e]=i}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},trigger:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var i=arguments,r=i.length;3<r&&(i=Kr.call(i,1));for(var o=t.length,a=0;a<o;){var s=t[a];if(n&&n.filter&&null!=s.query&&!n.filter(e,s.query))a++;else{switch(r){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,i[1]);break;case 3:s.h.call(s.ctx,i[1],i[2]);break;default:s.h.apply(s.ctx,i)}s.one?(t.splice(a,1),o--):a++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this},triggerWithContext:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var i=arguments,r=i.length;4<r&&(i=Kr.call(i,1,i.length-1));for(var o=i[i.length-1],a=t.length,s=0;s<a;){var l=t[s];if(n&&n.filter&&null!=l.query&&!n.filter(e,l.query))s++;else{switch(r){case 1:l.h.call(o);break;case 2:l.h.call(o,i[1]);break;case 3:l.h.call(o,i[1],i[2]);break;default:l.h.apply(o,i)}l.one?(t.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this}};var Aa=Math.log(2);function wt(e,t,n,i,r,o){var a=i+"-"+r,s=e.length;if(o.hasOwnProperty(a))return o[a];if(1===t){var l=Math.round(Math.log((1<<s)-1&~r)/Aa);return e[n][l]}for(var u=i|1<<n,c=n+1;i&1<<c;)c++;for(var d=0,h=0,f=0;h<s;h++){var p=1<<h;p&r||(d+=(f%2?-1:1)*e[n][h]*wt(e,t-1,c,u,r|p,o),f++)}return o[a]=d}function Ht(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],i={},r=wt(n,8,0,0,0,i);if(0!==r){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==o[s]&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*wt(n,7,0===a?1:0,1<<a,1<<s,i)/r*t[a];return function(l,u,c){var d=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/d,l[1]=(u*o[3]+c*o[4]+o[5])/d}}}var mn="___zrEVENTSAVED",sn=[];function An(e,t,n,i,r){if(t.getBoundingClientRect&&He.domSupported&&!Wn(t)){var o=t[mn]||(t[mn]={}),a=function(s,l,u){for(var c=u?"invTrans":"trans",d=l[c],h=l.srcCoords,f=!0,p=[],_=[],v=0;v<4;v++){var E=s[v].getBoundingClientRect(),F=2*v,V=E.left,q=E.top;p.push(V,q),f=f&&h&&V===h[F]&&q===h[1+F],_.push(s[v].offsetLeft,s[v].offsetTop)}return f&&d?d:(l.srcCoords=p,l[c]=u?Ht(_,p):Ht(p,_))}(function(s,l){var u=l.markers;if(u)return u;u=l.markers=[];for(var c=["left","right"],d=["top","bottom"],h=0;h<4;h++){var f=document.createElement("div"),_=h%2,v=(h>>1)%2;f.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",c[_]+":0",d[v]+":0",c[1-_]+":auto",d[1-v]+":auto",""].join("!important;"),s.appendChild(f),u.push(f)}return u}(t,o),o,r);if(a)return a(e,n,i),!0}return!1}function Wn(e){return"CANVAS"===e.nodeName.toUpperCase()}var jn=typeof window<"u"&&!!window.addEventListener,qn=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Zn=[];function ni(e,t,n,i){return n=n||{},i||!He.canvasSupported?pi(e,t,n):He.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):pi(e,t,n),n}function pi(e,t,n){if(He.domSupported&&e.getBoundingClientRect){var i=t.clientX,r=t.clientY;if(Wn(e)){var o=e.getBoundingClientRect();return n.zrX=i-o.left,void(n.zrY=r-o.top)}if(An(Zn,e,i,r))return n.zrX=Zn[0],void(n.zrY=Zn[1])}n.zrX=n.zrY=0}function xi(e){return e||window.event}function Ai(e,t,n){if(null!=(t=xi(t)).zrX)return t;var i=t.type;if(i&&0<=i.indexOf("touch")){var r="touchend"!==i?t.targetTouches[0]:t.changedTouches[0];r&&ni(e,r,t,n)}else ni(e,t,t,n),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var o=t.button;return null==t.which&&void 0!==o&&qn.test(t.type)&&(t.which=1&o?1:2&o?3:4&o?2:0),t}function Yi(e,t,n,i){jn?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)}var Vi=jn?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function _r(e){return 2===e.which||3===e.which}function Er(){this._track=[]}function Vr(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}Er.prototype={constructor:Er,recognize:function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,n){var i=e.touches;if(i){for(var r={points:[],touches:[],target:t,event:e},o=0,a=i.length;o<a;o++){var s=i[o],l=ni(n,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},_recognize:function(e){for(var t in Lr)if(Lr.hasOwnProperty(t)){var n=Lr[t](this._track,e);if(n)return n}}};var Lr={pinch:function(e,t){var s,n=e.length;if(n){var i=(e[n-1]||{}).points,r=(e[n-2]||{}).points||i;if(r&&1<r.length&&i&&1<i.length){var o=Vr(i)/Vr(r);isFinite(o)||(o=1),t.pinchScale=o;var a=[((s=i)[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2];return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function Co(){Vi(this.event)}function lu(){}function ia(e,t,n,i){ki.call(this),this.storage=e,this.painter=t,this.painterRoot=i,n=n||new lu,this.proxy=null,this._hovered={},ar.call(this),this.setHandlerProxy(n)}lu.prototype.dispose=function(){};var Kc=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function Jc(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var i,r=e;r;){if(r.clipPath&&!r.clipPath.contain(t,n))return!1;r.silent&&(i=!0),r=r.parent}return!i||"silent"}return!1}function uu(e,t,n){var i=e.painter;return t<0||t>i.getWidth()||n<0||n>i.getHeight()}ia.prototype={constructor:ia,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(re(Kc,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},mousemove:function(e){var t=e.zrX,n=e.zrY,i=uu(this,t,n),r=this._hovered,o=r.target;o&&!o.__zr&&(o=(r=this.findHover(r.x,r.y)).target);var a=this._hovered=i?{x:t,y:n}:this.findHover(t,n),s=a.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(r,"mouseout",e),this.dispatchToElement(a,"mousemove",e),s&&s!==o&&this.dispatchToElement(a,"mouseover",e)},mouseout:function(e){var t=e.zrEventControl,n=e.zrIsToLocalDOM;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&(n||this.trigger("globalout",{type:"globalout",event:e}))},resize:function(e){this._hovered={}},dispatch:function(e,t){var n=this[e];n&&n.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,n){var s,l,i=(e=e||{}).target;if(!i||!i.silent){for(var r="on"+t,o={type:t,event:l=n,target:(s=e).target,topTarget:s.topTarget,cancelBubble:!1,offsetX:l.zrX,offsetY:l.zrY,gestureEvent:l.gestureEvent,pinchX:l.pinchX,pinchY:l.pinchY,pinchScale:l.pinchScale,wheelDelta:l.zrDelta,zrByTouch:l.zrByTouch,which:l.which,stop:Co};i&&(i[r]&&(o.cancelBubble=i[r].call(i,o)),i.trigger(t,o),i=i.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(t,o),this.painter&&this.painter.eachOtherLayer(function(a){"function"==typeof a[r]&&a[r].call(a,o),a.trigger&&a.trigger(t,o)}))}},findHover:function(e,t,n){for(var i=this.storage.getDisplayList(),r={x:e,y:t},o=i.length-1;0<=o;o--){var a;if(i[o]!==n&&!i[o].ignore&&(a=Jc(i[o],e,t))&&(r.topTarget||(r.topTarget=i[o]),"silent"!==a)){r.target=i[o];break}}return r},processGesture:function(e,t){this._gestureMgr||(this._gestureMgr=new Er);var n=this._gestureMgr;"start"===t&&n.clear();var i=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),i){var r=i.type;e.gestureEvent=r,this.dispatchToElement({target:i.target},r,i.event)}}},re(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){ia.prototype[e]=function(t){var n,i,r=t.zrX,o=t.zrY,a=uu(this,r,o);if("mouseup"===e&&a||(i=(n=this.findHover(r,o)).target),"mousedown"===e)this._downEl=i,this._downPoint=[t.zrX,t.zrY],this._upEl=i;else if("mouseup"===e)this._upEl=i;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||4<Gn(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(n,e,t)}}),tt(ia,ki),tt(ia,ar);var cu=typeof Float32Array>"u"?Array:Float32Array;function gr(){var e=new cu(6);return Ro(e),e}function Ro(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function ra(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function lo(e,t,n){var r=t[1]*n[0]+t[3]*n[1],o=t[0]*n[2]+t[2]*n[3],a=t[1]*n[2]+t[3]*n[3],s=t[0]*n[4]+t[2]*n[5]+t[4],l=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=r,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function wr(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function So(e,t,n){var i=t[0],r=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=i*c+a*u,e[1]=-i*u+a*c,e[2]=r*c+s*u,e[3]=-r*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function oa(e,t,n){var i=n[0],r=n[1];return e[0]=t[0]*i,e[1]=t[1]*r,e[2]=t[2]*i,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*r,e}function Ia(e,t){var n=t[0],i=t[2],r=t[4],o=t[1],a=t[3],s=t[5],l=n*a-o*i;return l?(e[0]=a*(l=1/l),e[1]=-o*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-a*r)*l,e[5]=(o*r-n*s)*l,e):null}function du(e){var t=gr();return ra(t,e),t}var Qc=(Object.freeze||Object)({create:gr,identity:Ro,copy:ra,mul:lo,translate:wr,rotate:So,scale:oa,invert:Ia,clone:du}),rl=Ro;function Po(e){return 5e-5<e||e<-5e-5}var Cr=function(e){(e=e||{}).position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},mr=Cr.prototype;mr.transform=null,mr.needLocalTransform=function(){return Po(this.rotation)||Po(this.position[0])||Po(this.position[1])||Po(this.scale[0]-1)||Po(this.scale[1]-1)};var uo=[];mr.updateTransform=function(){var e=this.parent,t=e&&e.transform,n=this.needLocalTransform(),i=this.transform;if(n||t){i=i||gr(),n?this.getLocalTransform(i):rl(i),t&&(n?lo(i,e.transform,i):ra(i,e.transform)),this.transform=i;var r=this.globalScaleRatio;if(null!=r&&1!==r){this.getGlobalScale(uo);var o=uo[0]<0?-1:1,a=uo[1]<0?-1:1,s=((uo[0]-o)*r+o)/uo[0]||0,l=((uo[1]-a)*r+a)/uo[1]||0;i[0]*=s,i[1]*=s,i[2]*=l,i[3]*=l}this.invTransform=this.invTransform||gr(),Ia(this.invTransform,i)}else i&&rl(i)},mr.getLocalTransform=function(e){return Cr.getLocalTransform(this,e)},mr.setTransform=function(e){var t=this.transform,n=e.dpr||1;t?e.setTransform(n*t[0],n*t[1],n*t[2],n*t[3],n*t[4],n*t[5]):e.setTransform(n,0,0,n,0,0)},mr.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var aa=[],ls=gr();mr.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],i=this.position,r=this.scale;Po(t-1)&&(t=Math.sqrt(t)),Po(n-1)&&(n=Math.sqrt(n)),e[0]<0&&(t=-t),e[3]<0&&(n=-n),i[0]=e[4],i[1]=e[5],r[0]=t,r[1]=n,this.rotation=Math.atan2(-e[1]/n,e[0]/t)}},mr.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(lo(aa,e.invTransform,t),t=aa);var n=this.origin;n&&(n[0]||n[1])&&(ls[4]=n[0],ls[5]=n[1],lo(aa,t,ls),aa[4]-=n[0],aa[5]-=n[1],t=aa),this.setLocalTransform(t)}},mr.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1])):(e[0]=1,e[1]=1),e},mr.transformCoordToLocal=function(e,t){var n=[e,t],i=this.invTransform;return i&&ti(n,n,i),n},mr.transformCoordToGlobal=function(e,t){var n=[e,t],i=this.transform;return i&&ti(n,n,i),n},Cr.getLocalTransform=function(e,t){rl(t=t||[]);var n=e.origin,i=e.scale||[1,1],r=e.rotation||0,o=e.position||[0,0];return n&&(t[4]-=n[0],t[5]-=n[1]),oa(t,t,i),r&&So(t,t,r),n&&(t[4]+=n[0],t[5]+=n[1]),t[4]+=o[0],t[5]+=o[1],t};var sa={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)},bounceIn:function(e){return 1-sa.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*sa.bounceIn(2*e):.5*sa.bounceOut(2*e-1)+.5}};function ol(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}function al(){this.head=null,this.tail=null,this._len=0}ol.prototype={constructor:ol,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var n=(e-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,r="string"==typeof i?sa[i]:i,o="function"==typeof r?r(n):n;return this.fire("frame",o),1===n?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){this._startTime=e-(e-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){this[e="on"+e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Da=al.prototype;function us(e){this._list=new al,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null}Da.insert=function(e){var t=new hu(e);return this.insertEntry(t),t},Da.insertEntry=function(e){this.head?((this.tail.next=e).prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},Da.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},Da.len=function(){return this._len},Da.clear=function(){this.head=this.tail=null,this._len=0};var hu=function(e){this.value=e},cs=us.prototype;cs.put=function(e,t){var n=this._list,i=this._map,r=null;if(null==i[e]){var o=n.len(),a=this._lastRemovedEntry;if(o>=this._maxSize&&0<o){var s=n.head;n.remove(s),delete i[s.key],r=s.value,this._lastRemovedEntry=s}a?a.value=t:a=new hu(t),a.key=e,n.insertEntry(a),i[e]=a}return r},cs.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},cs.clear=function(){this._list.clear(),this._map={}};var fu={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Rr(e){return(e=Math.round(e))<0?0:255<e?255:e}function la(e){return e<0?0:1<e?1:e}function sl(e){return e.length&&"%"===e.charAt(e.length-1)?Rr(parseFloat(e)/100*255):Rr(parseInt(e,10))}function ua(e){return e.length&&"%"===e.charAt(e.length-1)?la(parseFloat(e)/100):la(parseFloat(e))}function ll(e,t,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function Mo(e,t,n){return e+(t-e)*n}function Hr(e,t,n,i,r){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e}function ds(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var pu=new us(20),hs=null;function ca(e,t){hs&&ds(hs,t),hs=pu.put(e,hs||t.slice())}function Sr(e,t){if(e){t=t||[];var n=pu.get(e);if(n)return ds(t,n);var i,r=(e+="").replace(/ /g,"").toLowerCase();if(r in fu)return ds(t,fu[r]),ca(e,t),t;if("#"===r.charAt(0))return 4===r.length?0<=(i=parseInt(r.substr(1),16))&&i<=4095?(Hr(t,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),ca(e,t),t):void Hr(t,0,0,0,1):7===r.length?0<=(i=parseInt(r.substr(1),16))&&i<=16777215?(Hr(t,(16711680&i)>>16,(65280&i)>>8,255&i,1),ca(e,t),t):void Hr(t,0,0,0,1):void 0;var o=r.indexOf("("),a=r.indexOf(")");if(-1!==o&&a+1===r.length){var s=r.substr(0,o),l=r.substr(o+1,a-(o+1)).split(","),u=1;switch(s){case"rgba":if(4!==l.length)return void Hr(t,0,0,0,1);u=ua(l.pop());case"rgb":return 3!==l.length?void Hr(t,0,0,0,1):(Hr(t,sl(l[0]),sl(l[1]),sl(l[2]),u),ca(e,t),t);case"hsla":return 4!==l.length?void Hr(t,0,0,0,1):(l[3]=ua(l[3]),ul(l,t),ca(e,t),t);case"hsl":return 3!==l.length?void Hr(t,0,0,0,1):(ul(l,t),ca(e,t),t);default:return}}Hr(t,0,0,0,1)}}function ul(e,t){var n=(parseFloat(e[0])%360+360)%360/360,i=ua(e[1]),r=ua(e[2]),o=r<=.5?r*(i+1):r+i-r*i,a=2*r-o;return Hr(t=t||[],Rr(255*ll(a,o,n+1/3)),Rr(255*ll(a,o,n)),Rr(255*ll(a,o,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function gu(e,t){var n=Sr(e);if(n){for(var i=0;i<3;i++)n[i]=t<0?n[i]*(1-t)|0:(255-n[i])*t+n[i]|0,255<n[i]?n[i]=255:e[i]<0&&(n[i]=0);return co(n,4===n.length?"rgba":"rgb")}}function fs(e){var t=Sr(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function da(e,t,n){if(t&&t.length&&0<=e&&e<=1){n=n||[];var i=e*(t.length-1),r=Math.floor(i),o=Math.ceil(i),a=t[r],s=t[o],l=i-r;return n[0]=Rr(Mo(a[0],s[0],l)),n[1]=Rr(Mo(a[1],s[1],l)),n[2]=Rr(Mo(a[2],s[2],l)),n[3]=la(Mo(a[3],s[3],l)),n}}function dl(e,t,n){if(t&&t.length&&0<=e&&e<=1){var i=e*(t.length-1),r=Math.floor(i),o=Math.ceil(i),a=Sr(t[r]),s=Sr(t[o]),l=i-r,u=co([Rr(Mo(a[0],s[0],l)),Rr(Mo(a[1],s[1],l)),Rr(Mo(a[2],s[2],l)),la(Mo(a[3],s[3],l))],"rgba");return n?{color:u,leftIndex:r,rightIndex:o,value:i}:u}}function Bo(e,t,n,i){if(e=Sr(e))return e=function(r){if(r){var o,a,s=r[0]/255,l=r[1]/255,u=r[2]/255,c=Math.min(s,l,u),d=Math.max(s,l,u),h=d-c,f=(d+c)/2;if(0==h)a=o=0;else{a=f<.5?h/(d+c):h/(2-d-c);var p=((d-s)/6+h/2)/h,_=((d-l)/6+h/2)/h,v=((d-u)/6+h/2)/h;s===d?o=v-_:l===d?o=1/3+p-v:u===d&&(o=2/3+_-p),o<0&&(o+=1),1<o&&(o-=1)}var E=[360*o,a,f];return null!=r[3]&&E.push(r[3]),E}}(e),null!=t&&(e[0]=function(r){return(r=Math.round(r))<0?0:360<r?360:r}(t)),null!=n&&(e[1]=ua(n)),null!=i&&(e[2]=ua(i)),co(ul(e),"rgba")}function ps(e,t){if((e=Sr(e))&&null!=t)return e[3]=la(t),co(e,"rgba")}function co(e,t){if(e&&e.length){var n=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(n+=","+e[3]),t+"("+n+")"}}var ed=(Object.freeze||Object)({parse:Sr,lift:gu,toHex:fs,fastLerp:da,fastMapToColor:da,lerp:dl,mapToColor:dl,modifyHSL:Bo,modifyAlpha:ps,stringify:co}),hl=Array.prototype.slice;function td(e,t){return e[t]}function nd(e,t,n){e[t]=n}function fl(e,t,n){return(t-e)*n+e}function vu(e,t,n){return.5<n?t:e}function yu(e,t,n,i,r){var o=e.length;if(1===r)for(var a=0;a<o;a++)i[a]=fl(e[a],t[a],n);else{var s=o&&e[0].length;for(a=0;a<o;a++)for(var l=0;l<s;l++)i[a][l]=fl(e[a][l],t[a][l],n)}}function xu(e,t,n){var i=e.length,r=t.length;if(i!==r)if(r<i)e.length=r;else for(var o=i;o<r;o++)e.push(1===n?t[o]:hl.call(t[o]));var a=e[0]&&e[0].length;for(o=0;o<e.length;o++)if(1===n)isNaN(e[o])&&(e[o]=t[o]);else for(var s=0;s<a;s++)isNaN(e[o][s])&&(e[o][s]=t[o][s])}function Lf(e,t,n){if(e===t)return!0;var i=e.length;if(i!==t.length)return!1;if(1===n){for(var r=0;r<i;r++)if(e[r]!==t[r])return!1}else{var o=e[0].length;for(r=0;r<i;r++)for(var a=0;a<o;a++)if(e[r][a]!==t[r][a])return!1}return!0}function $(e,t,n,i,r,o,a,s,l){var u=e.length;if(1===l)for(var c=0;c<u;c++)s[c]=W(e[c],t[c],n[c],i[c],r,o,a);else{var d=e[0].length;for(c=0;c<u;c++)for(var h=0;h<d;h++)s[c][h]=W(e[c][h],t[c][h],n[c][h],i[c][h],r,o,a)}}function W(e,t,n,i,r,o,a){var s=.5*(n-e),l=.5*(i-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*r+t}function R(e){if(Kt(e)){var t=e.length;if(Kt(e[0])){for(var n=[],i=0;i<t;i++)n.push(hl.call(e[i]));return n}return hl.call(e)}return e}function k(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function b(e,t,n,i,r,o){var Ge,Pe,a=e._getter,s=e._setter,l="spline"===t,u=i.length;if(u){var c,d=Kt(i[0].value),h=!1,f=!1,p=d?Kt((Pe=(Ge=i)[Ge.length-1].value)&&Pe[0])?2:1:0;i.sort(function(Ge,Pe){return Ge.time-Pe.time}),c=i[u-1].time;for(var _=[],v=[],E=i[0].value,F=!0,V=0;V<u;V++){_.push(i[V].time/c);var q=i[V].value;if(d&&Lf(q,E,p)||!d&&q===E||(F=!1),"string"==typeof(E=q)){var j=Sr(q);j?(q=j,h=!0):f=!0}v.push(q)}if(o||!F){var X=v[u-1];for(V=0;V<u-1;V++)d?xu(v[V],X,p):!isNaN(v[V])||isNaN(X)||f||h||(v[V]=X);d&&xu(a(e._target,r),X,p);var Y,Q,oe,ce,ge,we=0,Ce=0;if(h)var Ae=[0,0,0,0];var Oe=new ol({target:e._target,life:c,loop:e._loop,delay:e._delay,onframe:function(Ge,Pe){var st;if(Pe<0)st=0;else if(Pe<Ce){for(st=Math.min(we+1,u-1);0<=st&&!(_[st]<=Pe);st--);st=Math.min(st,u-2)}else{for(st=we;st<u&&!(_[st]>Pe);st++);st=Math.min(st-1,u-2)}Ce=Pe;var Pt=_[(we=st)+1]-_[st];if(0!=Pt)if(Y=(Pe-_[st])/Pt,l)if(oe=v[st],Q=v[0===st?st:st-1],ce=v[u-2<st?u-1:st+1],ge=v[u-3<st?u-1:st+2],d)$(Q,oe,ce,ge,Y,Y*Y,Y*Y*Y,a(Ge,r),p);else{if(h)Ft=$(Q,oe,ce,ge,Y,Y*Y,Y*Y*Y,Ae,1),Ft=k(Ae);else{if(f)return vu(oe,ce,Y);Ft=W(Q,oe,ce,ge,Y,Y*Y,Y*Y*Y)}s(Ge,r,Ft)}else if(d)yu(v[st],v[st+1],Y,a(Ge,r),p);else{var Ft;if(h)yu(v[st],v[st+1],Y,Ae,1),Ft=k(Ae);else{if(f)return vu(v[st],v[st+1],Y);Ft=fl(v[st],v[st+1],Y)}s(Ge,r,Ft)}},ondestroy:n});return t&&"spline"!==t&&(Oe.easing=t),Oe}}}function S(e,t,n,i){this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||td,this._setter=i||nd,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}S.prototype={when:function(e,t){var n=this._tracks;for(var i in t)if(t.hasOwnProperty(i)){if(!n[i]){n[i]=[];var r=this._getter(this._target,i);if(null==r)continue;0!==e&&n[i].push({time:0,value:R(r)})}n[i].push({time:e,value:t[i]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,n=0;n<t;n++)e[n].call(this)},start:function(e,t){function n(){--o||r._doneCallback()}var i,r=this,o=0;for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=b(this,e,n,this._tracks[a],a,t);s&&(this._clipList.push(s),o++,this.animation&&this.animation.addClip(s),i=s)}if(i){var l=i.onframe;i.onframe=function(u,c){l(u,c);for(var d=0;d<r._onframeList.length;d++)r._onframeList[d](u,c)}}return o||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,n=this.animation,i=0;i<t.length;i++){var r=t[i];e&&r.onframe(this._target,1),n&&n.removeClip(r)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var y=1;typeof window<"u"&&(y=Math.max(window.devicePixelRatio||1,1));var x=y;function P(){this.animators=[]}function I(e,t,n,i,r,o,a,s){it(i)?(o=r,r=i,i=0):gn(r)?(o=r,r="linear",i=0):gn(i)?(o=i,i=0):n=gn(n)?(o=n,500):n||500,e.stopAnimation(),function h(f,p,_,v,E,F,V){var q={},j=0;for(var X in v)v.hasOwnProperty(X)&&(null!=_[X]?Mt(v[X])&&!Kt(v[X])?h(f,p?p+"."+X:X,_[X],v[X],E,F,V):(V?(q[X]=_[X],L(f,p,X,v[X])):q[X]=v[X],j++):null==v[X]||V||L(f,p,X,v[X]));0<j&&f.animate(p,!1).when(E??500,q).delay(F||0)}(e,"",e,t,n,i,s);var l=e.animators.slice(),u=l.length;function c(){--u||o&&o()}u||o&&o();for(var d=0;d<l.length;d++)l[d].done(c).start(r,a)}function L(e,t,n,i){if(t){var r={};r[t]={},r[t][n]=i,e.attr(r)}else e.attr(n,i)}P.prototype={constructor:P,animate:function(e,t){var n,i=!1,r=this,o=this.__zr;if(e){var a=e.split("."),s=r;i="shape"===a[0];for(var l=0,u=a.length;l<u;l++)s=s&&s[a[l]];s&&(n=s)}else n=r;if(n){var c=r.animators,d=new S(n,t);return d.during(function(h){r.dirty(i)}).done(function(){c.splice(Je(c,d),1)}),c.push(d),o&&o.animation.addAnimator(d),d}},stopAnimation:function(e){for(var t=this.animators,n=t.length,i=0;i<n;i++)t[i].stop(e);return t.length=0,this},animateTo:function(e,t,n,i,r,o){I(this,e,t,n,i,r,o)},animateFrom:function(e,t,n,i,r,o){I(this,e,t,n,i,r,o,!0)}};var B=function(e){Cr.call(this,e),ki.call(this,e),P.call(this,e),this.id=e.id||_i()};B.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=e,n[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var n=this[e];(n=n||(this[e]=[]))[0]=t[0],n[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(Mt(e))for(var n in e)e.hasOwnProperty(n)&&this.attrKV(n,e[n]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),(this.clipPath=e).__zr=t,(e.__clipTarget=this).dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},tt(B,P),tt(B,Cr),tt(B,ki);var D,z,N,G,M=ti,A=Math.min,C=Math.max;function g(e,t,n,i){n<0&&(e+=n,n=-n),i<0&&(t+=i,i=-i),this.x=e,this.y=t,this.width=n,this.height=i}g.prototype={constructor:g,union:function(e){var t=A(e.x,this.x),n=A(e.y,this.y);this.width=C(e.x+e.width,this.x+this.width)-t,this.height=C(e.y+e.height,this.y+this.height)-n,this.x=t,this.y=n},applyTransform:(D=[],z=[],N=[],G=[],function(e){if(e){D[0]=N[0]=this.x,D[1]=G[1]=this.y,z[0]=G[0]=this.x+this.width,z[1]=N[1]=this.y+this.height,M(D,D,e),M(z,z,e),M(N,N,e),M(G,G,e),this.x=A(D[0],z[0],N[0],G[0]),this.y=A(D[1],z[1],N[1],G[1]);var t=C(D[0],z[0],N[0],G[0]),n=C(D[1],z[1],N[1],G[1]);this.width=t-this.x,this.height=n-this.y}}),calculateTransform:function(e){var t=e.width/this.width,n=e.height/this.height,i=gr();return wr(i,i,[-this.x,-this.y]),oa(i,i,[t,n]),wr(i,i,[e.x,e.y]),i},intersect:function(e){if(!e)return!1;e instanceof g||(e=g.create(e));var t=this;return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)},contain:function(e,t){var n=this;return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},clone:function(){return new g(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},g.create=function(e){return new g(e.x,e.y,e.width,e.height)};var m=function(e){for(var t in B.call(this,e=e||{}),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};function H(e,t,n,i){var r=t+1;if(r===n)return 1;if(i(e[r++],e[t])<0){for(;r<n&&i(e[r],e[r-1])<0;)r++;!function(o,a,s){for(s--;a<s;){var l=o[a];o[a++]=o[s],o[s--]=l}}(e,t,r)}else for(;r<n&&0<=i(e[r],e[r-1]);)r++;return r-t}function Z(e,t,n,i,r){for(i===t&&i++;i<n;i++){for(var o,a=e[i],s=t,l=i;s<l;)r(a,e[o=s+l>>>1])<0?l=o:s=1+o;var u=i-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;0<u;)e[s+u]=e[s+u-1],u--}e[s]=a}}function J(e,t,n,i,r,o){var a=0,s=0,l=1;if(0<o(e,t[n+r])){for(s=i-r;l<s&&0<o(e,t[n+r+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=r,l+=r}else{for(s=r+1;l<s&&o(e,t[n+r-l])<=0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var u=a;a=r-l,l=r-u}for(a++;a<l;){var c=a+(l-a>>>1);0<o(e,t[n+c])?a=c+1:l=c}return l}function de(e,t,n,i,r,o){var a=0,s=0,l=1;if(o(e,t[n+r])<0){for(s=r+1;l<s&&o(e,t[n+r-l])<0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var u=a;a=r-l,l=r-u}else{for(s=i-r;l<s&&0<=o(e,t[n+r+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=r,l+=r}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[n+c])<0?l=c:a=c+1}return l}function se(e,t){var n,i,r=7,o=0,a=[];function s(l){var u=n[l],c=i[l],d=n[l+1],h=i[l+1];i[l]=c+h,l===o-3&&(n[l+1]=n[l+2],i[l+1]=i[l+2]),o--;var f=de(e[d],e,u,c,0,t);u+=f,0!=(c-=f)&&0!==(h=J(e[u+c-1],e,d,h,h-1,t))&&(c<=h?function(p,_,v,E){var F=0;for(F=0;F<_;F++)a[F]=e[p+F];var V=0,q=v,j=p;if(e[j++]=e[q++],0!=--E){if(1===_){for(F=0;F<E;F++)e[j+F]=e[q+F];return e[j+E]=a[V]}for(var X,Y,Q,oe=r;;){Y=X=0,Q=!1;do{if(t(e[q],a[V])<0){if(e[j++]=e[q++],Y++,(X=0)==--E){Q=!0;break}}else if(e[j++]=a[V++],X++,Y=0,1==--_){Q=!0;break}}while((X|Y)<oe);if(Q)break;do{if(0!==(X=de(e[q],a,V,_,0,t))){for(F=0;F<X;F++)e[j+F]=a[V+F];if(j+=X,V+=X,(_-=X)<=1){Q=!0;break}}if(e[j++]=e[q++],0==--E){Q=!0;break}if(0!==(Y=J(a[V],e,q,E,0,t))){for(F=0;F<Y;F++)e[j+F]=e[q+F];if(j+=Y,q+=Y,0==(E-=Y)){Q=!0;break}}if(e[j++]=a[V++],1==--_){Q=!0;break}oe--}while(7<=X||7<=Y);if(Q)break;oe<0&&(oe=0),oe+=2}if((r=oe)<1&&(r=1),1===_){for(F=0;F<E;F++)e[j+F]=e[q+F];e[j+E]=a[V]}else{if(0===_)throw new Error;for(F=0;F<_;F++)e[j+F]=a[V+F]}}else for(F=0;F<_;F++)e[j+F]=a[V+F]}(u,c,d,h):function(p,_,v,E){var F=0;for(F=0;F<E;F++)a[F]=e[v+F];var V=p+_-1,q=E-1,j=v+E-1,X=0,Y=0;if(e[j--]=e[V--],0!=--_){if(1===E){for(Y=1+(j-=_),X=1+(V-=_),F=_-1;0<=F;F--)e[Y+F]=e[X+F];return e[j]=a[q]}for(var Q=r;;){var oe=0,ce=0,ge=!1;do{if(t(a[q],e[V])<0){if(e[j--]=e[V--],oe++,(ce=0)==--_){ge=!0;break}}else if(e[j--]=a[q--],ce++,oe=0,1==--E){ge=!0;break}}while((oe|ce)<Q);if(ge)break;do{if(0!=(oe=_-de(a[q],e,p,_,_-1,t))){for(_-=oe,Y=1+(j-=oe),X=1+(V-=oe),F=oe-1;0<=F;F--)e[Y+F]=e[X+F];if(0===_){ge=!0;break}}if(e[j--]=a[q--],1==--E){ge=!0;break}if(0!=(ce=E-J(e[V],a,0,E,E-1,t))){for(E-=ce,Y=1+(j-=ce),X=1+(q-=ce),F=0;F<ce;F++)e[Y+F]=a[X+F];if(E<=1){ge=!0;break}}if(e[j--]=e[V--],0==--_){ge=!0;break}Q--}while(7<=oe||7<=ce);if(ge)break;Q<0&&(Q=0),Q+=2}if((r=Q)<1&&(r=1),1===E){for(Y=1+(j-=_),X=1+(V-=_),F=_-1;0<=F;F--)e[Y+F]=e[X+F];e[j]=a[q]}else{if(0===E)throw new Error;for(X=j-(E-1),F=0;F<E;F++)e[X+F]=a[F]}}else for(X=j-(E-1),F=0;F<E;F++)e[X+F]=a[F]}(u,c,d,h))}n=[],i=[],this.mergeRuns=function(){for(;1<o;){var l=o-2;if(1<=l&&i[l-1]<=i[l]+i[l+1]||2<=l&&i[l-2]<=i[l]+i[l-1])i[l-1]<i[l+1]&&l--;else if(i[l]>i[l+1])break;s(l)}},this.forceMergeRuns=function(){for(;1<o;){var l=o-2;0<l&&i[l-1]<i[l+1]&&l--,s(l)}},this.pushRun=function(l,u){n[o]=l,i[o]=u,o+=1}}function ae(e,t,n,i){var r=(i=i||e.length)-(n=n||0);if(!(r<2)){var o=0;if(r<32)Z(e,n,i,n+(o=H(e,n,i,t)),t);else{var a=new se(e,t),s=function(u){for(var c=0;32<=u;)c|=1&u,u>>=1;return u+c}(r);do{if((o=H(e,n,i,t))<s){var l=r;s<l&&(l=s),Z(e,n,n+l,n+o,t),o=l}a.pushRun(n,o),a.mergeRuns(),r-=o,n+=o}while(0!==r);a.forceMergeRuns()}}}function ue(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}function le(){this._roots=[],this._displayList=[],this._displayListLen=0}m.prototype={constructor:m,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,i=n.indexOf(t);0<=i&&(n.splice(i,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e);var t=(e.parent=this).__storage,n=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof m&&e.addChildrenToStorage(t)),n&&n.refresh()},remove:function(e){var t=this.__zr,n=this.__storage,i=this._children,r=Je(i,e);return r<0||(i.splice(r,1),e.parent=null,n&&(n.delFromStorage(e),e instanceof m&&e.delChildrenFromStorage(n)),t&&t.refresh()),this},removeAll:function(){var e,t,n=this._children,i=this.__storage;for(t=0;t<n.length;t++)e=n[t],i&&(i.delFromStorage(e),e instanceof m&&e.delChildrenFromStorage(i)),e.parent=null;return n.length=0,this},eachChild:function(e,t){for(var n=this._children,i=0;i<n.length;i++)e.call(t,n[i],i);return this},traverse:function(e,t){for(var n=0;n<this._children.length;n++){var i=this._children[n];e.call(t,i),"group"===i.type&&i.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToStorage(n),n instanceof m&&n.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromStorage(n),n instanceof m&&n.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,n=new g(0,0,0,0),i=e||this._children,r=[],o=0;o<i.length;o++){var a=i[o];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(r);l?(n.copy(s),n.applyTransform(l),(t=t||n.clone()).union(n)):(t=t||s.clone()).union(s)}}return t||n}},Ue(m,B),le.prototype={constructor:le,traverse:function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,i=0,r=t.length;i<r;i++)this._updateAndAddDisplayable(t[i],null,e);n.length=this._displayListLen,He.canvasSupported&&ae(n,ue)},_updateAndAddDisplayable:function(e,t,n){if(!e.ignore||n){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var i=e.clipPath;if(i){t=t?t.slice():[];for(var r=i,o=e;r;)r.parent=o,r.updateTransform(),t.push(r),r=(o=r).clipPath}if(e.isGroup){for(var a=e._children,s=0;s<a.length;s++){var l=a[s];e.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,t,n)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof m&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof m&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var i=e.length;t<i;t++)this.delRoot(e[t])}else{var r=Je(this._roots,e);0<=r&&(this.delFromStorage(e),this._roots.splice(r,1),e instanceof m&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:ue};var ve={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},ye=function(e,t,n){return ve.hasOwnProperty(t)?n*e.dpr:n},he=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],xe=function(e){this.extendFrom(e,!1)};function Me(e,t,n){var i=t.x??0,r=t.x2??1,o=t.y??0,a=t.y2??0;return t.global||(i=i*n.width+n.x,r=r*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),i=isNaN(i)?0:i,r=isNaN(r)?1:r,o=isNaN(o)?0:o,a=isNaN(a)?0:a,e.createLinearGradient(i,o,r,a)}function ot(e,t,n){var i=n.width,r=n.height,o=Math.min(i,r),a=t.x??.5,s=t.y??.5,l=t.r??.5;return t.global||(a=a*i+n.x,s=s*r+n.y,l*=o),e.createRadialGradient(a,s,0,a,s,l)}for(var At=xe.prototype={constructor:xe,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,n){var i=this,r=n&&n.style,o=!r||1!==e.__attrCachedBy;e.__attrCachedBy=1;for(var a=0;a<he.length;a++){var s=he[a],l=s[0];!o&&i[l]===r[l]||(e[l]=ye(e,l,i[l]||s[1]))}!o&&i.fill===r.fill||(e.fillStyle=i.fill),!o&&i.stroke===r.stroke||(e.strokeStyle=i.stroke),!o&&i.opacity===r.opacity||(e.globalAlpha=i.opacity??1),!o&&i.blend===r.blend||(e.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()&&(e.lineWidth=i.lineWidth/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1))},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&0<this.lineWidth},extendFrom:function(e,t){if(e)for(var n in e)!e.hasOwnProperty(n)||!0!==t&&(!1===t?this.hasOwnProperty(n):null==e[n])||(this[n]=e[n])},set:function(e,t){"string"==typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,n){for(var i=("radial"===t.type?ot:Me)(e,t,n),r=t.colorStops,o=0;o<r.length;o++)i.addColorStop(r[o].offset,r[o].color);return i}},Ot=0;Ot<he.length;Ot++){var Jt=he[Ot];Jt[0]in At||(At[Jt[0]]=Jt[1])}function zt(e,t){this.image=e,this.repeat=t,this.type="pattern"}function Se(){return!1}function ne(e,t,n){var i=Ee(),r=t.getWidth(),o=t.getHeight(),a=i.style;return a&&(a.position="absolute",a.left=0,a.top=0,a.width=r+"px",a.height=o+"px",i.setAttribute("data-zr-dom-id",e)),i.width=r*n,i.height=o*n,i}function ee(e,t,n){var i;n=n||x,"string"==typeof e?i=ne(e,t,n):Mt(e)&&(e=(i=e).id),this.id=e;var r=(this.dom=i).style;r&&(i.onselectstart=Se,r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.padding=0,r.margin=0,r["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}xe.getGradient=At.getGradient,ee.prototype={constructor:ee,__dirty:!0,__used:!(zt.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=ne("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},resize:function(e,t){var n=this.dpr,i=this.dom,r=i.style,o=this.domBack;r&&(r.width=e+"px",r.height=t+"px"),i.width=e*n,i.height=t*n,o&&(o.width=e*n,o.height=t*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(e,t){var n,i=this.dom,r=this.ctx,o=i.width,a=i.height,s=(t=t||this.clearColor,this.motionBlur&&!e),l=this.lastFrameAlpha,u=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,o/u,a/u)),r.clearRect(0,0,o,a),t&&"transparent"!==t&&(t.colorStops?(n=t.__canvasGradient||xe.getGradient(r,t,{x:0,y:0,width:o,height:a}),t.__canvasGradient=n):t.image&&(n=zt.prototype.getCanvasPattern.call(t,r)),r.save(),r.fillStyle=n||t,r.fillRect(0,0,o,a),r.restore()),s){var c=this.domBack;r.save(),r.globalAlpha=l,r.drawImage(c,0,0,o,a),r.restore()}}};var me=typeof window<"u"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},ke=new us(50);function qe(e){if("string"!=typeof e)return e;var t=ke.get(e);return t&&t.image}function Qe(e,t,n,i,r){if(e){if("string"!=typeof e)return e;if(t&&t.__zrImageSrc===e||!n)return t;var o=ke.get(e),a={hostEl:n,cb:i,cbPayload:r};return o?mt(t=o.image)||o.pending.push(a):((t=new Image).onload=t.onerror=Be,ke.put(e,t.__cachedImgObj={image:t,pending:[a]}),t.src=t.__zrImageSrc=e),t}return t}function Be(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function mt(e){return e&&e.width&&e.height}var ct={},ft=0,vn=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,Pn="12px sans-serif",Yn={};function si(e,t){var n=e+":"+(t=t||Pn);if(ct[n])return ct[n];for(var i,r,o=(e+"").split("\n"),a=0,s=0,l=o.length;s<l;s++)a=Math.max((i=o[s],r=t,Yn.measureText(i,r)).width,a);return 5e3<ft&&(ft=0,ct={}),ft++,ct[n]=a}function Jn(e,t,n,i,r,o,a,s){return a?(d=i,F=(v=dn(e,{rich:a,truncate:s,font:t,textAlign:c=n,textPadding:r,textLineHeight:o})).outerHeight,new g(Kn(0,E=v.outerWidth,c),wi(0,F,d),E,F)):function(l,u,c,d,h,f,p){var _=Sn(l,u,h,f,p),v=si(l,u);h&&(v+=h[1]+h[3]);var E=_.outerHeight,q=new g(Kn(0,v,c),wi(0,E,d),v,E);return q.lineHeight=_.lineHeight,q}(e,t,n,i,r,o,s);var c,d,v,E,F}function Kn(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function wi(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function gi(e,t,n){var r=t.textDistance,o=n.x,a=n.y;r=r||0;var s=n.height,l=n.width,u=s/2,c="left",d="top";switch(t.textPosition){case"left":o-=r,a+=u,c="right",d="middle";break;case"right":o+=r+l,a+=u,d="middle";break;case"top":o+=l/2,a-=r,c="center",d="bottom";break;case"bottom":o+=l/2,a+=s+r,c="center";break;case"inside":o+=l/2,a+=u,c="center",d="middle";break;case"insideLeft":o+=r,a+=u,d="middle";break;case"insideRight":o+=l-r,a+=u,c="right",d="middle";break;case"insideTop":o+=l/2,a+=r,c="center";break;case"insideBottom":o+=l/2,a+=s-r,c="center",d="bottom";break;case"insideTopLeft":o+=r,a+=r;break;case"insideTopRight":o+=l-r,a+=r,c="right";break;case"insideBottomLeft":o+=r,a+=s-r,d="bottom";break;case"insideBottomRight":o+=l-r,a+=s-r,c="right",d="bottom"}return(e=e||{}).x=o,e.y=a,e.textAlign=c,e.textVerticalAlign=d,e}function mi(e,t,n,i,r){if(!t)return"";var o=(e+"").split("\n");r=kt(t,n,i,r);for(var a=0,s=o.length;a<s;a++)o[a]=Yt(o[a],r);return o.join("\n")}function kt(e,t,n,i){(i=fe({},i)).font=t,n=_t(n,"..."),i.maxIterations=_t(i.maxIterations,2);var r=i.minChar=_t(i.minChar,0);i.cnCharWidth=si("\u56fd",t);var o=i.ascCharWidth=si("a",t);i.placeholder=_t(i.placeholder,"");for(var a=e=Math.max(0,e-1),s=0;s<r&&o<=a;s++)a-=o;var l=si(n,t);return a<l&&(n="",l=0),a=e-l,i.ellipsis=n,i.ellipsisWidth=l,i.contentWidth=a,i.containerWidth=e,i}function Yt(e,t){var n=t.containerWidth,i=t.font,r=t.contentWidth;if(!n)return"";var o=si(e,i);if(o<=n)return e;for(var a=0;;a++){if(o<=r||a>=t.maxIterations){e+=t.ellipsis;break}var s=0===a?je(e,r,t.ascCharWidth,t.cnCharWidth):0<o?Math.floor(e.length*r/o):0;o=si(e=e.substr(0,s),i)}return""===e&&(e=t.placeholder),e}function je(e,t,n,i){for(var r=0,o=0,a=e.length;o<a&&r<t;o++){var s=e.charCodeAt(o);r+=0<=s&&s<=127?n:i}return o}function pt(e){return si("\u56fd",e)}function Sn(e,t,n,i,r){null!=e&&(e+="");var o=_t(i,pt(t)),a=e?e.split("\n"):[],s=a.length*o,l=s,u=!0;if(n&&(l+=n[0]+n[2]),e&&r){u=!1;var c=r.outerHeight,d=r.outerWidth;if(null!=c&&c<l)e="",a=[];else if(null!=d)for(var h=kt(d-(n?n[1]+n[3]:0),t,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),f=0,p=a.length;f<p;f++)a[f]=Yt(a[f],h)}return{lines:a,height:s,outerHeight:l,lineHeight:o,canCacheByTextString:u}}function dn(e,t){var n={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return n;for(var i,r=vn.lastIndex=0;null!=(i=vn.exec(e));){var o=i.index;r<o&&En(n,e.substring(r,o)),En(n,i[2],i[1]),r=vn.lastIndex}r<e.length&&En(n,e.substring(r,e.length));var a=n.lines,s=0,l=0,u=[],c=t.textPadding,d=t.truncate,h=d&&d.outerWidth,f=d&&d.outerHeight;c&&(null!=h&&(h-=c[1]+c[3]),null!=f&&(f-=c[0]+c[2]));for(var p=0;p<a.length;p++){for(var _=a[p],v=0,E=0,F=0;F<_.tokens.length;F++){var V=(Ce=_.tokens[F]).styleName&&t.rich[Ce.styleName]||{},q=Ce.textPadding=V.textPadding,j=Ce.font=V.font||t.font,X=Ce.textHeight=_t(V.textHeight,pt(j));if(q&&(X+=q[0]+q[2]),Ce.height=X,Ce.lineHeight=pn(V.textLineHeight,t.textLineHeight,X),Ce.textAlign=V&&V.textAlign||t.textAlign,Ce.textVerticalAlign=V&&V.textVerticalAlign||"middle",null!=f&&s+Ce.lineHeight>f)return{lines:[],width:0,height:0};Ce.textWidth=si(Ce.text,j);var Y=V.textWidth,Q=null==Y||"auto"===Y;if("string"==typeof Y&&"%"===Y.charAt(Y.length-1))Ce.percentWidth=Y,u.push(Ce),Y=0;else{if(Q){Y=Ce.textWidth;var oe=V.textBackgroundColor,ce=oe&&oe.image;ce&&mt(ce=qe(ce))&&(Y=Math.max(Y,ce.width*X/ce.height))}var ge=q?q[1]+q[3]:0;Y+=ge;var we=null!=h?h-E:null;null!=we&&we<Y&&(!Q||we<ge?(Ce.text="",Ce.textWidth=Y=0):(Ce.text=mi(Ce.text,we-ge,j,d.ellipsis,{minChar:d.minChar}),Ce.textWidth=si(Ce.text,j),Y=Ce.textWidth+ge))}E+=Ce.width=Y,V&&(v=Math.max(v,Ce.lineHeight))}_.width=E,s+=_.lineHeight=v,l=Math.max(l,E)}for(n.outerWidth=n.width=_t(t.textWidth,l),n.outerHeight=n.height=_t(t.textHeight,s),c&&(n.outerWidth+=c[1]+c[3],n.outerHeight+=c[0]+c[2]),p=0;p<u.length;p++){var Ce,Ae=(Ce=u[p]).percentWidth;Ce.width=parseInt(Ae,10)/100*l}return n}function En(e,t,n){for(var i=""===t,r=t.split("\n"),o=e.lines,a=0;a<r.length;a++){var s=r[a],l={styleName:n,text:s,isLineHolder:!s&&!i};if(a)o.push({tokens:[l]});else{var u=(o[o.length-1]||(o[0]={tokens:[]})).tokens,c=u.length;1===c&&u[0].isLineHolder?u[0]=l:!s&&c&&!i||u.push(l)}}}function Te(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&Un(t)||e.textFont||e.font}function We(e,t){var n,i,r,o,a,s=t.x,l=t.y,u=t.width,c=t.height,d=t.r;u<0&&(s+=u,u=-u),c<0&&(l+=c,c=-c),"number"==typeof d?n=i=r=o=d:d instanceof Array?1===d.length?n=i=r=o=d[0]:2===d.length?(n=r=d[0],i=o=d[1]):3===d.length?(n=d[0],i=o=d[1],r=d[2]):(n=d[0],i=d[1],r=d[2],o=d[3]):n=i=r=o=0,u<n+i&&(n*=u/(a=n+i),i*=u/a),u<r+o&&(r*=u/(a=r+o),o*=u/a),c<i+r&&(i*=c/(a=i+r),r*=c/a),c<n+o&&(n*=c/(a=n+o),o*=c/a),e.moveTo(s+n,l),e.lineTo(s+u-i,l),0!==i&&e.arc(s+u-i,l+i,i,-Math.PI/2,0),e.lineTo(s+u,l+c-r),0!==r&&e.arc(s+u-r,l+c-r,r,0,Math.PI/2),e.lineTo(s+o,l+c),0!==o&&e.arc(s+o,l+c-o,o,Math.PI/2,Math.PI),e.lineTo(s,l+n),0!==n&&e.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}Yn.measureText=function(e,t){var n=Ve();return n.font=t||Pn,n.measureText(e)};var te=Pn,pe={left:1,right:1,center:1},Ne={top:1,bottom:1,middle:1},Xe=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],xt={},et={};function _e(e){return at(e),re(e.rich,at),e}function at(e){if(e){e.font=Te(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||pe[t]?t:"left";var n=e.textVerticalAlign||e.textBaseline;"center"===n&&(n="middle"),e.textVerticalAlign=null==n||Ne[n]?n:"top",e.textPadding&&(e.textPadding=Tn(e.textPadding))}}function dt(e,t,n,i,r,o){i.rich?function(a,s,l,u,c,d){9!==d&&(s.__attrCachedBy=0);var h=a.__textCotentBlock;h&&!a.__dirtyText||(h=a.__textCotentBlock=dn(l,u)),function(f,p,_,v,E){var F=_.width,V=_.outerWidth,q=_.outerHeight,j=v.textPadding,X=Ut(et,f,v,E),Y=X.baseX,Q=X.baseY,oe=X.textAlign,ce=X.textVerticalAlign;Xt(p,v,E,Y,Q);var ge=Kn(Y,V,oe),we=wi(Q,q,ce),Ce=ge,Ae=we;j&&(Ce+=j[3],Ae+=j[0]);var Oe=Ce+F;vt(v)&&$e(f,p,v,ge,we,V,q);for(var Ge=0;Ge<_.lines.length;Ge++){for(var Pe,st=_.lines[Ge],Pt=st.tokens,Ft=Pt.length,Nt=st.lineHeight,rn=st.width,fn=0,Ln=Ce,Zt=Oe,kn=Ft-1;fn<Ft&&(!(Pe=Pt[fn]).textAlign||"left"===Pe.textAlign);)Le(f,p,Pe,v,Nt,Ae,Ln,"left"),rn-=Pe.width,Ln+=Pe.width,fn++;for(;0<=kn&&"right"===(Pe=Pt[kn]).textAlign;)Le(f,p,Pe,v,Nt,Ae,Zt,"right"),rn-=Pe.width,Zt-=Pe.width,kn--;for(Ln+=(F-(Ln-Ce)-(Oe-Zt)-rn)/2;fn<=kn;)Le(f,p,Pe=Pt[fn],v,Nt,Ae,Ln+Pe.width/2,"center"),Ln+=Pe.width,fn++;Ae+=Nt}}(a,s,h,u,c)}(e,t,n,i,r,o):function(a,s,l,u,c,d){var h,f=vt(u),p=!1,_=2===s.__attrCachedBy;9!==d?(d&&(h=d.style,p=!f&&_&&h),s.__attrCachedBy=f?0:2):_&&(s.__attrCachedBy=0);var v=u.font||te;p&&v===(h.font||te)||(s.font=v);var E=a.__computedFont;a.__styleFont!==v&&(a.__styleFont=v,E=a.__computedFont=s.font);var F=u.textPadding,q=a.__textCotentBlock;q&&!a.__dirtyText||(q=a.__textCotentBlock=Sn(l,E,F,u.textLineHeight,u.truncate));var j=q.outerHeight,X=q.lines,Y=q.lineHeight,Q=Ut(et,a,u,c),oe=Q.baseX,ce=Q.baseY,ge=Q.textAlign||"left",we=Q.textVerticalAlign;Xt(s,u,c,oe,ce);var Ce=wi(ce,j,we),Ae=oe,Oe=Ce;if(f||F){var Ge=si(l,E);F&&(Ge+=F[1]+F[3]);var Pe=Kn(oe,Ge,ge);f&&$e(a,s,u,Pe,Ce,Ge,j),F&&(Ae=Hn(oe,ge,F),Oe+=F[0])}s.textAlign=ge,s.textBaseline="middle",s.globalAlpha=u.opacity||1;for(var st=0;st<Xe.length;st++){var Pt=Xe[st],Ft=Pt[0],Nt=Pt[1],rn=u[Ft];p&&rn===h[Ft]||(s[Nt]=ye(s,Nt,rn||Pt[2]))}Oe+=Y/2;var fn=u.textStrokeWidth,Zt=!p||fn!==(p?h.textStrokeWidth:null),kn=!p||Zt||u.textStroke!==h.textStroke,Rn=jt(u.textStroke,fn),Vn=tn(u.textFill);if(Rn&&(Zt&&(s.lineWidth=fn),kn&&(s.strokeStyle=Rn)),Vn&&(p&&u.textFill===h.textFill||(s.fillStyle=Vn)),1===X.length)Rn&&s.strokeText(X[0],Ae,Oe),Vn&&s.fillText(X[0],Ae,Oe);else for(st=0;st<X.length;st++)Rn&&s.strokeText(X[st],Ae,Oe),Vn&&s.fillText(X[st],Ae,Oe),Oe+=Y}(e,t,n,i,r,o)}function Xt(e,t,n,i,r){if(n&&t.textRotation){var o=t.textOrigin;"center"===o?(i=n.width/2+n.x,r=n.height/2+n.y):o&&(i=o[0]+n.x,r=o[1]+n.y),e.translate(i,r),e.rotate(-t.textRotation),e.translate(-i,-r)}}function Le(e,t,n,i,r,o,a,s){var l=i.rich[n.styleName]||{};l.text=n.text;var u=n.textVerticalAlign,c=o+r/2;"top"===u?c=o+n.height/2:"bottom"===u&&(c=o+r-n.height/2),!n.isLineHolder&&vt(l)&&$e(e,t,l,"right"===s?a-n.width:"center"===s?a-n.width/2:a,c-n.height/2,n.width,n.height);var d=n.textPadding;d&&(a=Hn(a,s,d),c-=n.height/2-d[2]-n.textHeight/2),Bt(t,"shadowBlur",pn(l.textShadowBlur,i.textShadowBlur,0)),Bt(t,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),Bt(t,"shadowOffsetX",pn(l.textShadowOffsetX,i.textShadowOffsetX,0)),Bt(t,"shadowOffsetY",pn(l.textShadowOffsetY,i.textShadowOffsetY,0)),Bt(t,"textAlign",s),Bt(t,"textBaseline","middle"),Bt(t,"font",n.font||te);var h=jt(l.textStroke||i.textStroke,p),f=tn(l.textFill||i.textFill),p=_t(l.textStrokeWidth,i.textStrokeWidth);h&&(Bt(t,"lineWidth",p),Bt(t,"strokeStyle",h),t.strokeText(n.text,a,c)),f&&(Bt(t,"fillStyle",f),t.fillText(n.text,a,c))}function vt(e){return!!(e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor)}function $e(e,t,n,i,r,o,a){var s=n.textBackgroundColor,l=n.textBorderWidth,u=n.textBorderColor,c=it(s);if(Bt(t,"shadowBlur",n.textBoxShadowBlur||0),Bt(t,"shadowColor",n.textBoxShadowColor||"transparent"),Bt(t,"shadowOffsetX",n.textBoxShadowOffsetX||0),Bt(t,"shadowOffsetY",n.textBoxShadowOffsetY||0),c||l&&u){t.beginPath();var d=n.textBorderRadius;d?We(t,{x:i,y:r,width:o,height:a,r:d}):t.rect(i,r,o,a),t.closePath()}if(c)if(Bt(t,"fillStyle",s),null!=n.fillOpacity){var h=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=h}else t.fill();else if(Mt(s)){var f=s.image;(f=Qe(f,null,e,Rt,s))&&mt(f)&&t.drawImage(f,i,r,o,a)}l&&u&&(Bt(t,"lineWidth",l),Bt(t,"strokeStyle",u),null!=n.strokeOpacity?(h=t.globalAlpha,t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=h):t.stroke())}function Rt(e,t){t.image=e}function Ut(e,t,n,i){var r=n.x||0,o=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(i){var l=n.textPosition;if(l instanceof Array)r=i.x+_n(l[0],i.width),o=i.y+_n(l[1],i.height);else{var u=t&&t.calculateTextPosition?t.calculateTextPosition(xt,n,i):gi(xt,n,i);r=u.x,o=u.y,a=a||u.textAlign,s=s||u.textVerticalAlign}var c=n.textOffset;c&&(r+=c[0],o+=c[1])}return(e=e||{}).baseX=r,e.baseY=o,e.textAlign=a,e.textVerticalAlign=s,e}function Bt(e,t,n){return e[t]=ye(e,t,n),e[t]}function jt(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function tn(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function _n(e,t){return"string"==typeof e?0<=e.lastIndexOf("%")?parseFloat(e)/100*t:parseFloat(e):e}function Hn(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function In(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}function ii(){}var Ci=new g;function Xn(e){for(var t in B.call(this,e=e||{}),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new xe(e.style,this),this._rect=null,this.__clipPaths=null}function li(e){Xn.call(this,e)}Xn.prototype={constructor:Xn,type:"displayable",__dirty:!0,invisible:!(ii.prototype={constructor:ii,drawRectText:function(e,t){var n=this.style;t=n.textRect||t,this.__dirty&&_e(n);var i=n.text;if(null!=i&&(i+=""),In(i,n)){e.save();var r=this.transform;n.transformText?this.setTransform(e):r&&(Ci.copy(t),Ci.applyTransform(r),t=Ci),dt(this,e,i,n,t,9),e.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?B.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new xe(e,this),this.dirty(!1),this},calculateTextPosition:null},Ue(Xn,B),tt(Xn,ii),li.prototype={constructor:li,type:"image",brush:function(e,t){var n=this.style,i=n.image;n.bind(e,this,t);var r=this._image=Qe(i,this._image,this,this.onload);if(r&&mt(r)){var o=n.x||0,a=n.y||0,s=n.width,l=n.height,u=r.width/r.height;if(null==s&&null!=l?s=l*u:null==l&&null!=s?l=s/u:null==s&&null==l&&(s=r.width,l=r.height),this.setTransform(e),n.sWidth&&n.sHeight){var c=n.sx||0,d=n.sy||0;e.drawImage(r,c,d,n.sWidth,n.sHeight,o,a,s,l)}else if(n.sx&&n.sy){var h=s-(c=n.sx),f=l-(d=n.sy);e.drawImage(r,c,d,h,f,o,a,s,l)}else e.drawImage(r,o,a,s,l);null!=n.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new g(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},Ue(li,Xn);var Xi=314159;function hr(e){return parseInt(e,10)}var Di=new g(0,0,0,0),Hi=new g(0,0,0,0);function Fr(e,t,n){this.type="canvas";var i=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=fe({},n||{}),this.dpr=n.devicePixelRatio||x,this._singleCanvas=i;var r=(this.root=e).style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var d,h,f,o=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,i){var s=e.width,l=e.height;null!=n.width&&(s=n.width),null!=n.height&&(l=n.height),this.dpr=n.devicePixelRatio||1,e.width=s*this.dpr,e.height=l*this.dpr,this._width=s,this._height=l;var u=new ee(e,this,this.dpr);u.__builtin__=!0,u.initContext(),(a[Xi]=u).zlevel=Xi,o.push(Xi),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var c=this._domRoot=(d=this._width,h=this._height,(f=document.createElement("div")).style.cssText=["position:relative","width:"+d+"px","height:"+h+"px","padding:0","margin:0","border-width:0"].join(";")+";",f);e.appendChild(c)}this._hoverlayer=null,this._hoverElements=[]}function id(e){this.stage=(e=e||{}).stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,ki.call(this)}Fr.prototype={constructor:Fr,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var i=0;i<n.length;i++){var o=this._layers[n[i]];!o.__builtin__&&o.refresh&&o.refresh(0===i?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var n=new e.constructor({style:e.style,shape:e.shape,z:e.z,z2:e.z2,silent:e.silent});return(n.__from=e).__hoverMir=n,t&&n.setStyle(t),this._hoverElements.push(n),n}},removeHover:function(e){var n=this._hoverElements,i=Je(n,e.__hoverMir);0<=i&&n.splice(i,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,n=0;n<t.length;n++){var i=t[n].__from;i&&(i.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,n=this._hoverlayer;if(n&&n.clear(),t){ae(e,this.storage.displayableSortFunc);var i={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var r=0;r<t;){var o=e[r],a=o.__from;a&&a.__zr?(r++,a.invisible||(o.transform=a.transform,o.invTransform=a.invTransform,o.__clipPaths=a.__clipPaths,this._doPaintEl(o,n,!0,i))):(e.splice(r,1),a.__hoverMir=null,t--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(e,t,n){if(this._redrawId===n){t=t||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var r=this;me(function(){r._paintList(e,t,n)})}}},_compositeManually:function(){var e=this.getLayer(Xi).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,n)})},_doPaintList:function(e,t){for(var n=[],i=0;i<this._zlevelList.length;i++)(s=this._layers[this._zlevelList[i]]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||t)&&n.push(s);for(var o=!0,a=0;a<n.length;a++){var s,l=(s=n[a]).ctx,u={};l.save();var c=t?s.__startIndex:s.__drawIndex,d=!t&&s.incremental&&Date.now,h=d&&Date.now(),f=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,f);else if(c===s.__startIndex){var p=e[c];p.incremental&&p.notClear&&!t||s.clear(!1,f)}-1===c&&(console.error("For some unknown reason. drawIndex is -1"),c=s.__startIndex);for(var _=c;_<s.__endIndex;_++){var v=e[_];if(this._doPaintEl(v,s,t,u),v.__dirty=v.__dirtyText=!1,d&&15<Date.now()-h)break}s.__drawIndex=_,s.__drawIndex<s.__endIndex&&(o=!1),u.prevElClipPaths&&l.restore(),l.restore()}return He.wxa&&re(this._layers,function(E){E&&E.ctx&&E.ctx.draw&&E.ctx.draw()}),o},_doPaintEl:function(e,t,n,i){var l,u,c,r=t.ctx,o=e.transform;if((t.__dirty||n)&&!e.invisible&&0!==e.style.opacity&&(!o||o[0]||o[3])&&(!e.culling||(u=this._width,c=this._height,Di.copy((l=e).getBoundingRect()),l.transform&&Di.applyTransform(l.transform),Hi.width=u,Hi.height=c,Di.intersect(Hi)))){var a=e.__clipPaths,s=i.prevElClipPaths;s&&!function(l,u){if(l===u)return!1;if(!l||!u||l.length!==u.length)return!0;for(var c=0;c<l.length;c++)if(l[c]!==u[c])return!0;return!1}(a,s)||(s&&(r.restore(),i.prevElClipPaths=null,i.prevEl=null),a&&(r.save(),function(l,u){for(var c=0;c<l.length;c++){var d=l[c];d.setTransform(u),u.beginPath(),d.buildPath(u,d.shape),u.clip(),d.restoreTransform(u)}}(a,r),i.prevElClipPaths=a)),e.beforeBrush&&e.beforeBrush(r),e.brush(r,i.prevEl||null),(i.prevEl=e).afterBrush&&e.afterBrush(r)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Xi);var n=this._layers[e];return n||((n=new ee("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?rt(n,this._layerConfig[e],!0):this._layerConfig[e-.01]&&rt(n,this._layerConfig[e-.01],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},insertLayer:function(e,t){var u,n=this._layers,i=this._zlevelList,r=i.length,o=null,a=-1,s=this._domRoot;if(n[e]);else if((u=t)&&(u.__builtin__||"function"==typeof u.resize&&"function"==typeof u.refresh)){if(0<r&&e>i[0]){for(a=0;a<r-1&&!(i[a]<e&&i[a+1]>e);a++);o=n[i[a]]}if(i.splice(a+1,0,e),!(n[e]=t).virtual)if(o){var l=o.dom;l.nextSibling?s.insertBefore(t.dom,l.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom)}},eachLayer:function(e,t){var n,i,r=this._zlevelList;for(i=0;i<r.length;i++)e.call(t,this._layers[n=r[i]],n)},eachBuiltinLayer:function(e,t){var n,i,r,o=this._zlevelList;for(r=0;r<o.length;r++)(n=this._layers[i=o[r]]).__builtin__&&e.call(t,n,i)},eachOtherLayer:function(e,t){var n,i,r,o=this._zlevelList;for(r=0;r<o.length;r++)(n=this._layers[i=o[r]]).__builtin__||e.call(t,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(u){r&&(r.__endIndex!==u&&(r.__dirty=!0),r.__endIndex=u)}if(this.eachBuiltinLayer(function(u,c){u.__dirty=u.__used=!1}),this._singleCanvas)for(var n=1;n<e.length;n++)if((a=e[n]).zlevel!==e[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}var i,r=null,o=0;for(n=0;n<e.length;n++){var a,s,l=(a=e[n]).zlevel;i!==l&&(i=l,o=0),a.incremental?((s=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,o=1):s=this.getLayer(l+(0<o?.01:0),this._needsManuallyCompositing),s!==r&&(s.__used=!0,s.__startIndex!==n&&(s.__dirty=!0),s.__startIndex=n,s.__drawIndex=s.incremental?-1:n,t(n),r=s),a.__dirty&&(s.__dirty=!0,s.incremental&&s.__drawIndex<0&&(s.__drawIndex=n))}t(n),this.eachBuiltinLayer(function(u,c){!u.__used&&0<u.getElementCount()&&(u.__dirty=!0,u.__startIndex=u.__endIndex=u.__drawIndex=0),u.__dirty&&u.__drawIndex<0&&(u.__drawIndex=u.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var n=this._layerConfig;n[e]?rt(n[e],t,!0):n[e]=t;for(var i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];(r===e||r===e+.01)&&rt(this._layers[r],n[e],!0)}}},delLayer:function(e){var t=this._layers,n=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],n.splice(Je(n,e),1))},resize:function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=t&&(i.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||t!==this._height){for(var r in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(e,t);re(this._progressiveLayers,function(o){o.resize(e,t)}),this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(Xi).resize(e,t)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(this._singleCanvas&&!this._compositeManually)return this._layers[Xi].dom;var t=new ee("image",this,(e=e||{}).pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,i=t.dom.height,r=t.ctx;this.eachLayer(function(u){u.__builtin__?r.drawImage(u.dom,0,0,n,i):u.renderToCanvas&&(t.ctx.save(),u.renderToCanvas(t.ctx),t.ctx.restore())})}else for(var o={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++)this._doPaintEl(a[s],t,!0,o);return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],i=["clientWidth","clientHeight"][e],r=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||hr(s[n])||hr(a.style[n]))-(hr(s[r])||0)-(hr(s[o])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),r=e.getBoundingRect(),o=e.style,a=o.shadowBlur*t,s=o.shadowOffsetX*t,l=o.shadowOffsetY*t,u=o.hasStroke()?o.lineWidth:0,c=Math.max(u/2,a-s),d=Math.max(u/2,s+a),h=Math.max(u/2,a-l),f=Math.max(u/2,l+a),p=r.width+c+d,_=r.height+h+f;n.width=p*t,n.height=_*t,i.scale(t,t),i.clearRect(0,0,p,_),i.dpr=t;var v={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[c-r.x,h-r.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(i);var E=new li({style:{x:0,y:0,image:n}});return null!=v.position&&(E.position=e.position=v.position),null!=v.rotation&&(E.rotation=e.rotation=v.rotation),null!=v.scale&&(E.scale=e.scale=v.scale),E}},id.prototype={constructor:id,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),n=0;n<t.length;n++)this.addClip(t[n])},removeClip:function(e){var t=Je(this._clips,e);0<=t&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),n=0;n<t.length;n++)this.removeClip(t[n]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,n=this._clips,i=n.length,r=[],o=[],a=0;a<i;a++){var s=n[a],l=s.step(e,t);l&&(r.push(l),o.push(s))}for(a=0;a<i;)n[a]._needsRemove?(n[a]=n[i-1],n.pop(),i--):a++;for(i=r.length,a=0;a<i;a++)o[a].fire(r[a]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,me(function t(){e._running&&(me(t),e._paused||e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){var n=new S(e,(t=t||{}).loop,t.getter,t.setter);return this.addAnimator(n),n}},tt(id,ki);var b0,_0,Rf=He.domSupported,Pf=(_0={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:b0=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:Ke(b0,function(e){var t=e.replace("mouse","pointer");return _0.hasOwnProperty(t)?t:e})}),w0_mouse=["mousemove","mouseup"],w0_pointer=["pointermove","pointerup"];function C0(e){return"mousewheel"===e&&He.browser.firefox?"DOMMouseScroll":e}function Bf(e){var t=e.pointerType;return"pen"===t||"touch"===t}function Of(e){e&&(e.zrByTouch=!0)}function S0(e,t){for(var n=t,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return i}function M0(e,t){this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}var zf=M0.prototype;zf.stopPropagation=zf.stopImmediatePropagation=zf.preventDefault=en;var To={mousedown:function(e){e=Ai(this.dom,e),this._mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Ai(this.dom,e);var t=this._mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||Ff(this,!0),this.trigger("mousemove",e)},mouseup:function(e){e=Ai(this.dom,e),Ff(this,!1),this.trigger("mouseup",e)},mouseout:function(e){e=Ai(this.dom,e),this._pointerCapturing&&(e.zrEventControl="no_globalout"),e.zrIsToLocalDOM=S0(this,e.toElement||e.relatedTarget),this.trigger("mouseout",e)},touchstart:function(e){Of(e=Ai(this.dom,e)),this._lastTouchMoment=new Date,this.handler.processGesture(e,"start"),To.mousemove.call(this,e),To.mousedown.call(this,e)},touchmove:function(e){Of(e=Ai(this.dom,e)),this.handler.processGesture(e,"change"),To.mousemove.call(this,e)},touchend:function(e){Of(e=Ai(this.dom,e)),this.handler.processGesture(e,"end"),To.mouseup.call(this,e),+new Date-this._lastTouchMoment<300&&To.click.call(this,e)},pointerdown:function(e){To.mousedown.call(this,e)},pointermove:function(e){Bf(e)||To.mousemove.call(this,e)},pointerup:function(e){To.mouseup.call(this,e)},pointerout:function(e){Bf(e)||To.mouseout.call(this,e)}};re(["click","mousewheel","dblclick","contextmenu"],function(e){To[e]=function(t){t=Ai(this.dom,t),this.trigger(e,t)}});var Vf={pointermove:function(e){Bf(e)||Vf.mousemove.call(this,e)},pointerup:function(e){Vf.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this._pointerCapturing;Ff(this,!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function rd(e,t,n,i){e.mounted[t]=n,e.listenerOpts[t]=i,Yi(e.domTarget,C0(t),n,i)}function Hf(e){var t,n,i,o=e.mounted;for(var a in o)o.hasOwnProperty(a)&&(t=e.domTarget,n=C0(a),i=o[a],jn?t.removeEventListener(n,i,e.listenerOpts[a]):t.detachEvent("on"+n,i));e.mounted={}}function Ff(e,t){if(e._mayPointerCapture=null,Rf&&e._pointerCapturing^t){e._pointerCapturing=t;var n=e._globalHandlerScope;t?function zM(e,t){function n(i){rd(t,i,function(r){r=xi(r),S0(e,r.target)||(r=function(o,a){return Ai(o.dom,new M0(o,a),!0)}(e,r),t.domHandlers[i].call(e,r))},{capture:!0})}He.pointerEventsSupported?re(w0_pointer,n):He.touchEventsSupported||re(w0_mouse,n)}(e,n):Hf(n)}}function T0(e,t){this.domTarget=e,this.domHandlers=t,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function Wf(e,t){ki.call(this),this.dom=e,this.painterRoot=t,this._localHandlerScope=new T0(e,To),Rf&&(this._globalHandlerScope=new T0(document,Vf)),this._pointerCapturing=!1,this._mayPointerCapture=null,function OM(e,t){var n=t.domHandlers;He.pointerEventsSupported?re(Pf.pointer,function(i){rd(t,i,function(r){n[i].call(e,r)})}):(He.touchEventsSupported&&re(Pf.touch,function(i){rd(t,i,function(r){n[i].call(e,r),function(o){o.touching=!0,null!=o.touchTimer&&(clearTimeout(o.touchTimer),o.touchTimer=null),o.touchTimer=setTimeout(function(){o.touching=!1,o.touchTimer=null},700)}(t)})}),re(Pf.mouse,function(i){rd(t,i,function(r){r=xi(r),t.touching||n[i].call(e,r)})}))}(this,this._localHandlerScope)}var A0=Wf.prototype;A0.dispose=function(){Hf(this._localHandlerScope),Rf&&Hf(this._globalHandlerScope)},A0.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},tt(Wf,ki);var VM=!He.canvasSupported,od={canvas:Fr},gs={};function Gf(e,t){var n=new jf(_i(),e,t);return gs[n.id]=n}function Uf(e,t){od[e]=t}var jf=function(e,t,n){n=n||{},this.dom=t,this.id=e;var i=this,r=new le,o=n.renderer;if(VM){if(!od.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&od[o]||(o="canvas");var a=new od[o](t,r,n,e);this.storage=r,this.painter=a;var s=He.node||He.worker?null:new Wf(a.getViewportRoot(),a.root);this.handler=new ia(r,a,s,a.root),this.animation=new id({stage:{update:ut(this.flush,this)}}),this.animation.start();var l=r.delFromStorage,u=r.addToStorage;r.delFromStorage=function(c){l.call(r,c),c&&c.removeSelfFromZr(i)},r.addToStorage=function(c){u.call(r,c),c.addSelfToZr(i)}};jf.prototype={constructor:jf,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){if(this.painter.addHover){var n=this.painter.addHover(e,t);return this.refreshHover(),n}},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){this.painter.resize((e=e||{}).width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,n){this.handler.on(e,t,n)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(e){delete gs[e]}(this.id)}};var HM=(Object.freeze||Object)({version:"4.3.2",init:Gf,dispose:function(e){if(e)e.dispose();else{for(var t in gs)gs.hasOwnProperty(t)&&gs[t].dispose();gs={}}return this},getInstance:function(e){return gs[e]},registerPainter:Uf}),pl=re,gl=Mt,FM=Ye,I0="series\0";function vr(e){return e instanceof Array?e:null==e?[]:[e]}function ms(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var i=0,r=n.length;i<r;i++){var o=n[i];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var D0=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function bu(e){return!gl(e)||FM(e)||e instanceof Date?e:e.value}function qf(e,t){t=(t||[]).slice();var n=Ke(e||[],function(i,r){return{exist:i}});return pl(t,function(i,r){if(gl(i)){for(var o=0;o<n.length;o++)if(!n[o].option&&null!=i.id&&n[o].exist.id===i.id+"")return n[o].option=i,void(t[r]=null);for(o=0;o<n.length;o++){var a=n[o].exist;if(!(n[o].option||null!=a.id&&null!=i.id||null==i.name||ad(i)||ad(a)||a.name!==i.name+""))return n[o].option=i,void(t[r]=null)}}}),pl(t,function(i,r){if(gl(i)){for(var o=0;o<n.length;o++)if(!n[o].option&&!ad(n[o].exist)&&null==i.id){n[o].option=i;break}o>=n.length&&n.push({option:i})}}),n}function k0(e){var t=Ct();pl(e,function(n,i){var r=n.exist;r&&t.set(r.id,n)}),pl(e,function(n,i){var r=n.option;ei(!r||null==r.id||!t.get(r.id)||t.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&null!=r.id&&t.set(r.id,n),n.keyInfo||(n.keyInfo={})}),pl(e,function(n,i){var r=n.exist,o=n.option,a=n.keyInfo;if(gl(o)){if(a.name=null!=o.name?o.name+"":r?r.name:I0+i,r)a.id=r.id;else if(null!=o.id)a.id=o.id+"";else for(var s=0;a.id="\0"+a.name+"\0"+s++,t.get(a.id););t.set(a.id,n)}})}function Xf(e){var t=e.name;return!(!t||!t.indexOf(I0))}function ad(e){return gl(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function sd(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?Ye(t.dataIndex)?Ke(t.dataIndex,function(n){return e.indexOfRawIndex(n)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?Ye(t.name)?Ke(t.name,function(n){return e.indexOfName(n)}):e.indexOfName(t.name):void 0}function Wr(){var e="__\0ec_inner_"+WM+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var WM=0;function ld(e,t,n){if(it(t)){var i={};i[t+"Index"]=0,t=i}var r=n&&n.defaultMainType;!r||Zf(t,r+"Index")||Zf(t,r+"Id")||Zf(t,r+"Name")||(t[r+"Index"]=0);var o={};return pl(t,function(a,s){if(a=t[s],"dataIndex"!==s&&"dataIndexInside"!==s){var l=s.match(/^(\w+)(Index|Id|Name)$/)||[],u=l[1],c=(l[2]||"").toLowerCase();if(!(!u||!c||null==a||"index"===c&&"none"===a||n&&n.includeMainTypes&&Je(n.includeMainTypes,u)<0)){var d={mainType:u};"index"===c&&"all"===a||(d[c]=a);var h=e.queryComponents(d);o[u+"Models"]=h,o[u+"Model"]=h[0]}}else o[s]=a}),o}function Zf(e,t){return e&&e.hasOwnProperty(t)}function N0(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function E0(e){return"auto"===e?He.domSupported?"html":"richText":e||"html"}function Yf(e,t){var n=Ct(),i=[];return re(e,function(r){var o=t(r);(n.get(o)||(i.push(o),n.set(o,[]))).push(r)}),{keys:i,buckets:n}}var vs="___EC__COMPONENT__CONTAINER___";function ka(e){var t={main:"",sub:""};return e&&(e=e.split("."),t.main=e[0]||"",t.sub=e[1]||""),t}function _u(e){(e.$constructor=e).extend=function(t){function n(){t.$constructor?t.$constructor.apply(this,arguments):i.apply(this,arguments)}var i=this;return fe(n.prototype,t),n.extend=this.extend,n.superCall=jM,n.superApply=qM,Ue(n,this),n.superClass=i,n}}var UM=0;function ud(e){var t=["__\0is_clz",UM++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,e.isInstance=function(n){return!(!n||!n[t])}}function jM(e,t){var n=Mn(arguments,2);return this.superClass.prototype[t].apply(e,n)}function qM(e,t,n){return this.superClass.prototype[t].apply(e,n)}function cd(e,t){t=t||{};var n={};if(e.registerClass=function(r,o){return o&&(ei(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a=o),'componentType "'+a+'" illegal'),(o=ka(o)).sub?o.sub!==vs&&((function(a){var s=n[a.main];return s&&s[vs]||((s=n[a.main]={})[vs]=!0),s}(o))[o.sub]=r):n[o.main]=r),r;var a},e.getClass=function(r,o,a){var s=n[r];if(s&&s[vs]&&(s=o?s[o]:null),a&&!s)throw new Error(o?"Component "+r+"."+(o||"")+" not exists. Load it first.":r+".type should be specified.");return s},e.getClassesByMainType=function(r){r=ka(r);var o=[],a=n[r.main];return a&&a[vs]?re(a,function(s,l){l!==vs&&o.push(s)}):o.push(a),o},e.hasClass=function(r){return r=ka(r),!!n[r.main]},e.getAllClassMainTypes=function(){var r=[];return re(n,function(o,a){r.push(a)}),r},e.hasSubTypes=function(r){r=ka(r);var o=n[r.main];return o&&o[vs]},e.parseClassType=ka,t.registerWhenExtend){var i=e.extend;i&&(e.extend=function(r){var o=i.call(this,r);return e.registerClass(o,r.type)})}return e}function ml(e){for(var t=0;t<e.length;t++)e[t][1]||(e[t][1]=e[t][0]);return function(n,i,r){for(var o={},a=0;a<e.length;a++){var s=e[a][1];if(!(i&&0<=Je(i,s)||r&&Je(r,s)<0)){var l=n.getShallow(s);null!=l&&(o[e[a][0]]=l)}}return o}}var XM=ml([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),ZM={getLineStyle:function(e){var t=XM(this,e);return t.lineDash=this.getLineDash(t.lineWidth),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),n=Math.max(e,2),i=4*e;return"solid"!==t&&null!=t&&("dashed"===t?[i,i]:[n,n])}},YM=ml([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),$M={getAreaStyle:function(e,t){return YM(this,e,t)}},dd=Math.pow,Na=Math.sqrt,R0=Na(3),fd=1/3,Oo=hn(),ho=hn(),vl=hn();function Ea(e){return-1e-8<e&&e<1e-8}function P0(e){return 1e-8<e||e<-1e-8}function Pr(e,t,n,i,r){var o=1-r;return o*o*(o*e+3*r*t)+r*r*(r*i+3*o*n)}function B0(e,t,n,i,r){var o=1-r;return 3*(((t-e)*o+2*(n-t)*r)*o+(i-n)*r*r)}function O0(e,t,n,i,r){var o=6*n-12*t+6*e,a=9*t+3*i-3*e-9*n,s=3*t-3*e,l=0;if(Ea(a))P0(o)&&0<=(c=-s/o)&&c<=1&&(r[l++]=c);else{var u=o*o-4*a*s;if(Ea(u))r[0]=-o/(2*a);else if(0<u){var c,d=Na(u),h=(-o-d)/(2*a);0<=(c=(-o+d)/(2*a))&&c<=1&&(r[l++]=c),0<=h&&h<=1&&(r[l++]=h)}}return l}function z0(e,t,n,i,r,o){var a=(t-e)*r+e,s=(n-t)*r+t,l=(i-n)*r+n,u=(s-a)*r+a,c=(l-s)*r+s,d=(c-u)*r+u;o[0]=e,o[1]=a,o[2]=u,o[3]=d,o[4]=d,o[5]=c,o[6]=l,o[7]=i}function Mr(e,t,n,i){var r=1-i;return r*(r*e+2*i*t)+i*i*n}function $f(e,t,n,i){return 2*((1-i)*(t-e)+i*(n-t))}function V0(e,t,n){var i=e+n-2*t;return 0==i?.5:(e-t)/i}function Kf(e,t,n,i,r){var o=(t-e)*i+e,a=(n-t)*i+t,s=(a-o)*i+o;r[0]=e,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=n}var Gr=Math.min,Ur=Math.max,Jf=Math.sin,Qf=Math.cos,ys=2*Math.PI,pd=hn(),gd=hn(),md=hn();function wu(e,t,n){if(0!==e.length){var i,r=e[0],o=r[0],a=r[0],s=r[1],l=r[1];for(i=1;i<e.length;i++)o=Gr(o,(r=e[i])[0]),a=Ur(a,r[0]),s=Gr(s,r[1]),l=Ur(l,r[1]);t[0]=o,t[1]=s,n[0]=a,n[1]=l}}function H0(e,t,n,i,r,o){r[0]=Gr(e,n),r[1]=Gr(t,i),o[0]=Ur(e,n),o[1]=Ur(t,i)}var F0=[],W0=[];function KM(e,t,n,i,r,o,a,s,l,u){var c,d=O0,h=Pr,f=d(e,n,r,a,F0);for(l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0,c=0;c<f;c++){var p=h(e,n,r,a,F0[c]);l[0]=Gr(p,l[0]),u[0]=Ur(p,u[0])}for(f=d(t,i,o,s,W0),c=0;c<f;c++){var _=h(t,i,o,s,W0[c]);l[1]=Gr(_,l[1]),u[1]=Ur(_,u[1])}l[0]=Gr(e,l[0]),u[0]=Ur(e,u[0]),l[0]=Gr(a,l[0]),u[0]=Ur(a,u[0]),l[1]=Gr(t,l[1]),u[1]=Ur(t,u[1]),l[1]=Gr(s,l[1]),u[1]=Ur(s,u[1])}function JM(e,t,n,i,r,o,a,s,l){var u=dr,c=qi,d=Math.abs(r-o);if(d%ys<1e-4&&1e-4<d)return s[0]=e-n,s[1]=t-i,l[0]=e+n,void(l[1]=t+i);if(pd[0]=Qf(r)*n+e,pd[1]=Jf(r)*i+t,gd[0]=Qf(o)*n+e,gd[1]=Jf(o)*i+t,u(s,pd,gd),c(l,pd,gd),(r%=ys)<0&&(r+=ys),(o%=ys)<0&&(o+=ys),o<r&&!a?o+=ys:r<o&&a&&(r+=ys),a){var h=o;o=r,r=h}for(var f=0;f<o;f+=Math.PI/2)r<f&&(md[0]=Qf(f)*n+e,md[1]=Jf(f)*i+t,u(s,md,s),c(l,md,l))}var $i={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},zo=[],La=[],Vo=[],Ho=[],G0=Math.min,U0=Math.max,Cu=Math.cos,Su=Math.sin,vd=Math.sqrt,yl=Math.abs,ep=typeof Float32Array<"u",jr=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};function Ra(e,t,n,i,r,o,a){if(0===r)return!1;var l,s=r;if(t+s<a&&i+s<a||a<t-s&&a<i-s||e+s<o&&n+s<o||o<e-s&&o<n-s)return!1;if(e===n)return Math.abs(o-e)<=s/2;var u=(l=(t-i)/(e-n))*o-a+(e*i-n*t)/(e-n);return u*u/(l*l+1)<=s/2*s/2}function QM(e,t,n,i,r,o,a,s,l,u,c){if(0===l)return!1;var d=l;return!(t+d<c&&i+d<c&&o+d<c&&s+d<c||c<t-d&&c<i-d&&c<o-d&&c<s-d||e+d<u&&n+d<u&&r+d<u&&a+d<u||u<e-d&&u<n-d&&u<r-d&&u<a-d)&&function(h,f,p,_,v,E,F,V,q,j,X){var Y,Q,oe,ce,ge,we=.005,Ce=1/0;Oo[0]=q,Oo[1]=j;for(var Ae=0;Ae<1;Ae+=.05)ho[0]=Pr(h,p,v,F,Ae),ho[1]=Pr(f,_,E,V,Ae),(ce=Li(Oo,ho))<Ce&&(Y=Ae,Ce=ce);Ce=1/0;for(var Oe=0;Oe<32&&!(we<1e-4);Oe++)oe=Y+we,ho[0]=Pr(h,p,v,F,Q=Y-we),ho[1]=Pr(f,_,E,V,Q),ce=Li(ho,Oo),0<=Q&&ce<Ce?(Y=Q,Ce=ce):(vl[0]=Pr(h,p,v,F,oe),vl[1]=Pr(f,_,E,V,oe),ge=Li(vl,Oo),oe<=1&&ge<Ce?(Y=oe,Ce=ge):we*=.5);return Na(Ce)}(e,t,n,i,r,o,a,s,u,c)<=d/2}function j0(e,t,n,i,r,o,a,s,l){if(0===a)return!1;var u=a;return!(t+u<l&&i+u<l&&o+u<l||l<t-u&&l<i-u&&l<o-u||e+u<s&&n+u<s&&r+u<s||s<e-u&&s<n-u&&s<r-u)&&function(c,d,h,f,p,_,v,E,F){var V,q=.005,j=1/0;Oo[0]=v,Oo[1]=E;for(var X=0;X<1;X+=.05)ho[0]=Mr(c,h,p,X),ho[1]=Mr(d,f,_,X),(ce=Li(Oo,ho))<j&&(V=X,j=ce);j=1/0;for(var Y=0;Y<32&&!(q<1e-4);Y++){var Q=V-q,oe=V+q;ho[0]=Mr(c,h,p,Q),ho[1]=Mr(d,f,_,Q);var ce=Li(ho,Oo);if(0<=Q&&ce<j)V=Q,j=ce;else{vl[0]=Mr(c,h,p,oe),vl[1]=Mr(d,f,_,oe);var ge=Li(vl,Oo);oe<=1&&ge<j?(V=oe,j=ge):q*=.5}}return Na(j)}(e,t,n,i,r,o,s,l)<=u/2}jr.prototype={constructor:jr,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t,n){this._ux=yl((n=n||0)/x/e)||0,this._uy=yl(n/x/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return(this._ctx=e)&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData($i.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var n=yl(e-this._xi)>this._ux||yl(t-this._yi)>this._uy||this._len<5;return this.addData($i.L,e,t),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),n&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,n,i,r,o){return this.addData($i.C,e,t,n,i,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,n,i,r,o):this._ctx.bezierCurveTo(e,t,n,i,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(e,t,n,i){return this.addData($i.Q,e,t,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,n,i):this._ctx.quadraticCurveTo(e,t,n,i)),this._xi=n,this._yi=i,this},arc:function(e,t,n,i,r,o){return this.addData($i.A,e,t,n,n,i,r-i,0,o?0:1),this._ctx&&this._ctx.arc(e,t,n,i,r,o),this._xi=Cu(r)*n+e,this._yi=Su(r)*n+t,this},arcTo:function(e,t,n,i,r){return this._ctx&&this._ctx.arcTo(e,t,n,i,r),this},rect:function(e,t,n,i){return this._ctx&&this._ctx.rect(e,t,n,i),this.addData($i.R,e,t,n,i),this},closePath:function(){this.addData($i.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,n),e.closePath()),this._xi=t,this._yi=n,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e;for(var t=this._dashIdx=0,n=0;n<e.length;n++)t+=e[n];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length===t||!ep||(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,i=this._len,r=0;r<t;r++)n+=e[r].len();for(ep&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n)),r=0;r<t;r++)for(var o=e[r].data,a=0;a<o.length;a++)this.data[i++]=o[a];this._len=i},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var n=0;n<arguments.length;n++)t[this._len++]=arguments[n];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var n,i,r=this._dashSum,o=this._dashOffset,a=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,c=e-l,d=t-u,h=vd(c*c+d*d),f=l,p=u,_=a.length;for(o<0&&(o=r+o),f-=(o%=r)*(c/=h),p-=o*(d/=h);0<c&&f<=e||c<0&&e<=f||0===c&&(0<d&&p<=t||d<0&&t<=p);)f+=c*(n=a[i=this._dashIdx]),p+=d*n,this._dashIdx=(i+1)%_,0<c&&f<l||c<0&&l<f||0<d&&p<u||d<0&&u<p||s[i%2?"moveTo":"lineTo"](0<=c?G0(f,e):U0(f,e),0<=d?G0(p,t):U0(p,t));this._dashOffset=-vd((c=f-e)*c+(d=p-t)*d)},_dashedBezierTo:function(e,t,n,i,r,o){var a,s,l,u,c,d=this._dashSum,h=this._dashOffset,f=this._lineDash,p=this._ctx,_=this._xi,v=this._yi,E=Pr,F=0,V=this._dashIdx,q=f.length,j=0;for(h<0&&(h=d+h),h%=d,a=0;a<1;a+=.1)s=E(_,e,n,r,a+.1)-E(_,e,n,r,a),l=E(v,t,i,o,a+.1)-E(v,t,i,o,a),F+=vd(s*s+l*l);for(;V<q&&!(h<(j+=f[V]));V++);for(a=(j-h)/F;a<=1;)u=E(_,e,n,r,a),c=E(v,t,i,o,a),V%2?p.moveTo(u,c):p.lineTo(u,c),a+=f[V]/F,V=(V+1)%q;V%2!=0&&p.lineTo(r,o),this._dashOffset=-vd((s=r-u)*s+(l=o-c)*l)},_dashedQuadraticTo:function(e,t,n,i){var r=n,o=i;n=(n+2*e)/3,i=(i+2*t)/3,this._dashedBezierTo(e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,n,i,r,o)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,ep&&(this.data=new Float32Array(e)))},getBoundingRect:function(){zo[0]=zo[1]=Vo[0]=Vo[1]=Number.MAX_VALUE,La[0]=La[1]=Ho[0]=Ho[1]=-Number.MAX_VALUE;for(var e,t,n,i,r,o,a,s,l,u,c,d,h,f,p=this.data,_=0,v=0,E=0,F=0,V=0;V<p.length;){var q=p[V++];switch(1===V&&(E=_=p[V],F=v=p[V+1]),q){case $i.M:_=E=p[V++],v=F=p[V++],Vo[0]=E,Vo[1]=F,Ho[0]=E,Ho[1]=F;break;case $i.L:H0(_,v,p[V],p[V+1],Vo,Ho),_=p[V++],v=p[V++];break;case $i.C:KM(_,v,p[V++],p[V++],p[V++],p[V++],p[V],p[V+1],Vo,Ho),_=p[V++],v=p[V++];break;case $i.Q:t=v,n=p[V++],i=p[V++],o=p[V+1],a=Vo,s=Ho,u=l=void 0,u=Mr,c=Ur(Gr((l=V0)(e=_,n,r=p[V]),1),0),d=Ur(Gr(l(t,i,o),1),0),h=u(e,n,r,c),f=u(t,i,o,d),a[0]=Gr(e,r,h),a[1]=Gr(t,o,f),s[0]=Ur(e,r,h),s[1]=Ur(t,o,f),_=p[V++],v=p[V++];break;case $i.A:var j=p[V++],X=p[V++],Y=p[V++],Q=p[V++],oe=p[V++],ce=p[V++]+oe;V+=1;var ge=1-p[V++];1===V&&(E=Cu(oe)*Y+j,F=Su(oe)*Q+X),JM(j,X,Y,Q,oe,ce,ge,Vo,Ho),_=Cu(ce)*Y+j,v=Su(ce)*Q+X;break;case $i.R:H0(E=_=p[V++],F=v=p[V++],E+p[V++],F+p[V++],Vo,Ho);break;case $i.Z:_=E,v=F}dr(zo,zo,Vo),qi(La,La,Ho)}return 0===V&&(zo[0]=zo[1]=La[0]=La[1]=0),new g(zo[0],zo[1],La[0]-zo[0],La[1]-zo[1])},rebuildPath:function(e){for(var t,n,i,r,o,a,s=this.data,l=this._ux,u=this._uy,c=this._len,d=0;d<c;){var h=s[d++];switch(1===d&&(t=i=s[d],n=r=s[d+1]),h){case $i.M:t=i=s[d++],n=r=s[d++],e.moveTo(i,r);break;case $i.L:o=s[d++],a=s[d++],(yl(o-i)>l||yl(a-r)>u||d===c-1)&&(e.lineTo(o,a),i=o,r=a);break;case $i.C:e.bezierCurveTo(s[d++],s[d++],s[d++],s[d++],s[d++],s[d++]),i=s[d-2],r=s[d-1];break;case $i.Q:e.quadraticCurveTo(s[d++],s[d++],s[d++],s[d++]),i=s[d-2],r=s[d-1];break;case $i.A:var f=s[d++],p=s[d++],_=s[d++],v=s[d++],E=s[d++],F=s[d++],V=s[d++],q=s[d++],j=v<_?_:v,X=v<_?1:_/v,Y=v<_?v/_:1,Q=E+F;.001<Math.abs(_-v)?(e.translate(f,p),e.rotate(V),e.scale(X,Y),e.arc(0,0,j,E,Q,1-q),e.scale(1/X,1/Y),e.rotate(-V),e.translate(-f,-p)):e.arc(f,p,j,E,Q,1-q),1===d&&(t=Cu(E)*_+f,n=Su(E)*v+p),i=Cu(Q)*_+f,r=Su(Q)*v+p;break;case $i.R:t=i=s[d],n=r=s[d+1],e.rect(s[d++],s[d++],s[d++],s[d++]);break;case $i.Z:e.closePath(),i=t,r=n}}}},jr.CMD=$i;var q0=2*Math.PI;function Pa(e){return(e%=q0)<0&&(e+=q0),e}var Mu=2*Math.PI;function eT(e,t,n,i,r,o,a,s,l){if(0===a)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(n<c-u||c+u<n)return!1;if(Math.abs(i-r)%Mu<1e-4)return!0;if(o){var d=i;i=Pa(r),r=Pa(d)}else i=Pa(i),r=Pa(r);r<i&&(r+=Mu);var h=Math.atan2(l,s);return h<0&&(h+=Mu),i<=h&&h<=r||i<=h+Mu&&h+Mu<=r}function ha(e,t,n,i,r,o){if(t<o&&i<o||o<t&&o<i||i===t)return 0;var a=i<t?1:-1,s=(o-t)/(i-t);1!=s&&0!=s||(a=i<t?.5:-.5);var l=s*(n-e)+e;return l===r?1/0:r<l?a:0}var Ba=jr.CMD,xl=2*Math.PI,Br=[-1,-1,-1],fo=[-1,-1];function nT(e,t,n,i,r,o,a,s,l,u){if(t<u&&i<u&&o<u&&s<u||u<t&&u<i&&u<o&&u<s)return 0;var c,d=function(V,q,j,X,Y,Q){var oe=X+3*(q-j)-V,ce=3*(j-2*q+V),ge=3*(q-V),we=V-Y,Ce=ce*ce-3*oe*ge,Ae=ce*ge-9*oe*we,Oe=ge*ge-3*ce*we,Ge=0;if(Ea(Ce)&&Ea(Ae))Ea(ce)?Q[0]=0:0<=(Rn=-ge/ce)&&Rn<=1&&(Q[Ge++]=Rn);else{var Pe=Ae*Ae-4*Ce*Oe;if(Ea(Pe)){var st=Ae/Ce,Pt=-st/2;0<=(Rn=-ce/oe+st)&&Rn<=1&&(Q[Ge++]=Rn),0<=Pt&&Pt<=1&&(Q[Ge++]=Pt)}else if(0<Pe){var Ft=Na(Pe),Nt=Ce*ce+1.5*oe*(-Ae+Ft),rn=Ce*ce+1.5*oe*(-Ae-Ft);0<=(Rn=(-ce-((Nt=Nt<0?-dd(-Nt,fd):dd(Nt,fd))+(rn=rn<0?-dd(-rn,fd):dd(rn,fd))))/(3*oe))&&Rn<=1&&(Q[Ge++]=Rn)}else{var fn=(2*Ce*ce-3*oe*Ae)/(2*Na(Ce*Ce*Ce)),Ln=Math.acos(fn)/3,Zt=Na(Ce),kn=Math.cos(Ln),Rn=(-ce-2*Zt*kn)/(3*oe),Vn=(Pt=(-ce+Zt*(kn+R0*Math.sin(Ln)))/(3*oe),(-ce+Zt*(kn-R0*Math.sin(Ln)))/(3*oe));0<=Rn&&Rn<=1&&(Q[Ge++]=Rn),0<=Pt&&Pt<=1&&(Q[Ge++]=Pt),0<=Vn&&Vn<=1&&(Q[Ge++]=Vn)}}return Ge}(t,i,o,s,u,Br);if(0===d)return 0;for(var h,f,p=0,_=-1,v=0;v<d;v++){var E=Br[v],F=0===E||1===E?.5:1;Pr(e,n,r,a,E)<l||(_<0&&(_=O0(t,i,o,s,fo),fo[1]<fo[0]&&1<_&&(c=fo[0],fo[0]=fo[1],fo[1]=c),h=Pr(t,i,o,s,fo[0]),1<_&&(f=Pr(t,i,o,s,fo[1]))),p+=2===_?E<fo[0]?h<t?F:-F:E<fo[1]?f<h?F:-F:s<f?F:-F:E<fo[0]?h<t?F:-F:s<h?F:-F)}return p}function iT(e,t,n,i,r,o,a,s){if(t<s&&i<s&&o<s||s<t&&s<i&&s<o)return 0;var l=function(p,_,v,E,F){var V=p-2*_+v,q=2*(_-p),j=p-E,X=0;if(Ea(V))P0(q)&&0<=(Q=-j/q)&&Q<=1&&(F[X++]=Q);else{var Y=q*q-4*V*j;if(Ea(Y))0<=(Q=-q/(2*V))&&Q<=1&&(F[X++]=Q);else if(0<Y){var Q,oe=Na(Y),ce=(-q-oe)/(2*V);0<=(Q=(-q+oe)/(2*V))&&Q<=1&&(F[X++]=Q),0<=ce&&ce<=1&&(F[X++]=ce)}}return X}(t,i,o,s,Br);if(0===l)return 0;var u=V0(t,i,o);if(0<=u&&u<=1){for(var c=0,d=Mr(t,i,o,u),h=0;h<l;h++){var f=0===Br[h]||1===Br[h]?.5:1;Mr(e,n,r,Br[h])<a||(c+=Br[h]<u?d<t?f:-f:o<d?f:-f)}return c}return f=0===Br[0]||1===Br[0]?.5:1,Mr(e,n,r,Br[0])<a?0:o<t?f:-f}function rT(e,t,n,i,r,o,a,s){if(n<(s-=t)||s<-n)return 0;var l=Math.sqrt(n*n-s*s);Br[0]=-l,Br[1]=l;var u=Math.abs(i-r);if(u<1e-4)return 0;if(u%xl<1e-4){r=xl;var c=o?1:-1;return a>=Br[i=0]+e&&a<=Br[1]+e?c:0}o?(l=i,i=Pa(r),r=Pa(l)):(i=Pa(i),r=Pa(r)),r<i&&(r+=xl);for(var d=0,h=0;h<2;h++){var f=Br[h];if(a<f+e){var p=Math.atan2(s,f);c=o?1:-1,p<0&&(p=xl+p),(i<=p&&p<=r||i<=p+xl&&p+xl<=r)&&(p>Math.PI/2&&p<1.5*Math.PI&&(c=-c),d+=c)}}return d}function X0(e,t,n,i,r){for(var o=0,a=0,s=0,l=0,u=0,c=0;c<e.length;){var d=e[c++];switch(d===Ba.M&&1<c&&(n||(o+=ha(a,s,l,u,i,r))),1===c&&(l=a=e[c],u=s=e[c+1]),d){case Ba.M:a=l=e[c++],s=u=e[c++];break;case Ba.L:if(n){if(Ra(a,s,e[c],e[c+1],t,i,r))return!0}else o+=ha(a,s,e[c],e[c+1],i,r)||0;a=e[c++],s=e[c++];break;case Ba.C:if(n){if(QM(a,s,e[c++],e[c++],e[c++],e[c++],e[c],e[c+1],t,i,r))return!0}else o+=nT(a,s,e[c++],e[c++],e[c++],e[c++],e[c],e[c+1],i,r)||0;a=e[c++],s=e[c++];break;case Ba.Q:if(n){if(j0(a,s,e[c++],e[c++],e[c],e[c+1],t,i,r))return!0}else o+=iT(a,s,e[c++],e[c++],e[c],e[c+1],i,r)||0;a=e[c++],s=e[c++];break;case Ba.A:var h=e[c++],f=e[c++],p=e[c++],_=e[c++],v=e[c++],E=e[c++];c+=1;var F=1-e[c++],V=Math.cos(v)*p+h,q=Math.sin(v)*_+f;1<c?o+=ha(a,s,V,q,i,r):(l=V,u=q);var j=(i-h)*_/p+h;if(n){if(eT(h,f,_,v,v+E,F,t,j,r))return!0}else o+=rT(h,f,_,v,v+E,F,j,r);a=Math.cos(v+E)*p+h,s=Math.sin(v+E)*_+f;break;case Ba.R:if(l=a=e[c++],u=s=e[c++],V=l+e[c++],q=u+e[c++],n){if(Ra(l,u,V,u,t,i,r)||Ra(V,u,V,q,t,i,r)||Ra(V,q,l,q,t,i,r)||Ra(l,q,l,u,t,i,r))return!0}else o+=ha(V,u,V,q,i,r),o+=ha(l,q,l,u,i,r);break;case Ba.Z:if(n){if(Ra(a,s,l,u,t,i,r))return!0}else o+=ha(a,s,l,u,i,r);a=l,s=u}}return n||Math.abs(s-u)<1e-4||(o+=ha(a,s,l,u,i,r)||0),0!==o}var Z0=zt.prototype.getCanvasPattern,tp=Math.abs,oT=new jr(!0);function ci(e){Xn.call(this,e),this.path=null}function Y0(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}ci.prototype={constructor:ci,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(e,t){var n,i=this.style,r=this.path||oT,o=i.hasStroke(),a=i.hasFill(),s=i.fill,l=i.stroke,u=a&&!!s.colorStops,c=o&&!!l.colorStops,d=a&&!!s.image,h=o&&!!l.image;i.bind(e,this,t),this.setTransform(e),this.__dirty&&(u&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(e,s,n)),c&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(e,l,n))),u?e.fillStyle=this._fillGradient:d&&(e.fillStyle=Z0.call(s,e)),c?e.strokeStyle=this._strokeGradient:h&&(e.strokeStyle=Z0.call(l,e));var f=i.lineDash,p=i.lineDashOffset,_=!!e.setLineDash,v=this.getGlobalScale();if(r.setScale(v[0],v[1],this.segmentIgnoreThreshold),this.__dirtyPath||f&&!_&&o?(r.beginPath(e),f&&!_&&(r.setLineDash(f),r.setLineDashOffset(p)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),a)if(null!=i.fillOpacity){var E=e.globalAlpha;e.globalAlpha=i.fillOpacity*i.opacity,r.fill(e),e.globalAlpha=E}else r.fill(e);f&&_&&(e.setLineDash(f),e.lineDashOffset=p),o&&(null!=i.strokeOpacity?(E=e.globalAlpha,e.globalAlpha=i.strokeOpacity*i.opacity,r.stroke(e),e.globalAlpha=E):r.stroke(e)),f&&_&&e.setLineDash([]),null!=i.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,n){},createPathProxy:function(){this.path=new jr},getBoundingRect:function(){var e=this._rect,t=this.style,n=!e;if(n){var i=this.path;i=i||(this.path=new jr),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),e=i.getBoundingRect()}if(this._rect=e,t.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||n){r.copy(e);var o=t.lineWidth,a=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),1e-10<a&&(r.width+=o/a,r.height+=o/a,r.x-=o/a/2,r.y-=o/a/2)}return r}return e},contain:function(e,t){var n=this.transformCoordToLocal(e,t),i=this.getBoundingRect(),r=this.style;if(i.contain(e=n[0],t=n[1])){var o=this.path.data;if(r.hasStroke()){var a=r.lineWidth,s=r.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(r.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),X0(o,a/s,!0,e,t)))return!0}if(r.hasFill())return X0(o,0,!1,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):Xn.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var n=this.shape;if(n){if(Mt(e))for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);else n[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&1e-10<tp(e[0]-1)&&1e-10<tp(e[3]-1)?Math.sqrt(tp(e[0]*e[3]-e[2]*e[1])):1}},ci.extend=function(e){function t(i){ci.call(this,i),e.style&&this.style.extendFrom(e.style,!1);var r=e.shape;if(r){this.shape=this.shape||{};var o=this.shape;for(var a in r)!o.hasOwnProperty(a)&&r.hasOwnProperty(a)&&(o[a]=r[a])}e.init&&e.init.call(this,i)}for(var n in Ue(t,ci),e)"style"!==n&&"shape"!==n&&(t.prototype[n]=e[n]);return t},Ue(ci,Xn);var bl=jr.CMD,aT=[[],[],[]],$0=Math.sqrt,sT=Math.atan2,np=Math.sqrt,yd=Math.sin,xd=Math.cos,bd=Math.PI,ip=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(Y0(e)*Y0(t))},K0=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(ip(e,t))};function J0(e,t,n,i,r,o,a,s,l,u,c){var d=l*(bd/180),h=xd(d)*(e-n)/2+yd(d)*(t-i)/2,f=-1*yd(d)*(e-n)/2+xd(d)*(t-i)/2,p=h*h/(a*a)+f*f/(s*s);1<p&&(a*=np(p),s*=np(p));var _=(r===o?-1:1)*np((a*a*(s*s)-a*a*(f*f)-s*s*(h*h))/(a*a*(f*f)+s*s*(h*h)))||0,v=_*a*f/s,E=_*-s*h/a,F=(e+n)/2+xd(d)*v-yd(d)*E,V=(t+i)/2+yd(d)*v+xd(d)*E,q=K0([1,0],[(h-v)/a,(f-E)/s]),j=[(h-v)/a,(f-E)/s],X=[(-1*h-v)/a,(-1*f-E)/s],Y=K0(j,X);ip(j,X)<=-1&&(Y=bd),1<=ip(j,X)&&(Y=0),0===o&&0<Y&&(Y-=2*bd),1===o&&Y<0&&(Y+=2*bd),c.addData(u,F,V,a,s,q,Y,d,o)}var uT=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,cT=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Q0(e,t){var n=function(i){if(!i)return new jr;for(var r,o=0,a=0,s=o,l=a,u=new jr,c=jr.CMD,d=i.match(uT),h=0;h<d.length;h++){for(var f,p=d[h],_=p.charAt(0),v=p.match(cT)||[],E=v.length,F=0;F<E;F++)v[F]=parseFloat(v[F]);for(var V=0;V<E;){var q,j,X,Y,Q,oe,ce,ge=o,we=a;switch(_){case"l":o+=v[V++],a+=v[V++],u.addData(f=c.L,o,a);break;case"L":o=v[V++],a=v[V++],u.addData(f=c.L,o,a);break;case"m":o+=v[V++],a+=v[V++],u.addData(f=c.M,o,a),s=o,l=a,_="l";break;case"M":o=v[V++],a=v[V++],u.addData(f=c.M,o,a),s=o,l=a,_="L";break;case"h":o+=v[V++],u.addData(f=c.L,o,a);break;case"H":o=v[V++],u.addData(f=c.L,o,a);break;case"v":a+=v[V++],u.addData(f=c.L,o,a);break;case"V":a=v[V++],u.addData(f=c.L,o,a);break;case"C":u.addData(f=c.C,v[V++],v[V++],v[V++],v[V++],v[V++],v[V++]),o=v[V-2],a=v[V-1];break;case"c":u.addData(f=c.C,v[V++]+o,v[V++]+a,v[V++]+o,v[V++]+a,v[V++]+o,v[V++]+a),o+=v[V-2],a+=v[V-1];break;case"S":q=o,j=a;var Ce=u.len(),Ae=u.data;r===c.C&&(q+=o-Ae[Ce-4],j+=a-Ae[Ce-3]),ge=v[V++],we=v[V++],o=v[V++],a=v[V++],u.addData(f=c.C,q,j,ge,we,o,a);break;case"s":q=o,j=a,Ce=u.len(),Ae=u.data,r===c.C&&(q+=o-Ae[Ce-4],j+=a-Ae[Ce-3]),ge=o+v[V++],we=a+v[V++],o+=v[V++],a+=v[V++],u.addData(f=c.C,q,j,ge,we,o,a);break;case"Q":ge=v[V++],we=v[V++],o=v[V++],a=v[V++],u.addData(f=c.Q,ge,we,o,a);break;case"q":ge=v[V++]+o,we=v[V++]+a,o+=v[V++],a+=v[V++],u.addData(f=c.Q,ge,we,o,a);break;case"T":q=o,j=a,Ce=u.len(),Ae=u.data,r===c.Q&&(q+=o-Ae[Ce-4],j+=a-Ae[Ce-3]),o=v[V++],a=v[V++],u.addData(f=c.Q,q,j,o,a);break;case"t":q=o,j=a,Ce=u.len(),Ae=u.data,r===c.Q&&(q+=o-Ae[Ce-4],j+=a-Ae[Ce-3]),o+=v[V++],a+=v[V++],u.addData(f=c.Q,q,j,o,a);break;case"A":X=v[V++],Y=v[V++],Q=v[V++],oe=v[V++],ce=v[V++],J0(ge=o,we=a,o=v[V++],a=v[V++],oe,ce,X,Y,Q,f=c.A,u);break;case"a":X=v[V++],Y=v[V++],Q=v[V++],oe=v[V++],ce=v[V++],J0(ge=o,we=a,o+=v[V++],a+=v[V++],oe,ce,X,Y,Q,f=c.A,u)}}"z"!==_&&"Z"!==_||(u.addData(f=c.Z),o=s,a=l),r=f}return u.toStatic(),u}(e);return(t=t||{}).buildPath=function(i){if(i.setData)i.setData(n.data),(r=i.getContext())&&i.rebuildPath(r);else{var r=i;n.rebuildPath(r)}},t.applyTransform=function(i){(function(e,t){var n,i,r,o,a,s=e.data,l=bl.M,u=bl.C,c=bl.L,d=bl.R,h=bl.A,f=bl.Q;for(o=r=0;r<s.length;){switch(n=s[r++],o=r,i=0,n){case l:case c:i=1;break;case u:i=3;break;case f:i=2;break;case h:var p=t[4],_=t[5],v=$0(t[0]*t[0]+t[1]*t[1]),E=$0(t[2]*t[2]+t[3]*t[3]),F=sT(-t[1]/E,t[0]/v);s[r]*=v,s[r++]+=p,s[r]*=E,s[r++]+=_,s[r++]*=v,s[r++]*=E,s[r++]+=F,s[r++]+=F,o=r+=2;break;case d:V[0]=s[r++],V[1]=s[r++],ti(V,V,t),s[o++]=V[0],s[o++]=V[1],V[0]+=s[r++],V[1]+=s[r++],ti(V,V,t),s[o++]=V[0],s[o++]=V[1]}for(a=0;a<i;a++){var V;(V=aT[a])[0]=s[r++],V[1]=s[r++],ti(V,V,t),s[o++]=V[0],s[o++]=V[1]}}})(n,i),this.dirty(!0)},t}function ey(e,t){return new ci(Q0(e,t))}var oi=function(e){Xn.call(this,e)};function rp(e){return He.browser.ie&&11<=He.browser.version?function(){var t,n=this.__clipPaths,i=this.style;if(n)for(var r=0;r<n.length;r++){var o=n[r],a=o&&o.shape,s=o&&o.type;if(a&&("sector"===s&&a.startAngle===a.endAngle||"rect"===s&&(!a.width||!a.height))){for(var l=0;l<Oa.length;l++)Oa[l][2]=i[Oa[l][0]],i[Oa[l][0]]=Oa[l][1];t=!0;break}}if(e.apply(this,arguments),t)for(l=0;l<Oa.length;l++)i[Oa[l][0]]=Oa[l][2]}:e}oi.prototype={constructor:oi,type:"text",brush:function(e,t){var n=this.style;this.__dirty&&_e(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),In(i,n)?(this.setTransform(e),dt(this,e,i,n,null,t),this.restoreTransform(e)):e.__attrCachedBy=0},getBoundingRect:function(){var e=this.style;if(this.__dirty&&_e(e),!this._rect){var t=e.text;null!=t?t+="":t="";var n=Jn(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich);if(n.x+=e.x||0,n.y+=e.y||0,jt(e.textStroke,e.textStrokeWidth)){var i=e.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},Ue(oi,Xn);var Fo=ci.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,n){n&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}}),Oa=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Ao=ci.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:rp(ci.prototype.brush),buildPath:function(e,t){var n=t.cx,i=t.cy,r=Math.max(t.r0||0,0),o=Math.max(t.r,0),a=t.startAngle,s=t.endAngle,l=t.clockwise,u=Math.cos(a),c=Math.sin(a);e.moveTo(u*r+n,c*r+i),e.lineTo(u*o+n,c*o+i),e.arc(n,i,o,a,s,!l),e.lineTo(Math.cos(s)*r+n,Math.sin(s)*r+i),0!==r&&e.arc(n,i,r,s,a,l),e.closePath()}}),_d=ci.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var n=t.cx,i=t.cy,r=2*Math.PI;e.moveTo(n+t.r,i),e.arc(n,i,t.r,0,r,!1),e.moveTo(n+t.r0,i),e.arc(n,i,t.r0,0,r,!0)}});function ty(e,t,n,i,r,o,a){var s=.5*(n-e),l=.5*(i-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*r+t}function ny(e,t,n){var i=t.points,r=t.smooth;if(i&&2<=i.length){if(r&&"spline"!==r){var o=function(h,f,p,_){var v,E,F,V,q=[],j=[],X=[],Y=[];if(_){F=[1/0,1/0],V=[-1/0,-1/0];for(var Q=0,oe=h.length;Q<oe;Q++)dr(F,F,h[Q]),qi(V,V,h[Q]);dr(F,F,_[0]),qi(V,V,_[1])}for(Q=0,oe=h.length;Q<oe;Q++){var ce=h[Q];if(p)v=h[Q?Q-1:oe-1],E=h[(Q+1)%oe];else{if(0===Q||Q===oe-1){q.push(On(h[Q]));continue}v=h[Q-1],E=h[Q+1]}qt(j,E,v),bn(j,j,f);var ge=Bn(ce,v),we=Bn(ce,E),Ce=ge+we;0!==Ce&&(ge/=Ce,we/=Ce),bn(X,j,-ge),bn(Y,j,we);var Ae=zn([],ce,X),Oe=zn([],ce,Y);_&&(qi(Ae,Ae,F),dr(Ae,Ae,V),qi(Oe,Oe,F),dr(Oe,Oe,V)),q.push(Ae),q.push(Oe)}return p&&q.push(q.shift()),q}(i,r,n,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(n?a:a-1);s++){var l=o[2*s],u=o[2*s+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{"spline"===r&&(i=function(h,f){for(var p=h.length,_=[],v=0,E=1;E<p;E++)v+=Bn(h[E-1],h[E]);var F=v/2;for(F=F<p?p:F,E=0;E<F;E++){var V,q,j,X=E/(F-1)*(f?p:p-1),Y=Math.floor(X),Q=X-Y,oe=h[Y%p];j=f?(V=h[(Y-1+p)%p],q=h[(Y+1)%p],h[(Y+2)%p]):(V=h[0===Y?Y:Y-1],q=h[p-2<Y?p-1:Y+1],h[p-3<Y?p-1:Y+2]);var ce=Q*Q,ge=Q*ce;_.push([ty(V[0],oe[0],q[0],j[0],Q,ce,ge),ty(V[1],oe[1],q[1],j[1],Q,ce,ge)])}return _}(i,n)),e.moveTo(i[0][0],i[0][1]),s=1;for(var d=i.length;s<d;s++)e.lineTo(i[s][0],i[s][1])}n&&e.closePath()}}var qr=ci.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){ny(e,t,!0)}}),po=ci.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){ny(e,t,!1)}}),_l=Math.round;function iy(e,t,n){if(t){var i=t.x1,r=t.x2,o=t.y1,a=t.y2;e.x1=i,e.x2=r,e.y1=o,e.y2=a;var s=n&&n.lineWidth;s&&(_l(2*i)===_l(2*r)&&(e.x1=e.x2=xs(i,s,!0)),_l(2*o)===_l(2*a)&&(e.y1=e.y2=xs(o,s,!0)))}}function ry(e,t,n){if(t){var i=t.x,r=t.y,o=t.width,a=t.height;e.x=i,e.y=r,e.width=o,e.height=a;var s=n&&n.lineWidth;s&&(e.x=xs(i,s,!0),e.y=xs(r,s,!0),e.width=Math.max(xs(i+o,s,!1)-e.x,0===o?0:1),e.height=Math.max(xs(r+a,s,!1)-e.y,0===a?0:1))}}function xs(e,t,n){if(!t)return e;var i=_l(2*e);return(i+_l(t))%2==0?i/2:(i+(n?1:-1))/2}var bs={},vi=ci.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var n,i,r,o;this.subPixelOptimize?(ry(bs,t,this.style),n=bs.x,i=bs.y,r=bs.width,o=bs.height,bs.r=t.r,t=bs):(n=t.x,i=t.y,r=t.width,o=t.height),t.r?We(e,t):e.rect(n,i,r,o),e.closePath()}}),Tu={},yr=ci.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n,i,r,o;o=this.subPixelOptimize?(iy(Tu,t,this.style),n=Tu.x1,i=Tu.y1,r=Tu.x2,Tu.y2):(n=t.x1,i=t.y1,r=t.x2,t.y2);var a=t.percent;0!==a&&(e.moveTo(n,i),a<1&&(r=n*(1-a)+r*a,o=i*(1-a)+o*a),e.lineTo(r,o))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}}),Xr=[];function oy(e,t,n){return null===e.cpx2||null===e.cpy2?[(n?B0:Pr)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?B0:Pr)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?$f:Mr)(e.x1,e.cpx1,e.x2,t),(n?$f:Mr)(e.y1,e.cpy1,e.y2,t)]}function Wo(e){this.colorStops=e||[]}var wd=ci.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.x1,i=t.y1,r=t.x2,o=t.y2,a=t.cpx1,s=t.cpy1,l=t.cpx2,u=t.cpy2,c=t.percent;0!==c&&(e.moveTo(n,i),null==l||null==u?(c<1&&(Kf(n,a,r,c,Xr),a=Xr[1],r=Xr[2],Kf(i,s,o,c,Xr),s=Xr[1],o=Xr[2]),e.quadraticCurveTo(a,s,r,o)):(c<1&&(z0(n,a,l,r,c,Xr),a=Xr[1],l=Xr[2],r=Xr[3],z0(i,s,u,o,c,Xr),s=Xr[1],u=Xr[2],o=Xr[3]),e.bezierCurveTo(a,s,l,u,r,o)))},pointAt:function(e){return oy(this.shape,e,!1)},tangentAt:function(e){var t=oy(this.shape,e,!0);return Nn(t,t)}}),op=ci.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.cx,i=t.cy,r=Math.max(t.r,0),o=t.startAngle,a=t.endAngle,s=t.clockwise,l=Math.cos(o),u=Math.sin(o);e.moveTo(l*r+n,u*r+i),e.arc(n,i,r,o,a,!s)}}),ay=ci.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,n=0;n<t.length;n++)e=e||t[n].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},buildPath:function(e,t){for(var n=t.paths||[],i=0;i<n.length;i++)n[i].buildPath(e,n[i].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),ci.prototype.getBoundingRect.call(this)}});function _s(e,t,n,i,r,o){this.x=e??0,this.y=t??0,this.x2=n??1,this.y2=i??0,this.type="linear",this.global=o||!1,Wo.call(this,r)}function Cd(e,t,n,i,r){this.x=e??.5,this.y=t??.5,this.r=n??.5,this.type="radial",this.global=r||!1,Wo.call(this,i)}function Jr(e){Xn.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Wo.prototype={constructor:Wo,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}},_s.prototype={constructor:_s},Ue(_s,Wo),Cd.prototype={constructor:Cd},Ue(Cd,Wo),Jr.prototype.incremental=!0,Jr.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Jr.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},Jr.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},Jr.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},Jr.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(t=this._displayables[e]).parent=this,t.update(),t.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},Jr.prototype.brush=function(e,t){for(var n=this._cursor;n<this._displayables.length;n++)(i=this._displayables[n]).beforeBrush&&i.beforeBrush(e),i.brush(e,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(e);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var i;(i=this._temporaryDisplayables[n]).beforeBrush&&i.beforeBrush(e),i.brush(e,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var dT=[];Jr.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new g(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(dT)),e.union(i)}this._rect=e}return this._rect},Jr.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(e,t))return!0;return!1},Ue(Jr,Xn);var Sd=Math.max,Md=Math.min,Td={},sy={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},ly="emphasis",cy=1,dy={},ap={};function go(e){return ci.extend(e)}function Go(e,t){ap[e]=t}function sp(e){if(ap.hasOwnProperty(e))return ap[e]}function Ad(e,t,n,i){var r=ey(e,t);return n&&("center"===i&&(n=fy(n,r.getBoundingRect())),py(r,n)),r}function hy(e,t,n){var i=new li({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(r){"center"===n&&i.setStyle(fy(t,{width:r.width,height:r.height}))}});return i}function fy(e,t){var n,i=t.width/t.height,r=e.height*i;return n=r<=e.width?e.height:(r=e.width)/i,{x:e.x+e.width/2-r/2,y:e.y+e.height/2-n/2,width:r,height:n}}var mo=function(e,t){for(var n=[],i=e.length,r=0;r<i;r++){var o=e[r];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),n.push(o.path)}var a=new ci(t);return a.createPathProxy(),a.buildPath=function(s){s.appendPath(n);var l=s.getContext();l&&s.rebuildPath(l)},a};function py(e,t){if(e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}var Id=xs;function gy(e){return null!=e&&"none"!==e}var my=Ct(),vy=0;function lp(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var n=e.__zr,i=e.useHoverLayer&&n&&"canvas"===n.painter.type;if(e.__highlighted=i?"layer":"plain",!(e.isGroup||!n&&e.useHoverLayer)){var r=e,o=e.style;i&&(o=(r=n.addHover(e)).style),Nd(o),i||function(a){if(a.__hoverStlDirty){a.__hoverStlDirty=!1;var s=a.__hoverStl;if(s){var l=a.__cachedNormalStl={};a.__cachedNormalZ2=a.z2;var u=a.style;for(var c in s)null!=s[c]&&(l[c]=u[c]);l.fill=u.fill,l.stroke=u.stroke}else a.__cachedNormalStl=a.__cachedNormalZ2=null}}(r),o.extendFrom(t),yy(o,t,"fill"),yy(o,t,"stroke"),ku(o),i||(e.dirty(!1),e.z2+=1)}}}function yy(e,t,n){!gy(t[n])&&gy(e[n])&&(e[n]=function(i){if("string"!=typeof i)return i;var r=my.get(i);return r||(r=gu(i,-.1),vy<1e4&&(my.set(i,r),vy++)),r}(e[n]))}function up(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var n=e.style,i=e.__cachedNormalStl;i&&(Nd(n),e.setStyle(i),ku(n));var r=e.__cachedNormalZ2;null!=r&&e.z2-r==1&&(e.z2=r)}}function Iu(e,t,n){var i,r="normal",o="normal";e.__highlighted&&(r=ly,i=!0),t(e,n),e.__highlighted&&(o=ly,i=!0),e.isGroup&&e.traverse(function(a){a.isGroup||t(a,n)}),i&&e.__highDownOnUpdate&&e.__highDownOnUpdate(r,o)}function Du(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,up(e),lp(e))}function hT(e){xy(this,e)||this.__highByOuter||Iu(this,lp)}function fT(e){xy(this,e)||this.__highByOuter||Iu(this,up)}function pT(e){this.__highByOuter|=1<<(e||0),Iu(this,lp)}function gT(e){(this.__highByOuter&=~(1<<(e||0)))||Iu(this,up)}function xy(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function Ri(e,t){ws(e,!0),Iu(e,Du,t)}function ws(e,t){var n=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!n||e.__highDownDispatcher){var i=n?"off":"on";e[i]("mouseover",hT)[i]("mouseout",fT),e[i]("emphasis",pT)[i]("normal",gT),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!n}}function Dd(e){return!(!e||!e.__highDownDispatcher)}function by(e){var t=dy[e];return null==t&&cy<=32&&(t=dy[e]=cy++),t}function Qr(e,t,n,i,r,o,a){var s,l=(r=r||Td).labelFetcher,u=r.labelDataIndex,c=r.labelDimIndex,d=r.labelProp,h=n.getShallow("show"),f=i.getShallow("show");(h||f)&&(l&&(s=l.getFormattedLabel(u,"normal",null,c,d)),null==s&&(s=gn(r.defaultText)?r.defaultText(u,r):r.defaultText));var p=h?s:null,_=f?_t(l?l.getFormattedLabel(u,"emphasis",null,c,d):null,s):null;null==p&&null==_||(Fi(e,n,o,r),Fi(t,i,a,r,!0)),e.text=p,t.text=_}function cp(e,t,n){var i=e.style;t&&(Nd(i),e.setStyle(t),ku(i)),i=e.__hoverStl,n&&i&&(Nd(i),fe(i,n),ku(i))}function Fi(e,t,n,i,r){return _y(e,t,i,r),n&&fe(e,n),e}function _y(e,t,n,i){if((n=n||Td).isRectText){var r;n.getTextPosition?r=n.getTextPosition(t,i):"outside"===(r=t.getShallow("position")||(i?null:"inside"))&&(r="top"),e.textPosition=r,e.textOffset=t.getShallow("offset");var o=t.getShallow("rotate");null!=o&&(o*=Math.PI/180),e.textRotation=o,e.textDistance=_t(t.getShallow("distance"),i?null:5)}var a,s=t.ecModel,l=s&&s.option.textStyle,u=function(h){for(var f;h&&h!==h.ecModel;){var p=(h.option||Td).rich;if(p)for(var _ in f=f||{},p)p.hasOwnProperty(_)&&(f[_]=1);h=h.parentModel}return f}(t);if(u)for(var c in a={},u)if(u.hasOwnProperty(c)){var d=t.getModel(["rich",c]);wy(a[c]={},d,l,n,i)}return e.rich=a,wy(e,t,l,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),e}function wy(e,t,n,i,r,o){n=!r&&n||Td,e.textFill=kd(t.getShallow("color"),i)||n.color,e.textStroke=kd(t.getShallow("textBorderColor"),i)||n.textBorderColor,e.textStrokeWidth=_t(t.getShallow("textBorderWidth"),n.textBorderWidth),r||(o&&(e.insideRollbackOpt=i,ku(e)),null==e.textFill&&(e.textFill=i.autoColor)),e.fontStyle=t.getShallow("fontStyle")||n.fontStyle,e.fontWeight=t.getShallow("fontWeight")||n.fontWeight,e.fontSize=t.getShallow("fontSize")||n.fontSize,e.fontFamily=t.getShallow("fontFamily")||n.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),o&&i.disableBox||(e.textBackgroundColor=kd(t.getShallow("backgroundColor"),i),e.textPadding=t.getShallow("padding"),e.textBorderColor=kd(t.getShallow("borderColor"),i),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||n.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||n.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||n.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function kd(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function ku(e){var t,n=e.textPosition,i=e.insideRollbackOpt;if(i&&null==e.textFill){var r=i.autoColor,a=i.useInsideStyle,s=!1!==a&&(!0===a||i.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside")),l=!s&&null!=r;(s||l)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),s&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=r,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),l&&(e.textFill=r)}e.insideRollback=t}function Nd(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function dp(e,t){var n=t&&t.getModel("textStyle");return Un([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function Cy(e,t,n,i,r,o){if("function"==typeof r&&(o=r,r=null),i&&i.isAnimationEnabled()){var a=e?"Update":"",s=i.getShallow("animationDuration"+a),l=i.getShallow("animationEasing"+a),u=i.getShallow("animationDelay"+a);"function"==typeof u&&(u=u(r,i.getAnimationDelayParams?i.getAnimationDelayParams(t,r):null)),"function"==typeof s&&(s=s(r)),0<s?t.animateTo(n,s,u||0,l,o,!!o):(t.stopAnimation(),t.attr(n),o&&o())}else t.stopAnimation(),t.attr(n),o&&o()}function Qn(e,t,n,i,r){Cy(!0,e,t,n,i,r)}function Tr(e,t,n,i,r){Cy(!1,e,t,n,i,r)}function Cs(e,t){for(var n=Ro([]);e&&e!==t;)lo(n,e.getLocalTransform(),n),e=e.parent;return n}function Uo(e,t,n){return t&&!Kt(t)&&(t=Cr.getLocalTransform(t)),n&&(t=Ia([],t)),ti([],e,t)}function hp(e,t,n){var i=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),r=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),o=["left"===e?-i:"right"===e?i:0,"top"===e?-r:"bottom"===e?r:0];return o=Uo(o,t,n),Math.abs(o[0])>Math.abs(o[1])?0<o[0]?"right":"left":0<o[1]?"bottom":"top"}function Ed(e,t,n,i){if(e&&t){var r,o=(r={},e.traverse(function(s){!s.isGroup&&s.anid&&(r[s.anid]=s)}),r);t.traverse(function(s){if(!s.isGroup&&s.anid){var l=o[s.anid];if(l){var u=a(s);s.attr(a(l)),Qn(s,u,n,s.dataIndex)}}})}function a(s){var l={position:On(s.position),rotation:s.rotation};return s.shape&&(l.shape=fe({},s.shape)),l}}function Sy(e,t){return Ke(e,function(n){var i=n[0];i=Sd(i,t.x),i=Md(i,t.x+t.width);var r=n[1];return r=Sd(r,t.y),[i,r=Md(r,t.y+t.height)]})}function wl(e,t,n){var i=(t=fe({rectHover:!0},t)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(i.image=e.slice(8),De(i,n),new li(t)):Ad(e.replace("path://",""),t,n,"center")}function Nu(e,t,n,i,r){for(var o=0,a=r[r.length-1];o<r.length;o++){var s=r[o];if(My(e,t,n,i,s[0],s[1],a[0],a[1]))return!0;a=s}}function My(e,t,n,i,r,o,a,s){var E,l=n-e,u=i-t,c=a-r,d=s-o,h=fp(c,d,l,u);if((E=h)<=1e-6&&-1e-6<=E)return!1;var f=e-r,p=t-o,_=fp(f,p,l,u)/h;if(_<0||1<_)return!1;var v=fp(f,p,c,d)/h;return!(v<0||1<v)}function fp(e,t,n,i){return e*i-n*t}Go("circle",Fo),Go("sector",Ao),Go("ring",_d),Go("polygon",qr),Go("polyline",po),Go("rect",vi),Go("line",yr),Go("bezierCurve",wd),Go("arc",op);var fa=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:sy,extendShape:go,extendPath:function(e,t){return function(n,i){return ci.extend(Q0(n,i))}(e,t)},registerShape:Go,getShapeClass:sp,makePath:Ad,makeImage:hy,mergePath:mo,resizePath:py,subPixelOptimizeLine:function(e){return iy(e.shape,e.shape,e.style),e},subPixelOptimizeRect:function(e){return ry(e.shape,e.shape,e.style),e},subPixelOptimize:Id,setElementHoverStyle:Du,setHoverStyle:Ri,setAsHighDownDispatcher:ws,isHighDownDispatcher:Dd,getHighlightDigit:by,setLabelStyle:Qr,modifyLabelStyle:cp,setTextStyle:Fi,setText:function(e,t,n){var i,r={isRectText:!0};!1===n?i=!0:r.autoColor=n,_y(e,t,r,i)},getFont:dp,updateProps:Qn,initProps:Tr,getTransform:Cs,applyTransform:Uo,transformDirection:hp,groupTransition:Ed,clipPointsByRect:Sy,clipRectByRect:function(e,t){var n=Sd(e.x,t.x),i=Md(e.x+e.width,t.x+t.width),r=Sd(e.y,t.y),o=Md(e.y+e.height,t.y+t.height);if(n<=i&&r<=o)return{x:n,y:r,width:i-n,height:o-r}},createIcon:wl,linePolygonIntersect:Nu,lineLineIntersect:My,Group:m,Image:li,Text:oi,Circle:Fo,Sector:Ao,Ring:_d,Polygon:qr,Polyline:po,Rect:vi,Line:yr,BezierCurve:wd,Arc:op,IncrementalDisplayable:Jr,CompoundPath:ay,LinearGradient:_s,RadialGradient:Cd,BoundingRect:g}),mT=["textStyle","color"],vT={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(mT):null)},getFont:function(){return dp({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return Jn(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},yT=ml([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),xT={getItemStyle:function(e,t){var n=yT(this,e,t),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}},Ld=tt,Ty=Wr();function di(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}function Ay(e,t,n){for(var i=0;i<t.length&&(!t[i]||null!=(e=e&&"object"==typeof e?e[t[i]]:null));i++);return null==e&&n&&(e=n.get(t)),e}function pp(e,t){var n=Ty(e).getParent;return n?n.call(e,t):e.parentModel}di.prototype={constructor:di,init:null,mergeOption:function(e){rt(this.option,e,!0)},get:function(e,t){return null==e?this.option:Ay(this.option,this.parsePath(e),!t&&pp(this,e))},getShallow:function(e,t){var n=this.option,i=null==n?n:n[e],r=!t&&pp(this,e);return null==i&&r&&(i=r.getShallow(e)),i},getModel:function(e,t){var n;return new di(null==e?this.option:Ay(this.option,e=this.parsePath(e)),t=t||(n=pp(this,e))&&n.getModel(e),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(Fe(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"==typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){Ty(this).getParent=e},isAnimationEnabled:function(){if(!He.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},_u(di),ud(di),Ld(di,ZM),Ld(di,$M),Ld(di,vT),Ld(di,xT);var bT=0;function Eu(e){return[e||"",bT++,Math.random().toFixed(5)].join("_")}function Pi(e,t,n,i){var r=t[1]-t[0],o=n[1]-n[0];if(0==r)return 0==o?n[0]:(n[0]+n[1])/2;if(i)if(0<r){if(e<=t[0])return n[0];if(e>=t[1])return n[1]}else{if(e>=t[0])return n[0];if(e<=t[1])return n[1]}else{if(e===t[0])return n[0];if(e===t[1])return n[1]}return(e-t[0])/r*o+n[0]}function yn(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?function(n){return n.replace(/^\s+|\s+$/g,"")}(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e}function nr(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function Ss(e){return e.sort(function(t,n){return t-n}),e}function Dy(e){if(e=+e,isNaN(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Rd(e){var t=e.toString(),n=t.indexOf("e");if(0<n){var i=+t.slice(n+1);return i<0?-i:0}var r=t.indexOf(".");return r<0?0:t.length-1-r}function gp(e,t){var n=Math.log,i=Math.LN10,r=Math.floor(n(e[1]-e[0])/i),o=Math.round(n(Math.abs(t[1]-t[0]))/i),a=Math.min(Math.max(-r+o,0),20);return isFinite(a)?a:20}function ky(e,t,n){if(!e[t])return 0;var i=Tt(e,function(p,_){return p+(isNaN(_)?0:_)},0);if(0===i)return 0;for(var r=Math.pow(10,n),o=Ke(e,function(p){return(isNaN(p)?0:p)/i*r*100}),a=100*r,s=Ke(o,function(p){return Math.floor(p)}),l=Tt(s,function(p,_){return p+_},0),u=Ke(o,function(p,_){return p-s[_]});l<a;){for(var c=Number.NEGATIVE_INFINITY,d=null,h=0,f=u.length;h<f;++h)u[h]>c&&(c=u[h],d=h);++s[d],u[d]=0,++l}return s[t]/r}var mp=9007199254740991;function vp(e){var t=2*Math.PI;return(e%t+t)%t}function Lu(e){return-1e-4<e&&e<1e-4}var _T=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Ru(e){if(e instanceof Date)return e;if("string"!=typeof e)return null==e?new Date(NaN):new Date(Math.round(e));var t=_T.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}function Ny(e){return Math.pow(10,yp(e))}function yp(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return 10<=e/Math.pow(10,t)&&t++,t}function xp(e,t){var n=yp(e),i=Math.pow(10,n),r=e/i;return e=(t?r<1.5?1:r<2.5?2:r<4?3:r<7?5:10:r<1?1:r<2?2:r<3?3:r<5?5:10)*i,-20<=n?+e.toFixed(n<0?-n:0):e}function bp(e){e.sort(function(s,l){return function u(c,d,h){return c.interval[h]<d.interval[h]||c.interval[h]===d.interval[h]&&(c.close[h]-d.close[h]==(h?-1:1)||!h&&u(c,d,1))}(s,l,0)?-1:1});for(var t=-1/0,n=1,i=0;i<e.length;){for(var r=e[i].interval,o=e[i].close,a=0;a<2;a++)r[a]<=t&&(r[a]=t,o[a]=a?1:1-n),t=r[a],n=o[a];r[0]===r[1]&&o[0]*o[1]!=1?e.splice(i,1):i++}return e}function Ey(e){return 0<=e-parseFloat(e)}var wT=(Object.freeze||Object)({linearMap:Pi,parsePercent:yn,round:nr,asc:Ss,getPrecision:Dy,getPrecisionSafe:Rd,getPixelPrecision:gp,getPercentWithPrecision:ky,MAX_SAFE_INTEGER:mp,remRadian:vp,isRadianAroundZero:Lu,parseDate:Ru,quantity:Ny,quantityExponent:yp,nice:xp,quantile:function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],o=n-i;return o?r+o*(e[i]-r):r},reformIntervals:bp,isNumeric:Ey});function za(e){return isNaN(e)?"-":(e=(e+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<e.length?"."+e[1]:"")}function Ly(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(n,i){return i.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Ms=Tn,CT=/([&<>"'])/g,ST={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Oi(e){return null==e?"":(e+"").replace(CT,function(t,n){return ST[n]})}function _p(e,t){return"{"+e+(t??"")+"}"}var Ry=["a","b","c","d","e","f","g"];function wp(e,t,n){Ye(t)||(t=[t]);var i=t.length;if(!i)return"";for(var r=t[0].$vars||[],o=0;o<r.length;o++){var a=Ry[o];e=e.replace(_p(a),_p(a,0))}for(var s=0;s<i;s++)for(var l=0;l<r.length;l++){var u=t[s][r[l]];e=e.replace(_p(Ry[l],s),n?Oi(u):u)}return e}function Py(e,t,n){return re(t,function(i,r){e=e.replace("{"+r+"}",n?Oi(i):i)}),e}function Pd(e,t){var n=(e=it(e)?{color:e,extraCssText:t}:e||{}).color,r=(t=e.extraCssText,e.renderMode||"html"),o=e.markerId||"X";return n?"html"===r?"subItem"===e.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Oi(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+Oi(n)+";"+(t||"")+'"></span>':{renderMode:r,content:"{marker"+o+"|}  ",style:{color:n}}:""}function Cl(e,t){return"0000".substr(0,t-(e+="").length)+e}function Cp(e,t,n){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var i=Ru(t),r=n?"UTC":"",o=i["get"+r+"FullYear"](),a=i["get"+r+"Month"]()+1,s=i["get"+r+"Date"](),l=i["get"+r+"Hours"](),u=i["get"+r+"Minutes"](),c=i["get"+r+"Seconds"](),d=i["get"+r+"Milliseconds"]();return e.replace("MM",Cl(a,2)).replace("M",a).replace("yyyy",o).replace("yy",o%100).replace("dd",Cl(s,2)).replace("d",s).replace("hh",Cl(l,2)).replace("h",l).replace("mm",Cl(u,2)).replace("m",u).replace("ss",Cl(c,2)).replace("s",c).replace("SSS",Cl(d,3))}function Bd(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)}var By=mi;function Pu(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location=e}else window.open(e,t)}var MT=(Object.freeze||Object)({addCommas:za,toCamelCase:Ly,normalizeCssArray:Ms,encodeHTML:Oi,formatTpl:wp,formatTplSimple:Py,getTooltipMarker:Pd,formatTime:Cp,capitalFirst:Bd,truncateText:By,getTextBoundingRect:function(e){return Jn(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)},getTextRect:function(e,t,n,i,r,o,a,s){return Jn(e,t,n,i,r,s,o,a)},windowOpen:Pu}),Od=re,Oy=["left","right","top","bottom","width","height"],Ts=[["width","left","right"],["height","top","bottom"]];function Sp(e,t,n,i,r){var o=0,a=0;null==i&&(i=1/0),null==r&&(r=1/0);var s=0;t.eachChild(function(l,u){var c,d,h=l.position,f=l.getBoundingRect(),p=t.childAt(u+1),_=p&&p.getBoundingRect();if("horizontal"===e){var v=f.width+(_?-_.x+f.x:0);s=i<(c=o+v)||l.newline?(o=0,c=v,a+=s+n,f.height):Math.max(s,f.height)}else{var E=f.height+(_?-_.y+f.y:0);s=r<(d=a+E)||l.newline?(o+=s+n,a=0,d=E,f.width):Math.max(s,f.width)}l.newline||(h[0]=o,h[1]=a,"horizontal"===e?o=c+n:a=d+n)})}var As=Sp;function Ki(e,t,n){n=Ms(n||0);var i=t.width,r=t.height,o=yn(e.left,i),a=yn(e.top,r),s=yn(e.right,i),l=yn(e.bottom,r),u=yn(e.width,i),c=yn(e.height,r),d=n[2]+n[0],h=n[1]+n[3],f=e.aspect;switch(isNaN(u)&&(u=i-s-h-o),isNaN(c)&&(c=r-l-d-a),null!=f&&(isNaN(u)&&isNaN(c)&&(i/r<f?u=.8*i:c=.8*r),isNaN(u)&&(u=f*c),isNaN(c)&&(c=u/f)),isNaN(o)&&(o=i-s-u-h),isNaN(a)&&(a=r-l-c-d),e.left||e.right){case"center":o=i/2-u/2-n[3];break;case"right":o=i-u-h}switch(e.top||e.bottom){case"middle":case"center":a=r/2-c/2-n[0];break;case"bottom":a=r-c-d}o=o||0,a=a||0,isNaN(u)&&(u=i-h-o-(s||0)),isNaN(c)&&(c=r-d-a-(l||0));var p=new g(o+n[3],a+n[0],u,c);return p.margin=n,p}function zd(e,t,n,i,r){var o=!r||!r.hv||r.hv[0],a=!r||!r.hv||r.hv[1],s=r&&r.boundingMode||"all";if(o||a){var l;if("raw"===s)l="group"===e.type?new g(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(l=e.getBoundingRect(),e.needLocalTransform()){var u=e.getLocalTransform();(l=l.clone()).applyTransform(u)}t=Ki(De({width:l.width,height:l.height},t),n,i);var c=e.position,d=o?t.x-l.x:0,h=a?t.y-l.y:0;e.attr("position","raw"===s?[d,h]:[c[0]+d,c[1]+h])}}function Va(e,t,n){Mt(n)||(n={});var i=n.ignoreSize;Ye(i)||(i=[i,i]);var r=a(Ts[0],0),o=a(Ts[1],1);function a(c,d){var h={},f=0,p={},_=0;if(Od(c,function(F){p[F]=e[F]}),Od(c,function(F){s(t,F)&&(h[F]=p[F]=t[F]),l(h,F)&&f++,l(p,F)&&_++}),i[d])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(2!==_&&f){if(2<=f)return h;for(var v=0;v<c.length;v++){var E=c[v];if(!s(h,E)&&s(e,E)){h[E]=e[E];break}}return h}return p}function s(c,d){return c.hasOwnProperty(d)}function l(c,d){return null!=c[d]&&"auto"!==c[d]}function u(c,d,h){Od(c,function(f){d[f]=h[f]})}u(Ts[0],e,r),u(Ts[1],e,o)}function Sl(e){return zy({},e)}function zy(e,t){return t&&e&&Od(Oy,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}Lt(Sp,"vertical"),Lt(Sp,"horizontal");var Mp,Vd,Vy,TT=Wr(),yi=di.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,n,i){di.call(this,e,t,n,i),this.uid=Eu("ec_cpt_model")},init:function(e,t,n,i){this.mergeDefaultAndTheme(e,n)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,i=n?Sl(e):{};rt(e,t.getTheme().get(this.mainType)),rt(e,this.getDefaultOption()),n&&Va(e,i,n)},mergeOption:function(e,t){rt(this.option,e,!0);var n=this.layoutMode;n&&Va(this.option,e,n)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=TT(this);if(!e.defaultOption){for(var t=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&t.push(i),n=n.superClass}for(var r={},o=t.length-1;0<=o;o--)r=rt(r,t[o],!0);e.defaultOption=r}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});function Hy(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}cd(yi,{registerWhenExtend:!0}),Vd={},(Mp=yi).registerSubTypeDefaulter=function(e,t){e=ka(e),Vd[e.main]=t},Mp.determineSubType=function(e,t){var n=t.type;if(!n){var i=ka(e).main;Mp.hasSubTypes(e)&&Vd[i]&&(n=Vd[i](t))}return n},Vy=function(e){var t=[];return re(yi.getClassesByMainType(e),function(n){t=t.concat(n.prototype.dependencies||[])}),t=Ke(t,function(n){return ka(n).main}),"dataset"!==e&&Je(t,"dataset")<=0&&t.unshift("dataset"),t},yi.topologicalTravel=function(e,t,n,i){if(e.length){var r=(p={},_=[],re(f=t,function(v){var V,q,j,E=Hy(p,v),F=(V=E.originalDeps=Vy(v),q=f,j=[],re(V,function(X){0<=Je(q,X)&&j.push(X)}),j);E.entryCount=F.length,0===E.entryCount&&_.push(v),re(F,function(V){Je(E.predecessor,V)<0&&E.predecessor.push(V);var q=Hy(p,V);Je(q.successor,V)<0&&q.successor.push(v)})}),{graph:p,noEntryList:_}),o=r.graph,a=r.noEntryList,s={};for(re(e,function(f){s[f]=!0});a.length;){var l=a.pop(),u=o[l],c=!!s[l];c&&(n.call(i,l,u.originalDeps.slice()),delete s[l]),re(u.successor,c?h:d)}re(s,function(){throw new Error("Circle dependency may exists")})}var f,p,_;function d(f){o[f].entryCount--,0===o[f].entryCount&&a.push(f)}function h(f){s[f]=!0,d(f)}},tt(yi,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var Fy="";typeof navigator<"u"&&(Fy=navigator.platform||"");var AT={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:Fy.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Tp=Wr(),Ap={clearColorPalette:function(){Tp(this).colorIdx=0,Tp(this).colorNameMap={}},getColorFromPalette:function(e,t,n){var i=Tp(t=t||this),r=i.colorIdx||0,o=i.colorNameMap=i.colorNameMap||{};if(o.hasOwnProperty(e))return o[e];var a=vr(this.get("color",!0)),s=this.get("colorLayer",!0),l=null!=n&&s?function(c,d){for(var h=c.length,f=0;f<h;f++)if(c[f].length>d)return c[f];return c[h-1]}(s,n):a;if((l=l||a)&&l.length){var u=l[r];return e&&(o[e]=u),i.colorIdx=(r+1)%l.length,u}}},Is="original",Bu="arrayRows",Ou="objectRows",zu="keyedColumns",Wy="unknown",Hd="typedArray";function Io(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===zu?{}:[]),this.sourceFormat=e.sourceFormat||Wy,this.seriesLayoutBy=e.seriesLayoutBy||"column",this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&Ct(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}Io.seriesDataToSource=function(e){return new Io({data:e,sourceFormat:xn(e)?Hd:Is,fromDataset:!1})},ud(Io);var Ml=Wr();function Uy(e){var t=e.option,n=t.data,i=xn(n)?Hd:Is,r=!1,o=t.seriesLayoutBy,a=t.sourceHeader,s=t.dimensions,l=kp(e);if(l){var u=l.option;n=u.source,i=Ml(l).sourceFormat,r=!0,o=o||u.seriesLayoutBy,null==a&&(a=u.sourceHeader),s=s||u.dimensions}var c=function(d,h,f,p,_){if(!d)return{dimensionsDefine:jy(_)};var v,E;if(h===Bu)"auto"===p||null==p?qy(function(V){null!=V&&"-"!==V&&(it(V)?null==E&&(E=1):E=0)},f,d,10):E=p?1:0,_||1!==E||(_=[],qy(function(V,q){_[q]=V??""},f,d)),v=_?_.length:"row"===f?d.length:d[0]?d[0].length:null;else if(h===Ou)_=_||function(V){for(var q,j=0;j<V.length&&!(q=V[j++]););if(q){var X=[];return re(q,function(Y,Q){X.push(Q)}),X}}(d);else if(h===zu)_||(_=[],re(d,function(V,q){_.push(q)}));else if(h===Is){var F=bu(d[0]);v=Ye(F)&&F.length||1}return{startIndex:E,dimensionsDefine:jy(_),dimensionsDetectCount:v}}(n,i,o,a,s);Ml(e).source=new Io({data:n,fromDataset:r,seriesLayoutBy:o,sourceFormat:i,dimensionsDefine:c.dimensionsDefine,startIndex:c.startIndex,dimensionsDetectCount:c.dimensionsDetectCount,encodeDefine:t.encode})}function jy(e){if(e){var t=Ct();return Ke(e,function(n,i){if(null==(n=fe({},Mt(n)?n:{name:n})).name)return n;n.name+="",null==n.displayName&&(n.displayName=n.name);var r=t.get(n.name);return r?n.name+="-"+r.count++:t.set(n.name,{count:1}),n})}}function qy(e,t,n,i){if(null==i&&(i=1/0),"row"===t)for(var r=0;r<n.length&&r<i;r++)e(n[r]?n[r][0]:null,r);else{var o=n[0]||[];for(r=0;r<o.length&&r<i;r++)e(o[r],r)}}function Xy(e,t,n){var i={},r=kp(t);if(!r||!e)return i;var o,a,s=[],l=[],c=Ml(t.ecModel).datasetMap,d=r.uid+"_"+n.seriesLayoutBy;re(e=e.slice(),function(_,v){Mt(_)||(e[v]={name:_}),"ordinal"===_.type&&null==o&&(a=p(e[o=v])),i[_.name]=[]});var h=c.get(d)||c.set(d,{categoryWayDim:a,valueWayDim:0});function f(_,v,E){for(var F=0;F<E;F++)_.push(v+F)}function p(_){var v=_.dimsDef;return v?v.length:1}return re(e,function(_,v){var E=_.name,F=p(_);if(null==o){var V=h.valueWayDim;f(i[E],V,F),f(l,V,F),h.valueWayDim+=F}else o===v?(f(i[E],0,F),f(s,0,F)):(f(i[E],V=h.categoryWayDim,F),f(l,V,F),h.categoryWayDim+=F)}),s.length&&(i.itemName=s),l.length&&(i.seriesName=l),i}function Dp(e,t,n){var i={};if(!kp(e))return i;var r,o=t.sourceFormat,a=t.dimensionsDefine;o!==Ou&&o!==zu||re(a,function(u,c){"name"===(Mt(u)?u.name:u)&&(r=c)});var s=function(){for(var u={},c={},d=[],h=0,f=Math.min(5,n);h<f;h++){var p=Zy(t.data,o,t.seriesLayoutBy,a,t.startIndex,h);d.push(p);var _=3===p;if(_&&null==u.v&&h!==r&&(u.v=h),null!=u.n&&u.n!==u.v&&(_||3!==d[u.n])||(u.n=h),v(u)&&3!==d[u.n])return u;_||(2===p&&null==c.v&&h!==r&&(c.v=h),null!=c.n&&c.n!==c.v||(c.n=h))}function v(E){return null!=E.v&&null!=E.n}return v(u)?u:v(c)?c:null}();if(s){i.value=s.v;var l=r??s.n;i.itemName=[l],i.seriesName=[l]}return i}function kp(e){var t=e.option;if(!t.data)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}function Zy(e,t,n,i,r,o){var a,s,l;if(xn(e))return 3;if(i){var u=i[o];Mt(u)?(s=u.name,l=u.type):it(u)&&(s=u)}if(null!=l)return"ordinal"===l?1:3;if(t===Bu)if("row"===n){for(var c=e[o],d=0;d<(c||[]).length&&d<5;d++)if(null!=(a=_(c[r+d])))return a}else for(d=0;d<e.length&&d<5;d++){var h=e[r+d];if(h&&null!=(a=_(h[o])))return a}else if(t===Ou){if(!s)return 3;for(d=0;d<e.length&&d<5;d++)if((f=e[d])&&null!=(a=_(f[s])))return a}else if(t===zu){if(!s||!(c=e[s])||xn(c))return 3;for(d=0;d<c.length&&d<5;d++)if(null!=(a=_(c[d])))return a}else if(t===Is)for(d=0;d<e.length&&d<5;d++){var f,p=bu(f=e[d]);if(!Ye(p))return 3;if(null!=(a=_(p[o])))return a}function _(v){var E=it(v);return null!=v&&isFinite(v)&&""!==v?E?2:3:E&&"-"!==v?1:void 0}return 3}var Np="\0_ec_inner",Ep=di.extend({init:function(e,t,n,i){n=n||{},this.option=null,this._theme=new di(n),this._optionManager=i},setOption:function(e,t){ei(!(Np in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,n=this._optionManager;if(!e||"recreate"===e){var i=n.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(i)):function(a){var s,u;this.option={},this.option[Np]=1,this._componentsMap=Ct({series:[]}),u=(s=a).color&&!s.colorLayer,re(this._theme.option,function(c,d){"colorLayer"===d&&u||yi.hasClass(d)||("object"==typeof c?s[d]=s[d]?rt(s[d],c,!1):Fe(c):null==s[d]&&(s[d]=c))}),rt(a,AT,!1),this.mergeOption(a)}.call(this,i),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var r=n.getTimelineOption(this);r&&(this.mergeOption(r),t=!0)}if(!e||"recreate"===e||"media"===e){var o=n.getMediaOption(this,this._api);o.length&&re(o,function(a){this.mergeOption(a,t=!0)},this)}return t},mergeOption:function(e){var t=this.option,n=this._componentsMap,i=[];(function(r){Ml(r).datasetMap=Ct()})(this),re(e,function(r,o){null!=r&&(yi.hasClass(o)?o&&i.push(o):t[o]=null==t[o]?Fe(r):rt(t[o],r,!0))}),yi.topologicalTravel(i,yi.getAllClassMainTypes(),function(r,o){var a=vr(e[r]),s=qf(n.get(r),a);k0(s),re(s,function(u,c){var f,p,d=u.option;Mt(d)&&(u.keyInfo.mainType=r,u.keyInfo.subType=(p=u.exist,(f=d).type?f.type:p?p.subType:yi.determineSubType(r,f)))});var l=function(u,c){Ye(c)||(c=c?[c]:[]);var d={};return re(c,function(h){d[h]=(u.get(h)||[]).slice()}),d}(n,o);t[r]=[],n.set(r,[]),re(s,function(u,c){var d=u.exist,h=u.option;if(ei(Mt(h)||d,"Empty component definition"),h){var f=yi.getClass(r,u.keyInfo.subType,!0);if(d&&d.constructor===f)d.name=u.keyInfo.name,d.mergeOption(h,this),d.optionUpdated(h,!1);else{var p=fe({dependentModels:l,componentIndex:c},u.keyInfo);fe(d=new f(h,this,this,p),p),d.init(h,this,this,p),d.optionUpdated(null,!0)}}else d.mergeOption({},this),d.optionUpdated({},!1);n.get(r)[c]=d,t[r][c]=d.option},this),"series"===r&&Lp(this,n.get("series"))},this),this._seriesIndicesMap=Ct(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=Fe(this.option);return re(e,function(t,n){if(yi.hasClass(n)){for(var i=(t=vr(t)).length-1;0<=i;i--)ad(t[i])&&t.splice(i,1);e[n]=t}}),delete e[Np],e},getTheme:function(){return this._theme},getComponent:function(e,t){var n=this._componentsMap.get(e);if(n)return n[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var n,i=e.index,r=e.id,o=e.name,a=this._componentsMap.get(t);if(!a||!a.length)return[];if(null!=i)Ye(i)||(i=[i]),n=nt(Ke(i,function(u){return a[u]}),function(u){return!!u});else if(null!=r){var s=Ye(r);n=nt(a,function(u){return s&&0<=Je(r,u.id)||!s&&u.id===r})}else if(null!=o){var l=Ye(o);n=nt(a,function(u){return l&&0<=Je(o,u.name)||!l&&u.name===o})}else n=a.slice();return Yy(n,e)},findComponents:function(e){var t,n,i,r,o,s=e.mainType,l=(n=s+"Index",i=s+"Id",r=s+"Name",!(t=e.query)||null==t[n]&&null==t[i]&&null==t[r]?null:{mainType:s,index:t[n],id:t[i],name:t[r]});return o=Yy(l?this.queryComponents(l):this._componentsMap.get(s),e),e.filter?nt(o,e.filter):o},eachComponent:function(e,t,n){var i=this._componentsMap;"function"==typeof e?(n=t,t=e,i.each(function(r,o){re(r,function(a,s){t.call(n,o,a,s)})})):it(e)?re(i.get(e),t,n):Mt(e)&&re(this.findComponents(e),t,n)},getSeriesByName:function(e){return nt(this._componentsMap.get("series"),function(t){return t.name===e})},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){return nt(this._componentsMap.get("series"),function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){re(this._seriesIndices,function(n){var i=this._componentsMap.get("series")[n];e.call(t,i,n)},this)},eachRawSeries:function(e,t){re(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,n){re(this._seriesIndices,function(i){var r=this._componentsMap.get("series")[i];r.subType===e&&t.call(n,r,i)},this)},eachRawSeriesByType:function(e,t,n){return re(this.getSeriesByType(e),t,n)},isSeriesFiltered:function(e){return null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){Lp(this,nt(this._componentsMap.get("series"),e,t))},restoreData:function(e){var t=this._componentsMap;Lp(this,t.get("series"));var n=[];t.each(function(i,r){n.push(r)}),yi.topologicalTravel(n,yi.getAllClassMainTypes(),function(i,r){re(t.get(i),function(o){"series"===i&&function(a,s){if(s){var l=s.seiresIndex,u=s.seriesId,c=s.seriesName;return null!=l&&a.componentIndex!==l||null!=u&&a.id!==u||null!=c&&a.name!==c}}(o,e)||o.restoreData()})})}});function Lp(e,t){e._seriesIndicesMap=Ct(e._seriesIndices=Ke(t,function(n){return n.componentIndex})||[])}function Yy(e,t){return t.hasOwnProperty("subType")?nt(e,function(n){return n.subType===t.subType}):e}tt(Ep,Ap);var IT=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function $y(e){re(IT,function(t){this[t]=ut(e[t],e)},this)}var Rp={};function Ir(){this._coordinateSystems=[]}Ir.prototype={constructor:Ir,create:function(e,t){var n=[];re(Rp,function(i,r){var o=i.create(e,t);n=n.concat(o||[])}),this._coordinateSystems=n},update:function(e,t){re(this._coordinateSystems,function(n){n.update&&n.update(e,t)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},Ir.register=function(e,t){Rp[e]=t},Ir.get=function(e){return Rp[e]};var Fd=re,Ds=Fe,Wd=Ke,Ky=rt,DT=/^(min|max)?(.+)$/;function Pp(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function kT(e,t,n){var i={width:t,height:n,aspectratio:t/n},r=!0;return re(e,function(o,a){var c,d,h,s=a.match(DT);if(s&&s[1]&&s[2]){var l=s[1],u=s[2].toLowerCase();c=i[u],d=o,!("min"===(h=l)?d<=c:"max"===h?c<=d:c===d)&&(r=!1)}}),r}Pp.prototype={constructor:Pp,setOption:function(e,t){e&&re(vr(e.series),function(r){r&&r.data&&xn(r.data)&&Bi(r.data)}),e=Ds(e);var n=this._optionBackup,i=function(r,o,a){var s,l,u=[],c=[],d=r.timeline;return r.baseOption&&(l=r.baseOption),(d||r.options)&&(l=l||{},u=(r.options||[]).slice()),r.media&&(l=l||{},Fd(r.media,function(f){f&&f.option&&(f.query?c.push(f):s=s||f)})),(l=l||r).timeline||(l.timeline=d),Fd([l].concat(u).concat(Ke(c,function(f){return f.option})),function(f){Fd(o,function(p){p(f,a)})}),{baseOption:l,timelineOptions:u,mediaDefault:s,mediaList:c}}.call(this,e,t,!n);this._newBaseOption=i.baseOption,n?(function(r,o){Fd(o=o||{},function(a,s){if(null!=a){var l=r[s];if(yi.hasClass(s)){a=vr(a);var u=qf(l=vr(l),a);r[s]=Wd(u,function(c){return c.option&&c.exist?Ky(c.exist,c.option,!0):c.exist||c.option})}else r[s]=Ky(l,a,!0)}})}(n.baseOption,i.baseOption),i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=Wd(t.timelineOptions,Ds),this._mediaList=Wd(t.mediaList,Ds),this._mediaDefault=Ds(t.mediaDefault),this._currentMediaIndices=[],Ds(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,n=this._timelineOptions;if(n.length){var i=e.getComponent("timeline");i&&(t=Ds(n[i.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var c,t=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,r=this._mediaDefault,o=[],a=[];if(!i.length&&!r)return a;for(var s=0,l=i.length;s<l;s++)kT(i[s].query,t,n)&&o.push(s);return!o.length&&r&&(o=[-1]),o.length&&(c=this._currentMediaIndices,!(o.join(",")===c.join(",")))&&(a=Wd(o,function(u){return Ds(-1===u?r.option:i[u].option)})),this._currentMediaIndices=o,a}};var Do=re,Vu=Mt,Jy=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Bp(e){var t=e&&e.itemStyle;if(t)for(var n=0,i=Jy.length;n<i;n++){var r=Jy[n],o=t.normal,a=t.emphasis;o&&o[r]&&(e[r]=e[r]||{},e[r].normal?rt(e[r].normal,o[r]):e[r].normal=o[r],o[r]=null),a&&a[r]&&(e[r]=e[r]||{},e[r].emphasis?rt(e[r].emphasis,a[r]):e[r].emphasis=a[r],a[r]=null)}}function Dr(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var i=e[t].normal,r=e[t].emphasis;i&&(n?(e[t].normal=e[t].emphasis=null,De(e[t],i)):e[t]=i),r&&(e.emphasis=e.emphasis||{},e.emphasis[t]=r)}}function Hu(e){Dr(e,"itemStyle"),Dr(e,"lineStyle"),Dr(e,"areaStyle"),Dr(e,"label"),Dr(e,"labelLine"),Dr(e,"upperLabel"),Dr(e,"edgeLabel")}function Ji(e,t){var n=Vu(e)&&e[t],i=Vu(n)&&n.textStyle;if(i)for(var r=0,o=D0.length;r<o;r++)i.hasOwnProperty(t=D0[r])&&(n[t]=i[t])}function vo(e){e&&(Hu(e),Ji(e,"label"),e.emphasis&&Ji(e.emphasis,"label"))}function pa(e){return Ye(e)?e:e?[e]:[]}function Qy(e){return(Ye(e)?e[0]:e)||{}}function e1(e){re(ET,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var ET=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],LT=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],t1=function(e,t){(function NT(e,t){Do(pa(e.series),function(i){Vu(i)&&function(r){if(Vu(r)){Bp(r),Hu(r),Ji(r,"label"),Ji(r,"upperLabel"),Ji(r,"edgeLabel"),r.emphasis&&(Ji(r.emphasis,"label"),Ji(r.emphasis,"upperLabel"),Ji(r.emphasis,"edgeLabel")),(a=r.markPoint)&&(Bp(a),vo(a)),(s=r.markLine)&&(Bp(s),vo(s));var o=r.markArea;o&&vo(o);var a,s,l=r.data;if("graph"===r.type){l=l||r.nodes;var u=r.links||r.edges;if(u&&!xn(u))for(var c=0;c<u.length;c++)vo(u[c]);re(r.categories,function(f){Hu(f)})}if(l&&!xn(l))for(c=0;c<l.length;c++)vo(l[c]);if((a=r.markPoint)&&a.data){var d=a.data;for(c=0;c<d.length;c++)vo(d[c])}if((s=r.markLine)&&s.data){var h=s.data;for(c=0;c<h.length;c++)Ye(h[c])?(vo(h[c][0]),vo(h[c][1])):vo(h[c])}"gauge"===r.type?(Ji(r,"axisLabel"),Ji(r,"title"),Ji(r,"detail")):"treemap"===r.type?(Dr(r.breadcrumb,"itemStyle"),re(r.levels,function(f){Hu(f)})):"tree"===r.type&&Hu(r.leaves)}}(i)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Do(n,function(i){Do(pa(e[i]),function(r){r&&(Ji(r,"axisLabel"),Ji(r.axisPointer,"label"))})}),Do(pa(e.parallel),function(i){var r=i&&i.parallelAxisDefault;Ji(r,"axisLabel"),Ji(r&&r.axisPointer,"label")}),Do(pa(e.calendar),function(i){Dr(i,"itemStyle"),Ji(i,"dayLabel"),Ji(i,"monthLabel"),Ji(i,"yearLabel")}),Do(pa(e.radar),function(i){Ji(i,"name")}),Do(pa(e.geo),function(i){Vu(i)&&(vo(i),Do(pa(i.regions),function(r){vo(r)}))}),Do(pa(e.timeline),function(i){vo(i),Dr(i,"label"),Dr(i,"itemStyle"),Dr(i,"controlStyle",!0);var r=i.data;Ye(r)&&re(r,function(o){Mt(o)&&(Dr(o,"label"),Dr(o,"itemStyle"))})}),Do(pa(e.toolbox),function(i){Dr(i,"iconStyle"),Do(i.feature,function(r){Dr(r,"iconStyle")})}),Ji(Qy(e.axisPointer),"label"),Ji(Qy(e.tooltip).axisPointer,"label")})(e,t),e.series=vr(e.series),re(e.series,function(n){if(Mt(n)){var i=n.type;if("line"===i)null!=n.clipOverflow&&(n.clip=n.clipOverflow);else if("pie"===i||"gauge"===i)null!=n.clockWise&&(n.clockwise=n.clockWise);else if("gauge"===i){var r=function(o,a){a=a.split(",");for(var s=o,l=0;l<a.length&&null!=(s=s&&s[a[l]]);l++);return s}(n,"pointer.color");null!=r&&function(o,a,s,l){a=a.split(",");for(var u,c=o,d=0;d<a.length-1;d++)null==c[u=a[d]]&&(c[u]={}),c=c[u];null!=c[a[d]]||(c[a[d]]=s)}(n,"itemStyle.color",r)}e1(n)}}),e.dataRange&&(e.visualMap=e.dataRange),re(LT,function(n){var i=e[n];i&&(Ye(i)||(i=[i]),re(i,function(r){e1(r)}))})};function RT(e){re(e,function(t,n){var i=[],r=[NaN,NaN],a=t.data,s=t.isStackedByIndex,l=a.map([t.stackResultDimension,t.stackedOverDimension],function(u,c,d){var h,f,p=a.get(t.stackedDimension,d);if(isNaN(p))return r;s?f=a.getRawIndex(d):h=a.get(t.stackedByDimension,d);for(var _=NaN,v=n-1;0<=v;v--){var E=e[v];if(s||(f=E.data.rawIndexOf(E.stackedByDimension,h)),0<=f){var F=E.data.getByRawIndex(E.stackResultDimension,f);if(0<=p&&0<F||p<=0&&F<0){p+=F,_=F;break}}}return i[0]=p,i[1]=_,i});a.hostModel.setData(l),t.data=l})}function n1(e,t){Io.isInstance(e)||(e=Io.seriesDataToSource(e)),this._source=e;var n=this._data=e.data,i=e.sourceFormat;i===Hd&&(this._offset=0,this._dimSize=t,this._data=n),fe(this,PT[i===Bu?i+"_"+e.seriesLayoutBy:i])}var Op=n1.prototype;Op.pure=!1;var PT={arrayRows_column:{pure:Op.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:zp},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],n=this._data,i=0;i<n.length;i++){var r=n[i];t.push(r?r[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:i1,getItem:r1,appendData:zp},keyedColumns:{pure:!0,count:function(){var t=this._data[this._source.dimensionsDefine[0].name];return t?t.length:0},getItem:function(e){for(var t=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var r=this._data[n[i].name];t.push(r?r[e]:null)}return t},appendData:function(e){var t=this._data;re(e,function(n,i){for(var r=t[i]||(t[i]=[]),o=0;o<(n||[]).length;o++)r.push(n[o])})}},original:{count:i1,getItem:r1,appendData:zp},typedArray:{persistent:!(Op.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){t=t||[];for(var n=this._dimSize*(e-=this._offset),i=0;i<this._dimSize;i++)t[i]=this._data[n+i];return t},appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function i1(){return this._data.length}function r1(e){return this._data[e]}function zp(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var BT={arrayRows:Vp,objectRows:function(e,t,n,i){return null!=n?e[i]:e},keyedColumns:Vp,original:function(e,t,n,i){var r=bu(e);return null!=n&&r instanceof Array?r[n]:r},typedArray:Vp};function Vp(e,t,n,i){return null!=n?e[n]:e}var o1={arrayRows:a1,objectRows:function(e,t,n,i){return Hp(e[t],this._dimensionInfos[t])},keyedColumns:a1,original:function(e,t,n,i){var r=e&&(e.value??e);return!this._rawData.pure&&function(o){return gl(o)&&!(o instanceof Array)}(e)&&(this.hasItemOption=!0),Hp(r instanceof Array?r[i]:r,this._dimensionInfos[t])},typedArray:function(e,t,n,i){return e[i]}};function a1(e,t,n,i){return Hp(e[i],this._dimensionInfos[t])}function Hp(e,t){var n=t&&t.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof e&&null!=e&&"-"!==e&&(e=+Ru(e)),null==e||""===e?NaN:+e;var i=t&&t.ordinalMeta;return i?i.parseAndCollect(e):e}function ks(e,t,n){if(e){var i=e.getRawDataItem(t);if(null!=i){var r,o,a=e.getProvider().getSource().sourceFormat,s=e.getDimensionInfo(n);return s&&(r=s.name,o=s.index),BT[a](i,t,o,r)}}}function s1(e,t,n){if(e){var i=e.getProvider().getSource().sourceFormat;if(i===Is||i===Ou){var r=e.getRawDataItem(t);return i!==Is||Mt(r)||(r=null),r?r[n]:void 0}}}var OT=/\{@(.+?)\}/g,Fp={getDataParams:function(e,t){var n=this.getData(t),i=this.getRawValue(e,t),r=n.getRawIndex(e),o=n.getName(e),a=n.getRawDataItem(e),s=n.getItemVisual(e,"color"),l=n.getItemVisual(e,"borderColor"),u=this.ecModel.getComponent("tooltip"),c=E0(u&&u.get("renderMode")),d=this.mainType,h="series"===d,f=n.userOutput;return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:r,data:a,dataType:t,value:i,color:s,borderColor:l,dimensionNames:f?f.dimensionNames:null,encode:f?f.encode:null,marker:Pd({color:s,renderMode:c}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,t,n,i,r){t=t||"normal";var o=this.getData(n),a=o.getItemModel(e),s=this.getDataParams(e,n);null!=i&&s.value instanceof Array&&(s.value=s.value[i]);var l=a.get("normal"===t?[r||"label","formatter"]:[t,r||"label","formatter"]);return"function"==typeof l?(s.status=t,s.dimensionIndex=i,l(s)):"string"==typeof l?wp(l,s).replace(OT,function(u,c){var d=c.length;return"["===c.charAt(0)&&"]"===c.charAt(d-1)&&(c=+c.slice(1,d-1)),ks(o,e,c)}):void 0},getRawValue:function(e,t){return ks(this.getData(t),e)},formatTooltip:function(){}};function Fu(e){return new l1(e)}function l1(e){this._reset=(e=e||{}).reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}var Ha=l1.prototype;Ha.perform=function(e){var t,n=this._upstream,i=e&&e.skip;if(this._dirty&&n){var r=this.context;r.data=r.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(t=this._plan(this.context));var o,a=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;function c(E){return 1<=E||(E=1),E}a===l&&s===u||(t="reset"),!this._dirty&&"reset"!==t||(this._dirty=!1,o=function(E,F){var V,q;E._dueIndex=E._outputDueEnd=E._dueEnd=0,E._settedOutputEnd=null,!F&&E._reset&&((V=E._reset(E.context))&&V.progress&&(q=V.forceFirstProgress,V=V.progress),Ye(V)&&!V.length&&(V=null)),E._progress=V,E._modBy=E._modDataCount=null;var j=E._downstream;return j&&j.dirty(),q}(this,i)),this._modBy=l,this._modDataCount=u;var d=e&&e.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,f=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!i&&(o||h<f)){var p=this._progress;if(Ye(p))for(var _=0;_<p.length;_++)d1(this,p[_],h,f,l,u);else d1(this,p,h,f,l,u)}this._dueIndex=f,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:f}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var Wp,Fa,Gd,Ud,Gp,u1,c1=u1={reset:function(e,t,n,i){Fa=e,Wp=t,Gd=n,Ud=i,Gp=Math.ceil(Ud/Gd),u1.next=1<Gd&&0<Ud?VT:zT}};function zT(){return Fa<Wp?Fa++:null}function VT(){var e=Fa%Gp*Gd+Math.ceil(Fa/Gp),t=Wp<=Fa?null:e<Ud?e:Fa;return Fa++,t}function d1(e,t,n,i,r,o){c1.reset(n,i,r,o),e._callingProgress=t,e._callingProgress({start:n,end:i,count:i-n,next:c1.next},e.context)}Ha.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},Ha.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},Ha.pipe=function(e){this._downstream===e&&!this._dirty||((this._downstream=e)._upstream=this,e.dirty())},Ha.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},Ha.getUpstream=function(){return this._upstream},Ha.getDownstream=function(){return this._downstream},Ha.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e};var Wu=Wr(),Wi=yi.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Fu({count:HT,reset:FT}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),Uy(this);var r=this.getInitialData(e,n);f1(r,this),this.dataTask.context.data=r,Wu(this).dataBeforeProcessed=r,h1(this)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,i=n?Sl(e):{},r=this.subType;yi.hasClass(r)&&(r+="Series"),rt(e,t.getTheme().get(this.subType)),rt(e,this.getDefaultOption()),ms(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&Va(e,i,n)},mergeOption:function(e,t){e=rt(this.option,e,!0),this.fillDataTextStyle(e.data);var n=this.layoutMode;n&&Va(this.option,e,n),Uy(this);var i=this.getInitialData(e,t);f1(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,Wu(this).dataBeforeProcessed=i,h1(this)},fillDataTextStyle:function(e){if(e&&!xn(e))for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&ms(e[n],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=Up(this);if(t){var n=t.context.data;return null==e?n:n.getLinkedData(e)}return Wu(this).data},setData:function(e){var t=Up(this);if(t){var n=t.context;n.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),n.outputData=e,t!==this.dataTask&&(n.data=e)}Wu(this).data=e},getSource:function(){return function(e){return Ml(e).source}(this)},getRawData:function(){return Wu(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,n,i){var r=this,o="html"===(i=i||"html")?"<br/>":"\n",a="richText"===i,s={},l=0,c=this.getData(),d=c.mapDimension("defaultedTooltip",!0),h=d.length,f=this.getRawValue(e),p=Ye(f),_=c.getItemVisual(e,"color");Mt(_)&&_.colorStops&&(_=(_.colorStops[0]||{}).color),_=_||"transparent";var v=(1<h||p&&!h?function(X){var Y=Tt(X,function(we,Ce,Ae){var Oe=c.getDimensionInfo(Ae);return we|(Oe&&!1!==Oe.tooltip&&null!=Oe.displayName)},0),Q=[];function oe(we,Ce){var Ae=c.getDimensionInfo(Ce);if(Ae&&!1!==Ae.otherDims.tooltip){var Oe=Ae.type,Ge="sub"+r.seriesIndex+"at"+l,Pe=Pd({color:_,type:"subItem",renderMode:i,markerId:Ge}),Pt=(Y?("string"==typeof Pe?Pe:Pe.content)+Oi(Ae.displayName||"-")+": ":"")+Oi("ordinal"===Oe?we+"":"time"===Oe?t?"":Cp("yyyy/MM/dd hh:mm:ss",we):za(we));Pt&&Q.push(Pt),a&&(s[Ge]=_,++l)}}d.length?re(d,function(we){oe(ks(c,e,we),we)}):re(X,oe);var ce=Y?a?"\n":"<br/>":"",ge=ce+Q.join(ce||", ");return{renderMode:i,content:ge,style:s}}(f):function u(X){return{renderMode:i,content:Oi(za(X)),style:s}}(h?ks(c,e,d[0]):p?f[0]:f)).content,E=r.seriesIndex+"at"+l,F=Pd({color:_,type:"item",renderMode:i,markerId:E});s[E]=_,++l;var V=c.getName(e),q=this.name;Xf(this)||(q=""),q=q?Oi(q)+(t?": ":o):"";var j="string"==typeof F?F:F.content;return{html:t?j+q+v:q+j+(V?Oi(V)+": "+v:v),markers:s}},isAnimationEnabled:function(){if(He.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,n){var i=this.ecModel;return Ap.getColorFromPalette.call(this,e,t,n)||i.getColorFromPalette(e,t,n)},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function h1(e){var t=e.name;Xf(e)||(e.name=function(n){var i=n.getRawData(),r=i.mapDimension("seriesName",!0),o=[];return re(r,function(a){var s=i.getDimensionInfo(a);s.displayName&&o.push(s.displayName)}),o.join(" ")}(e)||t)}function HT(e){return e.model.getRawData().count()}function FT(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),WT}function WT(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function f1(e,t){re(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,Lt(GT,t))})}function GT(e){var t=Up(e);t&&t.setOutputEnd(this.count())}function Up(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var i=n.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(e.uid))}return i}}tt(Wi,Fp),tt(Wi,Ap);var jo=function(){this.group=new m,this.uid=Eu("viewComponent")},jp=jo.prototype={constructor:jo,init:function(e,t){},render:function(e,t,n,i){},dispose:function(){},filterForExposedEvent:null};function Tl(){var e=Wr();return function(t){var n=e(t),i=t.pipelineContext,r=n.large,o=n.progressiveRender,a=n.large=i&&i.large,s=n.progressiveRender=i&&i.progressiveRender;return!!(r^a||o^s)&&"reset"}}jp.updateView=jp.updateLayout=jp.updateVisual=function(e,t,n,i){},_u(jo),cd(jo,{registerWhenExtend:!0});var p1=Wr(),UT=Tl();function fr(){this.group=new m,this.uid=Eu("viewChart"),this.renderTask=Fu({plan:jT,reset:qT}),this.renderTask.context={view:this}}var qp=fr.prototype={type:"chart",init:function(e,t){},render:function(e,t,n,i){},highlight:function(e,t,n,i){g1(e.getData(),i,"emphasis")},downplay:function(e,t,n,i){g1(e.getData(),i,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function Xp(e,t,n){if(e&&(e.trigger(t,n),e.isGroup&&!Dd(e)))for(var i=0,r=e.childCount();i<r;i++)Xp(e.childAt(i),t,n)}function g1(e,t,n){var i=sd(e,t),r=t&&null!=t.highlightKey?by(t.highlightKey):null;null!=i?re(vr(i),function(o){Xp(e.getItemGraphicEl(o),n,r)}):e.eachItemGraphicEl(function(o){Xp(o,n,r)})}function jT(e){return UT(e.model)}function qT(e){var t=e.model,n=e.ecModel,i=e.api,r=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=r&&p1(r).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](t,n,i,r),XT[l]}qp.updateView=qp.updateLayout=qp.updateVisual=function(e,t,n,i){this.render(e,t,n,i)},_u(fr),cd(fr,{registerWhenExtend:!0}),fr.markUpdateMethod=function(e,t){p1(e).updateMethod=t};var XT={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},jd="\0__throttleOriginMethod",m1="\0__throttleRate",v1="\0__throttleType";function qd(e,t,n){var i,r,o,a,s,l=0,u=0,c=null;function d(){u=(new Date).getTime(),c=null,e.apply(o,a||[])}function h(){i=(new Date).getTime(),o=this,a=arguments;var f=s||t,p=s||n;s=null,r=i-(p?l:u)-f,clearTimeout(c),p?c=setTimeout(d,f):0<=r?d():c=setTimeout(d,-r),l=i}return t=t||0,h.clear=function(){c&&(clearTimeout(c),c=null)},h.debounceNextCall=function(f){s=f},h}function Gu(e,t,n,i){var r=e[t];if(r){var o=r[jd]||r;if(r[m1]!==n||r[v1]!==i){if(null==n||!i)return e[t]=o;(r=e[t]=qd(o,n,"debounce"===i))[jd]=o,r[v1]=i,r[m1]=n}return r}}function y1(e,t){var n=e[t];n&&n[jd]&&(e[t]=n[jd])}var ZT={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),i=(e.visualColorAccessPath||"itemStyle.color").split("."),r=e.get(i),o=!gn(r)||r instanceof Wo?null:r;r&&!o||(r=e.getColorFromPalette(e.name,null,t.getSeriesCount())),n.setVisual("color",r);var a=(e.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),s=e.get(a);if(n.setVisual("borderColor",s),!t.isSeriesFiltered(e))return o&&n.each(function(l){n.setItemVisual(l,"color",o(e.getDataParams(l)))}),{dataEach:n.hasItemOption?function(l,u){var c=l.getItemModel(u),d=c.get(i,!0),h=c.get(a,!0);null!=d&&l.setItemVisual(u,"color",d),null!=h&&l.setItemVisual(u,"borderColor",h)}:null}}},ga={legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}},Xd=Math.PI;function Zd(e,t,n,i){this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i),this._stageTaskMap=Ct()}var yo=Zd.prototype;function x1(e,t,n,i,r){var o;function a(s,l){return s.setDirty&&(!s.dirtyMap||s.dirtyMap.get(l.__pipeline.id))}r=r||{},re(t,function(s,l){if(!r.visualType||r.visualType===s.visualType){var u=e._stageTaskMap.get(s.uid),c=u.seriesTaskMap,d=u.overallTask;if(d){var h,f=d.agentStubMap;f.each(function(_){a(r,_)&&(_.dirty(),h=!0)}),h&&d.dirty(),b1(d,i);var p=e.getPerformArgs(d,r.block);f.each(function(_){_.perform(p)}),o|=d.perform(p)}else c&&c.each(function(_,v){a(r,_)&&_.dirty();var E=e.getPerformArgs(_,r.block);E.skip=!s.performRawSeries&&n.isSeriesFiltered(_.context.model),b1(_,i),o|=_.perform(E)})}}),e.unfinished|=o}yo.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},yo.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),i=n.context,r=!t&&n.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,o=i&&i.modDataCount;return{step:r,modBy:null!=o?Math.ceil(o/r):null,modDataCount:o}}},yo.getPipeline=function(e){return this._pipelineMap.get(e)},yo.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),i=e.getData().count(),r=n.progressiveEnabled&&t.incrementalPrepareRender&&i>=n.threshold,o=e.get("large")&&i>=e.get("largeThreshold"),a="mod"===e.get("progressiveChunkMode")?i:null;e.pipelineContext=n.context={progressiveRender:r,modDataCount:a,large:o}},yo.restorePipelines=function(e){var t=this,n=t._pipelineMap=Ct();e.eachSeries(function(i){var r=i.getProgressive(),o=i.uid;n.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:r&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),Yd(t,i,i.dataTask)})},yo.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.ecInstance.getModel(),n=this.api;re(this._allHandlers,function(i){var r=e.get(i.uid)||e.set(i.uid,[]);i.reset&&function(o,a,s,l,u){var c=s.seriesTaskMap||(s.seriesTaskMap=Ct()),d=a.seriesType,h=a.getTargetSeries;function f(_){var v=_.uid,E=c.get(v)||c.set(v,Fu({plan:eA,reset:tA,count:iA}));E.context={model:_,ecModel:l,api:u,useClearVisual:a.isVisual&&!a.isLayout,plan:a.plan,reset:a.reset,scheduler:o},Yd(o,_,E)}a.createOnAllSeries?l.eachRawSeries(f):d?l.eachRawSeriesByType(d,f):h&&h(l,u).each(f);var p=o._pipelineMap;c.each(function(_,v){p.get(v)||(_.dispose(),c.removeKey(v))})}(this,i,r,t,n),i.overallReset&&function(o,a,s,l,u){var c=s.overallTask=s.overallTask||Fu({reset:$T});c.context={ecModel:l,api:u,overallReset:a.overallReset,scheduler:o};var d=c.agentStubMap=c.agentStubMap||Ct(),h=a.seriesType,f=a.getTargetSeries,p=!0,_=a.modifyOutputEnd;function v(F){var V=F.uid,q=d.get(V);q||(q=d.set(V,Fu({reset:KT,onDirty:QT})),c.dirty()),q.context={model:F,overallProgress:p,modifyOutputEnd:_},q.agent=c,q.__block=p,Yd(o,F,q)}h?l.eachRawSeriesByType(h,v):f?f(l,u).each(v):(p=!1,re(l.getSeries(),v));var E=o._pipelineMap;d.each(function(F,V){E.get(V)||(F.dispose(),c.dirty(),d.removeKey(V))})}(this,i,r,t,n)},this)},yo.prepareView=function(e,t,n,i){var r=e.renderTask,o=r.context;o.model=t,o.ecModel=n,o.api=i,r.__block=!e.incrementalPrepareRender,Yd(this,t,r)},yo.performDataProcessorTasks=function(e,t){x1(this,this._dataProcessorHandlers,e,t,{block:!0})},yo.performVisualTasks=function(e,t,n){x1(this,this._visualHandlers,e,t,n)},yo.performSeriesTasks=function(e){var t;e.eachSeries(function(n){t|=n.dataTask.perform()}),this.unfinished|=t},yo.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})};var b1=yo.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function $T(e){e.overallReset(e.ecModel,e.api,e.payload)}function KT(e,t){return e.overallProgress&&JT}function JT(){this.agent.dirty(),this.getDownstream().dirty()}function QT(){this.agent&&this.agent.dirty()}function eA(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function tA(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=vr(e.reset(e.model,e.ecModel,e.api,e.payload));return 1<t.length?Ke(t,function(n,i){return _1(i)}):nA}var nA=_1(0);function _1(e){return function(t,n){var i=n.data,r=n.resetDefines[e];if(r&&r.dataEach)for(var o=t.start;o<t.end;o++)r.dataEach(i,o);else r&&r.progress&&r.progress(t,i)}}function iA(e){return e.data.count()}function Yd(e,t,n){var r=e._pipelineMap.get(t.uid);r.head||(r.head=n),r.tail&&r.tail.pipe(n),(r.tail=n).__idxInPipeline=r.count++,n.__pipeline=r}Zd.wrapStageHandler=function(e,t){return gn(e)&&(e={overallReset:e,seriesType:function(n){$d=null;try{n(Uu,w1)}catch{}return $d}(e)}),e.uid=Eu("stageHandler"),t&&(e.visualType=t),e};var $d,Uu={},w1={};function C1(e,t){for(var n in t.prototype)e[n]=en}function Kd(){return{axisLine:{lineStyle:{color:xr}},axisTick:{lineStyle:{color:xr}},axisLabel:{textStyle:{color:xr}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:xr}}}}C1(Uu,Ep),C1(w1,$y),Uu.eachSeriesByType=Uu.eachRawSeriesByType=function(e){$d=e},Uu.eachComponent=function(e){"series"===e.mainType&&e.subType&&($d=e.subType)};var S1=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],rA={color:S1,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],S1]},xr="#eee",Zp=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],M1={color:Zp,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:xr},crossStyle:{color:xr},label:{color:"#000"}}},legend:{textStyle:{color:xr}},textStyle:{color:xr},title:{textStyle:{color:xr}},toolbox:{iconStyle:{normal:{borderColor:xr}}},dataZoom:{textStyle:{color:xr}},visualMap:{textStyle:{color:xr}},timeline:{lineStyle:{color:xr},itemStyle:{normal:{color:Zp[1]}},label:{normal:{textStyle:{color:xr}}},controlStyle:{normal:{color:xr,borderColor:xr}}},timeAxis:Kd(),logAxis:Kd(),valueAxis:Kd(),categoryAxis:Kd(),line:{symbol:"circle"},graph:{color:Zp},gauge:{title:{textStyle:{color:xr}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};M1.categoryAxis.splitLine.show=!1,yi.extend({type:"dataset",defaultOption:{seriesLayoutBy:"column",sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(e){var t=e.option.source,n=Wy;if(xn(t))n=Hd;else if(Ye(t)){0===t.length&&(n=Bu);for(var i=0,r=t.length;i<r;i++){var o=t[i];if(null!=o){if(Ye(o)){n=Bu;break}if(Mt(o)){n=Ou;break}}}}else if(Mt(t)){for(var a in t)if(t.hasOwnProperty(a)&&Kt(t[a])){n=zu;break}}else if(null!=t)throw new Error("Invalid data");Ml(e).sourceFormat=n}(this)}}),jo.extend({type:"dataset"});var oA=ci.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,t){var n=t.cx,i=t.cy,r=t.rx,o=t.ry,a=.5522848*r,s=.5522848*o;e.moveTo(n-r,i),e.bezierCurveTo(n-r,i-s,n-a,i-o,n,i-o),e.bezierCurveTo(n+a,i-o,n+r,i-s,n+r,i),e.bezierCurveTo(n+r,i+s,n+a,i+o,n,i+o),e.bezierCurveTo(n-a,i+o,n-r,i+s,n-r,i),e.closePath()}}),Wa=/[\s,]+/;function T1(e){for(it(e)&&(e=(new DOMParser).parseFromString(e,"text/xml")),9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}function Jd(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}Jd.prototype.parse=function(e,t){t=t||{};var n=T1(e);if(!n)throw new Error("Illegal svg");var i=new m;this._root=i;var r=n.getAttribute("viewBox")||"",o=parseFloat(n.getAttribute("width")||t.width),a=parseFloat(n.getAttribute("height")||t.height);isNaN(o)&&(o=null),isNaN(a)&&(a=null),eo(n,i,null,!0);for(var s,l,u=n.firstChild;u;)this._parseNode(u,i),u=u.nextSibling;if(r){var c=Un(r).split(Wa);4<=c.length&&(s={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(s&&null!=o&&null!=a&&(l=k1(s,o,a),!t.ignoreViewBox)){var d=i;(i=new m).add(d),d.scale=l.scale.slice(),d.position=l.position.slice()}return t.ignoreRootClip||null==o||null==a||i.setClipPath(new vi({shape:{x:0,y:0,width:o,height:a}})),{root:i,width:o,height:a,viewBoxRect:s,viewBoxTransform:l}},Jd.prototype._parseNode=function(e,t){var n,i,r=e.nodeName.toLowerCase();if("defs"===r?this._isDefine=!0:"text"===r&&(this._isText=!0),this._isDefine){if(i=sA[r]){var o=i.call(this,e),a=e.getAttribute("id");a&&(this._defs[a]=o)}}else(i=aA[r])&&(n=i.call(this,e,t),t.add(n));for(var s=e.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===r?this._isDefine=!1:"text"===r&&(this._isText=!1)},Jd.prototype._parseText=function(e,t){if(1===e.nodeType){var n=e.getAttribute("dx")||0,i=e.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(i)}var r=new oi({style:{text:e.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});xo(t,r),eo(e,r,this._defs);var o=r.style.fontSize;o&&o<9&&(r.style.fontSize=9,r.scale=r.scale||[1,1],r.scale[0]*=o/9,r.scale[1]*=o/9);var a=r.getBoundingRect();return this._textX+=a.width,t.add(r),r};var aA={g:function(e,t){var n=new m;return xo(t,n),eo(e,n,this._defs),n},rect:function(e,t){var n=new vi;return xo(t,n),eo(e,n,this._defs),n.setShape({x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0)}),n},circle:function(e,t){var n=new Fo;return xo(t,n),eo(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),r:parseFloat(e.getAttribute("r")||0)}),n},line:function(e,t){var n=new yr;return xo(t,n),eo(e,n,this._defs),n.setShape({x1:parseFloat(e.getAttribute("x1")||0),y1:parseFloat(e.getAttribute("y1")||0),x2:parseFloat(e.getAttribute("x2")||0),y2:parseFloat(e.getAttribute("y2")||0)}),n},ellipse:function(e,t){var n=new oA;return xo(t,n),eo(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),rx:parseFloat(e.getAttribute("rx")||0),ry:parseFloat(e.getAttribute("ry")||0)}),n},polygon:function(e,t){var n=e.getAttribute("points");n=n&&A1(n);var i=new qr({shape:{points:n||[]}});return xo(t,i),eo(e,i,this._defs),i},polyline:function(e,t){var n=new ci;xo(t,n),eo(e,n,this._defs);var i=e.getAttribute("points");return i=i&&A1(i),new po({shape:{points:i||[]}})},image:function(e,t){var n=new li;return xo(t,n),eo(e,n,this._defs),n.setStyle({image:e.getAttribute("xlink:href"),x:e.getAttribute("x"),y:e.getAttribute("y"),width:e.getAttribute("width"),height:e.getAttribute("height")}),n},text:function(e,t){var n=e.getAttribute("x")||0,i=e.getAttribute("y")||0,r=e.getAttribute("dx")||0,o=e.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(r),this._textY=parseFloat(i)+parseFloat(o);var a=new m;return xo(t,a),eo(e,a,this._defs),a},tspan:function(e,t){var n=e.getAttribute("x"),i=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var r=e.getAttribute("dx")||0,o=e.getAttribute("dy")||0,a=new m;return xo(t,a),eo(e,a,this._defs),this._textX+=r,this._textY+=o,a},path:function(e,t){var n=ey(e.getAttribute("d")||"");return xo(t,n),eo(e,n,this._defs),n}},sA={lineargradient:function(e){var o=new _s(parseInt(e.getAttribute("x1")||0,10),parseInt(e.getAttribute("y1")||0,10),parseInt(e.getAttribute("x2")||10,10),parseInt(e.getAttribute("y2")||0,10));return function(a,s){for(var l=a.firstChild;l;){if(1===l.nodeType){var u=l.getAttribute("offset");u=0<u.indexOf("%")?parseInt(u,10)/100:u?parseFloat(u):0;var c=l.getAttribute("stop-color")||"#000000";s.addColorStop(u,c)}l=l.nextSibling}}(e,o),o},radialgradient:function(e){}};function xo(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),De(t.__inheritedStyle,e.__inheritedStyle))}function A1(e){for(var t=Un(e).split(Wa),n=[],i=0;i<t.length;i+=2){var r=parseFloat(t[i]),o=parseFloat(t[i+1]);n.push([r,o])}return n}var Al={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function eo(e,t,n,i){var r=t.__inheritedStyle||{},o="text"===t.type;if(1===e.nodeType&&(function(d,h){var f=d.getAttribute("transform");if(f){f=f.replace(/,/g," ");var p=null,_=[];f.replace(uA,function(V,q,j){_.push(q,j)});for(var v=_.length-1;0<v;v-=2){var E=_[v],F=_[v-1];switch(p=p||gr(),F){case"translate":E=Un(E).split(Wa),wr(p,p,[parseFloat(E[0]),parseFloat(E[1]||0)]);break;case"scale":E=Un(E).split(Wa),oa(p,p,[parseFloat(E[0]),parseFloat(E[1]||E[0])]);break;case"rotate":E=Un(E).split(Wa),So(p,p,parseFloat(E[0]));break;case"skew":E=Un(E).split(Wa),console.warn("Skew transform is not supported yet");break;case"matrix":E=Un(E).split(Wa),p[0]=parseFloat(E[0]),p[1]=parseFloat(E[1]),p[2]=parseFloat(E[2]),p[3]=parseFloat(E[3]),p[4]=parseFloat(E[4]),p[5]=parseFloat(E[5])}}h.setLocalTransform(p)}}(e,t),fe(r,function(d){var h=d.getAttribute("style"),f={};if(!h)return f;var p,_={};for(D1.lastIndex=0;null!=(p=D1.exec(h));)_[p[1]]=p[2];for(var v in Al)Al.hasOwnProperty(v)&&null!=_[v]&&(f[Al[v]]=_[v]);return f}(e)),!i))for(var a in Al)if(Al.hasOwnProperty(a)){var s=e.getAttribute(a);null!=s&&(r[Al[a]]=s)}var l=o?"textFill":"fill",u=o?"textStroke":"stroke";t.style=t.style||new xe;var c=t.style;null!=r.fill&&c.set(l,I1(r.fill,n)),null!=r.stroke&&c.set(u,I1(r.stroke,n)),re(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(d){null!=r[d]&&c.set("lineWidth"===d&&o?"textStrokeWidth":d,parseFloat(r[d]))}),r.textBaseline&&"auto"!==r.textBaseline||(r.textBaseline="alphabetic"),"alphabetic"===r.textBaseline&&(r.textBaseline="bottom"),"start"===r.textAlign&&(r.textAlign="left"),"end"===r.textAlign&&(r.textAlign="right"),re(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(d){null!=r[d]&&c.set(d,r[d])}),r.lineDash&&(t.style.lineDash=Un(r.lineDash).split(Wa)),c[u]&&"none"!==c[u]&&(t[u]=!0),t.__inheritedStyle=r}var lA=/url\(\s*#(.*?)\)/;function I1(e,t){var n=t&&e&&e.match(lA);return n?t[Un(n[1])]:e}var uA=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,D1=/([^\s:;]+)\s*:\s*([^:;]+)/g;function k1(e,t,n){var o=Math.min(t/e.width,n/e.height);return{scale:[o,o],position:[-(e.x+e.width/2)*o+t/2,-(e.y+e.height/2)*o+n/2]}}var N1=Ct(),Qd_retrieveMap=function(e){return N1.get(e)},cA={geoJSON:function(e){var t=e.source;e.geoJSON=it(t)?typeof JSON<"u"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(e){e.svgXML=T1(e.source)}},dA=ei,sr=re,hA=gn,ju=Mt,Yp=yi.parseClassType,qo={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},Xo="__flagInMainProcess",Ga="__optionUpdated",E1=/^[a-zA-Z0-9_]+$/;function Il(e,t){return function(n,i,r){!t&&this._disposed||(n=n&&n.toLowerCase(),ki.prototype[e].call(this,n,i,r))}}function qu(){ki.call(this)}function Xu(e,t,n){n=n||{},"string"==typeof t&&(t=W1[t]),this._dom=e;var i=this._zr=Gf(e,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=qd(ut(i.flush,i),17),(t=Fe(t))&&t1(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new Ir;var a,s,r=this._api=(s=(a=this)._coordSysMgr,fe(new $y(a),{getCoordinateSystems:ut(s.getCoordinateSystems,s),getComponentByElement:function(l){for(;l;){var u=l.__ecComponentInfo;if(null!=u)return a._model.getComponent(u.mainType,u.index);l=l.parent}}}));function o(a,s){return a.__prio-s.__prio}ae(rh,o),ae(eg,o),this._scheduler=new Zd(this,r,eg,rh),ki.call(this,this._ecEventProcessor=new Qp),this._messageCenter=new qu,this._initEvents(),this.resize=ut(this.resize,this),this._pendingActions=[],i.animation.on("frame",this._onframe,this),function(a,s){a.on("rendered",function(){s.trigger("rendered"),!a.animation.isFinished()||s[Ga]||s._scheduler.unfinished||s._pendingActions.length||s.trigger("finished")})}(i,this),Bi(this)}qu.prototype.on=Il("on",!0),qu.prototype.off=Il("off",!0),qu.prototype.one=Il("one",!0),tt(qu,ki);var Si=Xu.prototype;function L1(e,t,n){if(!this._disposed){var i,r=this._model,o=this._coordSysMgr.getCoordinateSystems();t=ld(r,t);for(var a=0;a<o.length;a++){var s=o[a];if(s[e]&&null!=(i=s[e](r,t,n)))return i}}}Si._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[Ga]){var t=this[Ga].silent;this[Xo]=!0,Zu(this),Ua.update.call(this),this[Xo]=!1,this[Ga]=!1,eh.call(this,t),th.call(this,t)}else if(e.unfinished){var n=1,i=this._model;e.unfinished=!1;do{var o=+new Date;e.performSeriesTasks(i),e.performDataProcessorTasks(i),P1(this,i),e.performVisualTasks(i),Kp(this,this._model,0,"remain"),n-=+new Date-o}while(0<n&&e.unfinished);e.unfinished||this._zr.flush()}}},Si.getDom=function(){return this._dom},Si.getZr=function(){return this._zr},Si.setOption=function(e,t,n){if(!this._disposed){var i;if(ju(t)&&(n=t.lazyUpdate,i=t.silent,t=t.notMerge),this[Xo]=!0,!this._model||t){var r=new Pp(this._api),o=this._theme,a=this._model=new Ep;a.scheduler=this._scheduler,a.init(null,null,o,r)}this._model.setOption(e,H1),n?(this[Ga]={silent:i},this[Xo]=!1):(Zu(this),Ua.update.call(this),this._zr.flush(),this[Ga]=!1,this[Xo]=!1,eh.call(this,i),th.call(this,i))}},Si.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Si.getModel=function(){return this._model},Si.getOption=function(){return this._model&&this._model.getOption()},Si.getWidth=function(){return this._zr.getWidth()},Si.getHeight=function(){return this._zr.getHeight()},Si.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},Si.getRenderedCanvas=function(e){if(He.canvasSupported)return(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},Si.getSvgDataURL=function(){if(He.svgSupported){var e=this._zr;return re(e.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),e.painter.toDataURL()}},Si.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,n=this._model,i=[],r=this;sr(t,function(a){n.eachComponent({mainType:a},function(s){var l=r._componentsMap[s.__viewId];l.group.ignore||(i.push(l),l.group.ignore=!0)})});var o="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return sr(i,function(a){a.group.ignore=!1}),o}},Si.getConnectedDataURL=function(e){if(!this._disposed&&He.canvasSupported){var t="svg"===e.type,n=this.group,i=Math.min,r=Math.max;if(oh[n]){var o=1/0,a=1/0,s=-1/0,l=-1/0,u=[],c=e&&e.pixelRatio||1;re(Ns,function(v,E){if(v.group===n){var F=t?v.getZr().painter.getSvgDom().innerHTML:v.getRenderedCanvas(Fe(e)),V=v.getDom().getBoundingClientRect();o=i(V.left,o),a=i(V.top,a),s=r(V.right,s),l=r(V.bottom,l),u.push({dom:F,left:V.left,top:V.top})}});var d=(s*=c)-(o*=c),h=(l*=c)-(a*=c),f=Ee(),p=Gf(f,{renderer:t?"svg":"canvas"});if(p.resize({width:d,height:h}),t){var _="";return sr(u,function(v){_+='<g transform="translate('+(v.left-o)+","+(v.top-a)+')">'+v.dom+"</g>"}),p.painter.getSvgRoot().innerHTML=_,e.connectedBackgroundColor&&p.painter.setBackgroundColor(e.connectedBackgroundColor),p.refreshImmediately(),p.painter.toDataURL()}return e.connectedBackgroundColor&&p.add(new vi({shape:{x:0,y:0,width:d,height:h},style:{fill:e.connectedBackgroundColor}})),sr(u,function(v){var E=new li({style:{x:v.left*c-o,y:v.top*c-a,image:v.dom}});p.add(E)}),p.refreshImmediately(),f.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},Si.convertToPixel=Lt(L1,"convertToPixel"),Si.convertFromPixel=Lt(L1,"convertFromPixel"),Si.containPixel=function(e,t){var n;if(!this._disposed)return re(e=ld(this._model,e),function(i,r){0<=r.indexOf("Models")&&re(i,function(o){var a=o.coordinateSystem;if(a&&a.containPoint)n|=!!a.containPoint(t);else if("seriesModels"===r){var s=this._chartsMap[o.__viewId];s&&s.containPoint&&(n|=s.containPoint(t,o))}},this)},this),!!n},Si.getVisual=function(e,t){var n=(e=ld(this._model,e,{defaultMainType:"series"})).seriesModel.getData(),i=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?n.indexOfRawIndex(e.dataIndex):null;return null!=i?n.getItemVisual(i,t):n.getVisual(t)},Si.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},Si.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var Ua={prepareAndUpdate:function(e){Zu(this),Ua.update.call(this,e)},update:function(e){var t=this._model,n=this._api,i=this._zr,r=this._coordSysMgr,o=this._scheduler;if(t){o.restoreData(t,e),o.performSeriesTasks(t),r.create(t,n),o.performDataProcessorTasks(t,e),P1(this,t),r.update(t,n),$p(t),o.performVisualTasks(t,e),z1(this,t,n,e);var a=t.get("backgroundColor")||"transparent";if(He.canvasSupported)i.setBackgroundColor(a);else{var s=Sr(a);a=co(s,"rgb"),0===s[3]&&(a="transparent")}Jp(t,n)}},updateTransform:function(e){var t=this._model,n=this,i=this._api;if(t){var r=[];t.eachComponent(function(a,s){var l=n.getViewOfComponentModel(s);if(l&&l.__alive)if(l.updateTransform){var u=l.updateTransform(s,t,i,e);u&&u.update&&r.push(l)}else r.push(l)});var o=Ct();t.eachSeries(function(a){var s=n._chartsMap[a.__viewId];if(s.updateTransform){var l=s.updateTransform(a,t,i,e);l&&l.update&&o.set(a.uid,1)}else o.set(a.uid,1)}),$p(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:o}),Kp(n,t,0,e,o),Jp(t,this._api)}},updateView:function(e){var t=this._model;t&&(fr.markUpdateMethod(e,"updateView"),$p(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),z1(this,this._model,this._api,e),Jp(t,this._api))},updateVisual:function(e){Ua.update.call(this,e)},updateLayout:function(e){Ua.update.call(this,e)}};function Zu(e){var t=e._model,n=e._scheduler;n.restorePipelines(t),n.prepareStageTasks(),O1(e,"component",t,n),O1(e,"chart",t,n),n.plan()}function R1(e,t,n,i,r){var o=e._model;if(i){var a={};a[i+"Id"]=n[i+"Id"],a[i+"Index"]=n[i+"Index"],a[i+"Name"]=n[i+"Name"];var s={mainType:i,query:a};r&&(s.subType=r);var l=n.excludeSeriesId;null!=l&&(l=Ct(vr(l))),o&&o.eachComponent(s,function(c){l&&null!=l.get(c.id)||u(e["series"===i?"_chartsMap":"_componentsMap"][c.__viewId])},e)}else sr(e._componentsViews.concat(e._chartsViews),u);function u(c){c&&c.__alive&&c[t]&&c[t](c.__model,o,e._api,n)}}function P1(e,t){var n=e._chartsMap,i=e._scheduler;t.eachSeries(function(r){i.updateStreamModes(r,n[r.__viewId])})}function B1(e,t){var n=e.type,i=e.escapeConnect,r=nh[n],o=r.actionInfo,a=(o.update||"update").split(":"),s=a.pop();a=null!=a[0]&&Yp(a[0]),this[Xo]=!0;var l=[e],u=!1;e.batch&&(u=!0,l=Ke(e.batch,function(f){return(f=De(fe({},f),e)).batch=null,f}));var c,d=[],h="highlight"===n||"downplay"===n;sr(l,function(f){(c=(c=r.action(f,this._model,this._api))||fe({},f)).type=o.event||c.type,d.push(c),h?R1(this,s,f,"series"):a&&R1(this,s,f,a.main,a.sub)},this),"none"===s||h||a||(this[Ga]?(Zu(this),Ua.update.call(this,e),this[Ga]=!1):Ua[s].call(this,e)),c=u?{type:o.event||n,escapeConnect:i,batch:d}:d[0],this[Xo]=!1,t||this._messageCenter.trigger(c.type,c)}function eh(e){for(var t=this._pendingActions;t.length;){var n=t.shift();B1.call(this,n,e)}}function th(e){e||this.trigger("updated")}function O1(e,t,n,i){for(var r="component"===t,o=r?e._componentsViews:e._chartsViews,a=r?e._componentsMap:e._chartsMap,s=e._zr,l=e._api,u=0;u<o.length;u++)o[u].__alive=!1;function c(h){var f="_ec_"+h.id+"_"+h.type,p=a[f];if(!p){var _=Yp(h.type);(p=new(r?jo.getClass(_.main,_.sub):fr.getClass(_.sub))).init(n,l),a[f]=p,o.push(p),s.add(p.group)}h.__viewId=p.__id=f,p.__alive=!0,p.__model=h,p.group.__ecComponentInfo={mainType:h.mainType,index:h.componentIndex},r||i.prepareView(p,h,n,l)}for(r?n.eachComponent(function(h,f){"series"!==h&&c(f)}):n.eachSeries(c),u=0;u<o.length;){var d=o[u];d.__alive?u++:(r||d.renderTask.dispose(),s.remove(d.group),d.dispose(n,l),o.splice(u,1),delete a[d.__id],d.__id=d.group.__ecComponentInfo=null)}}function $p(e){e.clearColorPalette(),e.eachSeries(function(t){t.clearColorPalette()})}function z1(e,t,n,i){(function(r,o,a,s,l){sr(r._componentsViews,function(u){var c=u.__model;u.render(c,o,a,s),V1(c,u)})})(e,t,n,i),sr(e._chartsViews,function(r){r.__alive=!1}),Kp(e,t,0,i),sr(e._chartsViews,function(r){r.__alive||r.remove(t,n)})}function Kp(e,t,n,i,r){var o,s,l,c,a=e._scheduler;t.eachSeries(function(s){var l=e._chartsMap[s.__viewId];l.__alive=!0;var d,h,u=l.renderTask;a.updatePayload(u,i),r&&r.get(s.uid)&&u.dirty(),o|=u.perform(a.getPerformArgs(u)),l.group.silent=!!s.get("silent"),V1(s,l),d=l,h=s.get("blendMode")||null,d.group.traverse(function(f){f.isGroup||f.style.blend!==h&&f.setStyle("blend",h),f.eachPendingDisplayable&&f.eachPendingDisplayable(function(p){p.setStyle("blend",h)})})}),a.unfinished|=o,l=t,c=0,(s=e)._zr.storage.traverse(function(d){c++}),c>l.get("hoverLayerThreshold")&&!He.node&&l.eachSeries(function(d){if(!d.preventUsingHoverLayer){var h=s._chartsMap[d.__viewId];h.__alive&&h.group.traverse(function(f){f.useHoverLayer=!0})}}),function(e,t){var h,n=t.getModel("aria");if(n.get("show"))if(n.get("description"))e.setAttribute("aria-label",n.get("description"));else{var i=0;t.eachSeries(function(h,f){++i},this);var r,o=n.get("data.maxCount")||10,a=n.get("series.maxCount")||10,s=Math.min(i,a);if(!(i<1)){var l=((h=t.getModel("title").option)&&h.length&&(h=h[0]),h&&h.text);r=l?c(d("general.withTitle"),{title:l}):d("general.withoutTitle");var u=[];r+=c(d(1<i?"series.multiple.prefix":"series.single.prefix"),{seriesCount:i}),t.eachSeries(function(h,f){if(f<s){var p,_=h.get("name"),v="series."+(1<i?"multiple":"single")+".";p=c(p=d(_?v+"withName":v+"withoutName"),{seriesId:h.seriesIndex,seriesName:h.get("name"),seriesType:(X=h.subType,ga.series.typeNames[X]||"\u81ea\u5b9a\u4e49\u56fe")});var E=h.getData();(window.data=E).count()>o?p+=c(d("data.partialData"),{displayCnt:o}):p+=d("data.allData");for(var F=[],V=0;V<E.count();V++)if(V<o){var q=E.getName(V),j=ks(E,V);F.push(c(d(q?"data.withName":"data.withoutName"),{name:q,value:j}))}p+=F.join(d("data.separator.middle"))+d("data.separator.end"),u.push(p)}var X}),r+=u.join(d("series.multiple.separator.middle"))+d("series.multiple.separator.end"),e.setAttribute("aria-label",r)}}function c(h,f){if("string"!=typeof h)return h;var p=h;return re(f,function(_,v){p=p.replace(new RegExp("\\{\\s*"+v+"\\s*\\}","g"),_)}),p}function d(h){var f=n.get(h);if(null!=f)return f;for(var p=h.split("."),_=ga.aria,v=0;v<p.length;++v)_=_[p[v]];return _}}(e._zr.dom,t)}function Jp(e,t){sr(F1,function(n){n(e,t)})}Si.resize=function(e){if(!this._disposed){this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var n=t.resetOption("media"),i=e&&e.silent;this[Xo]=!0,n&&Zu(this),Ua.update.call(this),this[Xo]=!1,eh.call(this,i),th.call(this,i)}}},Si.showLoading=function(e,t){if(!this._disposed&&(ju(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),tg[e])){var n=tg[e](this._api,t),i=this._zr;this._loadingFX=n,i.add(n)}},Si.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},Si.makeActionFromEvent=function(e){var t=fe({},e);return t.type=ih[e.type],t},Si.dispatchAction=function(e,t){this._disposed||(ju(t)||(t={silent:!!t}),nh[e.type]&&this._model&&(this[Xo]?this._pendingActions.push(e):(B1.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&He.browser.weChat&&this._throttledZrFlush(),eh.call(this,t.silent),th.call(this,t.silent))))},Si.appendData=function(e){if(!this._disposed){var t=e.seriesIndex;this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0}},Si.on=Il("on",!1),Si.off=Il("off",!1),Si.one=Il("one",!1);var fA=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function V1(e,t){var n=e.get("z"),i=e.get("zlevel");t.group.traverse(function(r){"group"!==r.type&&(null!=n&&(r.z=n),null!=i&&(r.zlevel=i))})}function Qp(){}Si._initEvents=function(){sr(fA,function(e){function t(n){var i,r=this.getModel(),o=n.target;if("globalout"===e)i={};else if(o&&null!=o.dataIndex){var a=o.dataModel||r.getSeriesByIndex(o.seriesIndex);i=a&&a.getDataParams(o.dataIndex,o.dataType,o)||{}}else o&&o.eventData&&(i=fe({},o.eventData));if(i){var s=i.componentType,l=i.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",l=i.seriesIndex);var u=s&&null!=l&&r.getComponent(s,l),c=u&&this["series"===u.mainType?"_chartsMap":"_componentsMap"][u.__viewId];i.event=n,i.type=e,this._ecEventProcessor.eventInfo={targetEl:o,packedEvent:i,model:u,view:c},this.trigger(e,i)}}t.zrEventfulCallAtLast=!0,this._zr.on(e,t,this)},this),sr(ih,function(e,t){this._messageCenter.on(t,function(n){this.trigger(t,n)},this)},this)},Si.isDisposed=function(){return this._disposed},Si.clear=function(){this._disposed||this.setOption({series:[]},!0)},Si.dispose=function(){if(!this._disposed){this._disposed=!0,N0(this.getDom(),ng,"");var e=this._api,t=this._model;sr(this._componentsViews,function(n){n.dispose(t,e)}),sr(this._chartsViews,function(n){n.dispose(t,e)}),this._zr.dispose(),delete Ns[this.id]}},tt(Xu,ki),Qp.prototype={constructor:Qp,normalizeQuery:function(e){var t={},n={},i={};if(it(e)){var r=Yp(e);t.mainType=r.main||null,t.subType=r.sub||null}else{var o=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};re(e,function(s,l){for(var u=!1,c=0;c<o.length;c++){var d=o[c],h=l.lastIndexOf(d);if(0<h&&h===l.length-d.length){var f=l.slice(0,h);"data"!==f&&(t.mainType=f,t[d.toLowerCase()]=s,u=!0)}}a.hasOwnProperty(l)&&(n[l]=s,u=!0),u||(i[l]=s)})}return{cptQuery:t,dataQuery:n,otherQuery:i}},filter:function(e,t,n){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,o=i.packedEvent,a=i.model,s=i.view;if(!a||!s)return!0;var l=t.cptQuery,u=t.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,r,o));function c(d,h,f,p){return null==d[f]||h[p||f]===d[f]}},afterTrigger:function(){this.eventInfo=null}};var nh={},ih={},eg=[],H1=[],F1=[],rh=[],W1={},tg={},Ns={},oh={},pA=new Date-0,gA=new Date-0,ng="_echarts_instance_";function G1(e){oh[e]=!1}var mA=G1;function ig(e){return Ns[function(t,n){return t.getAttribute?t.getAttribute(n):t[n]}(e,ng)]}function rg(e,t){W1[e]=t}function br(e){H1.push(e)}function to(e,t){ag(eg,e,t,1e3)}function hi(e,t,n){"function"==typeof t&&(n=t,t="");var i=ju(e)?e.type:[e,e={event:t}][0];e.event=(e.event||i).toLowerCase(),t=e.event,dA(E1.test(i)&&E1.test(t)),nh[i]||(nh[i]={action:n,actionInfo:e}),ih[t]=i}function og(e,t){Ir.register(e,t)}function Gi(e,t){ag(rh,e,t,1e3,"layout")}function Ni(e,t){ag(rh,e,t,3e3,"visual")}function ag(e,t,n,i,r){(hA(t)||ju(t))&&(n=t,t=i);var o=Zd.wrapStageHandler(n,r);return o.__prio=t,o.__raw=n,e.push(o),o}function U1(e,t){tg[e]=t}function no(e){return yi.extend(e)}function lr(e){return jo.extend(e)}function ah(e){return Wi.extend(e)}function Zr(e){return fr.extend(e)}function j1(e){return e}function ma(e,t,n,i,r){this._old=e,this._new=t,this._oldKeyGetter=n||j1,this._newKeyGetter=i||j1,this.context=r}function q1(e,t,n,i,r){for(var o=0;o<e.length;o++){var a="_ec_"+r[i](e[o],o),s=t[a];null==s?(n.push(a),t[a]=o):(s.length||(t[a]=s=[s]),s.push(o))}}Ni(2e3,ZT),br(t1),to(900,function(e){var t=Ct();e.eachSeries(function(n){var i=n.get("stack");if(i){var r=t.get(i)||t.set(i,[]),o=n.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:n};if(!a.stackedDimension||!a.isStackedByIndex&&!a.stackedByDimension)return;r.length&&o.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),t.each(RT)}),U1("default",function(e,t){De(t=t||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new m,i=new vi({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(i);var r=t.fontSize+" sans-serif",o=new vi({style:{fill:"none",text:t.text,font:r,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});if(n.add(o),t.showSpinner){var a=new op({shape:{startAngle:-Xd/2,endAngle:-Xd/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001});a.animateShape(!0).when(1e3,{endAngle:3*Xd/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:3*Xd/2}).delay(300).start("circularInOut"),n.add(a)}return n.resize=function(){var s=si(t.text,r),l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-2*l-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner?0:s/2),c=e.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:2*l,height:2*l}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n}),hi({type:"highlight",event:"highlight",update:"highlight"},en),hi({type:"downplay",event:"downplay",update:"downplay"},en),rg("light",rA),rg("dark",M1),ma.prototype={constructor:ma,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,n={},i=[],r=[];for(q1(e,{},i,"_oldKeyGetter",this),q1(t,n,r,"_newKeyGetter",this),o=0;o<e.length;o++)null!=(s=n[a=i[o]])?((u=s.length)?(1===u&&(n[a]=null),s=s.shift()):n[a]=null,this._update&&this._update(s,o)):this._remove&&this._remove(o);for(var o=0;o<r.length;o++){var a=r[o];if(n.hasOwnProperty(a)){var s;if(null==(s=n[a]))continue;if(s.length)for(var l=0,u=s.length;l<u;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var X1=Ct(["tooltip","label","itemName","itemId","seriesName"]);function sg(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function sh(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function Yu(e){null!=e&&fe(this,e),this.otherDims={}}var lh=Mt,$u="undefined",vA={float:typeof Float64Array==$u?Array:Float64Array,int:typeof Int32Array==$u?Array:Int32Array,ordinal:Array,number:Array,time:Array},yA=typeof Uint32Array==$u?Array:Uint32Array,xA=typeof Int32Array==$u?Array:Int32Array,bA=typeof Uint16Array==$u?Array:Uint16Array;function uh(e){return 65535<e._rawCount?yA:bA}var _A=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],wA=["_extent","_approximateExtent","_rawExtent"];function Z1(e,t){re(_A.concat(t.__wrappedMethods||[]),function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e.__wrappedMethods=t.__wrappedMethods,re(wA,function(n){e[n]=Fe(t[n])}),e._calculationInfo=fe(t._calculationInfo)}var ur=function(e,t){e=e||["x","y"];for(var n={},i=[],r={},o=0;o<e.length;o++){var a=e[o];it(a)?a=new Yu({name:a}):a instanceof Yu||(a=new Yu(a));var s=a.name;a.type=a.type||"float",a.coordDim||(a.coordDim=s,a.coordDimIndex=0),a.otherDims=a.otherDims||{},i.push(s),(n[s]=a).index=o,a.createInvertedIndices&&(r[s]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=t,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(l){var u={},c=u.encode={},d=Ct(),h=[],f=[],p=u.userOutput={dimensionNames:l.dimensions.slice(),encode:{}};re(l.dimensions,function(V){var Y,q=l.getDimensionInfo(V),j=q.coordDim;if(j){var X=q.coordDimIndex;sg(c,j)[X]=V,q.isExtraCoord||(d.set(j,1),!("ordinal"===(Y=q.type)||"time"===Y)&&(h[0]=V),sg(p.encode,j)[X]=q.index),q.defaultTooltip&&f.push(V)}X1.each(function(Y,Q){var oe=sg(c,Q),ce=q.otherDims[Q];null!=ce&&!1!==ce&&(oe[ce]=q.name)})});var _=[],v={};d.each(function(V,q){var j=c[q];v[q]=j[0],_=_.concat(j)}),u.dataDimsOnCoord=_,u.encodeFirstDimNotExtra=v;var E=c.label;E&&E.length&&(h=E.slice());var F=c.tooltip;return F&&F.length?f=F.slice():f.length||(f=h.slice()),c.defaultedLabel=h,c.defaultedTooltip=f,u}(this),this._invertedIndicesMap=r,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},Fn=ur.prototype;function Y1(e,t,n,i,r){var o=vA[t.type],a=i-1,s=t.name,l=e[s][a];if(l&&l.length<n){for(var u=new o(Math.min(r-a*n,n)),c=0;c<l.length;c++)u[c]=l[c];e[s][a]=u}for(var d=i*n;d<r;d+=n)e[s].push(new o(Math.min(r-d,n)))}function $1(e){var t=e._invertedIndicesMap;re(t,function(n,i){var r=e._dimensionInfos[i].ordinalMeta;if(r){n=t[i]=new xA(r.categories.length);for(var o=0;o<n.length;o++)n[o]=-1;for(o=0;o<e._count;o++)n[e.get(i,o)]=o}})}function K1(e,t,n){var i;if(null!=t){var r=e._chunkSize,o=Math.floor(n/r),s=e.dimensions[t],l=e._storage[s][o];if(l){i=l[n%r];var u=e._dimensionInfos[s].ordinalMeta;u&&u.categories.length&&(i=u.categories[i])}}return i}function Ku(e){return e}function Ju(e){return e<this._count&&0<=e?this._indices[e]:-1}function lg(e,t){var n=e._idList[t];return null==n&&(n=K1(e,e._idDimIdx,t)),null==n&&(n="e\0\0"+t),n}function ug(e){return Ye(e)||(e=[e]),e}function J1(e,t){var n=e.dimensions,i=new ur(Ke(n,e.getDimensionInfo,e),e.hostModel);Z1(i,e);for(var r=i._storage={},o=e._storage,a=0;a<n.length;a++){var s=n[a];o[s]&&(0<=Je(t,s)?(r[s]=CA(o[s]),i._rawExtent[s]=[1/0,-1/0],i._extent[s]=null):r[s]=o[s])}return i}function CA(e){for(var t,n,i=new Array(e.length),r=0;r<e.length;r++)i[r]=(n=void 0,(n=(t=e[r]).constructor)===Array?t.slice():new n(t));return i}function SA(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType}function Q1(e,t,n){Io.isInstance(t)||(t=Io.seriesDataToSource(t)),n=n||{},e=(e||[]).slice();for(var i=(n.dimsDef||[]).slice(),r=Ct(),o=Ct(),a=[],s=function(X,Y,Q,oe){var ce=Math.max(X.dimensionsDetectCount||1,Y.length,Q.length,oe||0);return re(Y,function(ge){var we=ge.dimsDef;we&&(ce=Math.max(ce,we.length))}),ce}(t,e,i,n.dimCount),l=0;l<s;l++){var u=i[l]=fe({},Mt(i[l])?i[l]:{name:i[l]}),c=u.name,d=a[l]=new Yu;null!=c&&null==r.get(c)&&(d.name=d.displayName=c,r.set(c,l)),null!=u.type&&(d.type=u.type),null!=u.displayName&&(d.displayName=u.displayName)}var h=n.encodeDef;!h&&n.encodeDefaulter&&(h=n.encodeDefaulter(t,s)),(h=Ct(h)).each(function(X,Y){if(1===(X=vr(X).slice()).length&&!it(X[0])&&X[0]<0)h.set(Y,!1);else{var Q=h.set(Y,[]);re(X,function(oe,ce){it(oe)&&(oe=r.get(oe)),null!=oe&&oe<s&&(Q[ce]=oe,p(a[oe],Y,ce))})}});var f=0;function p(X,Y,Q){null!=X1.get(Y)?X.otherDims[Y]=Q:(X.coordDim=Y,X.coordDimIndex=Q,o.set(Y,!0))}re(e,function(X,Y){var Q,oe,ce;if(it(X))Q=X,X={};else{Q=X.name;var ge=X.ordinalMeta;X.ordinalMeta=null,(X=Fe(X)).ordinalMeta=ge,oe=X.dimsDef,ce=X.otherDims,X.name=X.coordDim=X.coordDimIndex=X.dimsDef=X.otherDims=null}if(!1!==(we=h.get(Q))){var we;if(!(we=vr(we)).length)for(var Ce=0;Ce<(oe&&oe.length||1);Ce++){for(;f<a.length&&null!=a[f].coordDim;)f++;f<a.length&&we.push(f++)}re(we,function(Ae,Oe){var Ge=a[Ae];if(p(De(Ge,X),Q,Oe),null==Ge.name&&oe){var Pe=oe[Oe];Mt(Pe)||(Pe={name:Pe}),Ge.name=Ge.displayName=Pe.name,Ge.defaultTooltip=Pe.defaultTooltip}ce&&De(Ge.otherDims,ce)})}});var _=n.generateCoord,v=n.generateCoordCount,E=null!=v;v=_?v||1:0;for(var F,q=_||"value",j=0;j<s;j++)null==(d=a[j]=a[j]||new Yu).coordDim&&(d.coordDim=ex(q,o,E),d.coordDimIndex=0,(!_||v<=0)&&(d.isExtraCoord=!0),v--),null==d.name&&(d.name=ex(d.coordDim,r)),null==d.type&&(1===Zy((F=t).data,F.sourceFormat,F.seriesLayoutBy,F.dimensionsDefine,F.startIndex,j)||d.isExtraCoord&&(null!=d.otherDims.itemName||null!=d.otherDims.seriesName))&&(d.type="ordinal");return a}function ex(e,t,n){if(n||null!=t.get(e)){for(var i=0;null!=t.get(e+i);)i++;e+=i}return t.set(e,!0),e}Fn.type="list",Fn.hasItemOption=!0,Fn.getDimension=function(e){return"number"!=typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},Fn.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},Fn.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},Fn.mapDimension=function(e,t){var n=this._dimensionsSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var i=n.encode[e];return!0===t?(i||[]).slice():i&&i[t]},Fn.initData=function(e,t,n){(Io.isInstance(e)||Kt(e))&&(e=new n1(e,this.dimensions.length)),this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=o1[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=o1.arrayRows,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},Fn.getProvider=function(){return this._rawData},Fn.appendData=function(e){var t=this._rawData,n=this.count();t.appendData(e);var i=t.count();t.persistent||(i+=n),this._initDataFromProvider(n,i)},Fn.appendValues=function(e,t){for(var n=this._chunkSize,i=this._storage,r=this.dimensions,o=r.length,a=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t?t.length:0),u=this._chunkCount,c=0;c<o;c++)a[E=r[c]]||(a[E]=[1/0,-1/0]),i[E]||(i[E]=[]),Y1(i,this._dimensionInfos[E],n,u,l),this._chunkCount=i[E].length;for(var d=new Array(o),h=s;h<l;h++){for(var f=h-s,p=Math.floor(h/n),_=h%n,v=0;v<o;v++){var E=r[v],F=this._dimValueGetterArrayRows(e[f]||d,E,f,v);i[E][p][_]=F;var V=a[E];F<V[0]&&(V[0]=F),F>V[1]&&(V[1]=F)}t&&(this._nameList[h]=t[f])}this._rawCount=this._count=l,this._extent={},$1(this)},Fn._initDataFromProvider=function(e,t){if(!(t<=e)){for(var n,i=this._chunkSize,r=this._rawData,o=this._storage,a=this.dimensions,s=a.length,l=this._dimensionInfos,u=this._nameList,c=this._idList,d=this._rawExtent,h=this._nameRepeatCount={},f=this._chunkCount,p=0;p<s;p++){d[j=a[p]]||(d[j]=[1/0,-1/0]);var _=l[j];0===_.otherDims.itemName&&(n=this._nameDimIdx=p),0===_.otherDims.itemId&&(this._idDimIdx=p),o[j]||(o[j]=[]),Y1(o,_,i,f,t),this._chunkCount=o[j].length}for(var v=new Array(s),E=e;E<t;E++){v=r.getItem(E,v);for(var F=Math.floor(E/i),V=E%i,q=0;q<s;q++){var j,X=o[j=a[q]][F],Y=this._dimValueGetter(v,j,E,q);X[V]=Y;var Q=d[j];Y<Q[0]&&(Q[0]=Y),Y>Q[1]&&(Q[1]=Y)}if(!r.pure){var oe=u[E];if(v&&null==oe)if(null!=v.name)u[E]=oe=v.name;else if(null!=n){var ce=a[n],ge=o[ce][F];if(ge){oe=ge[V];var we=l[ce].ordinalMeta;we&&we.categories.length&&(oe=we.categories[oe])}}var Ce=null==v?null:v.id;null==Ce&&null!=oe&&(h[oe]=h[oe]||0,0<h[Ce=oe]&&(Ce+="__ec__"+h[oe]),h[oe]++),null!=Ce&&(c[E]=Ce)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=t,this._extent={},$1(this)}},Fn.count=function(){return this._count},Fn.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,n=this._count;if(t===Array){r=new t(n);for(var i=0;i<n;i++)r[i]=e[i]}else r=new t(e.buffer,0,n)}else{var r=new(t=uh(this))(this.count());for(i=0;i<r.length;i++)r[i]=i}return r},Fn.get=function(e,t){if(!(0<=t&&t<this._count))return NaN;var n=this._storage;if(!n[e])return NaN;t=this.getRawIndex(t);var i=Math.floor(t/this._chunkSize);return n[e][i][t%this._chunkSize]},Fn.getByRawIndex=function(e,t){if(!(0<=t&&t<this._rawCount))return NaN;var n=this._storage[e];return n?n[Math.floor(t/this._chunkSize)][t%this._chunkSize]:NaN},Fn._getFast=function(e,t){var n=Math.floor(t/this._chunkSize);return this._storage[e][n][t%this._chunkSize]},Fn.getValues=function(e,t){var n=[];Ye(e)||(t=e,e=this.dimensions);for(var i=0,r=e.length;i<r;i++)n.push(this.get(e[i],t));return n},Fn.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,n=0,i=t.length;n<i;n++)if(isNaN(this.get(t[n],e)))return!1;return!0},Fn.getDataExtent=function(e){e=this.getDimension(e);var n=[1/0,-1/0];if(!this._storage[e])return n;var i,r=this.count();if(!this._indices)return this._rawExtent[e].slice();if(i=this._extent[e])return i.slice();for(var o=(i=n)[0],a=i[1],s=0;s<r;s++){var l=this._getFast(e,this.getRawIndex(s));l<o&&(o=l),a<l&&(a=l)}return this._extent[e]=[o,a]},Fn.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},Fn.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},Fn.getCalculationInfo=function(e){return this._calculationInfo[e]},Fn.setCalculationInfo=function(e,t){lh(e)?fe(this._calculationInfo,e):this._calculationInfo[e]=t},Fn.getSum=function(e){var t=0;if(this._storage[e])for(var n=0,i=this.count();n<i;n++){var r=this.get(e,n);isNaN(r)||(t+=r)}return t},Fn.getMedian=function(e){var t=[];this.each(e,function(r,o){isNaN(r)||t.push(r)});var n=[].concat(t).sort(function(r,o){return r-o}),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},Fn.rawIndexOf=function(e,t){var n=(e&&this._invertedIndicesMap[e])[t];return null==n||isNaN(n)?-1:n},Fn.indexOfName=function(e){for(var t=0,n=this.count();t<n;t++)if(this.getName(t)===e)return t;return-1},Fn.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var i=0,r=this._count-1;i<=r;){var o=(i+r)/2|0;if(t[o]<e)i=1+o;else{if(!(t[o]>e))return o;r=o-1}}return-1},Fn.indicesOfNearest=function(e,t,n){var i=[];if(!this._storage[e])return i;null==n&&(n=1/0);for(var r=1/0,o=-1,a=0,s=0,l=this.count();s<l;s++){var u=t-this.get(e,s),c=Math.abs(u);c<=n&&((c<r||c===r&&0<=u&&o<0)&&(r=c,o=u,a=0),u===o&&(i[a++]=s))}return i.length=a,i},Fn.getRawIndex=Ku,Fn.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],n=0;n<this.dimensions.length;n++)t.push(this.get(this.dimensions[n],e));return t},Fn.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||K1(this,this._nameDimIdx,t)||""},Fn.getId=function(e){return lg(this,this.getRawIndex(e))},Fn.each=function(e,t,n,i){if(this._count){"function"==typeof e&&(i=n,n=t,t=e,e=[]),n=n||i||this;for(var r=(e=Ke(ug(e),this.getDimension,this)).length,o=0;o<this.count();o++)switch(r){case 0:t.call(n,o);break;case 1:t.call(n,this.get(e[0],o),o);break;case 2:t.call(n,this.get(e[0],o),this.get(e[1],o),o);break;default:for(var a=0,s=[];a<r;a++)s[a]=this.get(e[a],o);s[a]=o,t.apply(n,s)}}},Fn.filterSelf=function(e,t,n,i){if(this._count){"function"==typeof e&&(i=n,n=t,t=e,e=[]),n=n||i||this,e=Ke(ug(e),this.getDimension,this);for(var r=this.count(),o=new(uh(this))(r),a=[],s=e.length,l=0,u=e[0],c=0;c<r;c++){var d,h=this.getRawIndex(c);if(0===s)d=t.call(n,c);else if(1===s){var f=this._getFast(u,h);d=t.call(n,f,c)}else{for(var p=0;p<s;p++)a[p]=this._getFast(u,h);a[p]=c,d=t.apply(n,a)}d&&(o[l++]=h)}return l<r&&(this._indices=o),this._count=l,this._extent={},this.getRawIndex=this._indices?Ju:Ku,this}},Fn.selectRange=function(e){if(this._count){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var i=t.length;if(i){var r=this.count(),o=new(uh(this))(r),a=0,s=t[0],l=e[s][0],u=e[s][1],c=!1;if(!this._indices){var d=0;if(1===i){for(var h=this._storage[t[0]],f=0;f<this._chunkCount;f++)for(var p=h[f],_=Math.min(this._count-f*this._chunkSize,this._chunkSize),v=0;v<_;v++)(l<=(j=p[v])&&j<=u||isNaN(j))&&(o[a++]=d),d++;c=!0}else if(2===i){h=this._storage[s];var E=this._storage[t[1]],F=e[t[1]][0],V=e[t[1]][1];for(f=0;f<this._chunkCount;f++){p=h[f];var q=E[f];for(_=Math.min(this._count-f*this._chunkSize,this._chunkSize),v=0;v<_;v++){var j=p[v],X=q[v];(l<=j&&j<=u||isNaN(j))&&(F<=X&&X<=V||isNaN(X))&&(o[a++]=d),d++}}c=!0}}if(!c)if(1===i)for(v=0;v<r;v++){var Y=this.getRawIndex(v);(l<=(j=this._getFast(s,Y))&&j<=u||isNaN(j))&&(o[a++]=Y)}else for(v=0;v<r;v++){var Q=!0;for(Y=this.getRawIndex(v),f=0;f<i;f++){var oe=t[f];((j=this._getFast(n,Y))<e[oe][0]||j>e[oe][1])&&(Q=!1)}Q&&(o[a++]=this.getRawIndex(v))}return a<r&&(this._indices=o),this._count=a,this._extent={},this.getRawIndex=this._indices?Ju:Ku,this}}},Fn.mapArray=function(e,t,n,i){"function"==typeof e&&(i=n,n=t,t=e,e=[]);var r=[];return this.each(e,function(){r.push(t&&t.apply(this,arguments))},n=n||i||this),r},Fn.map=function(e,t,n,i){n=n||i||this;var r=J1(this,e=Ke(ug(e),this.getDimension,this));r._indices=this._indices,r.getRawIndex=r._indices?Ju:Ku;for(var o=r._storage,a=[],s=this._chunkSize,l=e.length,u=this.count(),c=[],d=r._rawExtent,h=0;h<u;h++){for(var f=0;f<l;f++)c[f]=this.get(e[f],h);c[l]=h;var p=t&&t.apply(n,c);if(null!=p){"object"!=typeof p&&(a[0]=p,p=a);for(var _=this.getRawIndex(h),v=Math.floor(_/s),E=_%s,F=0;F<p.length;F++){var V=e[F],q=p[F],j=d[V],X=o[V];X&&(X[v][E]=q),q<j[0]&&(j[0]=q),q>j[1]&&(j[1]=q)}}}return r},Fn.downSample=function(e,t,n,i){for(var r=J1(this,[e]),o=r._storage,a=[],s=Math.floor(1/t),l=o[e],u=this.count(),c=this._chunkSize,d=r._rawExtent[e],h=new(uh(this))(u),f=0,p=0;p<u;p+=s){u-p<s&&(a.length=s=u-p);for(var _=0;_<s;_++){var v=this.getRawIndex(p+_),E=Math.floor(v/c);a[_]=l[E][v%c]}var V=n(a),q=this.getRawIndex(Math.min(p+i(a,V)||0,u-1)),j=q%c;(l[Math.floor(q/c)][j]=V)<d[0]&&(d[0]=V),V>d[1]&&(d[1]=V),h[f++]=q}return r._count=f,r._indices=h,r.getRawIndex=Ju,r},Fn.getItemModel=function(e){var t=this.hostModel;return new di(this.getRawDataItem(e),t,t&&t.ecModel)},Fn.diff=function(e){var t=this;return new ma(e?e.getIndices():[],this.getIndices(),function(n){return lg(e,n)},function(n){return lg(t,n)})},Fn.getVisual=function(e){var t=this._visual;return t&&t[e]},Fn.setVisual=function(e,t){if(lh(e))for(var n in e)e.hasOwnProperty(n)&&this.setVisual(n,e[n]);else this._visual=this._visual||{},this._visual[e]=t},Fn.setLayout=function(e,t){if(lh(e))for(var n in e)e.hasOwnProperty(n)&&this.setLayout(n,e[n]);else this._layout[e]=t},Fn.getLayout=function(e){return this._layout[e]},Fn.getItemLayout=function(e){return this._itemLayouts[e]},Fn.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?fe(this._itemLayouts[e]||{},t):t},Fn.clearItemLayouts=function(){this._itemLayouts.length=0},Fn.getItemVisual=function(e,t,n){var i=this._itemVisuals[e],r=i&&i[t];return null!=r||n?r:this.getVisual(t)},Fn.setItemVisual=function(e,t,n){var i=this._itemVisuals[e]||{},r=this.hasItemVisual;if(this._itemVisuals[e]=i,lh(t))for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o],r[o]=!0);else i[t]=n,r[t]=!0},Fn.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},Fn.setItemGraphicEl=function(e,t){var n=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=n&&n.seriesIndex,"group"===t.type&&t.traverse(SA,t)),this._graphicEls[e]=t},Fn.getItemGraphicEl=function(e){return this._graphicEls[e]},Fn.eachItemGraphicEl=function(e,t){re(this._graphicEls,function(n,i){n&&e&&e.call(t,n,i)})},Fn.cloneShallow=function(e){if(!e){var t=Ke(this.dimensions,this.getDimensionInfo,this);e=new ur(t,this.hostModel)}return e._storage=this._storage,Z1(e,this),e._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,e.getRawIndex=e._indices?Ju:Ku,e},Fn.wrapMethod=function(e,t){var n=this[e];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=n.apply(this,arguments);return t.apply(this,[i].concat(Mn(arguments)))})},Fn.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],Fn.CHANGABLE_METHODS=["filterSelf","selectRange"];var Dl=function(e,t){return Q1((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};function MA(e){this.coordSysName=e,this.coordSysDims=[],this.axisMap=Ct(),this.categoryAxisMap=Ct(),this.firstCategoryDimIndex=null}var TA={cartesian2d:function(e,t,n,i){var r=e.getReferringComponents("xAxis")[0],o=e.getReferringComponents("yAxis")[0];t.coordSysDims=["x","y"],n.set("x",r),n.set("y",o),kl(r)&&(i.set("x",r),t.firstCategoryDimIndex=0),kl(o)&&(i.set("y",o),t.firstCategoryDimIndex=1)},singleAxis:function(e,t,n,i){var r=e.getReferringComponents("singleAxis")[0];t.coordSysDims=["single"],n.set("single",r),kl(r)&&(i.set("single",r),t.firstCategoryDimIndex=0)},polar:function(e,t,n,i){var r=e.getReferringComponents("polar")[0],o=r.findAxisModel("radiusAxis"),a=r.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",o),n.set("angle",a),kl(o)&&(i.set("radius",o),t.firstCategoryDimIndex=0),kl(a)&&(i.set("angle",a),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,i){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,i){var r=e.ecModel,o=r.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();re(o.parallelAxisIndex,function(s,l){var u=r.getComponent("parallelAxis",s),c=a[l];n.set(c,u),kl(u)&&null==t.firstCategoryDimIndex&&(i.set(c,u),t.firstCategoryDimIndex=l)})}};function kl(e){return"category"===e.get("type")}function tx(e,t,n){var i,r,o,a,s=(n=n||{}).byIndex,l=n.stackedCoordDimension,u=!(!e||!e.get("stack"));if(re(t,function(f,p){it(f)&&(t[p]=f={name:f}),u&&!f.isExtraCoord&&(s||i||!f.ordinalMeta||(i=f),r||"ordinal"===f.type||"time"===f.type||l&&l!==f.coordDim||(r=f))}),!r||s||i||(s=!0),r){o="__\0ecstackresult",a="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var c=r.coordDim,d=r.type,h=0;re(t,function(f){f.coordDim===c&&h++}),t.push({name:o,coordDim:c,coordDimIndex:h,type:d,isExtraCoord:!0,isCalculationCoord:!0}),h++,t.push({name:a,coordDim:a,coordDimIndex:h,type:d,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:r&&r.name,stackedByDimension:i&&i.name,isStackedByIndex:s,stackedOverDimension:a,stackResultDimension:o}}function va(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function Qu(e,t){return va(e,t)?e.getCalculationInfo("stackResultDimension"):t}function ya(e,t,n){n=n||{},Io.isInstance(e)||(e=Io.seriesDataToSource(e));var i,r=t.get("coordinateSystem"),o=Ir.get(r),a=function(f){var p=f.get("coordinateSystem"),_=new MA(p),v=TA[p];if(v)return v(f,_,_.axisMap,_.categoryAxisMap),_}(t);a&&(i=Ke(a.coordSysDims,function(f){var p={name:f},_=a.axisMap.get(f);if(_){var v=_.get("type");p.type=sh(v)}return p})),i=i||o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"];var s,l,u=Dl(e,{coordDimensions:i,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?Lt(Xy,i,t):null});a&&re(u,function(f,p){var v=a.categoryAxisMap.get(f.coordDim);v&&(null==s&&(s=p),f.ordinalMeta=v.getOrdinalMeta()),null!=f.otherDims.itemName&&(l=!0)}),l||null==s||(u[s].otherDims.itemName=0);var c=tx(t,u),d=new ur(u,t);d.setCalculationInfo(c);var h=null!=s&&function(f){if(f.sourceFormat===Is){var p=function(_){for(var v=0;v<_.length&&null==_[v];)v++;return _[v]}(f.data||[]);return null!=p&&!Ye(bu(p))}}(e)?function(f,p,_,v){return v===s?_:this.defaultDimValueGetter(f,p,_,v)}:null;return d.hasItemOption=!1,d.initData(e,null,h),d}function Qi(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function ec(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication}Qi.prototype.parse=function(e){return e},Qi.prototype.getSetting=function(e){return this._setting[e]},Qi.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},Qi.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},Qi.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},Qi.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},Qi.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},Qi.prototype.getExtent=function(){return this._extent.slice()},Qi.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},Qi.prototype.isBlank=function(){return this._isBlank},Qi.prototype.setBlank=function(e){this._isBlank=e},Qi.prototype.getLabel=null,_u(Qi),cd(Qi,{registerWhenExtend:!0}),ec.createByAxisModel=function(e){var t=e.option,n=t.data,i=n&&Ke(n,AA);return new ec({categories:i,needCollect:!i,deduplication:!1!==t.dedplication})};var nx=ec.prototype;function ix(e){return e._map||(e._map=Ct(e.categories))}function AA(e){return Mt(e)&&null!=e.value?e.value:e+""}nx.getOrdinal=function(e){return ix(this).get(e)},nx.parseAndCollect=function(e){var t,n=this._needCollect;if("string"!=typeof e&&!n)return e;if(n&&!this._deduplication)return this.categories[t=this.categories.length]=e,t;var i=ix(this);return null==(t=i.get(e))&&(n?(this.categories[t=this.categories.length]=e,i.set(e,t)):t=NaN),t};var cg=Qi.prototype,dg=Qi.extend({type:"ordinal",init:function(e,t){e&&!Ye(e)||(e=new ec({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"==typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),cg.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return cg.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(cg.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push(n),n++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:en,niceExtent:en});dg.create=function(){return new dg};var rx=nr;function ox(e){return Rd(e)+2}function ax(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function sx(e,t){isFinite(e[0])||(e[0]=t[0]),isFinite(e[1])||(e[1]=t[1]),ax(e,0,t),ax(e,1,t),e[0]>e[1]&&(e[0]=e[1])}var Nl=nr,Zo=Qi.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(t)||(n[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),Zo.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=ox(e)},getTicks:function(e){var t=this._interval,n=this._extent,i=this._niceExtent,r=this._intervalPrecision,o=[];if(!t)return o;n[0]<i[0]&&o.push(e?Nl(i[0]-t,r):n[0]);for(var a=i[0];a<=i[1]&&(o.push(a),(a=Nl(a+t,r))!==o[o.length-1]);)if(1e4<o.length)return[];var s=o.length?o[o.length-1]:i[1];return n[1]>s&&o.push(e?Nl(s+t,r):n[1]),o},getMinorTicks:function(e){for(var t=this.getTicks(!0),n=[],i=this.getExtent(),r=1;r<t.length;r++){for(var a=t[r-1],s=0,l=[],u=(t[r]-a)/e;s<e-1;){var c=nr(a+(s+1)*u);c>i[0]&&c<i[1]&&l.push(c),s++}n.push(l)}return n},getLabel:function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=Rd(e)||0:"auto"===n&&(n=this._intervalPrecision),za(e=Nl(e,n,!0))},niceTicks:function(e,t,n){e=e||5;var i=this._extent,r=i[1]-i[0];if(isFinite(r)){r<0&&(r=-r,i.reverse());var o=function(a,s,l,u){var c={},h=c.interval=xp((a[1]-a[0])/s,!0);null!=l&&h<l&&(h=c.interval=l),null!=u&&u<h&&(h=c.interval=u);var f=c.intervalPrecision=ox(h);return sx(c.niceTickExtent=[rx(Math.ceil(a[0]/h)*h,f),rx(Math.floor(a[1]/h)*h,f)],a),c}(i,e,t,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var n=t[0];e.fixMax||(t[1]+=n/2),t[0]-=n/2}else t[1]=1;isFinite(t[1]-t[0])||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var r=this._interval;e.fixMin||(t[0]=Nl(Math.floor(t[0]/r)*r)),e.fixMax||(t[1]=Nl(Math.ceil(t[1]/r)*r))}});Zo.create=function(){return new Zo};var hg="__ec_stack_",fg=typeof Float32Array<"u"?Float32Array:Array;function pg(e){return e.get("stack")||hg+e.seriesIndex}function gg(e){return e.dim+e.index}function lx(e,t){var n=[];return t.eachSeriesByType(e,function(i){hx(i)&&!fx(i)&&n.push(i)}),n}function mg(e){var t=function(i){var r={};re(i,function(d){var h=d.coordinateSystem.getBaseAxis();if("time"===h.type||"value"===h.type)for(var f=d.getData(),p=h.dim+"_"+h.index,_=f.mapDimension(h.dim),v=0,E=f.count();v<E;++v){var F=f.get(_,v);r[p]?r[p].push(F):r[p]=[F]}});var o=[];for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];if(s){s.sort(function(d,h){return d-h});for(var l=null,u=1;u<s.length;++u){var c=s[u]-s[u-1];0<c&&(l=null===l?c:Math.min(l,c))}o[a]=l}}return o}(e),n=[];return re(e,function(i){var r,o=i.coordinateSystem.getBaseAxis(),a=o.getExtent();if("category"===o.type)r=o.getBandWidth();else if("value"===o.type||"time"===o.type){var l=t[o.dim+"_"+o.index],u=Math.abs(a[1]-a[0]),c=o.scale.getExtent(),d=Math.abs(c[1]-c[0]);r=l?u/d*l:u}else{var h=i.getData();r=Math.abs(a[1]-a[0])/h.count()}var f=yn(i.get("barWidth"),r),p=yn(i.get("barMaxWidth"),r),_=yn(i.get("barMinWidth")||1,r),v=i.get("barGap"),E=i.get("barCategoryGap");n.push({bandWidth:r,barWidth:f,barMaxWidth:p,barMinWidth:_,barGap:v,barCategoryGap:E,axisKey:gg(o),stackId:pg(i)})}),ux(n)}function ux(e){var t={};re(e,function(i,r){var o=i.axisKey,a=i.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},l=s.stacks;t[o]=s;var u=i.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=i.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var d=i.barMaxWidth;d&&(l[u].maxWidth=d);var h=i.barMinWidth;h&&(l[u].minWidth=h);var f=i.barGap;null!=f&&(s.gap=f);var p=i.barCategoryGap;null!=p&&(s.categoryGap=p)});var n={};return re(t,function(i,r){n[r]={};var o=i.stacks,a=i.bandWidth,s=yn(i.categoryGap,a),l=yn(i.gap,1),u=i.remainedWidth,c=i.autoWidthCount,d=(u-s)/(c+(c-1)*l);d=Math.max(d,0),re(o,function(_){var v=_.maxWidth,E=_.minWidth;if(_.width)F=_.width,v&&(F=Math.min(F,v)),E&&(F=Math.max(F,E)),_.width=F,u-=F+l*F,c--;else{var F=d;v&&v<F&&(F=Math.min(v,u)),E&&F<E&&(F=E),F!==d&&(_.width=F,u-=F+l*F,c--)}}),d=(u-s)/(c+(c-1)*l),d=Math.max(d,0);var h,f=0;re(o,function(_,v){_.width||(_.width=d),f+=(h=_).width*(1+l)}),h&&(f-=h.width*l);var p=-f/2;re(o,function(_,v){n[r][v]=n[r][v]||{bandWidth:a,offset:p,width:_.width},p+=_.width*(1+l)})}),n}function cx(e,t,n){if(e&&t){var i=e[gg(t)];return null!=i&&null!=n&&(i=i[pg(n)]),i}}function dx(e,t){var n=lx(e,t),i=mg(n),r={};re(n,function(o){var a=o.getData(),s=o.coordinateSystem,l=s.getBaseAxis(),u=pg(o),c=i[gg(l)][u],d=c.offset,h=c.width,f=s.getOtherAxis(l),p=o.get("barMinHeight")||0;r[u]=r[u]||[],a.setLayout({bandWidth:c.bandWidth,offset:d,size:h});for(var _=a.mapDimension(f.dim),v=a.mapDimension(l.dim),E=va(a,_),F=f.isHorizontal(),V=px(0,f),q=0,j=a.count();q<j;q++){var X,Y,Q,oe,ce,ge=a.get(_,q),we=a.get(v,q),Ce=0<=ge?"p":"n",Ae=V;E&&(r[u][we]||(r[u][we]={p:V,n:V}),Ae=r[u][we][Ce]),F?(X=Ae,Y=(ce=s.dataToPoint([ge,we]))[1]+d,Q=ce[0]-V,oe=h,Math.abs(Q)<p&&(Q=(Q<0?-1:1)*p),isNaN(Q)||E&&(r[u][we][Ce]+=Q)):(X=(ce=s.dataToPoint([we,ge]))[0]+d,Y=Ae,Q=h,oe=ce[1]-V,Math.abs(oe)<p&&(oe=(oe<=0?-1:1)*p),isNaN(oe)||E&&(r[u][we][Ce]+=oe)),a.setItemLayout(q,{x:X,y:Y,width:Q,height:oe})}},this)}var IA={seriesType:"bar",plan:Tl(),reset:function(e){if(hx(e)&&fx(e)){var t=e.getData(),n=e.coordinateSystem,i=n.grid.getRect(),r=n.getBaseAxis(),o=n.getOtherAxis(r),a=t.mapDimension(o.dim),s=t.mapDimension(r.dim),l=o.isHorizontal(),u=l?0:1,c=cx(mg([e]),r,e).width;return.5<c||(c=.5),{progress:function(d,h){for(var f,p=d.count,_=new fg(2*p),v=new fg(2*p),E=new fg(p),F=[],V=[],q=0,j=0;null!=(f=d.next());)V[u]=h.get(a,f),V[1-u]=h.get(s,f),F=n.dataToPoint(V,null,F),v[q]=l?i.x+i.width:F[0],_[q++]=F[0],v[q]=l?F[1]:i.y+i.height,_[q++]=F[1],E[j++]=f;h.setLayout({largePoints:_,largeDataIndices:E,largeBackgroundPoints:v,barWidth:c,valueAxisStart:px(0,o),backgroundStart:l?i.x:i.y,valueAxisHorizontal:l})}}}}};function hx(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function fx(e){return e.pipelineContext&&e.pipelineContext.large}function px(e,t){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}var DA=Zo.prototype,gx=Math.ceil,mx=Math.floor,ir=864e5,vg=Zo.extend({type:"time",getLabel:function(e){var t=this._stepLvl,n=new Date(e);return Cp(t[0],n,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=ir,t[1]+=ir),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-ir}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var i=this._interval;e.fixMin||(t[0]=nr(mx(t[0]/i)*i)),e.fixMax||(t[1]=nr(gx(t[1]/i)*i))},niceTicks:function(e,t,n){var i=this._extent,r=i[1]-i[0],o=r/(e=e||10);null!=t&&o<t&&(o=t),null!=n&&n<o&&(o=n);var a=yg.length,s=function(h,f,p,_){for(;p<_;){var v=p+_>>>1;h[v][1]<f?p=1+v:_=v}return p}(yg,o,0,a),l=yg[Math.min(s,a-1)],u=l[1];"year"===l[0]&&(u*=xp(r/u/e,!0));var c=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,d=[Math.round(gx((i[0]-c)/u)*u+c),Math.round(mx((i[1]-c)/u)*u+c)];sx(d,i),this._stepLvl=l,this._interval=u,this._niceExtent=d},parse:function(e){return+Ru(e)}});re(["contain","normalize"],function(e){vg.prototype[e]=function(t){return DA[e].call(this,this.parse(t))}});var yg=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",ir],["MM-dd\nyyyy",2*ir],["MM-dd\nyyyy",3*ir],["MM-dd\nyyyy",4*ir],["MM-dd\nyyyy",5*ir],["MM-dd\nyyyy",6*ir],["week",7*ir],["MM-dd\nyyyy",864e6],["week",14*ir],["week",21*ir],["month",31*ir],["week",42*ir],["month",62*ir],["week",70*ir],["quarter",95*ir],["month",31*ir*4],["month",13392e6],["half-year",16416e6],["month",31*ir*8],["month",26784e6],["year",380*ir]];vg.create=function(e){return new vg({useUTC:e.ecModel.get("useUTC")})};var dh=Qi.prototype,tc=Zo.prototype,kA=Rd,NA=nr,EA=Math.floor,LA=Math.ceil,hh=Math.pow,Yo=Math.log,fh=Qi.extend({type:"log",base:10,$constructor:function(){Qi.apply(this,arguments),this._originalScale=new Zo},getTicks:function(e){var t=this._originalScale,n=this._extent,i=t.getExtent();return Ke(tc.getTicks.call(this,e),function(r){var o=nr(hh(this.base,r));return o=r===n[0]&&t.__fixMin?ph(o,i[0]):o,r===n[1]&&t.__fixMax?ph(o,i[1]):o},this)},getMinorTicks:tc.getMinorTicks,getLabel:tc.getLabel,scale:function(e){return e=dh.scale.call(this,e),hh(this.base,e)},setExtent:function(e,t){var n=this.base;e=Yo(e)/Yo(n),t=Yo(t)/Yo(n),tc.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=dh.getExtent.call(this);t[0]=hh(e,t[0]),t[1]=hh(e,t[1]);var n=this._originalScale,i=n.getExtent();return n.__fixMin&&(t[0]=ph(t[0],i[0])),n.__fixMax&&(t[1]=ph(t[1],i[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=Yo(e[0])/Yo(t),e[1]=Yo(e[1])/Yo(t),dh.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(!(n==1/0||n<=0)){var i=Ny(n);for(e/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&0<Math.abs(i);)i*=10;var r=[nr(LA(t[0]/i)*i),nr(EA(t[1]/i)*i)];this._interval=i,this._niceExtent=r}},niceExtent:function(e){tc.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function ph(e,t){return NA(e,kA(t))}function yx(e,t){var n,i,r,o=e.type,a=t.getMin(),s=t.getMax(),l=e.getExtent();"ordinal"===o?n=t.getCategories().length:(Ye(i=t.get("boundaryGap"))||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=yn(i[0],1),i[1]=yn(i[1],1),r=l[1]-l[0]||Math.abs(l[0])),"dataMin"===a?a=l[0]:"function"==typeof a&&(a=a({min:l[0],max:l[1]})),"dataMax"===s?s=l[1]:"function"==typeof s&&(s=s({min:l[0],max:l[1]}));var u=null!=a,c=null!=s;null==a&&(a="ordinal"===o?n?0:NaN:l[0]-i[0]*r),null==s&&(s="ordinal"===o?n?n-1:NaN:l[1]+i[1]*r),null!=a&&isFinite(a)||(a=NaN),null!=s&&isFinite(s)||(s=NaN),e.setBlank(Wt(a)||Wt(s)||"ordinal"===o&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(0<a&&0<s&&!u&&(a=0),a<0&&s<0&&!c&&(s=0));var d=t.ecModel;if(d&&"time"===o){var h,f=lx("bar",d);if(re(f,function(v){h|=v.getBaseAxis()===t.axis}),h){var p=mg(f),_=function(v,E,F,V){var q=F.axis.getExtent(),j=q[1]-q[0],X=cx(V,F.axis);if(void 0===X)return{min:v,max:E};var Y=1/0;re(X,function(we){Y=Math.min(we.offset,Y)});var Q=-1/0;re(X,function(we){Q=Math.max(we.offset+we.width,Q)}),Y=Math.abs(Y),Q=Math.abs(Q);var oe=Y+Q,ce=E-v,ge=ce/(1-(Y+Q)/j)-ce;return{min:v-=Y/oe*ge,max:E+=Q/oe*ge}}(a,s,t,p);a=_.min,s=_.max}}return{extent:[a,s],fixMin:u,fixMax:c}}function ja(e,t){var n=yx(e,t),i=n.extent,r=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var o=e.type;e.setExtent(i[0],i[1]),e.niceExtent({splitNumber:r,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===o||"time"===o?t.get("minInterval"):null,maxInterval:"interval"===o||"time"===o?t.get("maxInterval"):null});var a=t.get("interval");null!=a&&e.setInterval&&e.setInterval(a)}function El(e,t){if(t=t||e.get("type"))switch(t){case"category":return new dg(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new Zo;default:return(Qi.getClass(t)||Zo).create(e)}}function nc(e){var t,n=e.getLabelModel().get("formatter"),i="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof n?(t=n,n=function(r){return r=e.scale.getLabel(r),t.replace("{value}",r??"")}):"function"==typeof n?function(r,o){return null!=i&&(o=r-i),n(xg(e,r),o)}:function(r){return e.scale.getLabel(r)}}function xg(e,t){return"category"===e.type?e.scale.getLabel(t):t}function bg(e){return e.get("interval")??"auto"}function xx(e){return"category"===e.type&&0===bg(e.getLabelModel())}re(["contain","normalize"],function(e){fh.prototype[e]=function(t){return t=Yo(t)/Yo(this.base),dh[e].call(this,t)}}),fh.create=function(){return new fh};var Es={getMin:function(e){var t=this.option,n=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!Wt(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(e){var t=this.option,n=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!Wt(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:en,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},RA=go({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,i=t.cy,r=t.width/2,o=t.height/2;e.moveTo(n,i-o),e.lineTo(n+r,i+o),e.lineTo(n-r,i+o),e.closePath()}}),PA=go({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,i=t.cy,r=t.width/2,o=t.height/2;e.moveTo(n,i-o),e.lineTo(n+r,i),e.lineTo(n,i+o),e.lineTo(n-r,i),e.closePath()}}),BA=go({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,i=t.y,r=t.width/5*3,o=Math.max(r,t.height),a=r/2,s=a*a/(o-a),l=i-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,d=Math.sin(u),h=Math.cos(u),f=.6*a,p=.7*a;e.moveTo(n-c,l+s),e.arc(n,l,a,Math.PI-u,2*Math.PI+u),e.bezierCurveTo(n+c-d*f,l+s+h*f,n,i-p,n,i),e.bezierCurveTo(n,i-p,n-c+d*f,l+s+h*f,n-c,l+s),e.closePath()}}),OA=go({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,r=t.x,o=t.y,a=t.width/3*2;e.moveTo(r,o),e.lineTo(r+a,o+n),e.lineTo(r,o+n/4*3),e.lineTo(r-a,o+n),e.lineTo(r,o),e.closePath()}}),zA={line:function(e,t,n,i,r){r.x1=e,r.y1=t+i/2,r.x2=e+n,r.y2=t+i/2},rect:function(e,t,n,i,r){r.x=e,r.y=t,r.width=n,r.height=i},roundRect:function(e,t,n,i,r){r.x=e,r.y=t,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(e,t,n,i,r){var o=Math.min(n,i);r.x=e,r.y=t,r.width=o,r.height=o},circle:function(e,t,n,i,r){r.cx=e+n/2,r.cy=t+i/2,r.r=Math.min(n,i)/2},diamond:function(e,t,n,i,r){r.cx=e+n/2,r.cy=t+i/2,r.width=n,r.height=i},pin:function(e,t,n,i,r){r.x=e+n/2,r.y=t+i/2,r.width=n,r.height=i},arrow:function(e,t,n,i,r){r.x=e+n/2,r.y=t+i/2,r.width=n,r.height=i},triangle:function(e,t,n,i,r){r.cx=e+n/2,r.cy=t+i/2,r.width=n,r.height=i}},_g={};re({line:yr,rect:vi,roundRect:vi,square:vi,circle:Fo,diamond:PA,pin:BA,arrow:OA,triangle:RA},function(e,t){_g[t]=new e});var VA=go({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var i=gi(e,t,n),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===t.textPosition&&(i.y=n.y+.4*n.height),i},buildPath:function(e,t,n){var i=t.symbolType;if("none"!==i){var r=_g[i];r=r||_g[i="rect"],zA[i](t.x,t.y,t.width,t.height,r.shape),r.buildPath(e,r.shape,n)}}});function HA(e,t){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=e:this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff"):(n.fill&&(n.fill=e),n.stroke&&(n.stroke=e)),this.dirty(!1)}}function io(e,t,n,i,r,o,a){var s,l=0===e.indexOf("empty");return l&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(s=0===e.indexOf("image://")?hy(e.slice(8),new g(t,n,i,r),a?"center":"cover"):0===e.indexOf("path://")?Ad(e.slice(7),{},new g(t,n,i,r),a?"center":"cover"):new VA({shape:{symbolType:e,x:t,y:n,width:i,height:r}})).__isEmptyBrush=l,s.setColor=HA,s.setColor(o),s}var WA=(Object.freeze||Object)({createList:function(e){return ya(e.getSource(),e)},getLayoutRect:Ki,dataStack:{isDimensionStacked:va,enableDataStack:tx,getStackedDimension:Qu},createScale:function(e,t){var n=t;di.isInstance(t)||tt(n=new di(t),Es);var i=El(n);return i.setExtent(e[0],e[1]),ja(i,n),i},mixinAxisModelCommonMethods:function(e){tt(e,Es)},completeDimensions:Q1,createDimensions:Dl,createSymbol:io});function bx(e,t){return Math.abs(e-t)<1e-8}function Ls(e,t,n){var i=0,r=e[0];if(!r)return!1;for(var o=1;o<e.length;o++){var a=e[o];i+=ha(r[0],r[1],a[0],a[1],t,n),r=a}var s=e[0];return bx(r[0],s[0])&&bx(r[1],s[1])||(i+=ha(r[0],r[1],s[0],s[1],t,n)),0!==i}function ic(e,t,n){if(this.name=e,this.geometries=t,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}function _x(e,t,n){for(var i=[],r=t[0],o=t[1],a=0;a<e.length;a+=2){var s=e.charCodeAt(a)-64,l=e.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),r=s+=r,o=l+=o,i.push([s/n,l/n])}return i}function wg(e,t){return function(n){if(n.UTF8Encoding){var i=n.UTF8Scale;null==i&&(i=1024);for(var r=n.features,o=0;o<r.length;o++)for(var a=r[o].geometry,s=a.coordinates,l=a.encodeOffsets,u=0;u<s.length;u++){var c=s[u];if("Polygon"===a.type)s[u]=_x(c,l[u],i);else if("MultiPolygon"===a.type)for(var d=0;d<c.length;d++)c[d]=_x(c[d],l[u][d],i)}n.UTF8Encoding=!1}}(e),Ke(nt(e.features,function(n){return n.geometry&&n.properties&&0<n.geometry.coordinates.length}),function(n){var i=n.properties,r=n.geometry,o=r.coordinates,a=[];"Polygon"===r.type&&a.push({type:"polygon",exterior:o[0],interiors:o.slice(1)}),"MultiPolygon"===r.type&&re(o,function(l){l[0]&&a.push({type:"polygon",exterior:l[0],interiors:l.slice(1)})});var s=new ic(i[t||"name"],a,i.cp);return s.properties=i,s})}ic.prototype={constructor:ic,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,n=[t,t],i=[-t,-t],r=[],o=[],a=this.geometries,s=0;s<a.length;s++)"polygon"===a[s].type&&(wu(a[s].exterior,r,o),dr(n,n,r),qi(i,i,o));return 0===s&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new g(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var i=0,r=n.length;i<r;i++)if("polygon"===n[i].type){var a=n[i].interiors;if(Ls(n[i].exterior,e[0],e[1])){for(var s=0;s<(a?a.length:0);s++)if(Ls(a[s]))continue e;return!0}}return!1},transformTo:function(e,t,n,i){var r=this.getBoundingRect(),o=r.width/r.height;n?i=i||n/o:n=o*i;for(var a=new g(e,t,n,i),s=r.calculateTransform(a),l=this.geometries,u=0;u<l.length;u++)if("polygon"===l[u].type){for(var c=l[u].exterior,d=l[u].interiors,h=0;h<c.length;h++)ti(c[h],c[h],s);for(var f=0;f<(d?d.length:0);f++)for(h=0;h<d[f].length;h++)ti(d[f][h],d[f][h],s)}(r=this._rect).copy(a),this.center=[r.x+r.width/2,r.y+r.height/2]},cloneShallow:function(e){null==e&&(e=this.name);var t=new ic(e,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};var rc=Wr();function Cx(e,t){var n,a,i=Sx(e,"labels"),r=bg(t);return Mx(i,r)||Tx(i,r,{labels:gn(r)?Ix(e,r):Ax(e,n="auto"===r?(a=e,rc(a).autoInterval??(rc(a).autoInterval=a.calculateCategoryInterval())):r),labelCategoryInterval:n})}function Sx(e,t){return rc(e)[t]||(rc(e)[t]=[])}function Mx(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function Tx(e,t,n){return e.push({key:t,value:n}),n}function Ax(e,t,n){var i=nc(e),r=e.scale,o=r.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],c=r.count();0!==u&&1<l&&2<c/l&&(u=Math.round(Math.ceil(u/l)*l));var d=xx(e),h=a.get("showMinLabel")||d,f=a.get("showMaxLabel")||d;h&&u!==o[0]&&_(o[0]);for(var p=u;p<=o[1];p+=l)_(p);function _(v){s.push(n?v:{formattedLabel:i(v),rawLabel:r.getLabel(v),tickValue:v})}return f&&p-l!==o[1]&&_(o[1]),s}function Ix(e,t,n){var i=e.scale,r=nc(e),o=[];return re(i.getTicks(),function(a){var s=i.getLabel(a);t(a,s)&&o.push(n?a:{formattedLabel:r(a),rawLabel:s,tickValue:a})}),o}var Dx=[0,1],er=function(e,t,n){this.dim=e,this.scale=t,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function kx(e,t){var n=(e[1]-e[0])/t/2;e[0]+=n,e[1]-=n}er.prototype={constructor:er,contain:function(e){var t=this._extent,n=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return n<=e&&e<=i},containData:function(e){return this.scale.contain(e)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return gp(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var n=this._extent;n[0]=e,n[1]=t},dataToCoord:function(e,t){var n=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&"ordinal"===i.type&&kx(n=n.slice(),i.count()),Pi(e,Dx,n,t)},coordToData:function(e,t){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&kx(n=n.slice(),i.count());var r=Pi(e,n,Dx,t);return this.scale.scale(r)},pointToData:function(e,t){},getTicksCoords:function(e){var t=(e=e||{}).tickModel||this.getTickModel(),n=Ke(function jA(e,t){return"category"===e.type?function(n,i){var r,o,a=Sx(n,"ticks"),s=bg(i),l=Mx(a,s);if(l)return l;if(i.get("show")&&!n.scale.isBlank()||(r=[]),gn(s))r=Ix(n,s,!0);else if("auto"===s){var u=Cx(n,n.getLabelModel());o=u.labelCategoryInterval,r=Ke(u.labels,function(c){return c.tickValue})}else r=Ax(n,o=s,!0);return Tx(a,s,{ticks:r,tickCategoryInterval:o})}(e,t):{ticks:e.scale.getTicks()}}(this,t).ticks,function(i){return{coord:this.dataToCoord(i),tickValue:i}},this);return function(i,r,o,a){var s=r.length;if(i.onBand&&!o&&s){var l,c=i.getExtent();if(1===s)r[0].coord=c[0],l=r[1]={coord:c[0]};else{var h=(r[s-1].coord-r[0].coord)/(r[s-1].tickValue-r[0].tickValue);re(r,function(v){v.coord-=h/2});var f=i.scale.getExtent();r.push(l={coord:r[s-1].coord+h*(1+f[1]-r[s-1].tickValue)})}var p=c[0]>c[1];_(r[0].coord,c[0])&&(a?r[0].coord=c[0]:r.shift()),a&&_(c[0],r[0].coord)&&r.unshift({coord:c[0]}),_(c[1],l.coord)&&(a?l.coord=c[1]:r.pop()),a&&_(l.coord,c[1])&&r.push({coord:c[1]})}function _(v,E){return v=nr(v),E=nr(E),p?E<v:v<E}}(this,n,t.get("alignWithLabel"),e.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return 0<e&&e<100||(e=5),Ke(this.scale.getMinorTicks(e),function(t){return Ke(t,function(n){return{coord:this.dataToCoord(n),tickValue:n}},this)},this)},getViewLabels:function(){return function UA(e){return"category"===e.type?function(t){var n=t.getLabelModel(),i=Cx(t,n);return!n.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i}(e):function(t){var n=t.scale.getTicks(),i=nc(t);return{labels:Ke(n,function(r,o){return{formattedLabel:i(r,o),rawLabel:t.scale.getLabel(r),tickValue:r}})}}(e)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(e){var Q,oe,t=(oe=(Q=e).getLabelModel(),{axisRotate:Q.getRotate?Q.getRotate():Q.isHorizontal&&!Q.isHorizontal()?90:0,labelRotate:oe.get("rotate")||0,font:oe.getFont()}),n=nc(e),i=(t.axisRotate-t.labelRotate)/180*Math.PI,r=e.scale,o=r.getExtent(),a=r.count();if(o[1]-o[0]<1)return 0;var s=1;40<a&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(i)),d=Math.abs(u*Math.sin(i)),h=0,f=0;l<=o[1];l+=s){var _,v=Jn(n(l),t.font,"center","top");_=1.3*v.height,h=Math.max(h,1.3*v.width,7),f=Math.max(f,_,7)}var E=h/c,F=f/d;isNaN(E)&&(E=1/0),isNaN(F)&&(F=1/0);var V=Math.max(0,Math.floor(Math.min(E,F))),q=rc(e.model),j=e.getExtent(),X=q.lastAutoInterval,Y=q.lastTickCount;return null!=X&&null!=Y&&Math.abs(X-V)<=1&&Math.abs(Y-a)<=1&&V<X&&q.axisExtend0===j[0]&&q.axisExtend1===j[1]?V=X:(q.lastTickCount=a,q.lastAutoInterval=V,q.axisExtend0=j[0],q.axisExtend1=j[1]),V}(this)}};var qA=wg,Nx={};re(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){Nx[e]=un[e]});var Ex={};function gh(e,t){var n=e.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return ks(e,t,n[0]);if(i){for(var r=[],o=0;o<n.length;o++){var a=ks(e,t,n[o]);r.push(a)}return r.join(" ")}}function qa(e,t,n){m.call(this),this.updateData(e,t,n)}re(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(e){Ex[e]=fa[e]}),Wi.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){return ya(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var ko=qa.prototype,XA=qa.getSymbolSize=function(e,t){var n=e.getItemVisual(t,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function Cg(e){return[e[0]/2,e[1]/2]}function ZA(e,t){this.parent.drift(e,t)}ko._createSymbol=function(e,t,n,i,r){this.removeAll();var o=io(e,-1,-1,2,2,t.getItemVisual(n,"color"),r);o.attr({z2:100,culling:!0,scale:Cg(i)}),o.drift=ZA,this._symbolType=e,this.add(o)},ko.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},ko.getSymbolPath=function(){return this.childAt(0)},ko.getScale=function(){return this.childAt(0).scale},ko.highlight=function(){this.childAt(0).trigger("emphasis")},ko.downplay=function(){this.childAt(0).trigger("normal")},ko.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},ko.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},ko.updateData=function(e,t,n){this.silent=!1;var i=e.getItemVisual(t,"symbol")||"circle",r=e.hostModel,o=XA(e,t),a=i!==this._symbolType;if(a){var s=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(i,e,t,o,s)}else(l=this.childAt(0)).silent=!1,Qn(l,{scale:Cg(o)},r,t);if(this._updateCommon(e,t,o,n),a){var l=this.childAt(0),u=n&&n.fadeIn,c={scale:l.scale.slice()};u&&(c.style={opacity:l.style.opacity}),l.scale=[0,0],u&&(l.style.opacity=0),Tr(l,c,r,t)}this._seriesModel=r};var YA=["itemStyle"],$A=["emphasis","itemStyle"],KA=["label"],JA=["emphasis","label"];function QA(e,t){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===t){var n=this.__symbolOriginalScale,i=n[1]/n[0],r={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*i)]};this.animateTo(r,400,"elasticOut")}else"normal"===t&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Ll(e){this.group=new m,this._symbolCtor=e||qa}ko._updateCommon=function(e,t,n,i){var r=this.childAt(0),o=e.hostModel,a=e.getItemVisual(t,"color");"image"!==r.type?r.useStyle({strokeNoScale:!0}):r.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var s=i&&i.itemStyle,l=i&&i.hoverItemStyle,u=i&&i.symbolOffset,c=i&&i.labelModel,d=i&&i.hoverLabelModel,h=i&&i.hoverAnimation,f=i&&i.cursorStyle;if(!i||e.hasItemOption){var p=i&&i.itemModel?i.itemModel:e.getItemModel(t);s=p.getModel(YA).getItemStyle(["color"]),l=p.getModel($A).getItemStyle(),u=p.getShallow("symbolOffset"),c=p.getModel(KA),d=p.getModel(JA),h=p.getShallow("hoverAnimation"),f=p.getShallow("cursor")}else l=fe({},l);var _=r.style,v=e.getItemVisual(t,"symbolRotate");r.attr("rotation",(v||0)*Math.PI/180||0),u&&r.attr("position",[yn(u[0],n[0]),yn(u[1],n[1])]),f&&r.attr("cursor",f),r.setColor(a,i&&i.symbolInnerColor),r.setStyle(s);var E=e.getItemVisual(t,"opacity");null!=E&&(_.opacity=E);var F=e.getItemVisual(t,"liftZ"),V=r.__z2Origin;null!=F?null==V&&(r.__z2Origin=r.z2,r.z2+=F):null!=V&&(r.z2=V,r.__z2Origin=null);var q=i&&i.useNameLabel;Qr(_,l,c,d,{labelFetcher:o,labelDataIndex:t,defaultText:function(j,X){return q?e.getName(j):gh(e,j)},isRectText:!0,autoColor:a}),r.__symbolOriginalScale=Cg(n),r.hoverStyle=l,r.highDownOnUpdate=h&&o.isAnimationEnabled()?QA:null,Ri(r)},ko.fadeOut=function(e,t){var n=this.childAt(0);this.silent=n.silent=!0,t&&t.keepLabel||(n.style.text=null),Qn(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},Ue(qa,m);var Rl=Ll.prototype;function Sg(e,t,n,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function Lx(e){return null==e||Mt(e)||(e={isIgnore:e}),e||{}}function Rx(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function Mg(e,t,n){var i,_,v,E,r=e.getBaseAxis(),o=e.getOtherAxis(r),a=(_=n,v=0,E=o.scale.getExtent(),"start"===_?v=E[0]:"end"===_?v=E[1]:0<E[0]?v=E[0]:E[1]<0&&(v=E[1]),v),s=r.dim,l=o.dim,u=t.mapDimension(l),c=t.mapDimension(s),d="x"===l||"radius"===l?1:0,h=Ke(e.dimensions,function(p){return t.mapDimension(p)}),f=t.getCalculationInfo("stackResultDimension");return(i|=va(t,h[0]))&&(h[0]=f),(i|=va(t,h[1]))&&(h[1]=f),{dataDimsForPoint:h,valueStart:a,valueAxisDim:l,baseAxisDim:s,stacked:!!i,valueDim:u,baseDim:c,baseDataOffset:d,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Tg(e,t,n,i){var r=NaN;e.stacked&&(r=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=n.get(e.baseDim,i),a[1-o]=r,t.dataToPoint(a)}Rl.updateData=function(e,t){t=Lx(t);var n=this.group,i=e.hostModel,r=this._data,o=this._symbolCtor,a=Rx(e);r||n.removeAll(),e.diff(r).add(function(s){var l=e.getItemLayout(s);if(Sg(e,l,s,t)){var u=new o(e,s,a);u.attr("position",l),e.setItemGraphicEl(s,u),n.add(u)}}).update(function(s,l){var u=r.getItemGraphicEl(l),c=e.getItemLayout(s);Sg(e,c,s,t)?(u?(u.updateData(e,s,a),Qn(u,{position:c},i)):(u=new o(e,s)).attr("position",c),n.add(u),e.setItemGraphicEl(s,u)):n.remove(u)}).remove(function(s){var l=r.getItemGraphicEl(s);l&&l.fadeOut(function(){n.remove(l)})}).execute(),this._data=e},Rl.isPersistent=function(){return!0},Rl.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl(function(t,n){var i=e.getItemLayout(n);t.attr("position",i)})},Rl.incrementalPrepareUpdate=function(e){this._seriesScope=Rx(e),this._data=null,this.group.removeAll()},Rl.incrementalUpdate=function(e,t,n){function i(s){s.isGroup||(s.incremental=s.useHoverLayer=!0)}n=Lx(n);for(var r=e.start;r<e.end;r++){var o=t.getItemLayout(r);if(Sg(t,o,r,n)){var a=new this._symbolCtor(t,r,this._seriesScope);a.traverse(i),a.attr("position",o),this.group.add(a),t.setItemGraphicEl(r,a)}}},Rl.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)})}):t.removeAll()};var Px=dr,Bx=qi,Ox=It,mh=wn,Ag=[],bo=[],_o=[];function xa(e){return isNaN(e[0])||isNaN(e[1])}function Ig(e,t,n,i,r,o,a,s,l,u){return"none"!==u&&u?function(c,d,h,f,p,_,v,E,F,V,q){for(var j=0,X=h,Y=0;Y<f;Y++){var Q=d[X];if(p<=X||X<0)break;if(xa(Q)){if(q){X+=_;continue}break}if(X===h)c[0<_?"moveTo":"lineTo"](Q[0],Q[1]);else if(0<F){var oe=d[j],ce="y"===V?1:0,ge=(Q[ce]-oe[ce])*F;mh(bo,oe),bo[ce]=oe[ce]+ge,mh(_o,Q),_o[ce]=Q[ce]-ge,c.bezierCurveTo(bo[0],bo[1],_o[0],_o[1],Q[0],Q[1])}else c.lineTo(Q[0],Q[1]);j=X,X+=_}return Y}.apply(this,arguments):function(c,d,h,f,p,_,v,E,F,V,q){for(var j=0,X=h,Y=0;Y<f;Y++){var Q=d[X];if(p<=X||X<0)break;if(xa(Q)){if(q){X+=_;continue}break}if(X===h)c[0<_?"moveTo":"lineTo"](Q[0],Q[1]),mh(bo,Q);else if(0<F){var oe=X+_,ce=d[oe];if(q)for(;ce&&xa(d[oe]);)ce=d[oe+=_];var ge=.5,we=d[j];if(!(ce=d[oe])||xa(ce))mh(_o,Q);else{var Ce,Ae;if(xa(ce)&&!q&&(ce=Q),qt(Ag,ce,we),"x"===V||"y"===V){var Oe="x"===V?0:1;Ce=Math.abs(Q[Oe]-we[Oe]),Ae=Math.abs(Q[Oe]-ce[Oe])}else Ce=Gn(Q,we),Ae=Gn(Q,ce);Ox(_o,Q,Ag,-F*(1-(ge=Ae/(Ae+Ce))))}Px(bo,bo,E),Bx(bo,bo,v),Px(_o,_o,E),Bx(_o,_o,v),c.bezierCurveTo(bo[0],bo[1],_o[0],_o[1],Q[0],Q[1]),Ox(bo,Q,Ag,F*ge)}else c.lineTo(Q[0],Q[1]);j=X,X+=_}return Y}.apply(this,arguments)}function Dg(e,t){var n=[1/0,1/0],i=[-1/0,-1/0];if(t)for(var r=0;r<e.length;r++){var o=e[r];o[0]<n[0]&&(n[0]=o[0]),o[1]<n[1]&&(n[1]=o[1]),o[0]>i[0]&&(i[0]=o[0]),o[1]>i[1]&&(i[1]=o[1])}return{min:t?n:i,max:t?i:n}}var eI=ci.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:rp(ci.prototype.brush),buildPath:function(e,t){var n=t.points,i=0,r=n.length,o=Dg(n,t.smoothConstraint);if(t.connectNulls){for(;0<r&&xa(n[r-1]);r--);for(;i<r&&xa(n[i]);i++);}for(;i<r;)i+=Ig(e,n,i,r,r,1,o.min,o.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),zx=ci.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:rp(ci.prototype.brush),buildPath:function(e,t){var n=t.points,i=t.stackedOnPoints,r=0,o=n.length,a=t.smoothMonotone,s=Dg(n,t.smoothConstraint),l=Dg(i,t.smoothConstraint);if(t.connectNulls){for(;0<o&&xa(n[o-1]);o--);for(;r<o&&xa(n[r]);r++);}for(;r<o;){var u=Ig(e,n,r,o,o,1,s.min,s.max,t.smooth,a,t.connectNulls);Ig(e,i,r+u-1,u,o,-1,l.min,l.max,t.stackedOnSmooth,a,t.connectNulls),r+=u+1,e.closePath()}}});function Vx(e,t,n){var i=e.getArea(),r=e.getBaseAxis().isHorizontal(),o=i.x,a=i.y,s=i.width,l=i.height,u=n.get("lineStyle.width")||2;o-=u/2,a-=u/2,s+=u,l+=u,o=Math.floor(o),s=Math.round(s);var c=new vi({shape:{x:o,y:a,width:s,height:l}});return t&&(c.shape[r?"width":"height"]=0,Tr(c,{shape:{width:s,height:l}},n)),c}function Hx(e,t,n){var i=e.getArea(),r=new Ao({shape:{cx:nr(e.cx,1),cy:nr(e.cy,1),r0:nr(i.r0,1),r:nr(i.r,1),startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return t&&(r.shape.endAngle=i.startAngle,Tr(r,{shape:{endAngle:i.endAngle}},n)),r}function vh(e,t,n){return e?"polar"===e.type?Hx(e,t,n):"cartesian2d"===e.type?Vx(e,t,n):null:null}function Fx(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++){var i=e[n],r=t[n];if(i[0]!==r[0]||i[1]!==r[1])return}return!0}}function Wx(e,t){var n=[],i=[],r=[],o=[];return wu(e,n,i),wu(t,r,o),Math.max(Math.abs(n[0]-r[0]),Math.abs(n[1]-r[1]),Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]))}function Gx(e){return"number"==typeof e?e:e?.5:0}function Xa(e,t,n){for(var i=t.getBaseAxis(),r="x"===i.dim||"radius"===i.dim?0:1,o=[],a=0;a<e.length-1;a++){var s=e[a+1],l=e[a];o.push(l);var u=[];switch(n){case"end":u[r]=s[r],u[1-r]=l[1-r],o.push(u);break;case"middle":var d=[];u[r]=d[r]=(l[r]+s[r])/2,u[1-r]=l[1-r],d[1-r]=s[1-r],o.push(u),o.push(d);break;default:u[r]=l[r],u[1-r]=s[1-r],o.push(u)}}return e[a]&&o.push(e[a]),o}function Ux(e,t,n){if("cartesian2d"!==e.type)return Hx(e,t,n);var i=e.getBaseAxis().isHorizontal(),r=Vx(e,t,n);if(!n.get("clip",!0)){var o=r.shape,a=Math.max(o.width,o.height);i?(o.y-=a,o.height+=2*a):(o.x-=a,o.width+=2*a)}return r}function Rs(e,t,n){return{seriesType:e,performRawSeries:!0,reset:function(i,r,o){var a=i.getData(),s=i.get("symbol"),l=i.get("symbolSize"),u=i.get("symbolKeepAspect"),c=i.get("symbolRotate"),d=gn(s),h=gn(l),f=gn(c),p=d||h||f,_=!d&&s?s:t;if(a.setVisual({legendSymbol:n||_,symbol:_,symbolSize:h?null:l,symbolKeepAspect:u,symbolRotate:c}),!r.isSeriesFiltered(i))return{dataEach:a.hasItemOption||p?function(E,F){if(p){var V=i.getRawValue(F),q=i.getDataParams(F);d&&E.setItemVisual(F,"symbol",s(V,q)),h&&E.setItemVisual(F,"symbolSize",l(V,q)),f&&E.setItemVisual(F,"symbolRotate",c(V,q))}if(E.hasItemOption){var j=E.getItemModel(F),X=j.getShallow("symbol",!0),Y=j.getShallow("symbolSize",!0),Q=j.getShallow("symbolRotate",!0),oe=j.getShallow("symbolKeepAspect",!0);null!=X&&E.setItemVisual(F,"symbol",X),null!=Y&&E.setItemVisual(F,"symbolSize",Y),null!=Q&&E.setItemVisual(F,"symbolRotate",Q),null!=oe&&E.setItemVisual(F,"symbolKeepAspect",oe)}}:null}}}}function oc(e){return{seriesType:e,plan:Tl(),reset:function(t){var n=t.getData(),i=t.coordinateSystem,r=t.pipelineContext.large;if(i){var o=Ke(i.dimensions,function(l){return n.mapDimension(l)}).slice(0,2),a=o.length,s=n.getCalculationInfo("stackResultDimension");return va(n,o[0])&&(o[0]=s),va(n,o[1])&&(o[1]=s),a&&{progress:function(l,u){for(var d=r&&new Float32Array((l.end-l.start)*a),h=l.start,f=0,p=[],_=[];h<l.end;h++){var v;if(1===a){var E=u.get(o[0],h);v=!isNaN(E)&&i.dataToPoint(E,null,_)}else{E=p[0]=u.get(o[0],h);var F=p[1]=u.get(o[1],h);v=!isNaN(E)&&!isNaN(F)&&i.dataToPoint(p,null,_)}r?(d[f++]=v?v[0]:NaN,d[f++]=v?v[1]:NaN):u.setItemLayout(h,v&&v.slice()||[NaN,NaN])}r&&u.setLayout("symbolPoints",d)}}}}}}function nI(e,t){return Math.round(e.length/2)}fr.extend({type:"line",init:function(){var e=new m,t=new Ll;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,n){var i=e.coordinateSystem,r=this.group,o=e.getData(),a=e.getModel("lineStyle"),s=e.getModel("areaStyle"),l=o.mapArray(o.getItemLayout),u="polar"===i.type,c=this._coordSys,d=this._symbolDraw,h=this._polyline,f=this._polygon,p=this._lineGroup,_=e.get("animation"),v=!s.isEmpty(),E=s.get("origin"),F=function(we,Ce,Ae){if(!Ae.valueDim)return[];for(var Oe=[],Ge=0,Pe=Ce.count();Ge<Pe;Ge++)Oe.push(Tg(Ae,we,Ce,Ge));return Oe}(i,o,Mg(i,o,E)),V=e.get("showSymbol"),q=V&&!u&&function tI(e,t,n){var i=e.get("showAllSymbol"),r="auto"===i;if(!i||r){var o=n.getAxesByScale("ordinal")[0];if(o&&(!r||!function(l,u){var c=l.getExtent(),d=Math.abs(c[1]-c[0])/l.scale.count();isNaN(d)&&(d=0);for(var h=u.count(),f=Math.max(1,Math.round(h/5)),p=0;p<h;p+=f)if(1.5*qa.getSymbolSize(u,p)[l.isHorizontal()?1:0]>d)return!1;return!0}(o,t))){var a=t.mapDimension(o.dim),s={};return re(o.getViewLabels(),function(l){s[l.tickValue]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}(e,o,i),j=this._data;j&&j.eachItemGraphicEl(function(we,Ce){we.__temp&&(r.remove(we),j.setItemGraphicEl(Ce,null))}),V||d.remove(),r.add(p);var X,Y=!u&&e.get("step");i&&i.getArea&&e.get("clip",!0)&&(null!=(X=i.getArea()).width?(X.x-=.1,X.y-=.1,X.width+=.2,X.height+=.2):X.r0&&(X.r0-=.5,X.r1+=.5)),this._clipShapeForSymbol=X,h&&c.type===i.type&&Y===this._step?(v&&!f?f=this._newPolygon(l,F,i,_):f&&!v&&(p.remove(f),f=this._polygon=null),p.setClipPath(Ux(i,!1,e)),V&&d.updateData(o,{isIgnore:q,clipShape:X}),o.eachItemGraphicEl(function(we){we.stopAnimation(!0)}),Fx(this._stackedOnPoints,F)&&Fx(this._points,l)||(_?this._updateAnimation(o,F,i,n,Y,E):(Y&&(l=Xa(l,i,Y),F=Xa(F,i,Y)),h.setShape({points:l}),f&&f.setShape({points:l,stackedOnPoints:F})))):(V&&d.updateData(o,{isIgnore:q,clipShape:X}),Y&&(l=Xa(l,i,Y),F=Xa(F,i,Y)),h=this._newPolyline(l,i,_),v&&(f=this._newPolygon(l,F,i,_)),p.setClipPath(Ux(i,!0,e)));var Q=function(we,Ce){var Ae=we.getVisual("visualMeta");if(Ae&&Ae.length&&we.count()&&"cartesian2d"===Ce.type){for(var Oe,Ge,Pe=Ae.length-1;0<=Pe;Pe--){var Ft=we.getDimensionInfo(we.dimensions[Ae[Pe].dimension]);if("x"===(Oe=Ft&&Ft.coordDim)||"y"===Oe){Ge=Ae[Pe];break}}if(Ge){var Nt=Ce.getAxis(Oe),rn=Ke(Ge.stops,function(bi){return{coord:Nt.toGlobalCoord(Nt.dataToCoord(bi.value)),color:bi.color}}),fn=rn.length,Ln=Ge.outerColors.slice();fn&&rn[0].coord>rn[fn-1].coord&&(rn.reverse(),Ln.reverse());var Zt=rn[0].coord-10,kn=rn[fn-1].coord+10,Rn=kn-Zt;if(Rn<.001)return"transparent";re(rn,function(bi){bi.offset=(bi.coord-Zt)/Rn}),rn.push({offset:fn?rn[fn-1].offset:.5,color:Ln[1]||"transparent"}),rn.unshift({offset:fn?rn[0].offset:.5,color:Ln[0]||"transparent"});var Vn=new _s(0,0,0,0,rn,!0);return Vn[Oe]=Zt,Vn[Oe+"2"]=kn,Vn}}}(o,i)||o.getVisual("color");h.useStyle(De(a.getLineStyle(),{fill:"none",stroke:Q,lineJoin:"bevel"}));var oe=e.get("smooth");if(oe=Gx(e.get("smooth")),h.setShape({smooth:oe,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),f){var ce=o.getCalculationInfo("stackedOnSeries"),ge=0;f.useStyle(De(s.getAreaStyle(),{fill:Q,opacity:.7,lineJoin:"bevel"})),ce&&(ge=Gx(ce.get("smooth"))),f.setShape({smooth:oe,stackedOnSmooth:ge,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=o,this._coordSys=i,this._stackedOnPoints=F,this._points=l,this._step=Y,this._valueOrigin=E},dispose:function(){},highlight:function(e,t,n,i){var r=e.getData(),o=sd(r,i);if(!(o instanceof Array)&&null!=o&&0<=o){var a=r.getItemGraphicEl(o);if(!a){var s=r.getItemLayout(o);if(!s||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;(a=new qa(r,o)).position=s,a.setZ(e.get("zlevel"),e.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,r.setItemGraphicEl(o,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else fr.prototype.highlight.call(this,e,t,n,i)},downplay:function(e,t,n,i){var r=e.getData(),o=sd(r,i);if(null!=o&&0<=o){var a=r.getItemGraphicEl(o);a&&(a.__temp?(r.setItemGraphicEl(o,null),this.group.remove(a)):a.downplay())}else fr.prototype.downplay.call(this,e,t,n,i)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new eI({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t},_newPolygon:function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new zx({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(e,t,n,i,r,o){var a=this._polyline,s=this._polygon,l=e.hostModel,u=function(F,V,q,j,X,Y,Q,oe){for(var ce=function(Or,Nr){var Ta=[];return Nr.diff(Or).add(function(ss){Ta.push({cmd:"+",idx:ss})}).update(function(ss,Yc){Ta.push({cmd:"=",idx:Yc,idx1:ss})}).remove(function(ss){Ta.push({cmd:"-",idx:ss})}).execute(),Ta}(F,V),ge=[],we=[],Ce=[],Ae=[],Oe=[],Ge=[],Pe=[],st=Mg(X,V,Q),Pt=Mg(Y,F,oe),Ft=0;Ft<ce.length;Ft++){var Nt=ce[Ft],rn=!0;switch(Nt.cmd){case"=":var fn=F.getItemLayout(Nt.idx),Ln=V.getItemLayout(Nt.idx1);(isNaN(fn[0])||isNaN(fn[1]))&&(fn=Ln.slice()),ge.push(fn),we.push(Ln),Ce.push(q[Nt.idx]),Ae.push(j[Nt.idx1]),Pe.push(V.getRawIndex(Nt.idx1));break;case"+":var Zt=Nt.idx;ge.push(X.dataToPoint([V.get(st.dataDimsForPoint[0],Zt),V.get(st.dataDimsForPoint[1],Zt)])),we.push(V.getItemLayout(Zt).slice()),Ce.push(Tg(st,X,V,Zt)),Ae.push(j[Zt]),Pe.push(V.getRawIndex(Zt));break;case"-":var kn=F.getRawIndex(Zt=Nt.idx);kn!==Zt?(ge.push(F.getItemLayout(Zt)),we.push(Y.dataToPoint([F.get(Pt.dataDimsForPoint[0],Zt),F.get(Pt.dataDimsForPoint[1],Zt)])),Ce.push(q[Zt]),Ae.push(Tg(Pt,Y,F,Zt)),Pe.push(kn)):rn=!1}rn&&(Oe.push(Nt),Ge.push(Ge.length))}Ge.sort(function(Or,Nr){return Pe[Or]-Pe[Nr]});var Rn=[],Vn=[],bi=[],fi=[],Ti=[];for(Ft=0;Ft<Ge.length;Ft++)Rn[Ft]=ge[Zt=Ge[Ft]],Vn[Ft]=we[Zt],bi[Ft]=Ce[Zt],fi[Ft]=Ae[Zt],Ti[Ft]=Oe[Zt];return{current:Rn,next:Vn,stackedOnCurrent:bi,stackedOnNext:fi,status:Ti}}(this._data,e,this._stackedOnPoints,t,this._coordSys,n,this._valueOrigin,o),c=u.current,d=u.stackedOnCurrent,h=u.next,f=u.stackedOnNext;if(r&&(c=Xa(u.current,n,r),d=Xa(u.stackedOnCurrent,n,r),h=Xa(u.next,n,r),f=Xa(u.stackedOnNext,n,r)),3e3<Wx(c,h)||s&&3e3<Wx(d,f))return a.setShape({points:h}),void(s&&s.setShape({points:h,stackedOnPoints:f}));a.shape.__points=u.current,a.shape.points=c,Qn(a,{shape:{points:h}},l),s&&(s.setShape({points:c,stackedOnPoints:d}),Qn(s,{shape:{points:h,stackedOnPoints:f}},l));for(var p=[],_=u.status,v=0;v<_.length;v++)if("="===_[v].cmd){var E=e.getItemGraphicEl(_[v].idx1);E&&p.push({el:E,ptIdx:v})}a.animators&&a.animators.length&&a.animators[0].during(function(){for(var F=0;F<p.length;F++)p[F].el.attr("position",a.shape.__points[p[F].ptIdx])})},remove:function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,r){i.__temp&&(t.remove(i),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var iI={average:function(e){for(var t=0,n=0,i=0;i<e.length;i++)isNaN(e[i])||(t+=e[i],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}};function rI(e){return this._axes[e]}function yh(e){this._axes={},this._dimList=[],this.name=e||""}function ac(e){yh.call(this,e)}function xh(e,t,n,i,r){er.call(this,e,t,n),this.type=i||"value",this.position=r||"bottom"}yh.prototype={constructor:yh,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return Ke(this._dimList,rI,this)},getAxesByScale:function(e){return e=e.toLowerCase(),nt(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var n=this._dimList,i=e instanceof Array?[]:{},r=0;r<n.length;r++){var o=n[r];i[o]=this._axes[o][t](e[o])}return i}},ac.prototype={constructor:ac,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,n){var i=this.getAxis("x"),r=this.getAxis("y");return(n=n||[])[0]=i.toGlobalCoord(i.dataToCoord(e[0])),n[1]=r.toGlobalCoord(r.dataToCoord(e[1])),n},clampData:function(e,t){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,r=n.getExtent(),o=i.getExtent(),a=n.parse(e[0]),s=i.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(r[0],r[1]),a),Math.max(r[0],r[1])),t[1]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),t},pointToData:function(e,t){var n=this.getAxis("x"),i=this.getAxis("y");return(t=t||[])[0]=n.coordToData(n.toLocalCoord(e[0])),t[1]=i.coordToData(i.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")},getArea:function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1]),i=Math.min(t[0],t[1]);return new g(n,i,Math.max(e[0],e[1])-n,Math.max(t[0],t[1])-i)}},Ue(ac,yh),xh.prototype={constructor:xh,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},Ue(xh,er);var jx={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},Za={};function Pl(e,t,n,i){re(oI,function(r){t.extend({type:e+"Axis."+r,mergeDefaultAndTheme:function(o,a){var s=this.layoutMode,l=s?Sl(o):{};rt(o,a.getTheme().get(r+"Axis")),rt(o,this.getDefaultOption()),o.type=n(e,o),s&&Va(o,l,s)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=ec.createByAxisModel(this))},getCategories:function(o){var a=this.option;if("category"===a.type)return o?a.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:Ie([{},Za[r+"Axis"],i],!0)})}),yi.registerSubTypeDefaulter(e+"Axis",Lt(n,e))}Za.categoryAxis=rt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},jx),Za.valueAxis=rt({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},jx),Za.timeAxis=De({scale:!0,min:"dataMin",max:"dataMax"},Za.valueAxis),Za.logAxis=De({scale:!0,logBase:10},Za.valueAxis);var oI=["value","category","time","log"],Bl=yi.extend({type:"cartesian2dAxis",axis:null,init:function(){Bl.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){Bl.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){Bl.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function qx(e,t){return t.type||(t.data?"category":"value")}rt(Bl.prototype,Es);var Xx={offset:0};function kg(e,t){return e.getCoordSysModel()===t}function Ol(e,t,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,n),this.model=e}Pl("x",Bl,qx,Xx),Pl("y",Bl,qx,Xx),yi.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var kr=Ol.prototype;function Zx(e,t,n,i){n.getAxesOnZeroOf=function(){return r?[r]:[]};var r,o=e[t],a=n.model,s=a.get("axisLine.onZero"),l=a.get("axisLine.onZeroAxisIndex");if(s){if(null!=l)Yx(o[l])&&(r=o[l]);else for(var u in o)if(o.hasOwnProperty(u)&&Yx(o[u])&&!i[c(o[u])]){r=o[u];break}r&&(i[c(r)]=!0)}function c(d){return d.dim+"_"+d.index}}function Yx(e){return e&&"category"!==e.type&&"time"!==e.type&&function(t){var n=t.scale.getExtent(),i=n[0],r=n[1];return!(0<i&&0<r||i<0&&r<0)}(e)}kr.type="grid",kr.axisPointerEnabled=!0,kr.getRect=function(){return this._rect},kr.update=function(e,t){var n=this._axesMap;this._updateScale(e,this.model),re(n.x,function(r){ja(r.scale,r.model)}),re(n.y,function(r){ja(r.scale,r.model)});var i={};re(n.x,function(r){Zx(n,"y",r,i)}),re(n.y,function(r){Zx(n,"x",r,i)}),this.resize(this.model,t)},kr.resize=function(e,t,n){var i=Ki(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=i;var r=this._axesList;function o(){re(r,function(a){var c,d,h,f,s=a.isHorizontal(),l=s?[0,i.width]:[0,i.height],u=a.inverse?1:0;a.setExtent(l[u],l[1-u]),d=s?i.x:i.y,h=(c=a).getExtent(),f=h[0]+h[1],c.toGlobalCoord="x"===c.dim?function(p){return p+d}:function(p){return f-p+d},c.toLocalCoord="x"===c.dim?function(p){return p-d}:function(p){return f-p+d}})}o(),!n&&e.get("containLabel")&&(re(r,function(a){if(!a.model.get("axisLabel.inside")){var s=function(c){var h=c.scale;if(c.model.get("axisLabel.show")&&!h.isBlank()){var f,p,_="category"===c.type,v=h.getExtent();p=_?h.count():(f=h.getTicks()).length;var E,F,q,j,X,Y,Q,oe,ce=c.getLabelModel(),ge=nc(c),we=1;40<p&&(we=Math.ceil(p/40));for(var Ce=0;Ce<p;Ce+=we){var Ae=ge(f?f[Ce]:v[0]+Ce),Ge=(F=ce.getTextRect(Ae),q=(ce.get("rotate")||0)*Math.PI/180,Y=(j=F.plain()).height,Q=(X=j.width)*Math.abs(Math.cos(q))+Math.abs(Y*Math.sin(q)),oe=X*Math.abs(Math.sin(q))+Math.abs(Y*Math.cos(q)),new g(j.x,j.y,Q,oe));E?E.union(Ge):E=Ge}return E}}(a);if(s){var l=a.isHorizontal()?"height":"width",u=a.model.get("axisLabel.margin");i[l]-=s[l]+u,"top"===a.position?i.y+=s.height+u:"left"===a.position&&(i.x+=s.width+u)}}}),o())},kr.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n){if(null==t)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[t]}},kr.getAxes=function(){return this._axesList.slice()},kr.getCartesian=function(e,t){if(null!=e&&null!=t)return this._coordsMap["x"+e+"y"+t];Mt(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===e||r[i].getAxis("y").index===t)return r[i]},kr.getCartesians=function(){return this._coordsList.slice()},kr.convertToPixel=function(e,t,n){var i=this._findConvertTarget(e,t);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},kr.convertFromPixel=function(e,t,n){var i=this._findConvertTarget(e,t);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},kr._findConvertTarget=function(e,t){var n,i,r=t.seriesModel,o=t.xAxisModel||r&&r.getReferringComponents("xAxis")[0],a=t.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=t.gridModel;return r?Je(this._coordsList,n=r.coordinateSystem)<0&&(n=null):o&&a?n=this.getCartesian(o.componentIndex,a.componentIndex):o?i=this.getAxis("x",o.componentIndex):a?i=this.getAxis("y",a.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:i}},kr.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},kr._initCartesian=function(e,t,n){var i={left:!1,right:!1,top:!1,bottom:!1},r={x:{},y:{}},o={x:0,y:0};if(t.eachComponent("xAxis",a("x"),this),t.eachComponent("yAxis",a("y"),this),!o.x||!o.y)return this._axesMap={},void(this._axesList=[]);function a(s){return function(l,u){if(kg(l,e)){var c=l.get("position");"x"===s?"top"!==c&&"bottom"!==c&&(c=i.bottom?"top":"bottom"):"left"!==c&&"right"!==c&&(c=i.left?"right":"left"),i[c]=!0;var d=new xh(s,El(l),[0,0],l.get("type"),c);d.onBand="category"===d.type&&l.get("boundaryGap"),d.inverse=l.get("inverse"),(l.axis=d).model=l,d.grid=this,d.index=u,this._axesList.push(d),r[s][u]=d,o[s]++}}}re((this._axesMap=r).x,function(s,l){re(r.y,function(u,c){var d="x"+l+"y"+c,h=new ac(d);h.grid=this,h.model=e,this._coordsMap[d]=h,this._coordsList.push(h),h.addAxis(s),h.addAxis(u)},this)},this)},kr._updateScale=function(e,t){function n(i,r){re(i.mapDimension(r.dim,!0),function(o){r.scale.unionExtentFromData(i,Qu(i,o))})}re(this._axesList,function(i){i.scale.setExtent(1/0,-1/0)}),e.eachSeries(function(i){if(Kx(i)){var r=$x(i),o=r[0],a=r[1];if(!kg(o,t)||!kg(a,t))return;var s=this.getCartesian(o.componentIndex,a.componentIndex),l=i.getData(),u=s.getAxis("x"),c=s.getAxis("y");"list"===l.type&&(n(l,u),n(l,c))}},this)},kr.getTooltipAxes=function(e){var t=[],n=[];return re(this.getCartesians(),function(i){var r=null!=e&&"auto"!==e?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(r);Je(t,r)<0&&t.push(r),Je(n,o)<0&&n.push(o)}),{baseAxes:t,otherAxes:n}};var aI=["xAxis","yAxis"];function $x(e){return Ke(aI,function(t){return e.getReferringComponents(t)[0]})}function Kx(e){return"cartesian2d"===e.get("coordinateSystem")}function Yr(e,t){this.opt=t,this.axisModel=e,De(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new m;var n=new m({position:t.position.slice(),rotation:t.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}Ol.create=function(e,t){var n=[];return e.eachComponent("grid",function(i,r){var o=new Ol(i,e,t);o.name="grid_"+r,o.resize(i,t,!0),i.coordinateSystem=o,n.push(o)}),e.eachSeries(function(i){if(Kx(i)){var r=$x(i),o=r[0],a=r[1],s=o.getCoordSysModel().coordinateSystem;i.coordinateSystem=s.getCartesian(o.componentIndex,a.componentIndex)}}),n},Ol.dimensions=Ol.prototype.dimensions=ac.prototype.dimensions,Ir.register("cartesian2d",Ol);var Ya=Math.PI;Yr.prototype={constructor:Yr,hasBuilder:function(e){return!!Jx[e]},add:function(e){Jx[e].call(this)},getGroup:function(){return this.group}};var Jx={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,r=[n[0],0],o=[n[1],0];i&&(ti(r,r,i),ti(o,o,i));var a=fe({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new yr({anid:"line",subPixelOptimize:!0,shape:{x1:r[0],y1:r[1],x2:o[0],y2:o[1]},style:a,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1}));var s=t.get("axisLine.symbol"),l=t.get("axisLine.symbolSize"),u=t.get("axisLine.symbolOffset")||0;if("number"==typeof u&&(u=[u,u]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var c=l[0],d=l[1];re([{rotate:e.rotation+Math.PI/2,offset:u[0],r:0},{rotate:e.rotation-Math.PI/2,offset:u[1],r:Math.sqrt((r[0]-o[0])*(r[0]-o[0])+(r[1]-o[1])*(r[1]-o[1]))}],function(h,f){if("none"!==s[f]&&null!=s[f]){var p=io(s[f],-c/2,-d/2,c,d,a.stroke,!0),_=h.r+h.offset,v=[r[0]+_*Math.cos(e.rotation),r[1]-_*Math.sin(e.rotation)];p.attr({rotation:h.rotate,position:v,silent:!0,z2:11}),this.group.add(p)}},this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,n=function(i,r,o){var a=r.axis,s=r.getModel("axisTick");if(s.get("show")&&!a.scale.isBlank()){for(var l=s.getModel("lineStyle"),u=o.tickDirection*s.get("length"),c=rb(a.getTicksCoords(),i._transform,u,De(l.getLineStyle(),{stroke:r.get("axisLine.lineStyle.color")}),"ticks"),d=0;d<c.length;d++)i.group.add(c[d]);return c}}(this,e,t);(function(i,r,o){if(!xx(i.axis)){var a=i.get("axisLabel.showMinLabel"),s=i.get("axisLabel.showMaxLabel"),l=(r=r||[])[0],u=r[1],c=r[r.length-1],d=r[r.length-2],h=(o=o||[])[0],f=o[1],p=o[o.length-1],_=o[o.length-2];!1===a?(wo(l),wo(h)):nb(l,u)&&(a?(wo(u),wo(f)):(wo(l),wo(h))),!1===s?(wo(c),wo(p)):nb(d,c)&&(s?(wo(d),wo(_)):(wo(c),wo(p)))}})(e,function(i,r,o){var a=r.axis;if(an(o.axisLabelShow,r.get("axisLabel.show"))&&!a.scale.isBlank()){var s=r.getModel("axisLabel"),l=s.get("margin"),u=a.getViewLabels(),c=(an(o.labelRotate,s.get("rotate"))||0)*Ya/180,d=eb(o.rotation,c,o.labelDirection),h=r.getCategories&&r.getCategories(!0),f=[],p=tb(r),_=r.get("triggerEvent");return re(u,function(v,E){var F=v.tickValue,V=v.formattedLabel,q=v.rawLabel,j=s;h&&h[F]&&h[F].textStyle&&(j=new di(h[F].textStyle,s,r.ecModel));var X=j.getTextColor()||r.get("axisLine.lineStyle.color"),Y=[a.dataToCoord(F),o.labelOffset+o.labelDirection*l],Q=new oi({anid:"label_"+F,position:Y,rotation:d.rotation,silent:p,z2:10});Fi(Q.style,j,{text:V,textAlign:j.getShallow("align",!0)||d.textAlign,textVerticalAlign:j.getShallow("verticalAlign",!0)||j.getShallow("baseline",!0)||d.textVerticalAlign,textFill:"function"==typeof X?X("category"===a.type?q:"value"===a.type?F+"":F,E):X}),_&&(Q.eventData=Qx(r),Q.eventData.targetType="axisLabel",Q.eventData.value=q),i._dumbGroup.add(Q),Q.updateTransform(),f.push(Q),i.group.add(Q),Q.decomposeTransform()}),f}}(this,e,t),n),function(i,r,o){var a=r.axis,s=r.getModel("minorTick");if(s.get("show")&&!a.scale.isBlank()){var l=a.getMinorTicksCoords();if(l.length)for(var u=s.getModel("lineStyle"),c=o.tickDirection*s.get("length"),d=De(u.getLineStyle(),De(r.getModel("axisTick").getLineStyle(),{stroke:r.get("axisLine.lineStyle.color")})),h=0;h<l.length;h++)for(var f=rb(l[h],i._transform,c,d,"minorticks_"+h),p=0;p<f.length;p++)i.group.add(f[p])}}(this,e,t)},axisName:function(){var Y,oe,ge,we,Ce,Ae,e=this.opt,t=this.axisModel,n=an(e.axisName,t.get("name"));if(n){var i,r,o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=this.axisModel.axis.getExtent(),c=u[0]>u[1]?-1:1,d=["start"===o?u[0]-c*l:"end"===o?u[1]+c*l:(u[0]+u[1])/2,ib(o)?e.labelOffset+a*l:0],h=t.get("nameRotate");null!=h&&(h=h*Ya/180),ib(o)?i=eb(e.rotation,h??e.rotation,a):(Y=o,oe=u,we=vp((h||0)-e.rotation),Ce=oe[0]>oe[1],Ae="start"===Y&&!Ce||"start"!==Y&&Ce,i={rotation:we,textAlign:Lu(we-Ya/2)?(ge=Ae?"bottom":"top","center"):Lu(we-1.5*Ya)?(ge=Ae?"top":"bottom","center"):(ge="middle",we<1.5*Ya&&Ya/2<we?Ae?"left":"right":Ae?"right":"left"),textVerticalAlign:ge},null!=(r=e.axisNameAvailableWidth)&&(r=Math.abs(r/Math.sin(i.rotation)),isFinite(r)||(r=null)));var f=s.getFont(),p=t.get("nameTruncate",!0)||{},_=p.ellipsis,v=an(e.nameTruncateMaxWidth,p.maxWidth,r),E=null!=_&&null!=v?By(n,v,f,_,{minChar:2,placeholder:p.placeholder}):n,F=t.get("tooltip",!0),V=t.mainType,q={componentType:V,name:n,$vars:["name"]};q[V+"Index"]=t.componentIndex;var j=new oi({anid:"name",__fullText:n,__truncatedText:E,position:d,rotation:i.rotation,silent:tb(t),z2:1,tooltip:F&&F.show?fe({content:n,formatter:function(){return n},formatterParams:q},F):null});Fi(j.style,s,{text:E,textFont:f,textFill:s.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:s.get("align")||i.textAlign,textVerticalAlign:s.get("verticalAlign")||i.textVerticalAlign}),t.get("triggerEvent")&&(j.eventData=Qx(t),j.eventData.targetType="axisName",j.eventData.name=n),this._dumbGroup.add(j),j.updateTransform(),this.group.add(j),j.decomposeTransform()}}},Qx=Yr.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},eb=Yr.innerTextLayout=function(e,t,n){var i,r=vp(t-e);return{rotation:r,textAlign:Lu(r)?(i=0<n?"top":"bottom","center"):Lu(r-Ya)?(i=0<n?"bottom":"top","center"):(i="middle",0<r&&r<Ya?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:i}},tb=Yr.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)};function wo(e){e&&(e.ignore=!0)}function nb(e,t){var n=e&&e.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(n&&i){var r=Ro([]);return So(r,r,-e.rotation),n.applyTransform(lo([],r,e.getLocalTransform())),i.applyTransform(lo([],r,t.getLocalTransform())),n.intersect(i)}}function ib(e){return"middle"===e||"center"===e}function rb(e,t,n,i,r){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,s[a[1]=0]=u,s[1]=n,t&&(ti(a,a,t),ti(s,s,t));var c=new yr({anid:r+"_"+e[l].tickValue,subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,silent:!0});o.push(c)}return o}var zl=re,Ng=Lt;function Eg(e,t){return"all"===e||Ye(e)&&0<=Je(e,t)||e===t}function Lg(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[sc(e)]}function Rg(e){return!!e.get("handle.show")}function sc(e){return e.type+"||"+e.id}var ro=lr({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,n,i){this.axisPointerClass&&function(r){var o=Lg(r);if(o){var a=o.axisPointerModel,s=o.axis.scale,l=a.option,u=a.get("status"),c=a.get("value");null!=c&&(c=s.parse(c));var d=Rg(a);null==u&&(l.status=d?"show":"hide");var h=s.getExtent().slice();h[0]>h[1]&&h.reverse(),(null==c||c>h[1])&&(c=h[1]),c<h[0]&&(c=h[0]),l.value=c,d&&(l.status=o.axis.scale.isBlank()?"hide":"show")}}(e),ro.superApply(this,"render",arguments),ob(this,e,0,n,0,!0)},updateAxisPointer:function(e,t,n,i,r){ob(this,e,0,n,0,!1)},remove:function(e,t){var n=this._axisPointer;n&&n.remove(t),ro.superApply(this,"remove",arguments)},dispose:function(e,t){ab(this,t),ro.superApply(this,"dispose",arguments)}});function ob(e,t,n,i,r,o){var u,a=ro.getAxisPointerClass(e.axisPointerClass);if(a){var s=(u=Lg(t))&&u.axisPointerModel;s?(e._axisPointer||(e._axisPointer=new a)).render(t,s,i,o):ab(e,i)}}function ab(e,t,n){var i=e._axisPointer;i&&i.dispose(t,n),e._axisPointer=null}var sb=[];function Pg(e,t,n){n=n||{};var i=e.coordinateSystem,r=t.axis,o={},a=r.getAxesOnZeroOf()[0],s=r.position,l=a?"onZero":s,u=r.dim,c=i.getRect(),d=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,p="x"===u?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(a){var _=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(_,p[1]),p[0])}o.position=["y"===u?p[h[l]]:d[0],"x"===u?p[h[l]]:d[3]],o.rotation=Math.PI/2*("x"===u?0:1),o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],o.labelOffset=a?p[h[s]]-p[h.onZero]:0,t.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),an(n.labelInside,t.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var v=t.get("axisLabel.rotate");return o.labelRotate="top"===l?-v:v,o.z2=1,o}function lb(e,t,n,i){var r=n.axis;if(!r.scale.isBlank()){var o=n.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=i.coordinateSystem.getRect(),u=r.getTicksCoords({tickModel:o,clamp:!0});if(u.length){var c=s.length,d=e.__splitAreaColors,h=Ct(),f=0;if(d)for(var p=0;p<u.length;p++){var _=d.get(u[p].tickValue);if(null!=_){f=(_+(c-1)*p)%c;break}}var v=r.toGlobalCoord(u[0].coord),E=a.getAreaStyle();for(s=Ye(s)?s:[s],p=1;p<u.length;p++){var F,V,q,j,X=r.toGlobalCoord(u[p].coord);v=r.isHorizontal()?(V=l.y,j=l.height,(F=v)+(q=X-F)):(F=l.x,q=l.width,(V=v)+(j=X-V));var Y=u[p-1].tickValue;null!=Y&&h.set(Y,f),t.add(new vi({anid:null!=Y?"area_"+Y:null,shape:{x:F,y:V,width:q,height:j},style:De({fill:s[f]},E),silent:!0})),f=(f+1)%c}e.__splitAreaColors=h}}}function ub(e){e.__splitAreaColors=null}ro.registerAxisPointerClass=function(e,t){sb[e]=t},ro.getAxisPointerClass=function(e){return e&&sb[e]};var lI=["axisLine","axisTickLabel","axisName"],uI=["splitArea","splitLine","minorSplitLine"],Bg=ro.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,n,i){this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new m,this.group.add(this._axisGroup),e.get("show")){var o=e.getCoordSysModel(),a=Pg(o,e),s=new Yr(e,a);re(lI,s.add,s),this._axisGroup.add(s.getGroup()),re(uI,function(l){e.get(l+".show")&&this["_"+l](e,o)},this),Ed(r,this._axisGroup,e),Bg.superCall(this,"render",e,t,n,i)}},remove:function(){ub(this)},_splitLine:function(e,t){var n=e.axis;if(!n.scale.isBlank()){var i=e.getModel("splitLine"),r=i.getModel("lineStyle"),o=r.get("color");o=Ye(o)?o:[o];for(var a=t.coordinateSystem.getRect(),s=n.isHorizontal(),l=0,u=n.getTicksCoords({tickModel:i}),c=[],d=[],h=r.getLineStyle(),f=0;f<u.length;f++){var p=n.toGlobalCoord(u[f].coord);s?(c[0]=p,c[1]=a.y,d[0]=p,d[1]=a.y+a.height):(c[0]=a.x,c[1]=p,d[0]=a.x+a.width,d[1]=p);var _=l++%o.length;this._axisGroup.add(new yr({anid:null!=u[f].tickValue?"line_"+u[f].tickValue:null,subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:d[0],y2:d[1]},style:De({stroke:o[_]},h),silent:!0}))}}},_minorSplitLine:function(e,t){var n=e.axis,i=e.getModel("minorSplitLine").getModel("lineStyle"),r=t.coordinateSystem.getRect(),o=n.isHorizontal(),a=n.getMinorTicksCoords();if(a.length)for(var s=[],l=[],u=i.getLineStyle(),c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++){var h=n.toGlobalCoord(a[c][d].coord);o?(s[0]=h,s[1]=r.y,l[0]=h,l[1]=r.y+r.height):(s[0]=r.x,s[1]=h,l[0]=r.x+r.width,l[1]=h),this._axisGroup.add(new yr({anid:"minor_line_"+a[c][d].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,silent:!0}))}},_splitArea:function(e,t){lb(this,this._axisGroup,e,t)}});Bg.extend({type:"xAxis"}),Bg.extend({type:"yAxis"}),lr({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new vi({shape:e.coordinateSystem.getRect(),style:De({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),br(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}),Ni(Rs("line","circle","line")),Gi(oc("line")),to(qo.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(e,t,n){var i=e.getData(),r=e.get("sampling"),o=e.coordinateSystem;if("cartesian2d"===o.type&&r){var a,s=o.getBaseAxis(),l=o.getOtherAxis(s),u=s.getExtent(),c=Math.abs(u[1]-u[0]),d=Math.round(i.count()/c);1<d&&("string"==typeof r?a=iI[r]:"function"==typeof r&&(a=r),a&&e.setData(i.downSample(i.mapDimension(l.dim),1/d,a,nI)))}}});var cb=Wi.extend({type:"series.__base_bar__",getInitialData:function(e,t){return ya(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var n=t.dataToPoint(t.clampData(e)),i=this.getData(),r=i.getLayout("offset"),o=i.getLayout("size");return n[t.getBaseAxis().isHorizontal()?0:1]+=r+o/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function db(e,t,n,i,r,o){Qr(e,t,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:r,labelDataIndex:o,defaultText:gh(r.getData(),o),isRectText:!0,autoColor:i}),hb(e),hb(t)}function hb(e,t){"outside"===e.textPosition&&(e.textPosition=t)}cb.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return e<t&&(e=t),e},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var cI=ml([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),dI={getBarItemStyle:function(e){var t=cI(this,e);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(t.lineDash=n)}return t}},hI=go({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(e,t){var n=t.cx,i=t.cy,r=Math.max(t.r0||0,0),o=Math.max(t.r,0),a=.5*(o-r),s=r+a,l=t.startAngle,u=t.endAngle,c=t.clockwise,d=Math.cos(l),h=Math.sin(l),f=Math.cos(u),p=Math.sin(u);(c?u-l<2*Math.PI:l-u<2*Math.PI)&&(e.moveTo(d*r+n,h*r+i),e.arc(d*s+n,h*s+i,a,-Math.PI+l,l,!c)),e.arc(n,i,o,l,u,!c),e.moveTo(f*o+n,p*o+i),e.arc(f*s+n,p*s+i,a,u-2*Math.PI,u-Math.PI,!c),0!==r&&(e.arc(n,i,r,u,l,c),e.moveTo(d*r+n,p*r+i)),e.closePath()}}),fI=["itemStyle","barBorderWidth"],bh=[0,0];fe(di.prototype,dI),Zr({type:"bar",render:function(e,t,n){this._updateDrawMode(e);var i=e.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n)),this.group},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,i){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e,t,n){var i,r=this.group,o=e.getData(),a=this._data,s=e.coordinateSystem,l=s.getBaseAxis();"cartesian2d"===s.type?i=l.isHorizontal():"polar"===s.type&&(i="angle"===l.dim);var u=e.isAnimationEnabled()?e:null,c=e.get("clip",!0),d=function(j,X){var Y=j.getArea&&j.getArea();if("cartesian2d"===j.type){var Q=j.getBaseAxis();if("category"!==Q.type||!Q.onBand){var oe=X.getLayout("bandWidth");Q.isHorizontal()?(Y.x-=oe,Y.width+=2*oe):(Y.y-=oe,Y.height+=2*oe)}}return Y}(s,o);function h(j){var Q,X=_h[s.type](o,j),Y=new("polar"===(Q=s).type?Ao:vi)({shape:_b(i,X,Q),silent:!0,z2:0});return Y.useStyle(_.getBarItemStyle()),"cartesian2d"===s.type&&Y.setShape("r",v),E[j]=Y}r.removeClipPath();var f=e.get("roundCap",!0),p=e.get("showBackground",!0),_=e.getModel("backgroundStyle"),v=_.get("barBorderRadius")||0,E=[],F=this._backgroundEls||[];o.diff(a).add(function(j){var X=o.getItemModel(j),Y=_h[s.type](o,j,X);if(p&&h(j),o.hasValue(j)){if(c&&fb[s.type](d,Y))return void r.remove(Q);var Q=pb[s.type](j,Y,i,u,!1,f);o.setItemGraphicEl(j,Q),r.add(Q),vb(Q,o,j,X,Y,e,0,"polar"===s.type)}}).update(function(j,X){var Y=o.getItemModel(j),Q=_h[s.type](o,j,Y);if(p){var oe;0===F.length?oe=h(X):((oe=F[X]).useStyle(_.getBarItemStyle()),"cartesian2d"===s.type&&oe.setShape("r",v),E[j]=oe);var ce=_h[s.type](o,j);Qn(oe,{shape:_b(i,ce,s)},u,j)}var ge=a.getItemGraphicEl(X);if(o.hasValue(j)){if(c&&fb[s.type](d,Q))return void r.remove(ge);ge?Qn(ge,{shape:Q},u,j):ge=pb[s.type](j,Q,i,u,!0,f),o.setItemGraphicEl(j,ge),r.add(ge),vb(ge,o,j,Y,Q,e,0,"polar"===s.type)}else r.remove(ge)}).remove(function(j){var X=a.getItemGraphicEl(j);"cartesian2d"===s.type?X&&gb(j,u,X):X&&mb(j,u,X)}).execute();var V=this._backgroundGroup||(this._backgroundGroup=new m);V.removeAll();for(var q=0;q<E.length;++q)V.add(E[q]);r.add(V),this._backgroundEls=E,this._data=o},_renderLarge:function(e,t,n){this._clear(),xb(e,this.group);var i=e.get("clip",!0)?vh(e.coordinateSystem,!1,e):null;i?this.group.setClipPath(i):this.group.removeClipPath()},_incrementalRenderLarge:function(e,t){this._removeBackground(),xb(t,this.group,!0)},dispose:en,remove:function(e){this._clear(e)},_clear:function(e){var t=this.group,n=this._data;e&&e.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){"sector"===i.type?mb(i.dataIndex,e,i):gb(i.dataIndex,e,i)})):t.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var Og=Math.max,zg=Math.min,fb={cartesian2d:function(e,t){var n=t.width<0?-1:1,i=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var r=Og(t.x,e.x),o=zg(t.x+t.width,e.x+e.width),a=Og(t.y,e.y),s=zg(t.y+t.height,e.y+e.height);t.x=r,t.y=a,t.width=o-r,t.height=s-a;var l=t.width<0||t.height<0;return n<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),l},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var i=t.r;t.r=t.r0,t.r0=i}i=zg(t.r,e.r);var r=Og(t.r0,e.r0),o=(t.r=i)-(t.r0=r)<0;return n<0&&(i=t.r,t.r=t.r0,t.r0=i),o}},pb={cartesian2d:function(e,t,n,i,r){var o=new vi({shape:fe({},t),z2:1});if(o.name="item",i){var a=n?"height":"width",s={};o.shape[a]=0,s[a]=t[a],fa[r?"updateProps":"initProps"](o,{shape:s},i,e)}return o},polar:function(e,t,n,i,r,o){var s=new(!n&&o?hI:Ao)({shape:De({clockwise:t.startAngle<t.endAngle},t),z2:1});if(s.name="item",i){var l=n?"r":"endAngle",u={};s.shape[l]=n?0:t.startAngle,u[l]=t[l],fa[r?"updateProps":"initProps"](s,{shape:u},i,e)}return s}};function gb(e,t,n){n.style.text=null,Qn(n,{shape:{width:0}},t,e,function(){n.parent&&n.parent.remove(n)})}function mb(e,t,n){n.style.text=null,Qn(n,{shape:{r:n.shape.r0}},t,e,function(){n.parent&&n.parent.remove(n)})}var _h={cartesian2d:function(e,t,n){var l,u,c,d,i=e.getItemLayout(t),r=n?(l=i,u=n.get(fI)||0,c=isNaN(l.width)?Number.MAX_VALUE:Math.abs(l.width),d=isNaN(l.height)?Number.MAX_VALUE:Math.abs(l.height),Math.min(u,c,d)):0,o=0<i.width?1:-1,a=0<i.height?1:-1;return{x:i.x+o*r/2,y:i.y+a*r/2,width:i.width-o*r,height:i.height-a*r}},polar:function(e,t,n){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function Vg(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function vb(e,t,n,i,r,o,a,s){var l=t.getItemVisual(n,"color"),u=t.getItemVisual(n,"opacity"),c=t.getVisual("borderColor"),d=i.getModel("itemStyle"),h=i.getModel("emphasis.itemStyle").getBarItemStyle();s||e.setShape("r",d.get("barBorderRadius")||0),e.useStyle(De({stroke:Vg(r)?"none":c,fill:Vg(r)?"none":l,opacity:u},d.getBarItemStyle()));var f=i.getShallow("cursor");f&&e.attr("cursor",f),s||db(e.style,h,i,l,o,n),Vg(r)&&(h.fill=h.stroke="none"),Ri(e,h)}var yb=ci.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var n=t.points,i=this.__startPoint,r=this.__baseDimIdx,o=0;o<n.length;o+=2)i[r]=n[o+r],e.moveTo(i[0],i[1]),e.lineTo(n[o],n[o+1])}});function xb(e,t,n){var i=e.getData(),r=[],o=i.getLayout("valueAxisHorizontal")?1:0;r[1-o]=i.getLayout("valueAxisStart");var f,p,_,v,E,a=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),l=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var u=i.getLayout("largeBackgroundPoints"),c=[];c[1-o]=i.getLayout("backgroundStart");var d=new yb({shape:{points:u},incremental:!!n,__startPoint:c,__baseDimIdx:o,__largeDataIndices:a,__barWidth:s,silent:!0,z2:0});f=d,_=i,v=(p=l).get("borderColor")||p.get("color"),E=p.getItemStyle(["color","borderColor"]),f.useStyle(E),f.style.fill=null,f.style.stroke=v,f.style.lineWidth=_.getLayout("barWidth"),t.add(d)}var h=new yb({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:r,__baseDimIdx:o,__largeDataIndices:a,__barWidth:s});t.add(h),function(f,p,_){var v=_.getVisual("borderColor")||_.getVisual("color"),E=p.getModel("itemStyle").getItemStyle(["color","borderColor"]);f.useStyle(E),f.style.fill=null,f.style.stroke=v,f.style.lineWidth=_.getLayout("barWidth")}(h,e,i),h.seriesIndex=e.seriesIndex,e.get("silent")||(h.on("mousedown",bb),h.on("mousemove",bb))}var bb=qd(function(e){var t=function(n,i,r){var o=n.__baseDimIdx,a=1-o,s=n.shape.points,l=n.__largeDataIndices,u=Math.abs(n.__barWidth/2),c=n.__startPoint[a];bh[0]=i,bh[1]=r;for(var d=bh[o],h=bh[1-o],f=d-u,p=d+u,_=0,v=s.length/2;_<v;_++){var E=2*_,F=s[E+o],V=s[E+a];if(f<=F&&F<=p&&(c<=V?c<=h&&h<=V:V<=h&&h<=c))return l[_]}return-1}(this,e.offsetX,e.offsetY);this.dataIndex=0<=t?t:null},30,!1);function _b(e,t,n){var i,r="polar"===n.type;return i=r?n.getArea():n.grid.getRect(),r?{cx:i.cx,cy:i.cy,r0:e?i.r0:t.r0,r:e?i.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}:{x:e?t.x:i.x,y:e?i.y:t.y,width:e?t.width:i.width,height:e?i.height:t.height}}function Vl(e,t,n){t=Ye(t)&&{coordDimensions:t}||fe({},t);var i=e.getSource(),r=Dl(i,t),o=new ur(r,e);return o.initData(i,n),o}Gi(qo.VISUAL.LAYOUT,Lt(dx,"bar")),Gi(qo.VISUAL.PROGRESSIVE_LAYOUT,IA),Ni({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}});var Hg={updateSelectedMap:function(e){this._targetList=Ye(e)?e.slice():[],this._selectTargetMap=Tt(e||[],function(t,n){return t.set(n.name,n),t},Ct())},select:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(i){i.selected=!1}),n&&(n.selected=!0)},unSelect:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);n&&(n.selected=!1)},toggleSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=n)return this[n.selected?"unSelect":"select"](e,t),n.selected},isSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return n&&n.selected}};function lc(e,t){this.getAllNames=function(){var n=t();return n.mapArray(n.getName)},this.containName=function(n){return 0<=t().indexOfName(n)},this.indexOfName=function(n){return e().indexOfName(n)},this.getItemVisual=function(n,i){return e().getItemVisual(n,i)}}var wh=ah({type:"series.pie",init:function(e){wh.superApply(this,"init",arguments),this.legendVisualProvider=new lc(ut(this.getData,this),ut(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){wh.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return Vl(this,{coordDimensions:["value"],encodeDefaulter:Lt(Dp,this)})},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),n=[],i=0,r=e.count();i<r;i++)n.push({name:e.getName(i),value:e.get(t,i),selected:s1(e,i,"selected")});return n},getDataParams:function(e){var t=this.getData(),n=wh.superCall(this,"getDataParams",e),i=[];return t.each(t.mapDimension("value"),function(r){i.push(r)}),n.percent=ky(i,e,t.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(e){ms(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function pI(e,t,n,i){var r=t.getData(),a=r.getName(this.dataIndex),s=t.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:e,name:a,seriesId:t.id}),r.each(function(l){wb(r.getItemGraphicEl(l),r.getItemLayout(l),t.isSelected(r.getName(l)),s,n)})}function wb(e,t,n,i,r){var o=(t.startAngle+t.endAngle)/2,a=n?i:0,s=[Math.cos(o)*a,Math.sin(o)*a];r?e.animate().when(200,{position:s}).start("bounceOut"):e.attr("position",s)}function Fg(e,t){m.call(this);var n=new Ao({z2:2}),i=new po,r=new oi;this.add(n),this.add(i),this.add(r),this.updateData(e,t,!0)}tt(wh,Hg);var Cb=Fg.prototype;function Sb(e,t){re(t,function(n){n.update="updateView",hi(n,function(i,r){var o={};return r.eachComponent({mainType:"series",subType:e,query:i},function(a){a[n.method]&&a[n.method](i.name,i.dataIndex);var s=a.getData();s.each(function(l){var u=s.getName(l);o[u]=a.isSelected(u)||!1})}),{name:i.name,selected:o,seriesId:i.seriesId}})})}function Ch(e){return{getTargetSeries:function(t){var n={},i=Ct();return t.eachSeriesByType(e,function(r){r.__paletteScope=n,i.set(r.uid,r)}),i},reset:function(t,n){var i=t.getRawData(),r={},o=t.getData();o.each(function(a){var s=o.getRawIndex(a);r[s]=a}),i.each(function(a){var s,l=r[a],u=null!=l&&o.getItemVisual(l,"color",!0),c=null!=l&&o.getItemVisual(l,"borderColor",!0);if(u&&c||(s=i.getItemModel(a)),!u){var d=s.get("itemStyle.color")||t.getColorFromPalette(i.getName(a)||a+"",t.__paletteScope,i.count());null!=l&&o.setItemVisual(l,"color",d)}if(!c){var h=s.get("itemStyle.borderColor");null!=l&&o.setItemVisual(l,"borderColor",h)}})}}}Cb.updateData=function(e,t,n){var i=this.childAt(0),r=this.childAt(1),o=this.childAt(2),a=e.hostModel,s=e.getItemModel(t),l=e.getItemLayout(t),u=fe({},l);u.label=null;var c=a.getShallow("animationTypeUpdate");n?(i.setShape(u),"scale"===a.getShallow("animationType")?(i.shape.r=l.r0,Tr(i,{shape:{r:l.r}},a,t)):(i.shape.endAngle=l.startAngle,Qn(i,{shape:{endAngle:l.endAngle}},a,t))):"expansion"===c?i.setShape(u):Qn(i,{shape:u},a,t);var d=e.getItemVisual(t,"color");i.useStyle(De({lineJoin:"bevel",fill:d},s.getModel("itemStyle").getItemStyle())),i.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle();var h=s.getShallow("cursor");h&&i.attr("cursor",h),wb(this,e.getItemLayout(t),a.isSelected(e.getName(t)),a.get("selectedOffset"),a.get("animation")),this._updateLabel(e,t,!n&&"transition"===c),this.highDownOnUpdate=a.get("silent")?null:function(p,_){var v=a.isAnimationEnabled()&&s.get("hoverAnimation");"emphasis"===_?(r.ignore=r.hoverIgnore,o.ignore=o.hoverIgnore,v&&(i.stopAnimation(!0),i.animateTo({shape:{r:l.r+a.get("hoverOffset")}},300,"elasticOut"))):(r.ignore=r.normalIgnore,o.ignore=o.normalIgnore,v&&(i.stopAnimation(!0),i.animateTo({shape:{r:l.r}},300,"elasticOut")))},Ri(this)},Cb._updateLabel=function(e,t,n){var i=this.childAt(1),r=this.childAt(2),o=e.hostModel,a=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"color");if(!s||isNaN(s.x)||isNaN(s.y))r.ignore=r.normalIgnore=r.hoverIgnore=i.ignore=i.normalIgnore=i.hoverIgnore=!0;else{var u={points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]},c={x:s.x,y:s.y};n?(Qn(i,{shape:u},o,t),Qn(r,{style:c},o,t)):(i.attr({shape:u}),r.attr({style:c})),r.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var d=a.getModel("label"),h=a.getModel("emphasis.label"),f=a.getModel("labelLine"),p=a.getModel("emphasis.labelLine");l=e.getItemVisual(t,"color"),Qr(r.style,r.hoverStyle={},d,h,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:s.text,autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),r.ignore=r.normalIgnore=!d.get("show"),r.hoverIgnore=!h.get("show"),i.ignore=i.normalIgnore=!f.get("show"),i.hoverIgnore=!p.get("show"),i.setStyle({stroke:l,opacity:e.getItemVisual(t,"opacity")}),i.setStyle(f.getModel("lineStyle").getLineStyle()),i.hoverStyle=p.getModel("lineStyle").getLineStyle();var _=f.get("smooth");_&&!0===_&&(_=.4),i.setShape({smooth:_})}},Ue(Fg,m),fr.extend({type:"pie",init:function(){var e=new m;this._sectorGroup=e},render:function(e,t,n,i){if(!i||i.from!==this.uid){var r=e.getData(),o=this._data,a=this.group,s=t.get("animation"),l=!o,u=e.get("animationType"),c=e.get("animationTypeUpdate"),d=Lt(pI,this.uid,e,s,n),h=e.get("selectedMode");if(r.diff(o).add(function(E){var F=new Fg(r,E);l&&"scale"!==u&&F.eachChild(function(V){V.stopAnimation(!0)}),h&&F.on("click",d),r.setItemGraphicEl(E,F),a.add(F)}).update(function(E,F){var V=o.getItemGraphicEl(F);l||"transition"===c||V.eachChild(function(q){q.stopAnimation(!0)}),V.updateData(r,E),V.off("click"),h&&V.on("click",d),a.add(V),r.setItemGraphicEl(E,V)}).remove(function(E){var F=o.getItemGraphicEl(E);a.remove(F)}).execute(),s&&0<r.count()&&(l?"scale"!==u:"transition"!==c)){for(var f=r.getItemLayout(0),p=1;isNaN(f.startAngle)&&p<r.count();++p)f=r.getItemLayout(p);var _=Math.max(n.getWidth(),n.getHeight())/2,v=ut(a.removeClipPath,a);a.setClipPath(this._createClipPath(f.cx,f.cy,_,f.startAngle,f.clockwise,v,e,l))}else a.removeClipPath();this._data=r}},dispose:function(){},_createClipPath:function(e,t,n,i,r,o,a,s){var l=new Ao({shape:{cx:e,cy:t,r0:0,r:n,startAngle:i,endAngle:i,clockwise:r}});return(s?Tr:Qn)(l,{shape:{endAngle:i+(r?1:-1)*Math.PI*2}},a,o),l},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var i=e[0]-n.cx,r=e[1]-n.cy,o=Math.sqrt(i*i+r*r);return o<=n.r&&o>=n.r0}}});var gI=Math.PI/180;function Mb(e,t,n,i,r,o,a,s,l,u){function c(q,j,X){for(var Y=q;Y<j&&!(e[Y].y+X>l+a);Y++)if(e[Y].y+=X,q<Y&&Y+1<j&&e[Y+1].y>e[Y].y+e[Y].height)return void d(Y,X/2);d(j-1,X/2)}function d(q,j){for(var X=q;0<=X&&!(e[X].y-j<l)&&(e[X].y-=j,!(0<X&&e[X].y>e[X-1].y+e[X-1].height));X--);}function h(q,j,X,Y,Q,oe){for(var ce=j?Number.MAX_VALUE:0,ge=0,we=q.length;ge<we;ge++)if("none"===q[ge].labelAlignTo){var Ce=Math.abs(q[ge].y-Y),Ae=q[ge].len,Oe=q[ge].len2,Ge=Ce<Q+Ae?Math.sqrt((Q+Ae+Oe)*(Q+Ae+Oe)-Ce*Ce):Math.abs(q[ge].x-X);j&&ce<=Ge&&(Ge=ce-10),!j&&Ge<=ce&&(Ge=ce+10),q[ge].x=X+Ge*oe,ce=Ge}}e.sort(function(q,j){return q.y-j.y});for(var f,p=0,_=e.length,v=[],E=[],F=0;F<_;F++)"outer"===e[F].position&&"labelLine"===e[F].labelAlignTo&&(e[F].linePoints[1][0]+=e[F].x-u,e[F].x=u),(f=e[F].y-p)<0&&c(F,_,-f),p=e[F].y+e[F].height;for(a-p<0&&d(_-1,p-a),F=0;F<_;F++)e[F].y>=n?E.push(e[F]):v.push(e[F]);h(v,!1,t,n,i,r),h(E,!0,t,n,i,r)}function Tb(e){return"center"===e.position}var Sh=2*Math.PI,Ab=Math.PI/180;function uc(e){return{seriesType:e,reset:function(t,n){var i=n.findComponents({mainType:"legend"});if(i&&i.length){var r=t.getData();r.filterSelf(function(o){for(var a=r.getName(o),s=0;s<i.length;s++)if(!i[s].isSelected(a))return!1;return!0})}}}}Sb("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),Ni(Ch("pie")),Gi(Lt(function(e,t,n,i){t.eachSeriesByType(e,function(r){var Ge,o=r.getData(),a=o.mapDimension("value"),s=(Ge=n,Ki(r.getBoxLayoutParams(),{width:Ge.getWidth(),height:Ge.getHeight()})),l=r.get("center"),u=r.get("radius");Ye(u)||(u=[0,u]),Ye(l)||(l=[l,l]);var c=yn(s.width,n.getWidth()),d=yn(s.height,n.getHeight()),h=Math.min(c,d),f=yn(l[0],c)+s.x,p=yn(l[1],d)+s.y,_=yn(u[0],h/2),v=yn(u[1],h/2),E=-r.get("startAngle")*Ab,F=r.get("minAngle")*Ab,V=0;o.each(a,function(Oe){isNaN(Oe)||V++});var q=o.getSum(a),j=Math.PI/(q||V)*2,X=r.get("clockwise"),Y=r.get("roseType"),Q=r.get("stillShowZeroSum"),oe=o.getDataExtent(a);oe[0]=0;var ce=Sh,ge=0,we=E,Ce=X?1:-1;if(o.each(a,function(Oe,Ge){var Pe;if(isNaN(Oe))o.setItemLayout(Ge,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:X,cx:f,cy:p,r0:_,r:Y?NaN:v,viewRect:s});else{(Pe="area"!==Y?0===q&&Q?j:Oe*j:Sh/V)<F?ce-=Pe=F:ge+=Oe;var st=we+Ce*Pe;o.setItemLayout(Ge,{angle:Pe,startAngle:we,endAngle:st,clockwise:X,cx:f,cy:p,r0:_,r:Y?Pi(Oe,oe,[_,v]):v,viewRect:s}),we=st}}),ce<Sh&&V)if(ce<=.001){var Ae=Sh/V;o.each(a,function(Oe,Ge){if(!isNaN(Oe)){var Pe=o.getItemLayout(Ge);Pe.angle=Ae,Pe.startAngle=E+Ce*Ge*Ae,Pe.endAngle=E+Ce*(Ge+1)*Ae}})}else j=ce/ge,we=E,o.each(a,function(Oe,Ge){if(!isNaN(Oe)){var Pe=o.getItemLayout(Ge),st=Pe.angle===F?F:Oe*j;Pe.startAngle=we,Pe.endAngle=we+Ce*st,we+=Ce*st}});!function mI(e,t,n,i,r,o){var a,s,l=e.getData(),u=[],c=!1,d=(e.get("minShowLabelAngle")||0)*gI;l.each(function(h){var f=l.getItemLayout(h),p=l.getItemModel(h),_=p.getModel("label"),v=_.get("position")||p.get("emphasis.label.position"),E=_.get("distanceToLabelLine"),F=_.get("alignTo"),V=yn(_.get("margin"),n),q=_.get("bleedMargin"),j=_.getFont(),X=p.getModel("labelLine"),Y=X.get("length");Y=yn(Y,n);var Q=X.get("length2");if(Q=yn(Q,n),!(f.angle<d)){var oe,ce,ge,we,Ce=(f.startAngle+f.endAngle)/2,Ae=Math.cos(Ce),Oe=Math.sin(Ce);a=f.cx,s=f.cy;var Ge,Pe=e.getFormattedLabel(h,"normal")||l.getName(h),st=Jn(Pe,j,we,"top"),Pt="inside"===v||"inner"===v;if("center"===v)oe=f.cx,ce=f.cy,we="center";else{var Ft=(Pt?(f.r+f.r0)/2*Ae:f.r*Ae)+a,Nt=(Pt?(f.r+f.r0)/2*Oe:f.r*Oe)+s;if(oe=Ft+3*Ae,ce=Nt+3*Oe,!Pt){var rn=Ft+Ae*(Y+t-f.r),fn=Nt+Oe*(Y+t-f.r),Ln=rn+(Ae<0?-1:1)*Q;oe="edge"===F?Ae<0?r+V:r+n-V:Ln+(Ae<0?-E:E),ge=[[Ft,Nt],[rn,fn],[Ln,ce=fn]]}we=Pt?"center":"edge"===F?0<Ae?"right":"left":0<Ae?"left":"right"}var Zt=_.get("rotate");Ge="number"==typeof Zt?Zt*(Math.PI/180):Zt?Ae<0?-Ce+Math.PI:-Ce:0,c=!!Ge,f.label={x:oe,y:ce,position:v,height:st.height,len:Y,len2:Q,linePoints:ge,textAlign:we,verticalAlign:"middle",rotation:Ge,inside:Pt,labelDistance:E,labelAlignTo:F,labelMargin:V,bleedMargin:q,textRect:st,text:Pe,font:j},Pt||u.push(f.label)}}),!c&&e.get("avoidLabelOverlap")&&function(h,f,p,_,v,E,F,V){for(var q=[],j=[],X=Number.MAX_VALUE,Y=-Number.MAX_VALUE,Q=0;Q<h.length;Q++)Tb(h[Q])||(h[Q].x<f?(X=Math.min(X,h[Q].x),q.push(h[Q])):(Y=Math.max(Y,h[Q].x),j.push(h[Q])));for(Mb(j,f,p,_,1,0,E,0,V,Y),Mb(q,f,p,_,-1,0,E,0,V,X),Q=0;Q<h.length;Q++){var oe=h[Q];if(!Tb(oe)){var ce=oe.linePoints;if(ce){var ge,we="edge"===oe.labelAlignTo,Ce=oe.textRect.width;(ge=we?oe.x<f?ce[2][0]-oe.labelDistance-F-oe.labelMargin:F+v-oe.labelMargin-ce[2][0]-oe.labelDistance:oe.x<f?oe.x-F-oe.bleedMargin:F+v-oe.x-oe.bleedMargin)<oe.textRect.width&&(oe.text=mi(oe.text,ge,oe.font),"edge"===oe.labelAlignTo&&(Ce=si(oe.text,oe.font)));var Ae=ce[1][0]-ce[2][0];we?ce[2][0]=oe.x<f?F+oe.labelMargin+Ce+oe.labelDistance:F+v-oe.labelMargin-Ce-oe.labelDistance:(ce[2][0]=oe.x<f?oe.x+oe.labelDistance:oe.x-oe.labelDistance,ce[1][0]=ce[2][0]+Ae),ce[1][1]=ce[2][1]=oe.y}}}}(u,a,s,t,n,i,r,o)}(r,v,s.width,s.height,s.x,s.y)})},"pie")),to(uc("pie")),Wi.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return ya(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){return this.option.progressive??(this.option.large?5e3:this.get("progressive"))},getProgressiveThreshold:function(){return this.option.progressiveThreshold??(this.option.large?1e4:this.get("progressiveThreshold"))},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var Wg=go({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(e,t){var n=t.points,i=t.size,r=this.symbolProxy,o=r.shape;if(!((e.getContext?e.getContext():e)&&i[0]<4))for(var a=0;a<n.length;){var s=n[a++],l=n[a++];isNaN(s)||isNaN(l)||this.softClipShape&&!this.softClipShape.contain(s,l)||(o.x=s-i[0]/2,o.y=l-i[1]/2,o.width=i[0],o.height=i[1],r.buildPath(e,o,!0))}},afterBrush:function(e){var t=this.shape,n=t.points,i=t.size;if(i[0]<4){this.setTransform(e);for(var r=0;r<n.length;){var o=n[r++],a=n[r++];isNaN(o)||isNaN(a)||this.softClipShape&&!this.softClipShape.contain(o,a)||e.fillRect(o-i[0]/2,a-i[1]/2,i[0],i[1])}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var n=this.shape,i=n.points,r=n.size,o=Math.max(r[0],4),a=Math.max(r[1],4),s=i.length/2-1;0<=s;s--){var l=2*s,u=i[l]-o/2,c=i[1+l]-a/2;if(u<=e&&c<=t&&e<=u+o&&t<=c+a)return s}return-1}});function Ib(){this.group=new m}var $a=Ib.prototype;function Db(e,t,n){er.call(this,e,t,n),this.type="value",this.angle=0,this.name=""}function $o(e,t,n){this._model=e,this.dimensions=[],this._indicatorAxes=Ke(e.getIndicatorModels(),function(i,r){var o="indicator_"+r,a=new Db(o,"log"===i.get("axisType")?new fh:new Zo);return a.name=i.get("name"),(a.model=i).axis=a,this.dimensions.push(o),a},this),this.resize(e,n)}$a.isPersistent=function(){return!this._incremental},$a.updateData=function(e,t){this.group.removeAll();var n=new Wg({rectHover:!0,cursor:"default"});n.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(n,e,!1,t),this.group.add(n),this._incremental=null},$a.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("symbolPoints");this.group.eachChild(function(n){null!=n.startIndex&&(t=new Float32Array(t.buffer,4*n.startIndex*2,2*(n.endIndex-n.startIndex))),n.setShape("points",t)})}},$a.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),2e6<e.count()?(this._incremental||(this._incremental=new Jr({silent:!0})),this.group.add(this._incremental)):this._incremental=null},$a.incrementalUpdate=function(e,t,n){var i;this._incremental?(i=new Wg,this._incremental.addDisplayable(i,!0)):((i=new Wg({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(i)),i.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(i,t,!!this._incremental,n)},$a._setCommon=function(e,t,n,i){var r=t.hostModel;i=i||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=i.clipShape||null,e.symbolProxy=io(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var a=e.shape.size[0]<4;e.useStyle(r.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("color");s&&e.setColor(s),n||(e.seriesIndex=r.seriesIndex,e.on("mousemove",function(l){e.dataIndex=null;var u=e.findDataIndex(l.offsetX,l.offsetY);0<=u&&(e.dataIndex=u+(e.startIndex||0))}))},$a.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},$a._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},Zr({type:"scatter",render:function(e,t,n){var i=e.getData();this._updateSymbolDraw(i,e).updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e,t,n){var i=e.getData();this._updateSymbolDraw(i,e).incrementalPrepareUpdate(i),this._finished=!1},incrementalRender:function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var i=e.getData();if(this.group.dirty(),!this._finished||1e4<i.count()||!this._symbolDraw.isPersistent())return{update:!0};var r=oc().reset(e);r.progress&&r.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_getClipShape:function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},_updateSymbolDraw:function(e,t){var n=this._symbolDraw,i=t.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new Ib:new Ll,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),Ni(Rs("scatter","circle")),Gi(oc("scatter")),Ue(Db,er),$o.prototype.getIndicatorAxes=function(){return this._indicatorAxes},$o.prototype.dataToPoint=function(e,t){return this.coordToPoint(this._indicatorAxes[t].dataToCoord(e),t)},$o.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},$o.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,i=Math.sqrt(t*t+n*n);t/=i,n/=i;for(var r,o=Math.atan2(-n,t),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],c=Math.abs(o-u.angle);c<a&&(r=u,s=l,a=c)}return[s,+(r&&r.coordToData(i))]},$o.prototype.resize=function(e,t){var n=e.get("center"),i=t.getWidth(),r=t.getHeight(),o=Math.min(i,r)/2;this.cx=yn(n[0],i),this.cy=yn(n[1],r),this.startAngle=e.get("startAngle")*Math.PI/180;var a=e.get("radius");"string"!=typeof a&&"number"!=typeof a||(a=[0,a]),this.r0=yn(a[0],o),this.r=yn(a[1],o),re(this._indicatorAxes,function(s,l){s.setExtent(this.r0,this.r);var u=this.startAngle+l*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),s.angle=u},this)},$o.prototype.update=function(e,t){var n=this._indicatorAxes,i=this._model;re(n,function(a){a.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(a,s){if("radar"===a.get("coordinateSystem")&&e.getComponent("radar",a.get("radarIndex"))===i){var l=a.getData();re(n,function(u){u.scale.unionExtentFromData(l,l.mapDimension(u.dim))})}},this);var r=i.get("splitNumber");function o(a){var s=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),l=a/s;return 2===l?l=5:l*=2,l*s}re(n,function(a,s){var l=yx(a.scale,a.model).extent;ja(a.scale,a.model);var u=a.model,c=a.scale,d=u.getMin(),h=u.getMax(),f=c.getInterval();if(null!=d&&null!=h)c.setExtent(+d,+h),c.setInterval((h-d)/r);else if(null!=d)for(;c.setExtent(+d,_=d+f*r),c.setInterval(f),f=o(f),_<l[1]&&isFinite(_)&&isFinite(l[1]););else if(null!=h)for(;c.setExtent(v=h-f*r,+h),c.setInterval(f),f=o(f),v>l[0]&&isFinite(v)&&isFinite(l[0]););else{var p=c.getTicks().length-1;r<p&&(f=o(f));var _,v=nr((_=Math.ceil(l[1]/f)*f)-f*r);c.setExtent(v,_),c.setInterval(f)}})},$o.dimensions=[],$o.create=function(e,t){var n=[];return e.eachComponent("radar",function(i){var r=new $o(i,e,t);n.push(r),i.coordinateSystem=r}),e.eachSeriesByType("radar",function(i){"radar"===i.get("coordinateSystem")&&(i.coordinateSystem=n[i.get("radarIndex")||0])}),n},Ir.register("radar",$o);var cc=Za.valueAxis;function Mh(e,t){return De({show:t},e)}no({type:"radar",optionUpdated:function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),r=this.get("axisTick"),o=this.get("axisType"),a=this.get("axisLabel"),s=this.get("name"),l=this.get("name.show"),u=this.get("name.formatter"),c=this.get("nameGap"),d=this.get("triggerEvent"),h=Ke(this.get("indicator")||[],function(f){null!=f.max&&0<f.max&&!f.min?f.min=0:null!=f.min&&f.min<0&&!f.max&&(f.max=0);var p=s;null!=f.color&&(p=De({color:f.color},s)),f=rt(Fe(f),{boundaryGap:e,splitNumber:t,scale:n,axisLine:i,axisTick:r,axisType:o,axisLabel:a,name:f.text,nameLocation:"end",nameGap:c,nameTextStyle:p,triggerEvent:d},!1),l||(f.name=""),"string"==typeof u?f.name=u.replace("{value}",f.name??""):"function"==typeof u&&(f.name=u(f.name,f));var v=fe(new di(f,null,this.ecModel),Es);return v.mainType="radar",v.componentIndex=this.componentIndex,v},this);this.getIndicatorModels=function(){return h}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:rt({lineStyle:{color:"#bbb"}},cc.axisLine),axisLabel:Mh(cc.axisLabel,!1),axisTick:Mh(cc.axisTick,!1),axisType:"interval",splitLine:Mh(cc.splitLine,!0),splitArea:Mh(cc.splitArea,!0),indicator:[]}});var vI=["axisLine","axisTickLabel","axisName"];lr({type:"radar",render:function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},_buildAxes:function(e){var t=e.coordinateSystem;re(Ke(t.getIndicatorAxes(),function(n){return new Yr(n.model,{position:[t.cx,t.cy],rotation:n.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(n){re(vI,n.add,n),this.group.add(n.getGroup())},this)},_buildSplitLineAndArea:function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(n.length){var i=e.get("shape"),r=e.getModel("splitLine"),o=e.getModel("splitArea"),a=r.getModel("lineStyle"),s=o.getModel("areaStyle"),l=r.get("show"),u=o.get("show"),c=a.get("color"),d=s.get("color");c=Ye(c)?c:[c],d=Ye(d)?d:[d];var h=[],f=[];if("circle"===i)for(var p=n[0].getTicksCoords(),_=t.cx,v=t.cy,E=0;E<p.length;E++)l&&h[oe(h,c,E)].push(new Fo({shape:{cx:_,cy:v,r:p[E].coord}})),u&&E<p.length-1&&f[oe(f,d,E)].push(new _d({shape:{cx:_,cy:v,r0:p[E].coord,r:p[E+1].coord}}));else{var F,V=Ke(n,function(ce,ge){var we=ce.getTicksCoords();return F=null==F?we.length-1:Math.min(we.length-1,F),Ke(we,function(Ce){return t.coordToPoint(Ce.coord,ge)})}),q=[];for(E=0;E<=F;E++){for(var j=[],X=0;X<n.length;X++)j.push(V[X][E]);j[0]&&j.push(j[0].slice()),l&&h[oe(h,c,E)].push(new po({shape:{points:j}})),u&&q&&f[oe(f,d,E-1)].push(new qr({shape:{points:j.concat(q)}})),q=j.slice().reverse()}}var Y=a.getLineStyle(),Q=s.getAreaStyle();re(f,function(ce,ge){this.group.add(mo(ce,{style:De({stroke:"none",fill:d[ge%d.length]},Q),silent:!0}))},this),re(h,function(ce,ge){this.group.add(mo(ce,{style:De({fill:"none",stroke:c[ge%c.length]},Y),silent:!0}))},this)}function oe(ce,ge,we){var Ce=we%ge.length;return ce[Ce]=ce[Ce]||[],Ce}}});var yI=Wi.extend({type:"series.radar",dependencies:["radar"],init:function(e){yI.superApply(this,"init",arguments),this.legendVisualProvider=new lc(ut(this.getData,this),ut(this.getRawData,this))},getInitialData:function(e,t){return Vl(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(e,t,n,i){var r=this.getData(),o=this.coordinateSystem.getIndicatorAxes(),a=this.getData().getName(e),s="html"===i?"<br/>":"\n";return Oi(""===a?this.name:a)+s+Ke(o,function(l,u){var c=r.get(r.mapDimension(l.dim),e);return Oi(l.name+" : "+c)}).join(s)},getTooltipPosition:function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,i=t.getValues(Ke(n.dimensions,function(s){return t.mapDimension(s)}),e,!0),r=0,o=i.length;r<o;r++)if(!isNaN(i[r])){var a=n.getIndicatorAxes();return n.coordToPoint(a[r].dataToCoord(i[r]),r)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function kb(e){return!isNaN(e[0])&&!isNaN(e[1])}function Nb(e){return[e.cx,e.cy]}Zr({type:"radar",render:function(e,t,n){var i=e.coordinateSystem,r=this.group,o=e.getData(),a=this._data;function s(c,d){var E,h=c.getItemVisual(d,"symbol")||"circle",f=c.getItemVisual(d,"color");if("none"!==h){var p=(Ye(E=c.getItemVisual(d,"symbolSize"))||(E=[+E,+E]),E),_=io(h,-1,-1,2,2,f),v=c.getItemVisual(d,"symbolRotate")||0;return _.attr({style:{strokeNoScale:!0},z2:100,scale:[p[0]/2,p[1]/2],rotation:v*Math.PI/180||0}),_}}function l(c,d,h,f,p,_){h.removeAll();for(var v=0;v<d.length-1;v++){var E=s(f,p);E&&(c[E.__dimIdx=v]?(E.attr("position",c[v]),fa[_?"initProps":"updateProps"](E,{position:d[v]},e,p)):E.attr("position",d[v]),h.add(E))}}function u(c){return Ke(c,function(d){return[i.cx,i.cy]})}o.diff(a).add(function(c){var d=o.getItemLayout(c);if(d){var h=new qr,f=new po,p={shape:{points:d}};h.shape.points=u(d),f.shape.points=u(d),Tr(h,p,e,c),Tr(f,p,e,c);var _=new m,v=new m;_.add(f),_.add(h),_.add(v),l(f.shape.points,d,v,o,c,!0),o.setItemGraphicEl(c,_)}}).update(function(c,d){var h=a.getItemGraphicEl(d),f=h.childAt(0),p=h.childAt(1),_=h.childAt(2),v={shape:{points:o.getItemLayout(c)}};v.shape.points&&(l(f.shape.points,v.shape.points,_,o,c,!1),Qn(f,v,e),Qn(p,v,e),o.setItemGraphicEl(c,h))}).remove(function(c){r.remove(a.getItemGraphicEl(c))}).execute(),o.eachItemGraphicEl(function(c,d){var h=o.getItemModel(d),f=c.childAt(0),p=c.childAt(1),_=c.childAt(2),v=o.getItemVisual(d,"color");r.add(c),f.useStyle(De(h.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:v})),f.hoverStyle=h.getModel("emphasis.lineStyle").getLineStyle();var E=h.getModel("areaStyle"),F=h.getModel("emphasis.areaStyle"),V=E.isEmpty()&&E.parentModel.isEmpty(),q=F.isEmpty()&&F.parentModel.isEmpty();q=q&&V,p.ignore=V,p.useStyle(De(E.getAreaStyle(),{fill:v,opacity:.7})),p.hoverStyle=F.getAreaStyle();var j=h.getModel("itemStyle").getItemStyle(["color"]),X=h.getModel("emphasis.itemStyle").getItemStyle(),Y=h.getModel("label"),Q=h.getModel("emphasis.label");_.eachChild(function(oe){oe.setStyle(j),oe.hoverStyle=Fe(X);var ce=o.get(o.dimensions[oe.__dimIdx],d);null!=ce&&!isNaN(ce)||(ce=""),Qr(oe.style,oe.hoverStyle,Y,Q,{labelFetcher:o.hostModel,labelDataIndex:d,labelDimIndex:oe.__dimIdx,defaultText:ce,autoColor:v,isRectText:!0})}),c.highDownOnUpdate=function(oe,ce){p.attr("ignore","emphasis"===ce?q:V)},Ri(c)}),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),Ni(Ch("radar")),Ni(Rs("radar","circle")),Gi(function(e){e.eachSeriesByType("radar",function(t){var n=t.getData(),i=[],r=t.coordinateSystem;if(r){var o=r.getIndicatorAxes();re(o,function(a,s){n.each(n.mapDimension(o[s].dim),function(l,u){i[u]=i[u]||[];var c=r.dataToPoint(l,s);i[u][s]=kb(c)?c:Nb(r)})}),n.each(function(a){var s=gt(i[a],function(l){return kb(l)})||Nb(r);i[a].push(s.slice()),n.setItemLayout(a,i[a])})}})}),to(uc("radar")),br(function(e){var t=e.polar;if(t){Ye(t)||(t=[t]);var n=[];re(t,function(i,r){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),e.radar=e.radar||[],Ye(e.radar)||(e.radar=[e.radar]),e.radar.push(i)):n.push(i)}),e.polar=n}re(e.series,function(i){i&&"radar"===i.type&&i.polarIndex&&(i.radarIndex=i.polarIndex)})});for(var Gg=[126,25],Ps=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Bs=0;Bs<Ps.length;Bs++)for(var Hl=0;Hl<Ps[Bs].length;Hl++)Ps[Bs][Hl][0]/=10.5,Ps[Bs][Hl][1]/=-14,Ps[Bs][Hl][0]+=Gg[0],Ps[Bs][Hl][1]+=Gg[1];var xI={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},bI={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},_I=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Eb=Wr(),wI={load:function(e,t,n){var i=Eb(t).parsed;if(i)return i;var r,s,o=t.specialAreas||{},a=t.geoJSON;try{r=a?wg(a,n):[]}catch(s){throw new Error("Invalid geoJson format\n"+s.message)}return"china"===(s=e)&&r.push(new ic("\u5357\u6d77\u8bf8\u5c9b",Ke(Ps,function(u){return{type:"polygon",exterior:u}}),Gg)),re(r,function(s){var d,l=s.name;(function(c,d){if("china"===c){var h=xI[d.name];if(h){var f=d.center;f[0]+=h[0]/10.5,f[1]+=-h[1]/14}}})(e,s),function(c,d){if("world"===c){var h=bI[d.name];if(h){var f=d.center;f[0]=h[0],f[1]=h[1]}}}(e,s),d=s,"china"===e&&"\u53f0\u6e7e"===d.name&&d.geometries.push({type:"polygon",exterior:_I[0]});var u=o[l];u&&s.transformTo(u.left,u.top,u.width,u.height)}),Eb(t).parsed={regions:r,boundingRect:function(s){for(var l,u=0;u<s.length;u++){var c=s[u].getBoundingRect();(l=l||c.clone()).union(c)}return l}(r)}}},Fl=Wr();function Lb(e,t){var n,i,c,r=e.svgXML;try{ei(null!=(i=(n=r&&(c=r,(new Jd).parse(c,{ignoreViewBox:!0,ignoreRootClip:!0}))||{}).root))}catch(c){throw new Error("Invalid svg format\n"+c.message)}var o=n.width,a=n.height,s=n.viewBoxRect;if(t||(t=null==o||null==a?i.getBoundingRect():new g(0,0,0,0),null!=o&&(t.width=o),null!=a&&(t.height=a)),s){var l=k1(s,t.width,t.height),u=i;(i=new m).add(u),u.scale=l.scale,u.position=l.position}return i.setClipPath(new vi({shape:t.plain()})),{root:i,boundingRect:t}}var Rb={geoJSON:wI,svg:{load:function(e,t){var n=Fl(t).originRoot;if(n)return{root:n,boundingRect:Fl(t).boundingRect};var i=Lb(t);return Fl(t).originRoot=i.root,Fl(t).boundingRect=i.boundingRect,i},makeGraphic:function(e,t,n){var i=Fl(t),r=i.rootMap||(i.rootMap=Ct()),o=r.get(n);if(o)return o;var a=i.originRoot;return o=i.originRootHostKey?Lb(t,i.boundingRect).root:(i.originRootHostKey=n,a),r.set(n,o)},removeGraphic:function(e,t,n){var i=Fl(t),r=i.rootMap;r&&r.removeKey(n),n===i.originRootHostKey&&(i.originRootHostKey=null)}}},dc={load:function(e,t,n){var i,r=[],o=Ct(),a=Ct();return re(Bb(e),function(s){var l=Rb[s.type].load(e,s,n);re(l.regions,function(c){var d=c.name;t&&t.hasOwnProperty(d)&&(c=c.cloneShallow(d=t[d])),r.push(c),o.set(d,c),a.set(d,c.center)});var u=l.boundingRect;u&&(i?i.union(u):i=u.clone())}),{regions:r,regionsMap:o,nameCoordMap:a,boundingRect:i||new g(0,0,0,0)}},makeGraphic:Pb("makeGraphic"),removeGraphic:Pb("removeGraphic")};function Pb(e){return function(t,n){var i=Bb(t),r=[];return re(i,function(o){var a=Rb[o.type][e];a&&r.push(a(t,o,n))}),r}}function Bb(e){return Qd_retrieveMap(e)||[]}tt(Wi.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=Vl(this,{coordDimensions:["value"],encodeDefaulter:Lt(Dp,this)}),n=t.mapDimension("value"),i=Ct(),r=[],o=[],a=0,s=t.count();a<s;a++){var l=t.getName(a);i.set(l,!0),r.push({name:l,value:t.get(n,a),selected:s1(t,a,"selected")})}return re(dc.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(u){var c=u.name;i.get(c)||(r.push({name:c}),o.push(c))}),this.updateSelectedMap(r),t.appendValues([],o),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e,t,n,i){for(var r=this.getData(),o=za(this.getRawValue(e)),a=r.getName(e),s=this.seriesGroup,l=[],u=0;u<s.length;u++){var c=s[u].originalData.indexOfName(a),d=r.mapDimension("value");isNaN(s[u].originalData.get(d,c))||l.push(Oi(s[u].name))}var h="html"===i?"<br/>":"\n";return l.join(", ")+h+Oi(a+" : "+o)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,i=n.getRegion(t);return i&&n.dataToPoint(i.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),Hg);var Ob="\0_ec_interaction_mutex";function zb(e,t){return!!Ug(e)[t]}function Ug(e){return e[Ob]||(e[Ob]={})}function Wl(e){this._zr=e,this._opt={};var t=ut,n=t(CI,this),i=t(SI,this),r=t(MI,this),o=t(TI,this),a=t(AI,this);ki.call(this),this.setPointerChecker=function(s){this.pointerChecker=s},this.enable=function(s,l){this.disable(),this._opt=De(Fe(l)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==s&&(s=!0),!0!==s&&"move"!==s&&"pan"!==s||(e.on("mousedown",n),e.on("mousemove",i),e.on("mouseup",r)),!0!==s&&"scale"!==s&&"zoom"!==s||(e.on("mousewheel",o),e.on("pinch",a))},this.disable=function(){e.off("mousedown",n),e.off("mousemove",i),e.off("mouseup",r),e.off("mousewheel",o),e.off("pinch",a)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function CI(e){if(!(_r(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}}function SI(e){if(this._dragging&&Th("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!zb(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,i=this._x,r=this._y,o=t-i,a=n-r;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&Vi(e.event),Vb(this,"pan","moveOnMouseMove",e,{dx:o,dy:a,oldX:i,oldY:r,newX:t,newY:n})}}function MI(e){_r(e)||(this._dragging=!1)}function TI(e){var t=Th("zoomOnMouseWheel",e,this._opt),n=Th("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,r=Math.abs(i),o=e.offsetX,a=e.offsetY;if(0!==i&&(t||n)){if(t){var s=3<r?1.4:1<r?1.2:1.1;jg(this,"zoom","zoomOnMouseWheel",e,{scale:0<i?s:1/s,originX:o,originY:a})}if(n){var l=Math.abs(i);jg(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(0<i?1:-1)*(3<l?.4:1<l?.15:.05),originX:o,originY:a})}}}function AI(e){zb(this._zr,"globalPan")||jg(this,"zoom",null,e,{scale:1<e.pinchScale?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function jg(e,t,n,i,r){e.pointerChecker&&e.pointerChecker(i,r.originX,r.originY)&&(Vi(i.event),Vb(e,t,n,i,r))}function Vb(e,t,n,i,r){r.isAvailableBehavior=ut(Th,null,n,i),e.trigger(t,r)}function Th(e,t,n){var i=n[e];return!e||i&&(!it(i)||t.event[i+"Key"])}function qg(e,t,n){var i=e.target,r=i.position;r[0]+=t,r[1]+=n,i.dirty()}function Xg(e,t,n,i){var r=e.target,o=e.zoomLimit,a=r.position,s=r.scale,l=e.zoom=e.zoom||1;if(l*=t,o){var u=o.min||0;l=Math.max(Math.min(o.max||1/0,l),u)}var d=l/e.zoom;e.zoom=l,a[0]-=(n-a[0])*(d-1),a[1]-=(i-a[1])*(d-1),s[0]*=d,s[1]*=d,r.dirty()}hi({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),tt(Wl,ki);var II={axisPointer:1,tooltip:1,brush:1};function Ah(e,t,n){var i=t.getComponentByElement(e.topTarget),r=i&&i.coordinateSystem;return i&&i!==n&&!II[i.mainType]&&r&&r.model!==n}function Hb(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function Fb(e,t){t.eachChild(function(n){re(n.__regions,function(i){n.trigger(e.isSelected(i.name)?"emphasis":"normal")})})}function Ih(e,t){var n=new m;this.uid=Eu("ec_map_draw"),this._controller=new Wl(e.getZr()),this._controllerHost={target:t?n:null},this.group=n,this._updateGroup=t,n.add(this._regionsGroup=new m),n.add(this._backgroundGroup=new m)}Ih.prototype={constructor:Ih,draw:function(e,t,n,i,r){var o="geo"===e.mainType,a=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(X){a||X.getHostGeoModel()!==e||(a=X.getData())});var s=e.coordinateSystem;this._updateBackground(s);var l,u=this._regionsGroup,c=this.group,d=s.getTransformInfo(),h=!u.childAt(0)||r;if(h)c.transform=d.roamTransform,c.decomposeTransform(),c.dirty();else{var f=new Cr;f.transform=d.roamTransform,f.decomposeTransform(),l=f.scale,Qn(c,{scale:f.scale,position:f.position},e)}var _=d.rawScale,v=d.rawPosition;u.removeAll();var X,Y,Q,oe,ce,E=["itemStyle"],F=["emphasis","itemStyle"],V=["label"],q=["emphasis","label"],j=Ct();re(s.regions,function(X){var Y=j.get(X.name)||j.set(X.name,new m),Q=new ay({segmentIgnoreThreshold:1,shape:{paths:[]}});Y.add(Q);var oe,ce=(Zt=e.getRegionModel(X.name)||e).getModel(E),ge=Zt.getModel(F),we=Hb(ce),Ce=Hb(ge),Ae=Zt.getModel(V),Oe=Zt.getModel(q);if(a){oe=a.indexOfName(X.name);var Ge=a.getItemVisual(oe,"color",!0);Ge&&(we.fill=Ge)}function Pe(kn){return[kn[0]*_[0]+v[0],kn[1]*_[1]+v[1]]}re(X.geometries,function(kn){if("polygon"===kn.type){for(var Rn=[],Vn=0;Vn<kn.exterior.length;++Vn)Rn.push(Pe(kn.exterior[Vn]));for(Q.shape.paths.push(new qr({segmentIgnoreThreshold:1,shape:{points:Rn}})),Vn=0;Vn<(kn.interiors?kn.interiors.length:0);++Vn){for(var bi=kn.interiors[Vn],fi=(Rn=[],0);fi<bi.length;++fi)Rn.push(Pe(bi[fi]));Q.shape.paths.push(new qr({segmentIgnoreThreshold:1,shape:{points:Rn}}))}}}),Q.setStyle(we),Q.style.strokeNoScale=!0,Q.culling=!0;var st=Ae.get("show"),Pt=Oe.get("show"),Ft=a&&isNaN(a.get(a.mapDimension("value"),oe)),Nt=a&&a.getItemLayout(oe);if(o||Ft&&(st||Pt)||Nt&&Nt.showLabel){var rn,fn=o?X.name:oe;(!a||0<=oe)&&(rn=e);var Ln=new oi({position:Pe(X.center.slice()),scale:[1/c.scale[0],1/c.scale[1]],z2:10,silent:!0});Qr(Ln.style,Ln.hoverStyle={},Ae,Oe,{labelFetcher:rn,labelDataIndex:fn,defaultText:X.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!h&&Qn(Ln,{scale:[1/l[0],1/l[1]]},e),Y.add(Ln)}if(a)a.setItemGraphicEl(oe,Y);else{var Zt=e.getRegionModel(X.name);Q.eventData={componentType:"geo",componentIndex:e.componentIndex,geoIndex:e.componentIndex,name:X.name,region:Zt&&Zt.option||{}}}(Y.__regions||(Y.__regions=[])).push(X),Y.highDownSilentOnTouch=!!e.get("selectedMode"),Ri(Y,Ce),u.add(Y)}),this._updateController(e,t,n),X=this,Y=e,oe=n,ce=i,(Q=u).off("click"),Q.off("mousedown"),Y.get("selectedMode")&&(Q.on("mousedown",function(){X._mouseDownFlag=!0}),Q.on("click",function(ge){if(X._mouseDownFlag){X._mouseDownFlag=!1;for(var we=ge.target;!we.__regions;)we=we.parent;if(we){var Ce={type:("geo"===Y.mainType?"geo":"map")+"ToggleSelect",batch:Ke(we.__regions,function(Ae){return{name:Ae.name,from:ce.uid}})};Ce[Y.mainType+"Id"]=Y.id,oe.dispatchAction(Ce),Fb(Y,Q)}}})),Fb(e,u)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&dc.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(e){var t=e.map;this._mapName!==t&&re(dc.makeGraphic(t,this.uid),function(n){this._backgroundGroup.add(n)},this),this._mapName=t},_updateController:function(e,t,n){var i=e.coordinateSystem,r=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=i.getZoom(),r.enable(e.get("roam")||!1);var a=e.mainType;function s(){var l={type:"geoRoam",componentType:a};return l[a+"Id"]=e.id,l}r.off("pan").on("pan",function(l){this._mouseDownFlag=!1,qg(o,l.dx,l.dy),n.dispatchAction(fe(s(),{dx:l.dx,dy:l.dy}))},this),r.off("zoom").on("zoom",function(l){if(this._mouseDownFlag=!1,Xg(o,l.scale,l.originX,l.originY),n.dispatchAction(fe(s(),{zoom:l.scale,originX:l.originX,originY:l.originY})),this._updateGroup){var u=this.group.scale;this._regionsGroup.traverse(function(c){"text"===c.type&&c.attr("scale",[1/u[0],1/u[1]])})}},this),r.setPointerChecker(function(l,u,c){return i.getViewRectAfterRoam().contain(u,c)&&!Ah(l,n,e)})}};var Zg="__seriesMapHighDown",Wb="__seriesMapCallKey";function Gb(e){var t=this[Zg];t&&t.recordVersion===this[Wb]&&Ub(t,e)}function Ub(e,t){var n=e.circle,i=e.labelModel,r=e.hoverLabelModel,o=e.emphasisText,a=e.normalText;t?(n.style.extendFrom(Fi({},r,{text:r.get("show")?o:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(Fi(n.style,i,{text:i.get("show")?a:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function Yg(e,t,n){var i=e.getZoom(),r=e.getCenter(),o=t.zoom,a=e.dataToPoint(r);if(null!=t.dx&&null!=t.dy&&(a[0]-=t.dx,a[1]-=t.dy,r=e.pointToData(a),e.setCenter(r)),null!=o){if(n){var s=n.min||0;o=Math.max(Math.min(i*o,n.max||1/0),s)/i}e.scale[0]*=o,e.scale[1]*=o;var u=e.position,d=(t.originY-u[1])*(o-1);u[0]-=(t.originX-u[0])*(o-1),u[1]-=d,e.updateTransform(),r=e.pointToData(a),e.setCenter(r),e.setZoom(o*i)}return{center:e.getCenter(),zoom:e.getZoom()}}Zr({type:"map",render:function(e,t,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var r=this.group;if(r.removeAll(),!e.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===e.id)(o=this._mapDraw)&&r.add(o.group);else if(e.needsDrawMap){var o=this._mapDraw||new Ih(n,!0);r.add(o.group),o.draw(e,t,n,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,n){var i=e.originalData,r=this.group;i.each(i.mapDimension("value"),function(o,a){if(!isNaN(o)){var s=i.getItemLayout(a);if(s&&s.point){var l=s.point,u=s.offset,c=new Fo({style:{fill:e.getData().getVisual("color")},shape:{cx:l[0]+9*u,cy:l[1],r:3},silent:!0,z2:8+(u?0:2)});if(!u){var d=e.mainSeries.getData(),h=i.getName(a),f=d.indexOfName(h),p=i.getItemModel(a),_=p.getModel("label"),v=p.getModel("emphasis.label"),E=d.getItemGraphicEl(f),F=_t(e.getFormattedLabel(f,"normal"),h),V=_t(e.getFormattedLabel(f,"emphasis"),F),q=E[Zg],j=Math.random();if(!q){q=E[Zg]={};var X=Lt(Gb,!0),Y=Lt(Gb,!1);E.on("mouseover",X).on("mouseout",Y).on("emphasis",X).on("normal",Y)}fe(q,{recordVersion:E[Wb]=j,circle:c,labelModel:_,hoverLabelModel:v,emphasisText:V,normalText:F}),Ub(q,!1)}r.add(c)}}})}}),hi({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},function(i){var r=i.coordinateSystem;if("geo"===r.type){var o=Yg(r,e,i.get("scaleLimit"));i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom),"series"===n&&re(i.seriesGroup,function(a){a.setCenter(o.center),a.setZoom(o.zoom)})}})});var jb=ti;function $g(){Cr.call(this)}function Ka(e){this.name=e,Cr.call(this),this._roamTransformable=new $g,this._rawTransformable=new $g}function qb(e,t,n,i){var r=n.seriesModel,o=r?r.coordinateSystem:null;return o===this?o[e](i):null}function Gl(e,t,n,i){Ka.call(this,e),this.map=t;var r=dc.load(t,n);this._nameCoordMap=r.nameCoordMap,this._regionsMap=r.regionsMap,this._invertLongitute=null==i||i,this.regions=r.regions,this._rect=r.boundingRect}function Xb(e,t,n,i){var r=n.geoModel,o=n.seriesModel,a=r?r.coordinateSystem:o?o.coordinateSystem||(o.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return a===this?a[e](i):null}function Zb(e,t){var n=e.get("boundingCoords");if(null!=n){var i=n[0],r=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(r[0])||isNaN(r[1])||this.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1])}var o,a=this.getBoundingRect(),s=e.get("layoutCenter"),l=e.get("layoutSize"),u=t.getWidth(),c=t.getHeight(),d=a.width/a.height*this.aspectScale,h=!1;if(s&&l&&(s=[yn(s[0],u),yn(s[1],c)],l=yn(l,Math.min(u,c)),isNaN(s[0])||isNaN(s[1])||isNaN(l)||(h=!0)),h){var f={};1<d?(f.width=l,f.height=l/d):(f.height=l,f.width=l*d),f.y=s[1]-f.height/2,f.x=s[0]-f.width/2}else(o=e.getBoxLayoutParams()).aspect=d,f=Ki(o,{width:u,height:c});this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function Yb(e,t){re(t.get("geoCoord"),function(n,i){e.addGeoCoord(i,n)})}tt($g,Cr),Ka.prototype={constructor:Ka,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,n,i){return this._rect=new g(e,t,n,i),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,n,i){this.transformTo(e,t,n,i),this._viewRect=new g(e,t,n,i)},transformTo:function(e,t,n,i){var r=this.getBoundingRect(),o=this._rawTransformable;o.transform=r.calculateTransform(new g(e,t,n,i)),o.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),r=this.getZoom();i=ti([],i,e),n=ti([],n,e),t.origin=i,t.position=[n[0]-i[0],n[1]-i[1]],t.scale=[r,r],this._updateTransform()},_updateTransform:function(){var t=this._rawTransformable;(t.parent=this._roamTransformable).updateTransform(),t.updateTransform(),ra(this.transform||(this.transform=[]),t.transform||gr()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],Ia(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?Mn(e):gr(),rawScale:Mn(t.scale),rawPosition:Mn(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,n){var i=t?this._rawTransform:this.transform;return n=n||[],i?jb(n,e,i):wn(n,e)},pointToData:function(e){var t=this.invTransform;return t?jb([],e,t):[e[0],e[1]]},convertToPixel:Lt(qb,"dataToPoint"),convertFromPixel:Lt(qb,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},tt(Ka,Cr),Gl.prototype={constructor:Gl,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return!0;return!1},transformTo:function(e,t,n,i){var r=this.getBoundingRect(),o=this._invertLongitute;r=r.clone(),o&&(r.y=-r.y-r.height);var a=this._rawTransformable;if(a.transform=r.calculateTransform(new g(e,t,n,i)),a.decomposeTransform(),o){var s=a.scale;s[1]=-s[1]}a.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return t[n]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){return this._rect},dataToPoint:function(e,t,n){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return Ka.prototype.dataToPoint.call(this,e,t,n)},convertToPixel:Lt(Xb,"dataToPoint"),convertFromPixel:Lt(Xb,"pointToData")},tt(Gl,Ka);var $b={dimensions:Gl.prototype.dimensions,create:function(e,t){var n=[];e.eachComponent("geo",function(r,o){var a=r.get("map"),s=r.get("aspectScale"),l=!0,u=Qd_retrieveMap(a);u&&u[0]&&"svg"===u[0].type?(null==s&&(s=1),l=!1):null==s&&(s=.75);var c=new Gl(a+o,a,r.get("nameMap"),l);c.aspectScale=s,c.zoomLimit=r.get("scaleLimit"),n.push(c),Yb(c,r),(r.coordinateSystem=c).model=r,c.resize=Zb,c.resize(r,t)}),e.eachSeries(function(r){if("geo"===r.get("coordinateSystem")){var o=r.get("geoIndex")||0;r.coordinateSystem=n[o]}});var i={};return e.eachSeriesByType("map",function(r){if(!r.getHostGeoModel()){var o=r.getMapType();i[o]=i[o]||[],i[o].push(r)}}),re(i,function(r,o){var a=new Gl(o,o,Ie(Ke(r,function(s){return s.get("nameMap")})));a.zoomLimit=an.apply(null,Ke(r,function(s){return s.get("scaleLimit")})),n.push(a),a.resize=Zb,a.aspectScale=r[0].get("aspectScale"),a.resize(r[0],t),re(r,function(s){Yb(s.coordinateSystem=a,s)})}),n},getFilledRegions:function(e,t,n){for(var i=(e||[]).slice(),r=Ct(),o=0;o<i.length;o++)r.set(i[o].name,i[o]);return re(dc.load(t,n).regions,function(a){var s=a.name;r.get(s)||i.push({name:s})}),i}};og("geo",$b),Gi(function(e){var t={};e.eachSeriesByType("map",function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!t[i]){var r={};re(n.seriesGroup,function(a){var s=a.coordinateSystem,l=a.originalData;a.get("showLegendSymbol")&&e.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var d=l.getName(c),h=s.getRegion(d);if(h&&!isNaN(u)){var f=r[d]||0,p=s.dataToPoint(h.center);r[d]=f+1,l.setItemLayout(c,{point:p,offset:f})}})});var o=n.getData();o.each(function(a){var s=o.getName(a),l=o.getItemLayout(a)||{};l.showLabel=!r[s],o.setItemLayout(a,l)}),t[i]=!0}})}),Ni(function(e){e.eachSeriesByType("map",function(t){var n=t.get("color"),i=t.getModel("itemStyle"),r=i.get("areaColor"),o=i.get("color")||n[t.seriesIndex%n.length];t.getData().setVisual({areaColor:r,color:o})})}),to(qo.PROCESSOR.STATISTIC,function(e){var t={};e.eachSeriesByType("map",function(n){var i=n.getHostGeoModel(),r=i?"o"+i.id:"i"+n.getMapType();(t[r]=t[r]||[]).push(n)}),re(t,function(n,i){for(var r=function(a,s){var l={};return re(a,function(u){u.each(u.mapDimension("value"),function(c,d){var h="ec-"+u.getName(d);l[h]=l[h]||[],isNaN(c)||l[h].push(c)})}),a[0].map(a[0].mapDimension("value"),function(u,c){for(var h="ec-"+a[0].getName(c),f=0,p=1/0,_=-1/0,v=l[h].length,E=0;E<v;E++)p=Math.min(p,l[h][E]),_=Math.max(_,l[h][E]),f+=l[h][E];return 0===v?NaN:"min"===s?p:"max"===s?_:"average"===s?f/v:f})}(Ke(n,function(a){return a.getData()}),n[0].get("mapValueCalculation")),o=0;o<n.length;o++)n[o].originalData=n[o].getData();for(o=0;o<n.length;o++)(n[o].seriesGroup=n)[o].needsDrawMap=0===o&&!n[o].getHostGeoModel(),n[o].setData(r.cloneShallow()),n[o].mainSeries=n[0]})}),br(function(e){var t=[];re(e.series,function(n){n&&"map"===n.type&&(t.push(n),n.map=n.map||n.mapType,De(n,n.mapLocation))})}),Sb("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var hc=re,fc="\0__link_datas",Dh="\0__link_mainData";function Kb(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,Jb(t,n,e),hc(n,function(i){hc(t.TRANSFERABLE_METHODS,function(r){i.wrapMethod(r,Lt(DI,e))})}),t.wrapMethod("cloneShallow",Lt(NI,e)),hc(t.CHANGABLE_METHODS,function(i){t.wrapMethod(i,Lt(kI,e))}),ei(n[t.dataType]===t)}function DI(e,t){if(function(i){return i[Dh]===i}(this)){var n=fe({},this[fc]);Jb(n[this.dataType]=t,n,e)}else Kg(t,this.dataType,this[Dh],e);return t}function kI(e,t){return e.struct&&e.struct.update(this),t}function NI(e,t){return hc(t[fc],function(n,i){n!==t&&Kg(n.cloneShallow(),i,t,e)}),t}function EI(e){var t=this[Dh];return null==e||null==t?t:t[fc][e]}function Jb(e,t,n){e[fc]={},hc(t,function(i,r){Kg(i,r,e,n)})}function Kg(e,t,n,i){(n[fc][t]=e)[Dh]=n,e.dataType=t,i.struct&&(e[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=e),e.getLinkedData=EI}function Jg(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t}function Os(e){this._nodes=[],this.hostModel=e}function RI(e,t){var n=e.isExpand?e.children:[],i=e.parentNode.children,r=e.hierNode.i?i[e.hierNode.i-1]:null;if(n.length){!function(a){for(var s=a.children,l=s.length,u=0,c=0;0<=--l;){var d=s[l];d.hierNode.prelim+=u,d.hierNode.modifier+=u,u+=d.hierNode.shift+(c+=d.hierNode.change)}}(e);var o=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;r?(e.hierNode.prelim=r.hierNode.prelim+t(e,r),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else r&&(e.hierNode.prelim=r.hierNode.prelim+t(e,r));e.parentNode.hierNode.defaultAncestor=function(a,s,l,u){if(s){for(var c=a,d=a,h=d.parentNode.children[0],f=s,p=c.hierNode.modifier,_=d.hierNode.modifier,v=h.hierNode.modifier,E=f.hierNode.modifier;f=Qg(f),d=em(d),f&&d;){c=Qg(c),h=em(h),c.hierNode.ancestor=a;var F=f.hierNode.prelim+E-d.hierNode.prelim-_+u(f,d);0<F&&(BI((V=f).hierNode.ancestor.parentNode===a.parentNode?V.hierNode.ancestor:l,a,F),_+=F,p+=F),E+=f.hierNode.modifier,_+=d.hierNode.modifier,p+=c.hierNode.modifier,v+=h.hierNode.modifier}f&&!Qg(c)&&(c.hierNode.thread=f,c.hierNode.modifier+=E-p),d&&!em(h)&&(h.hierNode.thread=d,h.hierNode.modifier+=_-v,l=a)}var V;return l}(e,r,e.parentNode.hierNode.defaultAncestor||i[0],t)}function PI(e){e.setLayout({x:e.hierNode.prelim+e.parentNode.hierNode.modifier},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function Qb(e){return arguments.length?e:OI}function pc(e,t){var n={};return e-=Math.PI/2,n.x=t*Math.cos(e),n.y=t*Math.sin(e),n}function Qg(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function em(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function BI(e,t,n){var i=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=i}function OI(e,t){return e.parentNode===t.parentNode?1:2}Jg.prototype={constructor:Jg,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null),it(e=e||{})&&(e={order:e});var i,r=e.order||"preorder",o=this[e.attr||"children"];"preorder"===r&&(i=t.call(n,this));for(var a=0;!i&&a<o.length;a++)o[a].eachNode(e,t,n);"postorder"===r&&t.call(n,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,i=n.length;t<i;t++){var r=n[t].getNodeById(e);if(r)return r}},contains:function(e){if(e===this)return!0;for(var t=0,n=this.children,i=n.length;t<i;t++){var r=n[t].contains(e);if(r)return r}},getAncestors:function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},setVisual:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},Os.prototype={constructor:Os,type:"tree",eachNode:function(e,t,n){this.root.eachNode(e,t,n)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,n=0,i=t.length;n<i;n++)t[n].dataIndex=-1;for(n=0,i=e.count();n<i;n++)t[e.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},Os.createTree=function(e,t,n){var i=new Os(t),r=[],o=1;(function l(u,c){var d=u.value;o=Math.max(o,Ye(d)?d.length:1),r.push(u);var h=new Jg(u.name,i);c?function LI(e,t){e.parentNode!==t&&(t.children.push(e),e.parentNode=t)}(h,c):i.root=h,i._nodes.push(h);var f=u.children;if(f)for(var p=0;p<f.length;p++)l(f[p],h)})(e),i.root.updateDepthAndHeight(0);var a=Dl(r,{coordDimensions:["value"],dimensionsCount:o}),s=new ur(a,t);return s.initData(r),n&&n(s),Kb({mainData:s,struct:i,structAttr:"tree"}),i.update(),i},Wi.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},n=new di(e.leaves||{},this,this.ecModel),i=Os.createTree(t,this,function(a){a.wrapMethod("getItemModel",function(s,l){var u=i.getNodeByDataIndex(l);return u.children.length&&u.isExpand||(s.parentModel=n),s})}),r=0;i.eachNode("preorder",function(a){a.depth>r&&(r=a.depth)});var o=e.expandAndCollapse&&0<=e.initialTreeDepth?e.initialTreeDepth:r;return i.root.eachNode("preorder",function(a){var s=a.hostTree.data.getRawDataItem(a.dataIndex);a.isExpand=s&&null!=s.collapsed?!s.collapsed:a.depth<=o}),i.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,n=t.root.children[0],i=t.getNodeByDataIndex(e),r=i.getValue(),o=i.name;i&&i!==n;)o=i.parentNode.name+"."+o,i=i.parentNode;return Oi(o+(isNaN(r)||null==r?"":" : "+r))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var zI=go({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.childPoints,i=n.length,r=t.parentPoint,o=n[0],a=n[i-1];if(1===i)return e.moveTo(r[0],r[1]),void e.lineTo(o[0],o[1]);var s=t.orient,l="TB"===s||"BT"===s?0:1,u=1-l,c=yn(t.forkPosition,1),d=[];d[l]=r[l],d[u]=r[u]+(a[u]-r[u])*c,e.moveTo(r[0],r[1]),e.lineTo(d[0],d[1]),e.moveTo(o[0],o[1]),d[l]=o[l],e.lineTo(d[0],d[1]),d[l]=a[l],e.lineTo(d[0],d[1]),e.lineTo(a[0],a[1]);for(var h=1;h<i-1;h++){var f=n[h];e.moveTo(f[0],f[1]),d[l]=f[l],e.lineTo(d[0],d[1])}}});function e_(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==e.getItemVisual(t,"symbol")}function t_(e,t,n){return n.itemModel=t,n.itemStyle=t.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=t.getModel("lineStyle").getLineStyle(),n.labelModel=t.getModel("label"),n.hoverLabelModel=t.getModel("emphasis.label"),n.symbolInnerColor=!1===e.isExpand&&0!==e.children.length?n.itemStyle.fill:"#fff",n}function n_(e,t,n,i,r,o){var a=!n,s=e.tree.getNodeByDataIndex(t),l=s.getModel(),u=(o=t_(s,l,o),e.tree.root),c=s.parentNode===u?s:s.parentNode||s,d=e.getItemGraphicEl(c.dataIndex),h=c.getLayout(),f=d?{x:d.position[0],y:d.position[1],rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:h,p=s.getLayout();a?(n=new qa(e,t,o)).attr("position",[f.x,f.y]):n.updateData(e,t,o),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=p.rawX,n.__radialRawY=p.rawY,i.add(n),e.setItemGraphicEl(t,n),Qn(n,{position:[p.x,p.y]},r);var _=n.getSymbolPath();if("radial"===o.layout){var v,E,F=u.children[0],V=F.getLayout(),q=F.children.length;if(p.x===V.x&&!0===s.isExpand){var j={};j.x=(F.children[0].getLayout().x+F.children[q-1].getLayout().x)/2,j.y=(F.children[0].getLayout().y+F.children[q-1].getLayout().y)/2,(v=Math.atan2(j.y-V.y,j.x-V.x))<0&&(v=2*Math.PI+v),(E=j.x<V.x)&&(v-=Math.PI)}else(v=Math.atan2(p.y-V.y,p.x-V.x))<0&&(v=2*Math.PI+v),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(E=p.x<V.x)&&(v-=Math.PI):(E=p.x>V.x)||(v-=Math.PI);var X=E?"left":"right",Y=o.labelModel.get("rotate"),Q=Y*(Math.PI/180);_.setStyle({textPosition:o.labelModel.get("position")||X,textRotation:null==Y?-v:Q,textOrigin:"center",verticalAlign:"middle"})}!function(oe,ce,ge,we,Ce,Ae,Oe,Ge,Pe){var st=Pe.edgeShape,Pt=we.__edge;if("curve"===st)ce.parentNode&&ce.parentNode!==ge&&Qn(Pt=Pt||(we.__edge=new wd({shape:tm(Pe,Ce,Ce),style:De({opacity:0,strokeNoScale:!0},Pe.lineStyle)})),{shape:tm(Pe,Ae,Oe),style:De({opacity:1},Pe.lineStyle)},oe);else if("polyline"===st&&"orthogonal"===Pe.layout&&ce!==ge&&ce.children&&0!==ce.children.length&&!0===ce.isExpand){for(var Ft=ce.children,Nt=[],rn=0;rn<Ft.length;rn++){var fn=Ft[rn].getLayout();Nt.push([fn.x,fn.y])}Qn(Pt=Pt||(we.__edge=new zI({shape:{parentPoint:[Oe.x,Oe.y],childPoints:[[Oe.x,Oe.y]],orient:Pe.orient,forkPosition:Pe.edgeForkPosition},style:De({opacity:0,strokeNoScale:!0},Pe.lineStyle)})),{shape:{parentPoint:[Oe.x,Oe.y],childPoints:Nt},style:De({opacity:1},Pe.lineStyle)},oe)}Ge.add(Pt)}(r,s,u,n,f,h,p,i,o)}function i_(e,t,n,i,r,o){for(var a,d,s=e.tree.getNodeByDataIndex(t),l=e.tree.root,u=s.getModel(),c=(o=t_(s,u,o),s.parentNode===l?s:s.parentNode||s);null==(a=c.getLayout());)c=c.parentNode===l?c:c.parentNode||c;Qn(n,{position:[a.x+1,a.y+1]},r,function(){i.remove(n),e.setItemGraphicEl(t,null)}),n.fadeOut(null,{keepLabel:!0});var h=e.getItemGraphicEl(c.dataIndex).__edge,f=n.__edge||(!1===c.isExpand||1===c.children.length?h:void 0);d=o.edgeShape,f&&("curve"===d?Qn(f,{shape:tm(o,a,a),style:{opacity:0}},r,function(){i.remove(f)}):"polyline"===d&&"orthogonal"===o.layout&&Qn(f,{shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]]},style:{opacity:0}},r,function(){i.remove(f)}))}function tm(e,t,n){var i,r,o,a,s,l,u,c,d=e.orient;if("radial"!==e.layout)return s=t.x,u=t.y,l=n.x,c=n.y,"LR"!==d&&"RL"!==d||(i=s+(l-s)*e.curvature,r=u,o=l+(s-l)*e.curvature,a=c),"TB"!==d&&"BT"!==d||(i=s,r=u+(c-u)*e.curvature,o=l,a=c+(u-c)*e.curvature),{x1:s,y1:u,x2:l,y2:c,cpx1:i,cpy1:r,cpx2:o,cpy2:a};l=n.rawX,c=n.rawY;var h=pc(s=t.rawX,u=t.rawY),f=pc(s,u+(c-u)*e.curvature),p=pc(l,c+(u-c)*e.curvature),_=pc(l,c);return{x1:h.x,y1:h.y,x2:_.x,y2:_.y,cpx1:f.x,cpy1:f.y,cpx2:p.x,cpy2:p.y}}function gc(e,t){for(var n,i=[e];n=i.pop();)if(t(n),n.isExpand){var r=n.children;if(r.length)for(var o=r.length-1;0<=o;o--)i.push(r[o])}}function mc(e,t,n){if(e&&0<=Je(t,e.type)){var i=n.getData().tree.root,r=e.targetNode;if("string"==typeof r&&(r=i.getNodeById(r)),r&&i.contains(r))return{node:r};var o=e.targetNodeId;if(null!=o&&(r=i.getNodeById(o)))return{node:r}}}function r_(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function nm(e,t){return 0<=Je(r_(e),t)}function im(e,t){for(var n=[];e;){var i=e.dataIndex;n.push({name:e.name,dataIndex:i,value:t.getRawValue(i)}),e=e.parentNode}return n.reverse(),n}function om(e){this.group=new m,e.add(this.group)}function VI(e,t,n,i,r,o){var a=[[r?e:e-5,t],[e+n,t],[e+n,t+i],[r?e:e-5,t+i]];return o||a.splice(2,0,[e+n+5,t+i/2]),r||a.push([e,t+i/2]),a}function o_(e){var t=am(e);return t.stroke=t.fill=t.lineWidth=null,t}Zr({type:"tree",init:function(e,t){this._mainGroup=new m,this._controller=new Wl(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,n,i){var r=e.getData(),o=e.layoutInfo,a=this._mainGroup,s=e.get("layout");a.attr("position","radial"===s?[o.x+o.width/2,o.y+o.height/2]:[o.x,o.y]),this._updateViewCoordSys(e,o,s),this._updateController(e,t,n);var l=this._data,u={expandAndCollapse:e.get("expandAndCollapse"),layout:s,edgeShape:e.get("edgeShape"),edgeForkPosition:e.get("edgeForkPosition"),orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};r.diff(l).add(function(c){e_(r,c)&&n_(r,c,null,a,e,u)}).update(function(c,d){var h=l.getItemGraphicEl(d);e_(r,c)?n_(r,c,h,a,e,u):h&&i_(l,d,h,a,e,u)}).remove(function(c){var d=l.getItemGraphicEl(c);d&&i_(l,c,d,a,e,u)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===u.expandAndCollapse&&r.eachItemGraphicEl(function(c,d){c.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:d})})}),this._data=r},_updateViewCoordSys:function(e){var t=e.getData(),n=[];t.each(function(l){var u=t.getItemLayout(l);!u||isNaN(u.x)||isNaN(u.y)||n.push([+u.x,+u.y])});var i=[],r=[];wu(n,i,r);var o=this._min,a=this._max;r[0]-i[0]==0&&(i[0]=o?o[0]:i[0]-1,r[0]=a?a[0]:r[0]+1),r[1]-i[1]==0&&(i[1]=o?o[1]:i[1]-1,r[1]=a?a[1]:r[1]+1);var s=e.coordinateSystem=new Ka;s.zoomLimit=e.get("scaleLimit"),s.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1]),s.setCenter(e.get("center")),s.setZoom(e.get("zoom")),this.group.attr({position:s.position,scale:s.scale}),this._viewCoordSys=s,this._min=i,this._max=r},_updateController:function(e,t,n){var i=this._controller,r=this._controllerHost,o=this.group;i.setPointerChecker(function(a,s,l){var u=o.getBoundingRect();return u.applyTransform(o.transform),u.contain(s,l)&&!Ah(a,n,e)}),i.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(a){qg(r,a.dx,a.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:a.dx,dy:a.dy})},this).on("zoom",function(a){Xg(r,a.scale,a.originX,a.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:a.scale,originX:a.originX,originY:a.originY}),this._updateNodeAndLinkScale(e)},this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),n=this._getNodeGlobalScale(e),i=[n,n];t.eachItemGraphicEl(function(r,o){r.attr("scale",i)})},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,i=t.scale,r=i&&i[0]||1;return((t.getZoom()-1)*n+1)/r},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),hi({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var i=e.dataIndex,r=n.getData().tree.getNodeByDataIndex(i);r.isExpand=!r.isExpand})}),hi({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var i=Yg(n.coordinateSystem,e);n.setCenter&&n.setCenter(i.center),n.setZoom&&n.setZoom(i.zoom)})}),Ni(Rs("tree","circle")),Gi(function(e,t){e.eachSeriesByType("tree",function(n){!function(i,r){var Y,o=(Y=r,Ki(i.getBoxLayoutParams(),{width:Y.getWidth(),height:Y.getHeight()}));i.layoutInfo=o;var a=i.get("layout"),s=0,l=0,u=null;u="radial"===a?(s=2*Math.PI,l=Math.min(o.height,o.width)/2,Qb(function(X,Y){return(X.parentNode===Y.parentNode?1:2)/X.depth})):(s=o.width,l=o.height,Qb());var c=i.getData().tree.root,d=c.children[0];if(d){(function(X){X.hierNode={defaultAncestor:null,ancestor:X,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var Y,Q,oe=[X];Y=oe.pop();)if(Q=Y.children,Y.isExpand&&Q.length)for(var ce=Q.length-1;0<=ce;ce--){var ge=Q[ce];ge.hierNode={defaultAncestor:null,ancestor:ge,prelim:0,modifier:0,change:0,shift:0,i:ce,thread:null},oe.push(ge)}})(c),function(X,Y,Q){for(var oe,ce=[X],ge=[];oe=ce.pop();)if(ge.push(oe),oe.isExpand){var we=oe.children;if(we.length)for(var Ce=0;Ce<we.length;Ce++)ce.push(we[Ce])}for(;oe=ge.pop();)Y(oe,Q)}(d,RI,u),c.hierNode.modifier=-d.hierNode.prelim,gc(d,PI);var h=d,f=d,p=d;gc(d,function(X){var Y=X.getLayout().x;Y<h.getLayout().x&&(h=X),Y>f.getLayout().x&&(f=X),X.depth>p.depth&&(p=X)});var _=h===f?1:u(h,f)/2,v=_-h.getLayout().x,E=0,F=0,V=0,q=0;if("radial"===a)E=s/(f.getLayout().x+_+v),F=l/(p.depth-1||1),gc(d,function(X){var Y=pc(V=(X.getLayout().x+v)*E,q=(X.depth-1)*F);X.setLayout({x:Y.x,y:Y.y,rawX:V,rawY:q},!0)});else{var j=i.getOrient();"RL"===j||"LR"===j?(F=l/(f.getLayout().x+_+v),E=s/(p.depth-1||1),gc(d,function(X){q=(X.getLayout().x+v)*F,X.setLayout({x:V="LR"===j?(X.depth-1)*E:s-(X.depth-1)*E,y:q},!0)})):"TB"!==j&&"BT"!==j||(E=s/(f.getLayout().x+_+v),F=l/(p.depth-1||1),gc(d,function(X){V=(X.getLayout().x+v)*E,X.setLayout({x:V,y:q="TB"===j?(X.depth-1)*F:l-(X.depth-1)*F},!0)}))}}}(n,t)})}),Wi.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var n={name:e.name,children:e.data};!function s(l){var u=0;re(l.children,function(d){s(d);var h=d.value;Ye(h)&&(h=h[0]),u+=h});var c=l.value;Ye(c)&&(c=c[0]),null!=c&&!isNaN(c)||(c=u),c<0&&(c=0),Ye(l.value)?l.value[0]=c:l.value=c}(n);var i=e.levels||[],r=new di({itemStyle:this.designatedVisualItemStyle={}},this,t),o=Ke((i=e.levels=function(s,l){var u,c=l.get("color");if(c)return re(s=s||[],function(d){var h=new di(d),f=h.get("color");(h.get("itemStyle.color")||f&&"none"!==f)&&(u=!0)}),!u&&((s[0]||(s[0]={})).color=c.slice()),s}(i,t))||[],function(s){return new di(s,r,t)},this),a=Os.createTree(n,this,function(s){s.wrapMethod("getItemModel",function(l,u){var c=a.getNodeByDataIndex(u);return l.parentModel=o[c.depth]||r,l})});return a.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),n=this.getRawValue(e),i=Ye(n)?za(n[0]):za(n);return Oi(t.getName(e)+": "+i)},getDataParams:function(e){var t=Wi.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=im(n,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},fe(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=Ct(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}}),om.prototype={constructor:om,render:function(e,t,n,i){var r=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),r.get("show")&&n){var a=r.getModel("itemStyle"),s=a.getModel("textStyle"),l={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(e,l,a,s,i),zd(o,l.pos,l.box)}},_prepare:function(e,t,n){for(var i=e;i;i=i.parentNode){var r=i.getModel().get("name"),o=n.getTextRect(r),a=Math.max(o.width+16,t.emptyItemWidth);t.totalWidth+=a+8,t.renderList.push({node:i,text:r,width:a})}},_renderContent:function(e,t,n,i,r){for(var o,a,s=0,l=t.emptyItemWidth,u=e.get("breadcrumb.height"),c=(j=void 0,void 0,void 0,Q=void 0,oe=void 0,ce=void 0,ge=void 0,Y=(q=t.box).height,Q=yn((V=t.pos).x,X=q.width),oe=yn(V.y,Y),ce=yn(V.x2,X),ge=yn(V.y2,Y),(isNaN(Q)||isNaN(parseFloat(V.x)))&&(Q=0),(isNaN(ce)||isNaN(parseFloat(V.x2)))&&(ce=X),(isNaN(oe)||isNaN(parseFloat(V.y)))&&(oe=0),(isNaN(ge)||isNaN(parseFloat(V.y2)))&&(ge=Y),j=Ms(j||0),{width:Math.max(ce-Q-j[1]-j[3],0),height:Math.max(ge-oe-j[0]-j[2],0)}),d=t.totalWidth,h=t.renderList,f=h.length-1;0<=f;f--){var p=h[f],_=p.node,v=p.width,E=p.text;d>c.width&&(d-=v-l,v=l,E=null);var F=new qr({shape:{points:VI(s,0,v,u,f===h.length-1,0===f)},style:De(n.getItemStyle(),{lineJoin:"bevel",text:E,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:Lt(r,_)});this.group.add(F),F.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(o=e).componentIndex,seriesIndex:o.componentIndex,seriesName:o.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(a=_)&&a.dataIndex,name:a&&a.name},treePathInfo:a&&im(a,o)},s+=v+8}var V,q,j,X,Y,Q,oe,ce,ge},remove:function(){this.group.removeAll()}};var kh=ut,a_=m,s_=vi,Ko=re,HI=["label"],FI=["emphasis","label"],WI=["upperLabel"],GI=["emphasis","upperLabel"],am=ml([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function jI(e,t,n,i,r,o,a,s,l,u){if(a){var c=a.getLayout(),d=e.getData();if(d.setItemGraphicEl(a.dataIndex,null),c&&c.isInView){var h=c.width,f=c.height,p=c.borderWidth,_=c.invisible,v=a.getRawIndex(),E=s&&s.getRawIndex(),F=a.viewChildren,V=c.upperHeight,q=F&&F.length,j=a.getModel("itemStyle"),X=a.getModel("emphasis.itemStyle"),Y=Ae("nodeGroup",a_);if(Y){if(l.add(Y),Y.attr("position",[c.x||0,c.y||0]),Y.__tmNodeWidth=h,Y.__tmNodeHeight=f,c.isAboveViewRoot)return Y;var Q=a.getModel(),oe=Ae("background",s_,u,1);if(oe&&function(Oe,Ge,Pe){if(Ge.dataIndex=a.dataIndex,Ge.seriesIndex=e.seriesIndex,Ge.setShape({x:0,y:0,width:h,height:f}),_)ge(Ge);else{Ge.invisible=!1;var st=a.getVisual("borderColor",!0),Pt=X.get("borderColor"),Ft=o_(j);Ft.fill=st;var Nt=am(X);if(Nt.fill=Pt,Pe){var rn=h-2*p;we(Ft,Nt,st,rn,V,{x:p,y:0,width:rn,height:V})}else Ft.text=Nt.text=null;Ge.setStyle(Ft),Du(Ge,Nt)}Oe.add(Ge)}(Y,oe,q&&c.upperLabelHeight),q)Dd(Y)&&ws(Y,!1),oe&&(ws(oe,!0),d.setItemGraphicEl(a.dataIndex,oe));else{var ce=Ae("content",s_,u,2);ce&&function(Oe,Ge){Ge.dataIndex=a.dataIndex,Ge.seriesIndex=e.seriesIndex;var Pe=Math.max(h-2*p,0),st=Math.max(f-2*p,0);if(Ge.culling=!0,Ge.setShape({x:p,y:p,width:Pe,height:st}),_)ge(Ge);else{Ge.invisible=!1;var Pt=a.getVisual("color",!0),Ft=o_(j);Ft.fill=Pt;var Nt=am(X);we(Ft,Nt,Pt,Pe,st),Ge.setStyle(Ft),Du(Ge,Nt)}Oe.add(Ge)}(Y,ce),oe&&Dd(oe)&&ws(oe,!1),ws(Y,!0),d.setItemGraphicEl(a.dataIndex,Y)}return Y}}}function ge(Oe){Oe.invisible||o.push(Oe)}function we(Oe,Ge,Pe,st,Pt,Ft){var Nt=Q.get("name"),rn=Q.getModel(Ft?WI:HI),fn=Q.getModel(Ft?GI:FI),Ln=rn.getShallow("show");Qr(Oe,Ge,rn,fn,{defaultText:Ln?Nt:null,autoColor:Pe,isRectText:!0,labelFetcher:e,labelDataIndex:a.dataIndex,labelProp:Ft?"upperLabel":"label"}),Ce(Oe,Ft,c),Ce(Ge,Ft,c),Ft&&(Oe.textRect=Fe(Ft)),Oe.truncate=Ln&&rn.get("ellipsis")?{outerWidth:st,outerHeight:Pt,minChar:2}:null}function Ce(Oe,Ge,Pe){var st=Oe.text;if(!Ge&&Pe.isLeafRoot&&null!=st){var Pt=e.get("drillDownIcon",!0);Oe.text=Pt?Pt+" "+st:st}}function Ae(Oe,Ge,Pe,st){var rn,fn,Pt=null!=E&&n[Oe][E],Ft=r[Oe];return Pt?(n[Oe][E]=null,rn=Pt,fn=Oe,(Ft[v]={}).old="nodeGroup"===fn?rn.position.slice():fe({},rn.shape)):_||((Pt=new Ge({z:function(Nt,rn){var fn=10*Nt+rn;return(fn-1)/fn}(Pe,st)})).__tmDepth=Pe,function(Nt,rn,fn){var Ln=Nt[v]={},Zt=a.parentNode;if(Zt&&(!i||"drillDown"===i.direction)){var kn=0,Rn=0,Vn=r.background[Zt.getRawIndex()];!i&&Vn&&Vn.old&&(kn=Vn.old.width,Rn=Vn.old.height),Ln.old="nodeGroup"===fn?[0,Rn]:{x:kn,y:Rn,width:0,height:0}}Ln.fadein="nodeGroup"!==fn}(Ft,0,Pt.__tmStorageName=Oe)),t[Oe][v]=Pt}}Zr({type:"treemap",init:function(e,t){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(e,t,n,i){if(!(Je(t.findComponents({mainType:"series",subType:"treemap",query:i}),e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var r=mc(i,["treemapZoomToNode","treemapRootToNode"],e),o=i&&i.type,a=e.layoutInfo,s=!this._oldTree,l=this._storage,u="treemapRootToNode"===o&&r&&l?{rootNodeGroup:l.nodeGroup[r.node.getRawIndex()],direction:i.direction}:null,c=this._giveContainerGroup(a),d=this._doRender(c,e,u);s||o&&"treemapZoomToNode"!==o&&"treemapRootToNode"!==o?d.renderFinally():this._doAnimation(c,d,e,u),this._resetController(n),this._renderBreadcrumb(e,n,r)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new a_,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,n){var i=t.getData().tree,r=this._oldTree,o={nodeGroup:[],background:[],content:[]},a={nodeGroup:[],background:[],content:[]},s=this._storage,l=[],u=Lt(jI,t,a,s,n,o,l);!function f(p,_,v,E,F){function V(j){return j.getId()}function q(j,X){var Y=null!=j?p[j]:null,Q=null!=X?_[X]:null,oe=u(Y,Q,v,F);oe&&f(Y&&Y.viewChildren||[],Q&&Q.viewChildren||[],oe,E,F+1)}E?Ko(_=p,function(j,X){j.isRemoved()||q(X,X)}):new ma(_,p,V,V).add(q).update(q).remove(Lt(q,null)).execute()}(i.root?[i.root]:[],r&&r.root?[r.root]:[],e,i===r||!r,0);var c,d,h=(d={nodeGroup:[],background:[],content:[]},(c=s)&&Ko(c,function(f,p){var _=d[p];Ko(f,function(v){v&&(_.push(v),v.__tmWillDelete=1)})}),d);return this._oldTree=i,this._storage=a,{lastsForAnimation:o,willDeleteEls:h,renderFinally:function(){Ko(h,function(f){Ko(f,function(p){p.parent&&p.parent.remove(p)})}),Ko(l,function(f){f.invisible=!0,f.dirty()})}}},_doAnimation:function(e,t,n,i){if(n.get("animation")){var r=n.get("animationDurationUpdate"),o=n.get("animationEasing"),a=(l=[],u={},{add:function(c,d,h,f,p){return it(f)&&(p=f,f=0),!u[c.id]&&(u[c.id]=1,l.push({el:c,target:d,time:h,delay:f,easing:p}),!0)},done:function(c){return s=c,this},start:function(){for(var c=l.length,d=0,h=l.length;d<h;d++){var f=l[d];f.el.animateTo(f.target,f.time,f.delay,f.easing,p)}return this;function p(){--c||(l.length=0,u={},s&&s())}}});Ko(t.willDeleteEls,function(s,l){Ko(s,function(u,c){if(!u.invisible){var d,h=u.parent;if(i&&"drillDown"===i.direction)d=h===i.rootNodeGroup?{shape:{x:0,y:0,width:h.__tmNodeWidth,height:h.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var f=0,p=0;h.__tmWillDelete||(f=h.__tmNodeWidth/2,p=h.__tmNodeHeight/2),d="nodeGroup"===l?{position:[f,p],style:{opacity:0}}:{shape:{x:f,y:p,width:0,height:0},style:{opacity:0}}}d&&a.add(u,d,r,o)}})}),Ko(this._storage,function(s,l){Ko(s,function(u,c){var d=t.lastsForAnimation[l][c],h={};d&&("nodeGroup"===l?d.old&&(h.position=u.position.slice(),u.attr("position",d.old)):(d.old&&(h.shape=fe({},u.shape),u.setShape(d.old)),d.fadein?(u.setStyle("opacity",0),h.style={opacity:1}):1!==u.style.opacity&&(h.style={opacity:1})),a.add(u,h,r,o))})},this),this._state="animating",a.done(kh(function(){this._state="ready",t.renderFinally()},this)).start()}var s,l,u},_resetController:function(e){var t=this._controller;t||((t=this._controller=new Wl(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",kh(this._onPan,this)),t.on("zoom",kh(this._onZoom,this)));var n=new g(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(i,r,o){return n.contain(r,o)})},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e){if("animating"!==this._state&&(3<Math.abs(e.dx)||3<Math.abs(e.dy))){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},_onZoom:function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var r=i.getLayout();if(!r)return;var o=new g(r.x,r.y,r.width,r.height),a=this.seriesModel.layoutInfo;t-=a.x,n-=a.y;var s=gr();wr(s,s,[-t,-n]),oa(s,s,[e.scale,e.scale]),wr(s,s,[t,n]),o.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x,y:o.y,width:o.width,height:o.height}})}},_initEvents:function(e){e.on("click",function(t){if("ready"===this._state){var n=this.seriesModel.get("nodeClick",!0);if(n){var i=this.findTarget(t.offsetX,t.offsetY);if(i){var r=i.node;if(r.getLayout().isLeafRoot)this._rootToNode(i);else if("zoomToNode"===n)this._zoomToNode(i);else if("link"===n){var o=r.hostTree.data.getItemModel(r.dataIndex),a=o.get("link",!0),s=o.get("target",!0)||"blank";a&&Pu(a,s)}}}}},this)},_renderBreadcrumb:function(e,t,n){n=n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||{node:e.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new om(this.group))).render(e,t,n.node,kh(function(i){"animating"!==this._state&&(nm(e.getViewRoot(),i)?this._rootToNode({node:i}):this._zoomToNode({node:i}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(i){var r=this._storage.background[i.getRawIndex()];if(r){var o=r.transformCoordToLocal(e,t),a=r.shape;if(!(a.x<=o[0]&&o[0]<=a.x+a.width&&a.y<=o[1]&&o[1]<=a.y+a.height))return!1;n={node:i,offsetX:o[0],offsetY:o[1]}}},this),n}});for(var qI=function(){},l_=["treemapZoomToNode","treemapRender","treemapMove"],sm=0;sm<l_.length;sm++)hi({type:l_[sm],update:"updateView"},qI);hi({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(n,i){var r=mc(e,["treemapZoomToNode","treemapRootToNode"],n);if(r){var o=n.getViewRoot();o&&(e.direction=nm(o,r.node)?"rollUp":"drillDown"),n.resetViewRoot(r.node)}})});var vc=re,u_=Mt,Ii=function(e){var t=e.mappingMethod,n=e.type,i=this.option=Fe(e);this.type=n,this.mappingMethod=t,this._normalizeData=XI[t];var r=yc[n];this.applyVisual=r.applyVisual,this.getColorMapper=r.getColorMapper,this._doMap=r._doMap[t],"piecewise"===t?(lm(i),function(o){var a=o.pieceList;o.hasSpecialVisual=!1,re(a,function(s,l){s.originIndex=l,null!=s.visual&&(o.hasSpecialVisual=!0)})}(i)):"category"===t?i.categories?function(o){var a=o.categories,s=o.visual,l=o.categoryMap={};if(vc(a,function(d,h){l[d]=h}),!Ye(s)){var u=[];Mt(s)?vc(s,function(d,h){u[l[h]??-1]=d}):u[-1]=s,s=d_(o,u)}for(var c=a.length-1;0<=c;c--)null==s[c]&&(delete l[a[c]],a.pop())}(i):lm(i,!0):(ei("linear"!==t||i.dataExtent),lm(i))};Ii.prototype={constructor:Ii,mapValueToVisual:function(e){var t=this._normalizeData(e);return this._doMap(t,e)},getNormalizer:function(){return ut(this._normalizeData,this)}};var yc=Ii.visualHandlers={color:{applyVisual:Lh("color"),getColorMapper:function(){var e=this.option;return ut("category"===e.mappingMethod?function(t,n){return n||(t=this._normalizeData(t)),Rh.call(this,t)}:function(t,n,i){var r=!!i;return n||(t=this._normalizeData(t)),i=da(t,e.parsedVisual,i),r?i:co(i,"rgba")},this)},_doMap:{linear:function(e){return co(da(e,this.option.parsedVisual),"rgba")},category:Rh,piecewise:function(e,t){var n=cm.call(this,t);return null==n&&(n=co(da(e,this.option.parsedVisual),"rgba")),n},fixed:zs}},colorHue:Eh(function(e,t){return Bo(e,t)}),colorSaturation:Eh(function(e,t){return Bo(e,null,t)}),colorLightness:Eh(function(e,t){return Bo(e,null,null,t)}),colorAlpha:Eh(function(e,t){return ps(e,t)}),opacity:{applyVisual:Lh("opacity"),_doMap:um([0,1])},liftZ:{applyVisual:Lh("liftZ"),_doMap:{linear:zs,category:zs,piecewise:zs,fixed:zs}},symbol:{applyVisual:function(e,t,n){var i=this.mapValueToVisual(e);if(it(i))n("symbol",i);else if(u_(i))for(var r in i)i.hasOwnProperty(r)&&n(r,i[r])},_doMap:{linear:c_,category:Rh,piecewise:function(e,t){var n=cm.call(this,t);return null==n&&(n=c_.call(this,e)),n},fixed:zs}},symbolSize:{applyVisual:Lh("symbolSize"),_doMap:um([0,1])}};function lm(e,t){var n=e.visual,i=[];Mt(n)?vc(n,function(r){i.push(r)}):null!=n&&i.push(n),t||1!==i.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(i[1]=i[0]),d_(e,i)}function Eh(e){return{applyVisual:function(t,n,i){t=this.mapValueToVisual(t),i("color",e(n("color"),t))},_doMap:um([0,1])}}function c_(e){var t=this.option.visual;return t[Math.round(Pi(e,[0,1],[0,t.length-1],!0))]||{}}function Lh(e){return function(t,n,i){i(e,this.mapValueToVisual(t))}}function Rh(e){var t=this.option.visual;return t[this.option.loop&&-1!==e?e%t.length:e]}function zs(){return this.option.visual[0]}function um(e){return{linear:function(t){return Pi(t,e,this.option.visual,!0)},category:Rh,piecewise:function(t,n){var i=cm.call(this,n);return null==i&&(i=Pi(t,e,this.option.visual,!0)),i},fixed:zs}}function cm(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var i=n[Ii.findPieceIndex(e,n)];if(i&&i.visual)return i.visual[this.type]}}function d_(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=Ke(t,function(n){return Sr(n)})),t}var XI={linear:function(e){return Pi(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Ii.findPieceIndex(e,t,!0);if(null!=n)return Pi(n,[0,t.length-1],[0,1],!0)},category:function(e){return(this.option.categories?this.option.categoryMap[e]:e)??-1},fixed:en};function Ph(e,t,n){return e?t<=n:t<n}Ii.listVisualTypes=function(){var e=[];return re(yc,function(t,n){e.push(n)}),e},Ii.addVisualHandler=function(e,t){yc[e]=t},Ii.isValidType=function(e){return yc.hasOwnProperty(e)},Ii.eachVisual=function(e,t,n){Mt(e)?re(e,t,n):t.call(n,e)},Ii.mapVisual=function(e,t,n){var i,r=Ye(e)?[]:Mt(e)?{}:(i=!0,null);return Ii.eachVisual(e,function(o,a){var s=t.call(n,o,a);i?r=s:r[a]=s}),r},Ii.retrieveVisuals=function(e){var t,n={};return e&&vc(yc,function(i,r){e.hasOwnProperty(r)&&(n[r]=e[r],t=!0)}),t?n:null},Ii.prepareVisualTypes=function(e){if(u_(e)){var t=[];vc(e,function(n,i){t.push(i)}),e=t}else{if(!Ye(e))return[];e=e.slice()}return e.sort(function(n,i){return"color"===i&&"color"!==n&&0===n.indexOf("color")?1:-1}),e},Ii.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},Ii.findPieceIndex=function(e,t,n){for(var i,r=1/0,o=0,a=t.length;o<a;o++){var s=t[o].value;if(null!=s){if(s===e||"string"==typeof s&&s===e+"")return o;n&&d(s,o)}}for(o=0,a=t.length;o<a;o++){var l=t[o],u=l.interval,c=l.close;if(u){if(u[0]===-1/0){if(Ph(c[1],e,u[1]))return o}else if(u[1]===1/0){if(Ph(c[0],u[0],e))return o}else if(Ph(c[0],u[0],e)&&Ph(c[1],e,u[1]))return o;n&&d(u[0],o),n&&d(u[1],o)}}if(n)return e===1/0?t.length-1:e===-1/0?0:i;function d(h,f){var p=Math.abs(h-e);p<r&&(r=p,i=f)}};var ZI=Ye,$I={seriesType:"treemap",reset:function(e,t,n,i){var r=e.getData().tree.root;r.isRemoved()||function o(a,s,l,u){var c=a.getModel(),d=a.getLayout();if(d&&!d.invisible&&d.isInView){var v,F,h=a.getModel("itemStyle"),f=function KI(e,t,n){var i=fe({},t),r=n.designatedVisualItemStyle;return re(["color","colorAlpha","colorSaturation"],function(o){r[o]=t[o];var a=e.get(o);(r[o]=null)!=a&&(i[o]=a)}),i}(h,s,u),p=h.get("borderColor"),_=h.get("borderColorSaturation");null!=_&&(p=null!=(F=v=h_(f))?Bo(F,null,null,_):null),a.setVisual("borderColor",p);var V=a.viewChildren;if(V&&V.length){var q=function JI(e,t,n,i,r,o){if(o&&o.length){var a=hm(t,"color")||null!=r.color&&"none"!==r.color&&(hm(t,"colorAlpha")||hm(t,"colorSaturation"));if(a){var s=t.get("visualMin"),l=t.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var c=t.get("colorMappingBy"),d={type:a.name,dataExtent:u,visual:a.range};"color"!==d.type||"index"!==c&&"id"!==c?d.mappingMethod="linear":(d.mappingMethod="category",d.loop=!0);var h=new Ii(d);return h.__drColorMappingBy=c,h}}}(0,c,d,0,f,V);re(V,function(j,X){if(j.depth>=l.length||j===l[j.depth]){var Y=function QI(e,t,n,i,r,o){var a=fe({},t);if(r){var s=r.type,l="color"===s&&r.__drColorMappingBy,u="index"===l?i:"id"===l?o.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));a[s]=r.mapValueToVisual(u)}return a}(c,f,j,X,q,u);o(j,Y,l,u)}})}else v=h_(f),a.setVisual("color",v)}}(r,{},e.getViewRoot().getAncestors(),e)}};function h_(e){var t=dm(e,"color");if(t){var n=dm(e,"colorAlpha"),i=dm(e,"colorSaturation");return i&&(t=Bo(t,null,null,i)),n&&(t=ps(t,n)),t}}function dm(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function hm(e,t){var n=e.get(t);return ZI(n)&&n.length?{name:t,range:n}:null}var xc=Math.max,Bh=Math.min,f_=an,fm=re,p_=["itemStyle","borderWidth"],eD=["itemStyle","gapWidth"],tD=["upperLabel","show"],nD=["upperLabel","height"],iD={seriesType:"treemap",reset:function(e,t,n,i){var r=n.getWidth(),o=n.getHeight(),a=e.option,s=Ki(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=a.size||[],u=yn(f_(s.width,l[0]),r),c=yn(f_(s.height,l[1]),o),d=i&&i.type,h=mc(i,["treemapZoomToNode","treemapRootToNode"],e),f="treemapRender"===d||"treemapMove"===d?i.rootRect:null,p=e.getViewRoot(),_=r_(p);if("treemapMove"!==d){var v="treemapZoomToNode"===d?function(j,X,Y,Q,oe){var ce,ge=(X||{}).node,we=[Q,oe];if(!ge||ge===Y)return we;for(var Ce=Q*oe,Ae=Ce*j.option.zoomToNodeRatio;ce=ge.parentNode;){for(var Oe=0,Ge=ce.children,Pe=0,st=Ge.length;Pe<st;Pe++)Oe+=Ge[Pe].getValue();var Pt=ge.getValue();if(0===Pt)return we;Ae*=Oe/Pt;var Ft=ce.getModel(),Nt=Ft.get(p_);Ae+=4*Nt*Nt+(3*Nt+Math.max(Nt,m_(Ft)))*Math.pow(Ae,.5),mp<Ae&&(Ae=mp),ge=ce}Ae<Ce&&(Ae=Ce);var fn=Math.pow(Ae/Ce,.5);return[Q*fn,oe*fn]}(e,h,p,u,c):f?[f.width,f.height]:[u,c],E=a.sort;E&&"asc"!==E&&"desc"!==E&&(E="desc");var F={squareRatio:a.squareRatio,sort:E,leafDepth:a.leafDepth};p.hostTree.clearLayouts();var V={x:0,y:0,width:v[0],height:v[1],area:v[0]*v[1]};p.setLayout(V),function j(X,Y,Q,oe){var ce,ge;if(!X.isRemoved()){var we=X.getLayout();ce=we.width,ge=we.height;var Ce=(Pt=X.getModel()).get(p_),Ae=Pt.get(eD)/2,Oe=m_(Pt),Ge=Math.max(Ce,Oe),Pe=Ce-Ae,st=Ge-Ae,Pt=X.getModel();X.setLayout({borderWidth:Ce,upperHeight:Ge,upperLabelHeight:Oe},!0);var Ft=(ce=xc(ce-2*Pe,0))*(ge=xc(ge-Pe-st,0)),Nt=function rD(e,t,n,i,r,o){var a=e.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=o;if(r&&!l)return e.viewChildren=[];!function(f,p){p&&f.sort(function(_,v){var E="asc"===p?_.getValue()-v.getValue():v.getValue()-_.getValue();return 0==E?"asc"===p?_.dataIndex-v.dataIndex:v.dataIndex-_.dataIndex:E})}(a=nt(a,function(f){return!f.isRemoved()}),s);var u=function(f,p,_){for(var v=0,E=0,F=p.length;E<F;E++)v+=p[E].getValue();var V=f.get("visualDimension");if(p&&p.length)if("value"===V&&_)q=[p[p.length-1].getValue(),p[0].getValue()],"asc"===_&&q.reverse();else{var q=[1/0,-1/0];fm(p,function(j){var X=j.getValue(V);X<q[0]&&(q[0]=X),X>q[1]&&(q[1]=X)})}else q=[NaN,NaN];return{sum:v,dataExtent:q}}(t,a,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=function(f,p,_,v,E){if(!v)return _;for(var F=f.get("visibleMin"),V=E.length,q=V,j=V-1;0<=j;j--){var X=E["asc"===v?V-j-1:j].getValue();X/_*p<F&&(q=j,_-=X)}return E.splice("asc"===v?0:q,V-q),_}(t,n,u.sum,s,a),0===u.sum)return e.viewChildren=[];for(var c=0,d=a.length;c<d;c++){var h=a[c].getValue()/u.sum*n;a[c].setLayout({area:h})}return l&&(a.length&&e.setLayout({isLeafRoot:!0},!0),a.length=0),e.viewChildren=a,e.setLayout({dataExtent:u.dataExtent},!0),a}(X,Pt,Ft,Y,Q,oe);if(Nt.length){var rn={x:Pe,y:st,width:ce,height:ge},fn=Bh(ce,ge),Ln=1/0,Zt=[];Zt.area=0;for(var kn=0,Rn=Nt.length;kn<Rn;){var Vn=Nt[kn];Zt.push(Vn),Zt.area+=Vn.getLayout().area;var bi=oD(Zt,fn,Y.squareRatio);Ln=bi<=Ln?(kn++,bi):(Zt.area-=Zt.pop().getLayout().area,g_(Zt,fn,rn,Ae,!1),fn=Bh(rn.width,rn.height),Zt.length=Zt.area=0,1/0)}if(Zt.length&&g_(Zt,fn,rn,Ae,!0),!Q){var fi=Pt.get("childrenVisibleMin");null!=fi&&Ft<fi&&(Q=!0)}for(kn=0,Rn=Nt.length;kn<Rn;kn++)j(Nt[kn],Y,Q,oe+1)}}}(p,F,!1,0),V=p.getLayout(),fm(_,function(j,X){var Y=(_[X+1]||p).getValue();j.setLayout(fe({dataExtent:[Y,Y],borderWidth:0,upperHeight:0},V))})}var q=e.getData().tree.root;q.setLayout(function(j,X,Y){if(X)return{x:X.x,y:X.y};var Q={x:0,y:0};if(!Y)return Q;var oe=Y.node,ce=oe.getLayout();if(!ce)return Q;for(var ge=[ce.width/2,ce.height/2],we=oe;we;){var Ce=we.getLayout();ge[0]+=Ce.x,ge[1]+=Ce.y,we=we.parentNode}return{x:j.width/2-ge[0],y:j.height/2-ge[1]}}(s,f,h),!0),e.setLayoutInfo(s),function j(X,Y,Q,oe,ce){var ge=X.getLayout(),we=Q[ce],Ce=we&&we===X;if(!(we&&!Ce||ce===Q.length&&X!==oe)){X.setLayout({isInView:!0,invisible:!Ce&&!Y.intersect(ge),isAboveViewRoot:Ce},!0);var Ae=new g(Y.x-ge.x,Y.y-ge.y,Y.width,Y.height);fm(X.viewChildren||[],function(Oe){j(Oe,Ae,Q,oe,ce+1)})}}(q,new g(-s.x,-s.y,r,o),_,p,0)}};function oD(e,t,n){for(var i,r=0,o=1/0,a=0,s=e.length;a<s;a++)(i=e[a].getLayout().area)&&(i<o&&(o=i),r<i&&(r=i));var l=e.area*e.area,u=t*t*n;return l?xc(u*r/l,l/(u*o)):1/0}function g_(e,t,n,i,r){var o=t===n.width?0:1,a=1-o,s=["x","y"],l=["width","height"],u=n[s[o]],c=t?e.area/t:0;(r||c>n[l[a]])&&(c=n[l[a]]);for(var d=0,h=e.length;d<h;d++){var f=e[d],p={},_=c?f.getLayout().area/c:0,v=p[l[a]]=xc(c-2*i,0),E=n[s[o]]+n[l[o]]-u,F=d===h-1||E<_?E:_,V=p[l[o]]=xc(F-2*i,0);p[s[a]]=n[s[a]]+Bh(i,v/2),p[s[o]]=u+Bh(i,V/2),u+=F,f.setLayout(p,!0)}n[s[a]]+=c,n[l[a]]-=c}function m_(e){return e.get(tD)?e.get(nD):0}function Ul(e){return"_EC_"+e}function bc(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}Ni($I),Gi(iD);var oo=bc.prototype;function No(e,t){this.id=e??"",this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=t??-1}function _c(e,t,n){this.node1=e,this.node2=t,this.dataIndex=n??-1}function v_(e,t){return{getValue:function(n){var i=this[e][t];return i.get(i.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,i){0<=this.dataIndex&&this[e][t].setItemVisual(this.dataIndex,n,i)},getVisual:function(n,i){return this[e][t].getItemVisual(this.dataIndex,n,i)},setLayout:function(n,i){0<=this.dataIndex&&this[e][t].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function y_(e,t,n,i,r){for(var o=new bc(i),a=0;a<e.length;a++)o.addNode(an(e[a].id,e[a].name,a),a);var s=[],l=[],u=0;for(a=0;a<t.length;a++){var c=t[a],d=c.source,h=c.target;o.addEdge(d,h,u)&&(l.push(c),s.push(an(c.id,d+" > "+h)),u++)}var f,p=n.get("coordinateSystem");if("cartesian2d"===p||"polar"===p)f=ya(e,n);else{var _=Ir.get(p),v=_&&"view"!==_.type&&_.dimensions||[];Je(v,"value")<0&&v.concat(["value"]);var E=Dl(e,{coordDimensions:v});(f=new ur(E,n)).initData(e)}var F=new ur(["value"],n);return F.initData(l,s),r&&r(f,F),Kb({mainData:f,struct:o,structAttr:"graph",datas:{node:f,edge:F},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}oo.type="graph",oo.isDirected=function(){return this._directed},oo.addNode=function(e,t){var n=this._nodesMap;if(!n[Ul(e=null==e?""+t:""+e)]){var i=new No(e,t);return(i.hostGraph=this).nodes.push(i),n[Ul(e)]=i}},oo.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},oo.getNodeById=function(e){return this._nodesMap[Ul(e)]},oo.addEdge=function(e,t,n){var i=this._nodesMap,r=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),No.isInstance(e)||(e=i[Ul(e)]),No.isInstance(t)||(t=i[Ul(t)]),e&&t){var o=e.id+"-"+t.id,a=new _c(e,t,n);return(a.hostGraph=this)._directed&&(e.outEdges.push(a),t.inEdges.push(a)),e.edges.push(a),e!==t&&t.edges.push(a),this.edges.push(a),r[o]=a}},oo.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},oo.getEdge=function(e,t){No.isInstance(e)&&(e=e.id),No.isInstance(t)&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},oo.eachNode=function(e,t){for(var n=this.nodes,i=n.length,r=0;r<i;r++)0<=n[r].dataIndex&&e.call(t,n[r],r)},oo.eachEdge=function(e,t){for(var n=this.edges,i=n.length,r=0;r<i;r++)0<=n[r].dataIndex&&0<=n[r].node1.dataIndex&&0<=n[r].node2.dataIndex&&e.call(t,n[r],r)},oo.breadthFirstTraverse=function(e,t,n,i){if(No.isInstance(t)||(t=this._nodesMap[Ul(t)]),t){for(var r="out"===n?"outEdges":"in"===n?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(i,t,null))for(var a=[t];a.length;){var s=a.shift(),l=s[r];for(o=0;o<l.length;o++){var u=l[o],c=u.node1===s?u.node2:u.node1;if(!c.__visited){if(e.call(i,c,s))return;a.push(c),c.__visited=!0}}}}},oo.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,i=this.edges,r=0,o=n.length;r<o;r++)n[r].dataIndex=-1;for(r=0,o=e.count();r<o;r++)n[e.getRawIndex(r)].dataIndex=r;for(t.filterSelf(function(a){var s=i[t.getRawIndex(a)];return 0<=s.node1.dataIndex&&0<=s.node2.dataIndex}),r=0,o=i.length;r<o;r++)i[r].dataIndex=-1;for(r=0,o=t.count();r<o;r++)i[t.getRawIndex(r)].dataIndex=r},oo.clone=function(){for(var e=new bc(this._directed),t=this.nodes,n=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(i=0;i<n.length;i++){var r=n[i];e.addEdge(r.node1.id,r.node2.id,r.dataIndex)}return e},No.prototype={constructor:No,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},_c.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},tt(No,v_("hostGraph","data")),tt(_c,v_("hostGraph","edgeData")),bc.Node=No,bc.Edge=_c,ud(No),ud(_c);var Oh=function(e){return e.get("autoCurveness")||null},x_=function(e,t){var n=Oh(e),i=20,r=[];if("number"==typeof n)i=n;else if(Ye(n))return void(e.__curvenessList=n);i<t&&(i=t);var o=i%2?i+2:i+3;r=[];for(var a=0;a<o;a++)r.push((a%2?a+1:a)/10*(a%2?-1:1));e.__curvenessList=r},wc=function(e,t,n){var i=[e.id,e.dataIndex].join("."),r=[t.id,t.dataIndex].join(".");return[n.uid,i,r].join("--\x3e")},b_=function(e){var t=e.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},gm=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function mm(e,t,n,i){var r=Oh(t),o=Ye(r);if(!r)return null;var a=function(e,t){var n=wc(e.node1,e.node2,t);return t.__edgeMap[n]}(e,t);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===n){s=l;break}var u=function(e,t){return gm(wc(e.node1,e.node2,t),t)+gm(wc(e.node2,e.node1,t),t)}(e,t);x_(t,u),e.lineStyle=e.lineStyle||{};var c=wc(e.node1,e.node2,t),d=t.__curvenessList,h=o||u%2?0:1;if(a.isForward)return d[h+s];var f=b_(c),p=gm(f,t),_=d[s+p+h];return i?o?r&&0===r[0]?(p+h)%2?_:-_:((p%2?0:1)+h)%2?_:-_:(p+h)%2?_:-_:d[s+p+h]}var Cc=ah({type:"series.graph",init:function(e){Cc.superApply(this,"init",arguments);var t=this;function n(){return t._categoriesData}this.legendVisualProvider=new lc(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){Cc.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){Cc.superApply(this,"mergeDefaultAndTheme",arguments),ms(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var a,n=e.edges||e.links||[],i=e.data||e.nodes||[],r=this;if(i&&n){Oh(a=this)&&(a.__curvenessList=[],a.__edgeMap={},x_(a));var o=y_(i,n,this,!0,function(a,s){a.wrapMethod("getItemModel",function(f){var p=r._categoriesModels[f.getShallow("category")];return p&&(p.parentModel=f.parentModel,f.parentModel=p),f});var l=r.getModel("edgeLabel"),u=new di({label:l.option},l.parentModel,t),c=r.getModel("emphasis.edgeLabel"),d=new di({emphasis:{label:c.option}},c.parentModel,t);function h(f){return(f=this.parsePath(f))&&"label"===f[0]?u:f&&"emphasis"===f[0]&&"label"===f[1]?d:this.parentModel}s.wrapMethod("getItemModel",function(f){return f.customizeGetParent(h),f})});return re(o.edges,function(a){!function(s,l,u,c){if(Oh(u)){var d=wc(s,l,u),h=u.__edgeMap,f=h[b_(d)];h[d]&&!f?h[d].isForward=!0:f&&h[d]&&(f.isForward=!0,h[d].isForward=!1),h[d]=h[d]||[],h[d].push(c)}}(a.node1,a.node2,this,a.dataIndex)},this),o.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,n){if("edge"!==n)return Cc.superApply(this,"formatTooltip",arguments);var i=this.getData(),r=this.getDataParams(e,n),o=i.graph.getEdgeByIndex(e),a=i.getName(o.node1.dataIndex),s=i.getName(o.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),l=Oi(l.join(" > ")),r.value&&(l+=" : "+Oi(r.value)),l},_updateCategoriesData:function(){var e=Ke(this.option.categories||[],function(n){return null!=n.value?n:fe({value:0},n)}),t=new ur(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(n){return t.getItemModel(n,!0)})},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return Cc.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),__=yr.prototype,vm=wd.prototype;function ym(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var lD=go({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[ym(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:__.buildPath,_buildPathCurve:vm.buildPath,pointAt:function(e){return this[ym(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:__.pointAt,_pointAtCurve:vm.pointAt,tangentAt:function(e){var t=this.shape,n=ym(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return Nn(n,n)},_tangentAtCurve:vm.tangentAt}),xm=["fromSymbol","toSymbol"];function w_(e){return"_"+e+"Type"}function C_(e,t,n){var i=t.getItemVisual(n,e);if(i&&"none"!==i){var r=t.getItemVisual(n,"color"),o=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate");Ye(o)||(o=[o,o]);var s=io(i,-o[0]/2,-o[1]/2,o[0],o[1],r);return s.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,s.name=e,s}}function bm(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}function Sc(e,t,n){m.call(this),this._createLine(e,t,n)}var Ja=Sc.prototype;function zh(e){this._ctor=e||Sc,this.group=new m}Ja.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),n=this.childOfName("label");if(e||t||!n.ignore){for(var i=1,r=this.parent;r;)r.scale&&(i/=r.scale[0]),r=r.parent;var o=this.childOfName("line");if(this.__dirty||o.__dirty){var d,a=o.shape.percent,s=o.pointAt(0),l=o.pointAt(a),u=qt([],l,s);if(Nn(u,u),e){if(e.attr("position",s),null==(d=e.__specifiedRotation)){var c=o.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(c[1],c[0]))}else e.attr("rotation",d);e.attr("scale",[i*a,i*a])}if(t&&(t.attr("position",l),null==(d=t.__specifiedRotation)?(c=o.tangentAt(1),t.attr("rotation",-Math.PI/2-Math.atan2(c[1],c[0]))):t.attr("rotation",d),t.attr("scale",[i*a,i*a])),!n.ignore){var h,f,p,_;n.attr("position",l);var v=n.__labelDistance,E=v[0]*i,F=v[1]*i,V=a/2,q=[(c=o.tangentAt(V))[1],-c[0]],j=o.pointAt(V);0<q[1]&&(q[0]=-q[0],q[1]=-q[1]);var X,Y=c[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var Q=-Math.atan2(c[1],c[0]);l[0]<s[0]&&(Q=Math.PI+Q),n.attr("rotation",Q)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":X=-F,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":X=F,p="top";break;default:X=0,p="middle"}switch(n.__position){case"end":h=[u[0]*E+l[0],u[1]*F+l[1]],f=.8<u[0]?"left":u[0]<-.8?"right":"center",p=.8<u[1]?"top":u[1]<-.8?"bottom":"middle";break;case"start":h=[-u[0]*E+s[0],-u[1]*F+s[1]],f=.8<u[0]?"right":u[0]<-.8?"left":"center",p=.8<u[1]?"bottom":u[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":h=[E*Y+s[0],s[1]+X],f=c[0]<0?"right":"left",_=[-E*Y,-X];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":h=[j[0],j[1]+X],f="center",_=[0,-X];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":h=[-E*Y+l[0],l[1]+X],f=0<=c[0]?"right":"left",_=[E*Y,-X]}n.attr({style:{textVerticalAlign:n.__verticalAlign||p,textAlign:n.__textAlign||f},position:h,scale:[i,i],origin:_})}}}},Ja._createLine=function(e,t,n){var a,s,i=e.hostModel,r=(a=e.getItemLayout(t),bm((s=new lD({name:"line",subPixelOptimize:!0})).shape,a),s);r.shape.percent=0,Tr(r,{shape:{percent:1}},i,t),this.add(r);var o=new oi({name:"label",lineLabelOriginalOpacity:1});this.add(o),re(xm,function(a){var s=C_(a,e,t);this.add(s),this[w_(a)]=e.getItemVisual(t,a)},this),this._updateCommonStl(e,t,n)},Ja.updateData=function(e,t,n){var i=e.hostModel,r=this.childOfName("line"),o=e.getItemLayout(t),a={shape:{}};bm(a.shape,o),Qn(r,a,i,t),re(xm,function(s){var l=e.getItemVisual(t,s),u=w_(s);if(this[u]!==l){this.remove(this.childOfName(s));var c=C_(s,e,t);this.add(c)}this[u]=l},this),this._updateCommonStl(e,t,n)},Ja._updateCommonStl=function(e,t,n){var i=e.hostModel,r=this.childOfName("line"),o=n&&n.lineStyle,a=n&&n.hoverLineStyle,s=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||e.hasItemOption){var u=e.getItemModel(t);o=u.getModel("lineStyle").getLineStyle(),a=u.getModel("emphasis.lineStyle").getLineStyle(),s=u.getModel("label"),l=u.getModel("emphasis.label")}var c=e.getItemVisual(t,"color"),d=pn(e.getItemVisual(t,"opacity"),o.opacity,1);r.useStyle(De({strokeNoScale:!0,fill:"none",stroke:c,opacity:d},o)),r.hoverStyle=a,re(xm,function(X){var Y=this.childOfName(X);Y&&(Y.setColor(c),Y.setStyle({opacity:d}))},this);var h,f,p=s.getShallow("show"),_=l.getShallow("show"),v=this.childOfName("label");if((p||_)&&(h=c||"#000",null==(f=i.getFormattedLabel(t,"normal",e.dataType)))){var E=i.getRawValue(t);f=null==E?e.getName(t):isFinite(E)?nr(E):E}var F=p?f:null,V=_?_t(i.getFormattedLabel(t,"emphasis",e.dataType),f):null,q=v.style;if(null!=F||null!=V){Fi(v.style,s,{text:F},{autoColor:h}),v.__textAlign=q.textAlign,v.__verticalAlign=q.textVerticalAlign,v.__position=s.get("position")||"middle";var j=s.get("distance");Ye(j)||(j=[j,j]),v.__labelDistance=j}v.hoverStyle=null!=V?{text:V,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},v.ignore=!p&&!_,Ri(this)},Ja.highlight=function(){this.trigger("emphasis")},Ja.downplay=function(){this.trigger("normal")},Ja.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},Ja.setLinePoints=function(e){var t=this.childOfName("line");bm(t.shape,e),t.dirty()},Ue(Sc,m);var Vs=zh.prototype;function S_(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function M_(e){return isNaN(e[0])||isNaN(e[1])}function _m(e){return!M_(e[0])&&!M_(e[1])}function Mc(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,i=t.scale,r=i&&i[0]||1;return((t.getZoom()-1)*n+1)/r}function Tc(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}Vs.isPersistent=function(){return!0},Vs.updateData=function(e){var t=this,n=t.group,i=t._lineData;t._lineData=e,i||n.removeAll();var r=S_(e);e.diff(i).add(function(o){!function(a,s,l,u){if(_m(s.getItemLayout(l))){var c=new a._ctor(s,l,u);s.setItemGraphicEl(l,c),a.group.add(c)}}(t,e,o,r)}).update(function(o,a){!function(s,l,u,c,d,h){var f=l.getItemGraphicEl(c);if(!_m(u.getItemLayout(d)))return s.group.remove(f);f?f.updateData(u,d,h):f=new s._ctor(u,d,h),u.setItemGraphicEl(d,f),s.group.add(f)}(t,i,e,a,o,r)}).remove(function(o){n.remove(i.getItemGraphicEl(o))}).execute()},Vs.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},Vs.incrementalPrepareUpdate=function(e){this._seriesScope=S_(e),this._lineData=null,this.group.removeAll()},Vs.incrementalUpdate=function(e,t){function n(o){var a;o.isGroup||(a=o).animators&&0<a.animators.length||(o.incremental=o.useHoverLayer=!0)}for(var i=e.start;i<e.end;i++)if(_m(t.getItemLayout(i))){var r=new this._ctor(t,i,this._seriesScope);r.traverse(n),this.group.add(r),t.setItemGraphicEl(i,r)}},Vs.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Vs._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var wm=[],Cm=[],Sm=[],jl=Mr,Mm=Li,T_=Math.abs;function A_(e,t,n){for(var i,r=e[0],o=e[1],a=e[2],s=1/0,l=n*n,u=.1,c=.1;c<=.9;c+=.1)wm[0]=jl(r[0],o[0],a[0],c),wm[1]=jl(r[1],o[1],a[1],c),(f=T_(Mm(wm,t)-l))<s&&(s=f,i=c);for(var d=0;d<32;d++){var h=i+u;Cm[0]=jl(r[0],o[0],a[0],i),Cm[1]=jl(r[1],o[1],a[1],i),Sm[0]=jl(r[0],o[0],a[0],h),Sm[1]=jl(r[1],o[1],a[1],h);var f=Mm(Cm,t)-l;if(T_(f)<.01)break;var p=Mm(Sm,t)-l;u/=2,f<0?0<=p?i+=u:i-=u:0<=p?i-=u:i+=u}return i}function Tm(e,t){var n=[],i=Kf,r=[[],[],[]],o=[[],[]],a=[];t/=2,e.eachEdge(function(s,l){var u=s.getLayout(),c=s.getVisual("fromSymbol"),d=s.getVisual("toSymbol");u.__original||(u.__original=[On(u[0]),On(u[1])],u[2]&&u.__original.push(On(u[2])));var h=u.__original;if(null!=u[2]){if(wn(r[0],h[0]),wn(r[1],h[2]),wn(r[2],h[1]),c&&"none"!==c){var f=Tc(s.node1),p=A_(r,h[0],f*t);i(r[0][0],r[1][0],r[2][0],p,n),r[0][0]=n[3],r[1][0]=n[4],i(r[0][1],r[1][1],r[2][1],p,n),r[0][1]=n[3],r[1][1]=n[4]}d&&"none"!==d&&(f=Tc(s.node2),p=A_(r,h[1],f*t),i(r[0][0],r[1][0],r[2][0],p,n),r[1][0]=n[1],r[2][0]=n[2],i(r[0][1],r[1][1],r[2][1],p,n),r[1][1]=n[1],r[2][1]=n[2]),wn(u[0],r[0]),wn(u[1],r[2]),wn(u[2],r[1])}else wn(o[0],h[0]),wn(o[1],h[1]),qt(a,o[1],o[0]),Nn(a,a),c&&"none"!==c&&(f=Tc(s.node1),It(o[0],o[0],a,f*t)),d&&"none"!==d&&(f=Tc(s.node2),It(o[1],o[1],a,-f*t)),wn(u[0],o[0]),wn(u[1],o[1])})}var ql="__focusNodeAdjacency",Xl="__unfocusNodeAdjacency",Hs=["itemStyle","opacity"],Vh=["lineStyle","opacity"];function I_(e,t){return e.getVisual("opacity")??e.getModel().get(t)}function Hh(e,t,n){var i=e.getGraphicEl(),r=I_(e,t);null!=n&&(null==r&&(r=1),r*=n),i.downplay&&i.downplay(),i.traverse(function(o){if(!o.isGroup){var a=o.lineLabelOriginalOpacity;null!=a&&null==n||(a=r),o.setStyle("opacity",a)}})}function Fs(e,t){var n=I_(e,t),i=e.getGraphicEl();i.traverse(function(r){r.isGroup||r.setStyle("opacity",n)}),i.highlight&&i.highlight()}function Fh(e){return e instanceof Array||(e=[e,e]),e}function D_(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode(function(i){var r=i.getModel();i.setLayout([+r.get("x"),+r.get("y")])}),k_(n,e)}}function k_(e,t){e.eachEdge(function(n,i){var r=pn(n.getModel().get("lineStyle.curveness"),-mm(n,t,i,!0),0),o=On(n.node1.getLayout()),a=On(n.node2.getLayout()),s=[o,a];+r&&s.push([(o[0]+a[0])/2-(o[1]-a[1])*r,(o[1]+a[1])/2-(a[0]-o[0])*r]),n.setLayout(s)})}Zr({type:"graph",init:function(e,t){var n=new Ll,i=new zh,r=this.group;this._controller=new Wl(t.getZr()),this._controllerHost={target:r},r.add(n.group),r.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},render:function(e,t,n){var i=this,r=e.coordinateSystem;this._model=e;var o=this._symbolDraw,a=this._lineDraw,s=this.group;if("view"===r.type){var l={position:r.position,scale:r.scale};this._firstRender?s.attr(l):Qn(s,l,e)}Tm(e.getGraph(),Mc(e));var u=e.getData();o.updateData(u);var c=e.getEdgeData();a.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var d=e.forceLayout,h=e.get("force.layoutAnimation");d&&this._startForceLayoutIteration(d,h),u.eachItemGraphicEl(function(v,E){var F=u.getItemModel(E);v.off("drag").off("dragend");var V=F.get("draggable");V&&v.on("drag",function(){d&&(d.warmUp(),this._layouting||this._startForceLayoutIteration(d,h),d.setFixed(E),u.setItemLayout(E,v.position))},this).on("dragend",function(){d&&d.setUnfixed(E)},this),v.setDraggable(V&&d),v[ql]&&v.off("mouseover",v[ql]),v[Xl]&&v.off("mouseout",v[Xl]),F.get("focusNodeAdjacency")&&(v.on("mouseover",v[ql]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:v.dataIndex})}),v.on("mouseout",v[Xl]=function(){i._dispatchUnfocus(n)}))},this),u.graph.eachEdge(function(v){var E=v.getGraphicEl();E[ql]&&E.off("mouseover",E[ql]),E[Xl]&&E.off("mouseout",E[Xl]),v.getModel().get("focusNodeAdjacency")&&(E.on("mouseover",E[ql]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:v.dataIndex})}),E.on("mouseout",E[Xl]=function(){i._dispatchUnfocus(n)}))});var f="circular"===e.get("layout")&&e.get("circular.rotateLabel"),p=u.getLayout("cx"),_=u.getLayout("cy");u.eachItemGraphicEl(function(v,E){var F=u.getItemModel(E).get("label.rotate")||0,V=v.getSymbolPath();if(f){var q=u.getItemLayout(E),j=Math.atan2(q[1]-_,q[0]-p);j<0&&(j=2*Math.PI+j);var X=q[0]<p;X&&(j-=Math.PI);var Y=X?"left":"right";cp(V,{textRotation:-j,textPosition:Y,textOrigin:"center"},{textPosition:Y})}else cp(V,{textRotation:F*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,i){var r=e.getData().graph,a=i.edgeDataIndex,s=r.getNodeByIndex(i.dataIndex),l=r.getEdgeByIndex(a);(s||l)&&(r.eachNode(function(u){Hh(u,Hs,.1)}),r.eachEdge(function(u){Hh(u,Vh,.1)}),s&&(Fs(s,Hs),re(s.edges,function(u){u.dataIndex<0||(Fs(u,Vh),Fs(u.node1,Hs),Fs(u.node2,Hs))})),l&&(Fs(l,Vh),Fs(l.node1,Hs),Fs(l.node2,Hs)))},unfocusNodeAdjacency:function(e,t,n,i){var r=e.getData().graph;r.eachNode(function(o){Hh(o,Hs)}),r.eachEdge(function(o){Hh(o,Vh)})},_startForceLayoutIteration:function(e,t){var n=this;!function i(){e.step(function(r){n.updateLayout(n._model),(n._layouting=!r)&&(t?n._layoutTimeout=setTimeout(i,16):i())})}()},_updateController:function(e,t,n){var i=this._controller,r=this._controllerHost,o=this.group;i.setPointerChecker(function(a,s,l){var u=o.getBoundingRect();return u.applyTransform(o.transform),u.contain(s,l)&&!Ah(a,n,e)}),"view"===e.coordinateSystem.type?(i.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(a){qg(r,a.dx,a.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:a.dx,dy:a.dy})}).on("zoom",function(a){Xg(r,a.scale,a.originX,a.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:a.scale,originX:a.originX,originY:a.originY}),this._updateNodeAndLinkScale(),Tm(e.getGraph(),Mc(e)),this._lineDraw.updateLayout()},this)):i.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),n=Mc(e),i=[n,n];t.eachItemGraphicEl(function(r,o){r.attr("scale",i)})},updateLayout:function(e){Tm(e.getGraph(),Mc(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),hi({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),hi({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),hi({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",query:e},function(n){var i=Yg(n.coordinateSystem,e);n.setCenter&&n.setCenter(i.center),n.setZoom&&n.setZoom(i.zoom)})});var N_=Math.PI,Am=[];function E_(e,t){var n=e.coordinateSystem;if(!n||"view"===n.type){var i=n.getBoundingRect(),r=e.getData(),o=r.graph,a=i.width/2+i.x,s=i.height/2+i.y,l=Math.min(i.width,i.height)/2,u=r.count();r.setLayout({cx:a,cy:s}),u&&(uD[t](e,n,o,r,l,a,s,u),o.eachEdge(function(c,d){var h,f=pn(c.getModel().get("lineStyle.curveness"),mm(c,e,d),0),p=On(c.node1.getLayout()),_=On(c.node2.getLayout());+f&&(h=[a*(f*=3)+(p[0]+_[0])/2*(1-f),s*f+(p[1]+_[1])/2*(1-f)]),c.setLayout([p,_,h])}))}}var uD={value:function(e,t,n,i,r,o,a,s){var l=0,u=i.getSum("value"),c=2*Math.PI/(u||s);n.eachNode(function(d){var h=d.getValue("value"),f=c*(u?h:1)/2;l+=f,d.setLayout([r*Math.cos(l)+o,r*Math.sin(l)+a]),l+=f})},symbolSize:function(e,t,n,i,r,o,a,s){var l=0;Am.length=s;var u=Mc(e);n.eachNode(function(h){var f=Tc(h);isNaN(f)&&(f=2),f<0&&(f=0),f*=u;var p=Math.asin(f/2/r);isNaN(p)&&(p=N_/2),Am[h.dataIndex]=p,l+=2*p});var c=(2*N_-l)/s/2,d=0;n.eachNode(function(h){var f=c+Am[h.dataIndex];d+=f,h.setLayout([r*Math.cos(d)+o,r*Math.sin(d)+a]),d+=f})}},Zl=It;to(function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",function(n){var i=n.getCategoriesData(),r=n.getGraph().data,o=i.mapArray(i.getName);r.filterSelf(function(a){var s=r.getItemModel(a).getShallow("category");if(null!=s){"number"==typeof s&&(s=o[s]);for(var l=0;l<t.length;l++)if(!t[l].isSelected(s))return!1}return!0})},this)}),Ni(Rs("graph","circle",null)),Ni(function(e){var t={};e.eachSeriesByType("graph",function(n){var i=n.getCategoriesData(),r=n.getData(),o={};i.each(function(a){var s=i.getName(a);o["ec-"+s]=a;var l=i.getItemModel(a),u=l.get("itemStyle.color")||n.getColorFromPalette(s,t);i.setItemVisual(a,"color",u);for(var c=["opacity","symbol","symbolSize","symbolKeepAspect"],d=0;d<c.length;d++){var h=l.getShallow(c[d],!0);null!=h&&i.setItemVisual(a,c[d],h)}}),i.count()&&r.each(function(a){var s=r.getItemModel(a).getShallow("category");if(null!=s){"string"==typeof s&&(s=o["ec-"+s]);for(var l=["color","opacity","symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++)null==r.getItemVisual(a,l[u],!0)&&r.setItemVisual(a,l[u],i.getItemVisual(s,l[u]))}})})}),Ni(function(e){e.eachSeriesByType("graph",function(t){var n=t.getGraph(),i=t.getEdgeData(),r=Fh(t.get("edgeSymbol")),o=Fh(t.get("edgeSymbolSize")),a="lineStyle.color".split("."),s="lineStyle.opacity".split(".");i.setVisual("fromSymbol",r&&r[0]),i.setVisual("toSymbol",r&&r[1]),i.setVisual("fromSymbolSize",o&&o[0]),i.setVisual("toSymbolSize",o&&o[1]),i.setVisual("color",t.get(a)),i.setVisual("opacity",t.get(s)),i.each(function(l){var u=i.getItemModel(l),c=n.getEdgeByIndex(l),d=Fh(u.getShallow("symbol",!0)),h=Fh(u.getShallow("symbolSize",!0)),f=u.get(a),p=u.get(s);switch(f){case"source":f=c.node1.getVisual("color");break;case"target":f=c.node2.getVisual("color")}d[0]&&c.setVisual("fromSymbol",d[0]),d[1]&&c.setVisual("toSymbol",d[1]),h[0]&&c.setVisual("fromSymbolSize",h[0]),h[1]&&c.setVisual("toSymbolSize",h[1]),c.setVisual("color",f),c.setVisual("opacity",p)})})}),Gi(function(e,t){e.eachSeriesByType("graph",function(n){var i=n.get("layout"),r=n.coordinateSystem;if(r&&"view"!==r.type){var o=n.getData(),a=[];re(r.dimensions,function(h){a=a.concat(o.mapDimension(h,!0))});for(var s=0;s<o.count();s++){for(var l=[],u=!1,c=0;c<a.length;c++){var d=o.get(a[c],s);isNaN(d)||(u=!0),l.push(d)}o.setItemLayout(s,u?r.dataToPoint(l):[NaN,NaN])}k_(o.graph,n)}else i&&"none"!==i||D_(n)})}),Gi(qo.VISUAL.POST_CHART_LAYOUT,function(e){e.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&E_(t,"symbolSize")})}),Gi(function(e){e.eachSeriesByType("graph",function(t){if(!(h=t.coordinateSystem)||"view"===h.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},i=t.getGraph(),r=i.data,o=i.edgeData,a=t.getModel("force"),s=a.get("initLayout");t.preservedPoints?r.each(function(F){var V=r.getId(F);r.setItemLayout(F,n[V]||[NaN,NaN])}):s&&"none"!==s?"circular"===s&&E_(t,"value"):D_(t);var l=r.getDataExtent("value"),u=o.getDataExtent("value"),c=a.get("repulsion"),d=a.get("edgeLength");Ye(c)||(c=[c,c]),Ye(d)||(d=[d,d]),d=[d[1],d[0]];var h,f=r.mapArray("value",function(F,V){var q=r.getItemLayout(V),j=Pi(F,l,c);return isNaN(j)&&(j=(c[0]+c[1])/2),{w:j,rep:j,fixed:r.getItemModel(V).get("fixed"),p:!q||isNaN(q[0])||isNaN(q[1])?null:q}}),p=o.mapArray("value",function(F,V){var q=i.getEdgeByIndex(V),j=Pi(F,u,d);isNaN(j)&&(j=(d[0]+d[1])/2);var X=q.getModel(),Y=pn(X.get("lineStyle.curveness"),-mm(q,t,V,!0),0);return{n1:f[q.node1.dataIndex],n2:f[q.node2.dataIndex],d:j,curveness:Y,ignoreForceLayout:X.get("ignoreForceLayout")}}),_=(h=t.coordinateSystem).getBoundingRect(),v=function(F,V,q){for(var j=q.rect,X=j.width,Y=j.height,Q=[j.x+X/2,j.y+Y/2],oe=q.gravity??.1,ce=0;ce<F.length;ce++){var ge=F[ce];ge.p||(ge.p=hn(X*(Math.random()-.5)+Q[0],Y*(Math.random()-.5)+Q[1])),ge.pp=On(ge.p),ge.edges=null}var we=q.friction??.6,Ce=we;return{warmUp:function(){Ce=.8*we},setFixed:function(Ae){F[Ae].fixed=!0},setUnfixed:function(Ae){F[Ae].fixed=!1},step:function(Ae){for(var Oe=[],Ge=F.length,Pe=0;Pe<V.length;Pe++){var st=V[Pe];if(!st.ignoreForceLayout){var Pt=st.n1;qt(Oe,(fn=st.n2).p,Pt.p);var Ft=ln(Oe)-st.d,Nt=fn.w/(Pt.w+fn.w);isNaN(Nt)&&(Nt=0),Nn(Oe,Oe),Pt.fixed||Zl(Pt.p,Pt.p,Oe,Nt*Ft*Ce),fn.fixed||Zl(fn.p,fn.p,Oe,-(1-Nt)*Ft*Ce)}}for(Pe=0;Pe<Ge;Pe++)(kn=F[Pe]).fixed||(qt(Oe,Q,kn.p),Zl(kn.p,kn.p,Oe,oe*Ce));for(Pe=0;Pe<Ge;Pe++){Pt=F[Pe];for(var rn=Pe+1;rn<Ge;rn++){var fn;qt(Oe,(fn=F[rn]).p,Pt.p),0===(Ft=ln(Oe))&&(ai(Oe,Math.random()-.5,Math.random()-.5),Ft=1);var Ln=(Pt.rep+fn.rep)/Ft/Ft;Pt.fixed||Zl(Pt.pp,Pt.pp,Oe,Ln),fn.fixed||Zl(fn.pp,fn.pp,Oe,-Ln)}}var Zt=[];for(Pe=0;Pe<Ge;Pe++){var kn;(kn=F[Pe]).fixed||(qt(Zt,kn.p,kn.pp),Zl(kn.p,kn.p,Zt,Ce),wn(kn.pp,kn.p))}Ce*=.992,Ae&&Ae(F,V,Ce<.01)}}}(f,p,{rect:_,gravity:a.get("gravity"),friction:a.get("friction")}),E=v.step;v.step=function(F){for(var V=0,q=f.length;V<q;V++)f[V].fixed&&wn(f[V].p,i.getNodeByIndex(V).getLayout());E(function(j,X,Y){for(var Q=0,oe=j.length;Q<oe;Q++)j[Q].fixed||i.getNodeByIndex(Q).setLayout(j[Q].p),n[r.getId(Q)]=j[Q].p;for(Q=0,oe=X.length;Q<oe;Q++){var ce=X[Q],ge=i.getEdgeByIndex(Q),we=ce.n1.p,Ce=ce.n2.p,Ae=ge.getLayout();(Ae=Ae?Ae.slice():[])[0]=Ae[0]||[],Ae[1]=Ae[1]||[],wn(Ae[0],we),wn(Ae[1],Ce),+ce.curveness&&(Ae[2]=[(we[0]+Ce[0])/2-(we[1]-Ce[1])*ce.curveness,(we[1]+Ce[1])/2-(Ce[0]-we[0])*ce.curveness]),ge.setLayout(Ae)}F&&F(Y)})},t.forceLayout=v,t.preservedPoints=n,v.step()}else t.forceLayout=null})}),og("graphView",{create:function(e,t){var n=[];return e.eachSeriesByType("graph",function(i){var v,E,F,r=i.get("coordinateSystem");if(!r||"view"===r){var o=i.getData(),a=[],s=[];wu(o.mapArray(function(_){var v=o.getItemModel(_);return[+v.get("x"),+v.get("y")]}),a,s),s[0]-a[0]==0&&(s[0]+=1,a[0]-=1),s[1]-a[1]==0&&(s[1]+=1,a[1]-=1);var l=(s[0]-a[0])/(s[1]-a[1]),u=(v=t,E=l,(F=i.getBoxLayoutParams()).aspect=E,Ki(F,{width:v.getWidth(),height:v.getHeight()}));isNaN(l)&&(a=[u.x,u.y],s=[u.x+u.width,u.y+u.height]);var c=s[0]-a[0],d=s[1]-a[1],h=u.width,f=u.height,p=i.coordinateSystem=new Ka;p.zoomLimit=i.get("scaleLimit"),p.setBoundingRect(a[0],a[1],c,d),p.setViewRect(u.x,u.y,h,f),p.setCenter(i.get("center")),p.setZoom(i.get("zoom")),n.push(p)}}),n}}),Wi.extend({type:"series.gauge",getInitialData:function(e,t){return Vl(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var cD=ci.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var n=Math.cos,i=Math.sin,r=t.r,o=t.width,a=t.angle,s=t.x-n(a)*o*(r/3<=o?1:2),l=t.y-i(a)*o*(r/3<=o?1:2);a=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+n(a)*o,t.y+i(a)*o),e.lineTo(t.x+n(t.angle)*r,t.y+i(t.angle)*r),e.lineTo(t.x-n(a)*o,t.y-i(a)*o),e.lineTo(s,l)}});function L_(e,t){return t&&("string"==typeof t?e=t.replace("{value}",e??""):"function"==typeof t&&(e=t(e))),e}var dD=2*Math.PI,R_=(fr.extend({type:"gauge",render:function(e,t,n){this.group.removeAll();var i=e.get("axisLine.lineStyle.color"),r=function(o,a){var s=o.get("center"),l=a.getWidth(),u=a.getHeight(),c=Math.min(l,u);return{cx:yn(s[0],a.getWidth()),cy:yn(s[1],a.getHeight()),r:yn(o.get("radius"),c/2)}}(e,n);this._renderMain(e,t,n,i,r)},dispose:function(){},_renderMain:function(e,t,n,i,r){for(var o=this.group,a=e.getModel("axisLine"),s=a.getModel("lineStyle"),l=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,c=((_=-e.get("endAngle")/180*Math.PI)-u)%dD,d=u,h=s.get("width"),f=a.get("show"),p=0;f&&p<i.length;p++){var _,v=Math.min(Math.max(i[p][0],0),1),E=new Ao({shape:{startAngle:d,endAngle:_=u+c*v,cx:r.cx,cy:r.cy,clockwise:l,r0:r.r-h,r:r.r},silent:!0});E.setStyle({fill:i[p][1]}),E.setStyle(s.getLineStyle(["color","borderWidth","borderColor"])),o.add(E),d=_}function F(q){if(q<=0)return i[0][1];for(var j=0;j<i.length;j++)if(i[j][0]>=q&&(0===j?0:i[j-1][0])<q)return i[j][1];return i[j-1][1]}if(!l){var V=u;u=_,_=V}this._renderTicks(e,t,n,F,r,u,_,l),this._renderPointer(e,t,n,F,r,u,_,l),this._renderTitle(e,t,n,F,r),this._renderDetail(e,t,n,F,r)},_renderTicks:function(e,t,n,i,r,o,a,s){for(var l=this.group,u=r.cx,c=r.cy,d=r.r,h=+e.get("min"),f=+e.get("max"),p=e.getModel("splitLine"),_=e.getModel("axisTick"),v=e.getModel("axisLabel"),E=e.get("splitNumber"),F=_.get("splitNumber"),V=yn(p.get("length"),d),q=yn(_.get("length"),d),j=o,X=(a-o)/E,Y=X/F,Q=p.getModel("lineStyle").getLineStyle(),oe=_.getModel("lineStyle").getLineStyle(),ce=0;ce<=E;ce++){var ge=Math.cos(j),we=Math.sin(j);if(p.get("show")){var Ce=new yr({shape:{x1:ge*d+u,y1:we*d+c,x2:ge*(d-V)+u,y2:we*(d-V)+c},style:Q,silent:!0});"auto"===Q.stroke&&Ce.setStyle({stroke:i(ce/E)}),l.add(Ce)}if(v.get("show")){var Ae=L_(nr(ce/E*(f-h)+h),v.get("formatter")),Oe=v.get("distance"),Ge=i(ce/E);l.add(new oi({style:Fi({},v,{text:Ae,x:ge*(d-V-Oe)+u,y:we*(d-V-Oe)+c,textVerticalAlign:we<-.4?"top":.4<we?"bottom":"middle",textAlign:ge<-.4?"left":.4<ge?"right":"center"},{autoColor:Ge}),silent:!0}))}if(_.get("show")&&ce!==E){for(var Pe=0;Pe<=F;Pe++){ge=Math.cos(j),we=Math.sin(j);var st=new yr({shape:{x1:ge*d+u,y1:we*d+c,x2:ge*(d-q)+u,y2:we*(d-q)+c},silent:!0,style:oe});"auto"===oe.stroke&&st.setStyle({stroke:i((ce+Pe/F)/E)}),l.add(st),j+=Y}j-=Y}else j+=X}},_renderPointer:function(e,t,n,i,r,o,a,s){var l=this.group,u=this._data;if(e.get("pointer.show")){var c=[+e.get("min"),+e.get("max")],d=[o,a],h=e.getData(),f=h.mapDimension("value");h.diff(u).add(function(p){var _=new cD({shape:{angle:o}});Tr(_,{shape:{angle:Pi(h.get(f,p),c,d,!0)}},e),l.add(_),h.setItemGraphicEl(p,_)}).update(function(p,_){var v=u.getItemGraphicEl(_);Qn(v,{shape:{angle:Pi(h.get(f,p),c,d,!0)}},e),l.add(v),h.setItemGraphicEl(p,v)}).remove(function(p){var _=u.getItemGraphicEl(p);l.remove(_)}).execute(),h.eachItemGraphicEl(function(p,_){var v=h.getItemModel(_),E=v.getModel("pointer");p.setShape({x:r.cx,y:r.cy,width:yn(E.get("width"),r.r),r:yn(E.get("length"),r.r)}),p.useStyle(v.getModel("itemStyle").getItemStyle()),"auto"===p.style.fill&&p.setStyle("fill",i(Pi(h.get(f,_),c,[0,1],!0))),Ri(p,v.getModel("emphasis.itemStyle").getItemStyle())}),this._data=h}else u&&u.eachItemGraphicEl(function(p){l.remove(p)})},_renderTitle:function(e,t,n,i,r){var o=e.getData(),a=o.mapDimension("value"),s=e.getModel("title");if(s.get("show")){var l=s.get("offsetCenter"),u=r.cx+yn(l[0],r.r),c=r.cy+yn(l[1],r.r),d=+e.get("min"),h=+e.get("max"),f=i(Pi(e.getData().get(a,0),[d,h],[0,1],!0));this.group.add(new oi({silent:!0,style:Fi({},s,{x:u,y:c,text:o.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:f,forceRich:!0})}))}},_renderDetail:function(e,t,n,i,r){var o=e.getModel("detail"),a=+e.get("min"),s=+e.get("max");if(o.get("show")){var l=o.get("offsetCenter"),u=r.cx+yn(l[0],r.r),c=r.cy+yn(l[1],r.r),d=yn(o.get("width"),r.r),h=yn(o.get("height"),r.r),f=e.getData(),p=f.get(f.mapDimension("value"),0),_=i(Pi(p,[a,s],[0,1],!0));this.group.add(new oi({silent:!0,style:Fi({},o,{x:u,y:c,text:L_(p,o.get("formatter")),textWidth:isNaN(d)?null:d,textHeight:isNaN(h)?null:h,textAlign:"center",textVerticalAlign:"middle"},{autoColor:_,forceRich:!0})}))}}}),ah({type:"series.funnel",init:function(e){R_.superApply(this,"init",arguments),this.legendVisualProvider=new lc(ut(this.getData,this),ut(this.getRawData,this)),this._defaultLabelLine(e)},getInitialData:function(e,t){return Vl(this,{coordDimensions:["value"],encodeDefaulter:Lt(Dp,this)})},_defaultLabelLine:function(e){ms(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),n=R_.superCall(this,"getDataParams",e),i=t.mapDimension("value"),r=t.getSum(i);return n.percent=r?+(t.get(i,e)/r*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function Im(e,t){m.call(this);var n=new qr,i=new po,r=new oi;this.add(n),this.add(i),this.add(r),this.highDownOnUpdate=function(o,a){"emphasis"===a?(i.ignore=i.hoverIgnore,r.ignore=r.hoverIgnore):(i.ignore=i.normalIgnore,r.ignore=r.normalIgnore)},this.updateData(e,t,!0)}var P_=Im.prototype,hD=["itemStyle","opacity"];function Wh(e,t,n,i,r){er.call(this,e,t,n),this.type=i||"value",this.axisIndex=r}function Ws(e,t,n,i,r,o){e=e||0;var a=n[1]-n[0];if(null!=r&&(r=Yl(r,[0,a])),null!=o&&(o=Math.max(o,r??0)),"all"===i){var s=Math.abs(t[1]-t[0]);r=o=Yl(s=Yl(s,[0,a]),[r,o]),i=0}t[0]=Yl(t[0],n),t[1]=Yl(t[1],n);var l=Dm(t,i);t[i]+=e;var u=r||0,c=n.slice();l.sign<0?c[0]+=u:c[1]-=u,t[i]=Yl(t[i],c);var d=Dm(t,i);return null!=r&&(d.sign!==l.sign||d.span<r)&&(t[1-i]=t[i]+l.sign*r),d=Dm(t,i),null!=o&&d.span>o&&(t[1-i]=t[i]+d.sign*o),t}function Dm(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:0<n?-1:n<0?1:t?-1:1}}function Yl(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}P_.updateData=function(e,t,n){var i=this.childAt(0),r=e.hostModel,o=e.getItemModel(t),a=e.getItemLayout(t),s=e.getItemModel(t).get(hD);s=s??1,i.useStyle({}),n?(i.setShape({points:a.points}),i.setStyle({opacity:0}),Tr(i,{style:{opacity:s}},r,t)):Qn(i,{style:{opacity:s},shape:{points:a.points}},r,t);var l=o.getModel("itemStyle"),u=e.getItemVisual(t,"color");i.setStyle(De({lineJoin:"round",fill:u},l.getItemStyle(["opacity"]))),i.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),Ri(this)},P_._updateLabel=function(e,t){var n=this.childAt(1),i=this.childAt(2),r=e.hostModel,o=e.getItemModel(t),a=e.getItemLayout(t).label,s=e.getItemVisual(t,"color");Qn(n,{shape:{points:a.linePoints||a.linePoints}},r,t),Qn(i,{style:{x:a.x,y:a.y}},r,t),i.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10});var l=o.getModel("label"),u=o.getModel("emphasis.label"),c=o.getModel("labelLine"),d=o.getModel("emphasis.labelLine");s=e.getItemVisual(t,"color"),Qr(i.style,i.hoverStyle={},l,u,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:s,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign}),i.ignore=i.normalIgnore=!l.get("show"),i.hoverIgnore=!u.get("show"),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!d.get("show"),n.setStyle({stroke:s}),n.setStyle(c.getModel("lineStyle").getLineStyle()),n.hoverStyle=d.getModel("lineStyle").getLineStyle()},Ue(Im,m),fr.extend({type:"funnel",render:function(e,t,n){var i=e.getData(),r=this._data,o=this.group;i.diff(r).add(function(a){var s=new Im(i,a);i.setItemGraphicEl(a,s),o.add(s)}).update(function(a,s){var l=r.getItemGraphicEl(s);l.updateData(i,a),o.add(l),i.setItemGraphicEl(a,l)}).remove(function(a){var s=r.getItemGraphicEl(a);o.remove(s)}).execute(),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),Ni(Ch("funnel")),Gi(function(e,t,n){e.eachSeriesByType("funnel",function(i){var Oe,r=i.getData(),o=r.mapDimension("value"),a=i.get("sort"),s=(Oe=t,Ki(i.getBoxLayoutParams(),{width:Oe.getWidth(),height:Oe.getHeight()})),l=function(Ae,Oe){for(var Ge=Ae.mapDimension("value"),Pe=Ae.mapArray(Ge,function(rn){return rn}),st=[],Pt="ascending"===Oe,Ft=0,Nt=Ae.count();Ft<Nt;Ft++)st[Ft]=Ft;return"function"==typeof Oe?st.sort(Oe):"none"!==Oe&&st.sort(function(rn,fn){return Pt?Pe[rn]-Pe[fn]:Pe[fn]-Pe[rn]}),st}(r,a),u=i.get("orient"),c=s.width,d=s.height,h=s.x,f=s.y,p="horizontal"===u?[yn(i.get("minSize"),d),yn(i.get("maxSize"),d)]:[yn(i.get("minSize"),c),yn(i.get("maxSize"),c)],_=r.getDataExtent(o),v=i.get("min"),E=i.get("max");function F(Ae,Oe){if("horizontal"===u){var Ge,Pe=Pi(r.get(o,Ae)||0,[v,E],p,!0);switch(V){case"top":Ge=f;break;case"center":Ge=f+(d-Pe)/2;break;case"bottom":Ge=f+(d-Pe)}return[[Oe,Ge],[Oe,Ge+Pe]]}var st,Pt=Pi(r.get(o,Ae)||0,[v,E],p,!0);switch(V){case"left":st=h;break;case"center":st=h+(c-Pt)/2;break;case"right":st=h+c-Pt}return[[st,Oe],[st+Pt,Oe]]}null==v&&(v=Math.min(_[0],0)),null==E&&(E=_[1]);var Ae,V=i.get("funnelAlign"),q=i.get("gap"),j=(("horizontal"===u?c:d)-q*(r.count()-1))/r.count();"ascending"===a&&(j=-j,q=-q,"horizontal"===u?h+=c:f+=d,l=l.reverse());for(var X=0;X<l.length;X++){var Y=l[X],Q=l[X+1],oe=r.getItemModel(Y);if("horizontal"===u){var ce=oe.get("itemStyle.width");null==ce?ce=j:(ce=yn(ce,c),"ascending"===a&&(ce=-ce));var ge=F(Y,h),we=F(Q,h+ce);h+=ce+q,r.setItemLayout(Y,{points:ge.concat(we.slice().reverse())})}else{var Ce=oe.get("itemStyle.height");null==Ce?Ce=j:(Ce=yn(Ce,d),"ascending"===a&&(Ce=-Ce)),ge=F(Y,"horizontal"===u?h:f),we=F(Q,"horizontal"===u?h+ce:f+Ce),f+=Ce+q,r.setItemLayout(Y,{points:ge.concat(we.slice().reverse())})}}(Ae=r).each(function(Oe){var Ge,Pe,st,Pt,Ft=Ae.getItemModel(Oe),Nt=Ft.getModel("label").get("position"),rn=Ft.get("orient"),fn=Ft.getModel("labelLine"),Ln=Ae.getItemLayout(Oe),Zt=Ln.points,kn="inner"===Nt||"inside"===Nt||"center"===Nt||"insideLeft"===Nt||"insideRight"===Nt;if(kn)Ge="insideLeft"===Nt?(Pe=(Zt[0][0]+Zt[3][0])/2+5,st=(Zt[0][1]+Zt[3][1])/2,"left"):"insideRight"===Nt?(Pe=(Zt[1][0]+Zt[2][0])/2-5,st=(Zt[1][1]+Zt[2][1])/2,"right"):(Pe=(Zt[0][0]+Zt[1][0]+Zt[2][0]+Zt[3][0])/4,st=(Zt[0][1]+Zt[1][1]+Zt[2][1]+Zt[3][1])/4,"center"),Pt=[[Pe,st],[Pe,st]];else{var Rn,Vn,bi,fi,Ti=fn.get("length");Ge="left"===Nt?(Vn=(Zt[3][1]+Zt[0][1])/2,Pe=(bi=(Rn=(Zt[3][0]+Zt[0][0])/2)-Ti)-5,"right"):"right"===Nt?(Vn=(Zt[1][1]+Zt[2][1])/2,Pe=(bi=(Rn=(Zt[1][0]+Zt[2][0])/2)+Ti)+5,"left"):"top"===Nt?(Rn=(Zt[3][0]+Zt[0][0])/2,st=(fi=(Vn=(Zt[3][1]+Zt[0][1])/2)-Ti)-5,"center"):"bottom"===Nt?(Rn=(Zt[1][0]+Zt[2][0])/2,st=(fi=(Vn=(Zt[1][1]+Zt[2][1])/2)+Ti)+5,"center"):"rightTop"===Nt?(Rn="horizontal"===rn?Zt[3][0]:Zt[1][0],Vn="horizontal"===rn?Zt[3][1]:Zt[1][1],"horizontal"===rn?(st=(fi=Vn-Ti)-5,"center"):(Pe=(bi=Rn+Ti)+5,"top")):"rightBottom"===Nt?(Rn=Zt[2][0],Vn=Zt[2][1],"horizontal"===rn?(st=(fi=Vn+Ti)+5,"center"):(Pe=(bi=Rn+Ti)+5,"bottom")):"leftTop"===Nt?(Rn=Zt[0][0],Vn="horizontal"===rn?Zt[0][1]:Zt[1][1],"horizontal"===rn?(st=(fi=Vn-Ti)-5,"center"):(Pe=(bi=Rn-Ti)-5,"right")):"leftBottom"===Nt?(Rn="horizontal"===rn?Zt[1][0]:Zt[3][0],Vn="horizontal"===rn?Zt[1][1]:Zt[2][1],"horizontal"===rn?(st=(fi=Vn+Ti)+5,"center"):(Pe=(bi=Rn-Ti)-5,"right")):(Rn=(Zt[1][0]+Zt[2][0])/2,Vn=(Zt[1][1]+Zt[2][1])/2,"horizontal"===rn?(st=(fi=Vn+Ti)+5,"center"):(Pe=(bi=Rn+Ti)+5,"left")),"horizontal"===rn?Pe=bi=Rn:st=fi=Vn,Pt=[[Rn,Vn],[bi,fi]]}Ln.label={linePoints:Pt,x:Pe,y:st,verticalAlign:"middle",textAlign:Ge,inside:kn}})})}),to(uc("funnel")),Wh.prototype={constructor:Wh,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},Ue(Wh,er);var km=re,B_=Math.min,O_=Math.max,z_=Math.floor,fD=Math.ceil,V_=nr,pD=Math.PI;function Nm(e,t,n){this._axesMap=Ct(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}function Gh(e,t){return B_(O_(e,t[0]),t[1])}Nm.prototype={type:"parallel",constructor:Nm,_init:function(e,t,n){var r=e.parallelAxisIndex;km(e.dimensions,function(o,a){var s=r[a],l=t.getComponent("parallelAxis",s),u=this._axesMap.set(o,new Wh(o,El(l),[0,0],l.get("type"),s));u.onBand="category"===u.type&&l.get("boundaryGap"),u.inverse=l.get("inverse"),(l.axis=u).model=l,u.coordinateSystem=l.coordinateSystem=this},this)},update:function(e,t){this._updateAxesFromSeries(this._model,e)},containPoint:function(e){var t=this._makeLayoutInfo(),n=t.axisBase,i=t.layoutBase,r=t.pixelDimIndex,o=e[1-r],a=e[r];return n<=o&&o<=n+t.axisLength&&i<=a&&a<=i+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(e,t){t.eachSeries(function(n){if(e.contains(n,t)){var i=n.getData();km(this.dimensions,function(r){var o=this._axesMap.get(r);o.scale.unionExtentFromData(i,i.mapDimension(r)),ja(o.scale,o.model)},this)}},this)},resize:function(e,t){this._rect=Ki(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var e,t=this._model,n=this._rect,i=["x","y"],r=["width","height"],o=t.get("layout"),a="horizontal"===o?0:1,s=n[r[a]],l=[0,s],u=this.dimensions.length,c=Gh(t.get("axisExpandWidth"),l),d=Gh(t.get("axisExpandCount")||0,[0,u]),h=t.get("axisExpandable")&&3<u&&d<u&&1<d&&0<c&&0<s,f=t.get("axisExpandWindow");f?(e=Gh(f[1]-f[0],l),f[1]=f[0]+e):(e=Gh(c*(d-1),l),(f=[c*(t.get("axisExpandCenter")||z_(u/2))-e/2])[1]=f[0]+e);var p=(s-e)/(u-d);p<3&&(p=0);var _=[z_(V_(f[0]/c,1))+1,fD(V_(f[1]/c,1))-1];return{layout:o,pixelDimIndex:a,layoutBase:n[i[a]],layoutLength:s,axisBase:n[i[1-a]],axisLength:n[r[1-a]],axisExpandable:h,axisExpandWidth:c,axisCollapseWidth:p,axisExpandWindow:f,axisCount:u,winInnerIndices:_,axisExpandWindow0Pos:p/c*f[0]}},_layoutAxes:function(){var e=this._rect,t=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),r=i.layout;t.each(function(o){var a=[0,i.axisLength],s=o.inverse?1:0;o.setExtent(a[s],a[1-s])}),km(n,function(o,a){var s=(i.axisExpandable?function(f,p){var _,v,F=p.axisExpandWidth,q=p.axisCollapseWidth,j=p.winInnerIndices,X=q,Y=!1;return f<j[0]?(_=f*q,v=q):f<=j[1]?(_=p.axisExpandWindow0Pos+f*F-p.axisExpandWindow[0],X=F,Y=!0):(_=p.layoutLength-(p.axisCount-1-f)*q,v=q),{position:_,axisNameAvailableWidth:X,axisLabelShow:Y,nameTruncateMaxWidth:v}}:function(f,p){var _=p.layoutLength/(p.axisCount-1);return{position:_*f,axisNameAvailableWidth:_,axisLabelShow:!0}})(a,i),l={horizontal:{x:s.position,y:i.axisLength},vertical:{x:0,y:s.position}},c=[l[r].x+e.x,l[r].y+e.y],d={horizontal:pD/2,vertical:0}[r],h=gr();So(h,h,d),wr(h,h,c),this._axesLayout[o]={position:c,rotation:d,transform:h,axisNameAvailableWidth:s.axisNameAvailableWidth,axisLabelShow:s.axisLabelShow,nameTruncateMaxWidth:s.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(e){return this._axesMap.get(e)},dataToPoint:function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},eachActiveState:function(e,t,n,i){null==n&&(n=0),null==i&&(i=e.count());var r=this._axesMap,o=this.dimensions,a=[],s=[];re(o,function(p){a.push(e.mapDimension(p)),s.push(r.get(p).model)});for(var l=this.hasAxisBrushed(),u=n;u<i;u++){var c;if(l){c="active";for(var d=e.getValues(a,u),h=0,f=o.length;h<f;h++)if("inactive"===s[h].getActiveState(d[h])){c="inactive";break}}else c="normal";t(c,u)}},hasAxisBrushed:function(){for(var e=this.dimensions,t=this._axesMap,n=!1,i=0,r=e.length;i<r;i++)"normal"!==t.get(e[i]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(e,t){return Uo([e,0],this._axesLayout[t].transform)},getAxisLayout:function(e){return Fe(this._axesLayout[e])},getSlidedAxisExpandWindow:function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,i=t.axisExpandWindow.slice(),r=i[1]-i[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var a,s=e[n]-t.layoutBase-t.axisExpandWindow0Pos,l="slide",u=t.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),d=null!=c[0];return u?(d&&u&&s<r*c[0]?(l="jump",a=s-r*c[2]):d&&u&&s>r*(1-c[0])?(l="jump",a=s-r*(1-c[2])):0<=(a=s-r*c[1])&&(a=s-r*(1-c[1]))<=0&&(a=0),(a*=t.axisExpandWidth/u)?Ws(a,i,o,"all"):l="none"):((i=[O_(0,o[1]*s/(r=i[1]-i[0])-r/2)])[1]=B_(o[1],i[0]+r),i[0]=i[1]-r),{axisExpandWindow:i,behavior:l}}},Ir.register("parallel",{create:function(e,t){var n=[];return e.eachComponent("parallel",function(i,r){var o=new Nm(i,e,t);o.name="parallel_"+r,o.resize(i,t),(i.coordinateSystem=o).model=i,n.push(o)}),e.eachSeries(function(i){if("parallel"===i.get("coordinateSystem")){var r=e.queryComponents({mainType:"parallel",index:i.get("parallelIndex"),id:i.get("parallelId")})[0];i.coordinateSystem=r.coordinateSystem}}),n}});var H_=yi.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return ml([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(e){var t=this.activeIntervals=Fe(e);if(t)for(var n=t.length-1;0<=n;n--)Ss(t[n])},getActiveState:function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var i=0,r=t.length;i<r;i++)if(t[i][0]<=e&&e<=t[i][1])return"active";return"inactive"}});rt(H_.prototype,Es),Pl("parallel",H_,function(e,t){return t.type||(t.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),yi.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){yi.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(e){e&&rt(this.option,e,!0),this._initDimensions()},contains:function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},setAxisExpand:function(e){re(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])},this)},_initDimensions:function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];re(nt(this.dependentModels.parallelAxis,function(n){return(n.get("parallelIndex")||0)===this.componentIndex},this),function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)})}}),hi({type:"axisAreaSelect",event:"axisAreaSelected"},function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(n){n.axis.model.setActiveIntervals(e.intervals)})}),hi("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(n){n.setAxisExpand(e)})});var Qa=Lt,Jo=re,gD=Ke,Ac=Math.min,$l=Math.max,mD=Math.pow,bD={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},_D={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},W_={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},wD=0;function Kl(e){ki.call(this),this._zr=e,this.group=new m,this._track=[],this._covers=[],this._uid="brushController_"+wD++,this._handlers={},Jo(SD,function(t,n){this._handlers[n]=ut(t,this)},this)}function G_(e,t){var n=Uh[t.brushType].createCover(e,t);return n.__brushOption=t,q_(n,t),e.group.add(n),n}function U_(e,t){var n=Lm(t);return n.endCreating&&(n.endCreating(e,t),q_(t,t.__brushOption)),t}function j_(e,t){var n=t.__brushOption;Lm(t).updateCoverShape(e,t,n.range,n)}function q_(e,t){var n=t.z;null==n&&(n=1e4),e.traverse(function(i){i.z=n,i.z2=n})}function Em(e,t){Lm(t).updateCommon(e,t),j_(e,t)}function Lm(e){return Uh[e.__brushOption.brushType]}function Rm(e,t,n){var i,r=e._panels;if(!r)return!0;var o=e._transform;return Jo(r,function(a){a.isTargetByCursor(t,n,o)&&(i=a)}),i}function X_(e,t){var n=e._panels;if(!n)return!0;var i=t.__brushOption.panelId;return null==i||n[i]}function Pm(e){var t=e._covers,n=t.length;return Jo(t,function(i){e.group.remove(i)},e),t.length=0,!!n}function Gs(e,t){var n=gD(e._covers,function(i){var r=i.__brushOption,o=Fe(r.range);return{brushType:r.brushType,panelId:r.panelId,range:o}});e.trigger("brush",n,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function Z_(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function Y_(e,t,n,i){var r=new m;return r.add(new vi({name:"main",style:Om(n),silent:!0,draggable:!0,cursor:"move",drift:Qa(e,t,r,"nswe"),ondragend:Qa(Gs,t,{isEnd:!0})})),Jo(i,function(o){r.add(new vi({name:o,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Qa(e,t,r,o),ondragend:Qa(Gs,t,{isEnd:!0})}))}),r}function $_(e,t,n,i){var r=i.brushStyle.lineWidth||0,o=$l(r,6),a=n[0][0],s=n[1][0],l=a-r/2,u=s-r/2,c=n[0][1],d=n[1][1],h=c-o+r/2,f=d-o+r/2,p=c-a,_=d-s,v=p+r,E=_+r;ba(e,t,"main",a,s,p,_),i.transformable&&(ba(e,t,"w",l,u,o,E),ba(e,t,"e",h,u,o,E),ba(e,t,"n",l,u,v,o),ba(e,t,"s",l,f,v,o),ba(e,t,"nw",l,u,o,o),ba(e,t,"ne",h,u,o,o),ba(e,t,"sw",l,f,o,o),ba(e,t,"se",h,f,o,o))}function Bm(e,t){var n=t.__brushOption,i=n.transformable,r=t.childAt(0);r.useStyle(Om(n)),r.attr({silent:!i,cursor:i?"move":"default"}),Jo(["w","e","n","s","se","sw","ne","nw"],function(o){var a=t.childOfName(o),s=function l(u,c){return 1<c.length?("e"!==(f=[l(u,(c=c.split(""))[0]),l(u,c[1])])[0]&&"w"!==f[0]||f.reverse(),f.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[f=hp({w:"left",e:"right",n:"top",s:"bottom"}[c],Cs(u.group))];var f}(e,o);a&&a.attr({silent:!i,invisible:!i,cursor:i?_D[s]+"-resize":null})})}function ba(e,t,n,i,r,o,a){var l,u,c,s=t.childOfName(n);s&&s.setShape((l=zm(e,t,[[i,r],[i+o,r+a]]),{x:u=Ac(l[0][0],l[1][0]),y:c=Ac(l[0][1],l[1][1]),width:$l(l[0][0],l[1][0])-u,height:$l(l[0][1],l[1][1])-c}))}function Om(e){return De({strokeNoScale:!0},e.brushStyle)}function K_(e,t,n,i){var r=[Ac(e,n),Ac(t,i)],o=[$l(e,n),$l(t,i)];return[[r[0],o[0]],[r[1],o[1]]]}function J_(e,t,n,i,r,o,a,s){var l=i.__brushOption,u=e(l.range),c=Q_(n,o,a);Jo(r.split(""),function(d){var h=bD[d];u[h[0]][h[1]]+=c[h[0]]}),l.range=t(K_(u[0][0],u[1][0],u[0][1],u[1][1])),Em(n,i),Gs(n,{isEnd:!1})}function CD(e,t,n,i,r){var o=t.__brushOption.range,a=Q_(e,n,i);Jo(o,function(s){s[0]+=a[0],s[1]+=a[1]}),Em(e,t),Gs(e,{isEnd:!1})}function Q_(e,t,n){var i=e.group,r=i.transformCoordToLocal(t,n),o=i.transformCoordToLocal(0,0);return[r[0]-o[0],r[1]-o[1]]}function zm(e,t,n){var i=X_(e,t);return i&&!0!==i?i.clipPath(n,e._transform):Fe(n)}function Vm(e){var t=e.event;t.preventDefault&&t.preventDefault()}function Hm(e,t,n){return e.childOfName("main").contain(t,n)}function ew(e,t,n,i){var r,o=e._creatingCover,a=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(c){var d=c._track;if(!d.length)return!1;var h=d[d.length-1],f=d[0],p=h[0]-f[0],_=h[1]-f[1];return 6<mD(p*p+_*_,.5)}(e)||o){if(a&&!o){"single"===s.brushMode&&Pm(e);var l=Fe(s);l.brushType=tw(l.brushType,a),l.panelId=!0===a?null:a.panelId,o=e._creatingCover=G_(e,l),e._covers.push(o)}if(o){var u=Uh[tw(e._brushType,a)];o.__brushOption.range=u.getCreatingRange(zm(e,o,e._track)),i&&(U_(e,o),u.updateCommon(e,o)),j_(e,o),r={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&Rm(e,t,n)&&Pm(e)&&(r={isEnd:i,removeOnClick:!0});return r}function tw(e,t){return"auto"===e?t.defaultBrushType:e}Kl.prototype={constructor:Kl,enableBrush:function(e){return this._brushType&&function(t){var n=t._zr;(function(i,r,o){var a=Ug(i);a[r]===o&&(a[r]=null)})(n,"globalPan",t._uid),function(i,r){Jo(r,function(o,a){i.off(a,o)})}(n,t._handlers),t._brushType=t._brushOption=null}(this),e.brushType&&function(t,n){var i=t._zr;t._enableGlobalPan||function(r,o,a){Ug(r).globalPan=a}(i,0,t._uid),function(r,o){Jo(o,function(a,s){r.on(s,a)})}(i,t._handlers),t._brushType=n.brushType,t._brushOption=rt(Fe(W_),n,!0)}(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};re(e,function(n){t[n.panelId]=Fe(n)})}else this._panels=null;return this},mount:function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){Jo(this._covers,e,t)},updateCovers:function(e){e=Ke(e,function(l){return rt(Fe(W_),l,!0)});var n=this._covers,i=this._covers=[],r=this,o=this._creatingCover;return new ma(n,e,function(l,u){return a(l.__brushOption,u)},a).add(s).update(s).remove(function(l){n[l]!==o&&r.group.remove(n[l])}).execute(),this;function a(l,u){return(null!=l.id?l.id:"\0-brush-index-"+u)+"-"+l.brushType}function s(l,u){var c=e[l];if(null!=u&&n[u]===o)i[l]=n[u];else{var d=i[l]=null!=u?(n[u].__brushOption=c,n[u]):U_(r,G_(r,c));Em(r,d)}}},unmount:function(){return this.enableBrush(!1),Pm(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},tt(Kl,ki);var SD={mousedown:function(e){if(this._dragging)nw(this,e);else if(!e.target||!e.target.draggable){Vm(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=Rm(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var i=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function(o,a,s){if(o._brushType&&(v=o._zr,!((p=a)<0||p>v.getWidth()||undefined>v.getHeight()))){var l=o._zr,u=o._covers,c=Rm(o,a,s);if(!o._dragging)for(var d=0;d<u.length;d++){var h=u[d].__brushOption;if(c&&(!0===c||h.panelId===c.panelId)&&Uh[h.brushType].contain(u[d],s[0],s[1]))return}c&&l.setCursorStyle("crosshair")}var p,v}(this,e,i),this._dragging){Vm(e);var r=ew(this,e,i,!1);r&&Gs(this,r)}},mouseup:function(e){nw(this,e)}};function nw(e,t){if(e._dragging){Vm(t);var r=e.group.transformCoordToLocal(t.offsetX,t.offsetY),o=ew(e,t,r,!0);e._dragging=!1,e._track=[],e._creatingCover=null,o&&Gs(e,o)}}var Uh={lineX:iw(0),lineY:iw(1),rect:{createCover:function(e,t){return Y_(Qa(J_,function(n){return n},function(n){return n}),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=Z_(e);return K_(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,i){$_(e,t,n,i)},updateCommon:Bm,contain:Hm},polygon:{createCover:function(e,t){var n=new m;return n.add(new po({name:"main",style:Om(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new qr({name:"main",draggable:!0,drift:Qa(CD,e,t),ondragend:Qa(Gs,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,i){t.childAt(0).setShape({points:zm(e,t,n)})},updateCommon:Bm,contain:Hm}};function iw(e){return{createCover:function(t,n){return Y_(Qa(J_,function(i){var r=[i,[0,100]];return e&&r.reverse(),r},function(i){return i[e]}),t,n,[["w","e"],["n","s"]][e])},getCreatingRange:function(t){var n=Z_(t);return[Ac(n[0][e],n[1][e]),$l(n[0][e],n[1][e])]},updateCoverShape:function(t,n,i,r){var o,a=X_(t,n);if(!0!==a&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(e,t._transform);else{var s=t._zr;o=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[i,o];e&&l.reverse(),$_(t,n,l,r)},updateCommon:Bm,contain:Hm}}function rw(e){return e=Fm(e),function(t,n){return Sy(t,e)}}function ow(e,t){return e=Fm(e),function(n){var i=t??n,o=i?e.x:e.y;return[o,o+((i?e.width:e.height)||0)]}}function aw(e,t,n){return e=Fm(e),function(i,r,o){return e.contain(r[0],r[1])&&!Ah(i,t,n)}}function Fm(e){return g.create(e)}var MD=["axisLine","axisTickLabel","axisName"],TD=lr({type:"parallelAxis",init:function(e,t){TD.superApply(this,"init",arguments),(this._brushController=new Kl(t.getZr())).on("brush",ut(this._onBrush,this))},render:function(e,t,n,i){if(f=e,!(_=i)||"axisAreaSelect"!==_.type||t.findComponents({mainType:"parallelAxis",query:_})[0]!==f){this.axisModel=e,this.api=n,this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new m,this.group.add(this._axisGroup),e.get("show")){var o=function(f,p){return p.getComponent("parallel",f.get("parallelIndex"))}(e,t),a=o.coordinateSystem,s=e.getAreaSelectStyle(),l=s.width,c=fe({strokeContainThreshold:l},a.getAxisLayout(e.axis.dim)),d=new Yr(e,c);re(MD,d.add,d),this._axisGroup.add(d.getGroup()),this._refreshBrushController(c,s,e,o,l,n),Ed(r,this._axisGroup,i&&!1===i.animation?null:e)}}var f,_},_refreshBrushController:function(e,t,n,i,r,o){var c,d,a=n.axis.getExtent(),s=a[1]-a[0],l=Math.min(30,.1*Math.abs(s)),u=g.create({x:a[0],y:-r/2,width:s,height:r});u.x-=l,u.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,position:e.position}).setPanels([{panelId:"pl",clipPath:rw(u),isTargetByCursor:aw(u,o,i),getLinearBrushOtherExtent:ow(u,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers((d=(c=n).axis,Ke(c.activeIntervals,function(h){return{brushType:"lineX",panelId:"pl",range:[d.dataToCoord(h[0],!0),d.dataToCoord(h[1],!0)]}})))},_onBrush:function(e,t){var n=this.axisModel,i=n.axis,r=Ke(e,function(o){return[i.coordToData(o.range[0],!0),i.coordToData(o.range[1],!0)]});!n.option.realtime!==t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:r})},dispose:function(){this._brushController.dispose()}});lr({type:"parallel",render:function(e,t,n){this._model=e,this._api=n,this._handlers||(this._handlers={},re(AD,function(i,r){n.getZr().on(r,this._handlers[r]=ut(i,this))},this)),Gu(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},dispose:function(e,t){re(this._handlers,function(n,i){t.getZr().off(i,n)}),this._handlers=null},_throttledDispatchExpand:function(e){this._dispatchExpand(e)},_dispatchExpand:function(e){e&&this._api.dispatchAction(fe({type:"parallelAxisExpand"},e))}});var AD={mousedown:function(e){Wm(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(Wm(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(5<Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&Wm(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i&&null})}}};function Wm(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}function sw(e,t,n,i){for(var r,o=[],a=0;a<n.length;a++){var s=n[a],l=e.get(e.mapDimension(s),t);r=l,("category"===i.getAxis(s).type?null==r:null==r||isNaN(r))||o.push(i.dataToPoint(l,s))}return o}function lw(e,t,n,i,r){var o=sw(e,n,i,r),a=new po({shape:{points:o},silent:!0,z2:10});return t.add(a),e.setItemGraphicEl(n,a),a}function uw(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:t??.3}}function Gm(e,t,n,i){var r=i.lineStyle;t.hasItemOption&&(r=t.getItemModel(n).getModel("lineStyle").getLineStyle()),e.useStyle(r);var o=e.style;o.fill=null,o.stroke=t.getItemVisual(n,"color"),o.opacity=t.getItemVisual(n,"opacity"),i.smooth&&(e.shape.smooth=i.smooth)}br(function(e){(function(t){if(!t.parallel){var n=!1;re(t.series,function(i){i&&"parallel"===i.type&&(n=!0)}),n&&(t.parallel=[{}])}})(e),function(t){re(vr(t.parallelAxis),function(n){if(Mt(n)){var i=n.parallelIndex||0,r=vr(t.parallel)[i];r&&r.parallelAxisDefault&&rt(n,r.parallelAxisDefault,!1)}})}(e)}),Wi.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var n=this.getSource();return function(i,r){if(!i.encodeDefine){var o=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(o){var a=i.encodeDefine=Ct();re(o.dimensions,function(s){var l=+s.replace("dim","");a.set(s,l)})}}}(n,this),ya(n,this)},getRawIndicesByActiveState:function(e){var t=this.coordinateSystem,n=this.getData(),i=[];return t.eachActiveState(n,function(r,o){e===r&&i.push(n.getRawIndex(o))}),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),fr.extend({type:"parallel",init:function(){this._dataGroup=new m,this.group.add(this._dataGroup)},render:function(e,t,n,i){var d,h,p,_,v,E,r=this._dataGroup,o=e.getData(),a=this._data,s=e.coordinateSystem,l=s.dimensions,u=uw(e);if(o.diff(a).add(function(d){Gm(lw(o,r,d,l,s),o,d,u)}).update(function(d,h){var f=a.getItemGraphicEl(h),p=sw(o,d,l,s);o.setItemGraphicEl(d,f),Qn(f,{shape:{points:p}},i&&!1===i.animation?null:e,d),Gm(f,o,d,u)}).remove(function(d){var h=a.getItemGraphicEl(d);r.remove(h)}).execute(),!this._initialized){this._initialized=!0;var c=(h=e,p=(d=s).model,_=d.getRect(),v=new vi({shape:{x:_.x,y:_.y,width:_.width,height:_.height}}),E="horizontal"===p.get("layout")?"width":"height",v.setShape(E,0),Tr(v,{shape:{width:_.width,height:_.height}},h,function(){setTimeout(function(){r.removeClipPath()})}),v);r.setClipPath(c)}this._data=o},incrementalPrepareRender:function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,n){for(var i=t.getData(),r=t.coordinateSystem,o=r.dimensions,a=uw(t),s=e.start;s<e.end;s++){var l=lw(i,this._dataGroup,s,o,r);l.incremental=!0,Gm(l,i,s,a)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var ID=["lineStyle","normal","opacity"];Ni({seriesType:"parallel",reset:function(e,t,n){var i=e.getModel("itemStyle"),r=e.getModel("lineStyle"),o=t.get("color"),a=r.get("color")||i.get("color")||o[e.seriesIndex%o.length],s=e.get("inactiveOpacity"),l=e.get("activeOpacity"),u=e.getModel("lineStyle").getLineStyle(),c=e.coordinateSystem,d=e.getData(),h={normal:u.opacity,active:l,inactive:s};return d.setVisual("color",a),{progress:function(f,p){c.eachActiveState(p,function(_,v){var E=h[_];if("normal"===_&&p.hasItemOption){var F=p.getItemModel(v).get(ID,!0);null!=F&&(E=F)}p.setItemVisual(v,"opacity",E)},f.start,f.end)}}}});var cw=Wi.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var n=e.edges||e.links,i=e.data||e.nodes,r=e.levels,o=this.levelModels={},a=0;a<r.length;a++)null!=r[a].depth&&0<=r[a].depth&&(o[r[a].depth]=new di(r[a],this,t));if(i&&n)return y_(i,n,this,!0,function(s,l){s.wrapMethod("getItemModel",function(u,c){return u.customizeGetParent(function(d){var h=this.parentModel,f=h.getData().getItemLayout(c).depth;return h.levelModels[f]||this.parentModel}),u}),l.wrapMethod("getItemModel",function(u,c){return u.customizeGetParent(function(d){var h=this.parentModel,f=h.getGraph().getEdgeByIndex(c).node1.getLayout().depth;return h.levelModels[f]||this.parentModel}),u})}).data},setNodePosition:function(e,t){var n=this.option.data[e];n.localX=t[0],n.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,n){if("edge"===n){var i=this.getDataParams(e,n),r=i.data,o=r.source+" -- "+r.target;return i.value&&(o+=" : "+i.value),Oi(o)}if("node"!==n)return cw.superCall(this,"formatTooltip",e,t);var a=this.getGraph().getNodeByIndex(e).getLayout().value,s=this.getDataParams(e,n).data.name;return a&&(o=s+" : "+a),Oi(o)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},getDataParams:function(e,t){var n=cw.superCall(this,"getDataParams",e,t);if(null==n.value&&"node"===t){var i=this.getGraph().getNodeByIndex(e).getLayout().value;n.value=i}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),dw=["itemStyle","opacity"],Us=["emphasis","itemStyle","opacity"],hw=["lineStyle","opacity"],jh=["emphasis","lineStyle","opacity"];function fw(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function qh(e,t,n){var i=e.getGraphicEl(),r=fw(e,t);null!=n&&(null==r&&(r=1),r*=n),i.downplay&&i.downplay(),i.traverse(function(o){"group"!==o.type&&o.setStyle("opacity",r)})}function Eo(e,t){var n=fw(e,t),i=e.getGraphicEl();i.traverse(function(r){"group"!==r.type&&r.setStyle("opacity",n)}),i.highlight&&i.highlight()}var DD=go({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function pw(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&0<=t.depth}function Um(e,t,n,i,r){var o="vertical"===r?"x":"y";re(e,function(a){var s,l,u;a.sort(function(p,_){return p.getLayout()[o]-_.getLayout()[o]});for(var c=0,d=a.length,h="vertical"===r?"dx":"dy",f=0;f<d;f++)0<(u=c-(l=a[f]).getLayout()[o])&&(s=l.getLayout()[o]+u,l.setLayout("vertical"===r?{x:s}:{y:s},!0)),c=l.getLayout()[o]+l.getLayout()[h]+t;if(0<(u=c-t-("vertical"===r?i:n)))for(s=l.getLayout()[o]-u,l.setLayout("vertical"===r?{x:s}:{y:s},!0),c=s,f=d-2;0<=f;--f)0<(u=(l=a[f]).getLayout()[o]+l.getLayout()[h]+t-c)&&(s=l.getLayout()[o]-u,l.setLayout("vertical"===r?{x:s}:{y:s},!0)),c=l.getLayout()[o]})}function kD(e,t,n){re(e.slice().reverse(),function(i){re(i,function(r){if(r.outEdges.length){var o=ts(r.outEdges,ND,n)/ts(r.outEdges,Xh,n);if(isNaN(o)){var a=r.outEdges.length;o=a?ts(r.outEdges,ED,n)/a:0}if("vertical"===n){var s=r.getLayout().x+(o-es(r,n))*t;r.setLayout({x:s},!0)}else{var l=r.getLayout().y+(o-es(r,n))*t;r.setLayout({y:l},!0)}}})})}function ND(e,t){return es(e.node2,t)*e.getValue()}function ED(e,t){return es(e.node2,t)}function LD(e,t){return es(e.node1,t)*e.getValue()}function RD(e,t){return es(e.node1,t)}function es(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function Xh(e){return e.getValue()}function ts(e,t,n){for(var i=0,r=e.length,o=-1;++o<r;){var a=+t.call(e,e[o],n);isNaN(a)||(i+=a)}return i}function PD(e,t,n){re(e,function(i){re(i,function(r){if(r.inEdges.length){var o=ts(r.inEdges,LD,n)/ts(r.inEdges,Xh,n);if(isNaN(o)){var a=r.inEdges.length;o=a?ts(r.inEdges,RD,n)/a:0}if("vertical"===n){var s=r.getLayout().x+(o-es(r,n))*t;r.setLayout({x:s},!0)}else{var l=r.getLayout().y+(o-es(r,n))*t;r.setLayout({y:l},!0)}}})})}Zr({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,n){var h,f,_,i=this,r=e.getGraph(),o=this.group,a=e.layoutInfo,s=a.width,l=a.height,u=e.getData(),c=e.getData("edge"),d=e.get("orient");this._model=e,o.removeAll(),o.attr("position",[a.x,a.y]),r.eachEdge(function(h){var f=new DD;f.dataIndex=h.dataIndex,f.seriesIndex=e.seriesIndex,f.dataType="edge";var p,_,v,E,F,V,q,j,X=h.getModel("lineStyle"),Y=X.get("curveness"),Q=h.node1.getLayout(),oe=h.node1.getModel(),ce=oe.get("localX"),ge=oe.get("localY"),we=h.node2.getLayout(),Ce=h.node2.getModel(),Ae=Ce.get("localX"),Oe=Ce.get("localY"),Ge=h.getLayout();switch(f.shape.extent=Math.max(1,Ge.dy),j="vertical"===(f.shape.orient=d)?(F=p=(null!=ce?ce*s:Q.x)+Ge.sy,V=(_=(null!=ge?ge*l:Q.y)+Q.dy)*(1-Y)+(E=null!=Oe?Oe*l:we.y)*Y,q=v=(null!=Ae?Ae*s:we.x)+Ge.ty,_*Y+E*(1-Y)):(F=(p=(null!=ce?ce*s:Q.x)+Q.dx)*(1-Y)+(v=null!=Ae?Ae*s:we.x)*Y,V=_=(null!=ge?ge*l:Q.y)+Ge.sy,q=p*Y+v*(1-Y),E=(null!=Oe?Oe*l:we.y)+Ge.ty),f.setShape({x1:p,y1:_,x2:v,y2:E,cpx1:F,cpy1:V,cpx2:q,cpy2:j}),f.setStyle(X.getItemStyle()),f.style.fill){case"source":f.style.fill=h.node1.getVisual("color");break;case"target":f.style.fill=h.node2.getVisual("color")}Ri(f,h.getModel("emphasis.lineStyle").getItemStyle()),o.add(f),c.setItemGraphicEl(h.dataIndex,f)}),r.eachNode(function(h){var f=h.getLayout(),p=h.getModel(),_=p.get("localX"),v=p.get("localY"),E=p.getModel("label"),F=p.getModel("emphasis.label"),V=new vi({shape:{x:null!=_?_*s:f.x,y:null!=v?v*l:f.y,width:f.dx,height:f.dy},style:p.getModel("itemStyle").getItemStyle()}),q=h.getModel("emphasis.itemStyle").getItemStyle();Qr(V.style,q,E,F,{labelFetcher:e,labelDataIndex:h.dataIndex,defaultText:h.id,isRectText:!0}),V.setStyle("fill",h.getVisual("color")),Ri(V,q),o.add(V),u.setItemGraphicEl(h.dataIndex,V),V.dataType="node"}),u.eachItemGraphicEl(function(h,f){var p=u.getItemModel(f);p.get("draggable")&&(h.drift=function(_,v){i._focusAdjacencyDisabled=!0,this.shape.x+=_,this.shape.y+=v,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:u.getRawIndex(f),localX:this.shape.x/s,localY:this.shape.y/l})},h.ondragend=function(){i._focusAdjacencyDisabled=!1},h.draggable=!0,h.cursor="move"),h.highlight=function(){this.trigger("emphasis")},h.downplay=function(){this.trigger("normal")},h.focusNodeAdjHandler&&h.off("mouseover",h.focusNodeAdjHandler),h.unfocusNodeAdjHandler&&h.off("mouseout",h.unfocusNodeAdjHandler),p.get("focusNodeAdjacency")&&(h.on("mouseover",h.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:h.dataIndex}))}),h.on("mouseout",h.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),c.eachItemGraphicEl(function(h,f){var p=c.getItemModel(f);h.focusNodeAdjHandler&&h.off("mouseover",h.focusNodeAdjHandler),h.unfocusNodeAdjHandler&&h.off("mouseout",h.unfocusNodeAdjHandler),p.get("focusNodeAdjacency")&&(h.on("mouseover",h.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:h.dataIndex}))}),h.on("mouseout",h.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),!this._data&&e.get("animation")&&o.setClipPath((h=o.getBoundingRect(),f=e,Tr(_=new vi({shape:{x:h.x-10,y:h.y-10,width:0,height:h.height+20}}),{shape:{width:h.width+20}},f,function(){o.removeClipPath()}),_)),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,i){var r=e.getData(),o=r.graph,a=i.dataIndex,s=r.getItemModel(a),l=i.edgeDataIndex;if(null!=a||null!=l){var u=o.getNodeByIndex(a),c=o.getEdgeByIndex(l);if(o.eachNode(function(h){qh(h,dw,.1)}),o.eachEdge(function(h){qh(h,hw,.1)}),u){Eo(u,Us);var d=s.get("focusNodeAdjacency");"outEdges"===d?re(u.outEdges,function(h){h.dataIndex<0||(Eo(h,jh),Eo(h.node2,Us))}):"inEdges"===d?re(u.inEdges,function(h){h.dataIndex<0||(Eo(h,jh),Eo(h.node1,Us))}):"allEdges"===d&&re(u.edges,function(h){h.dataIndex<0||(Eo(h,jh),h.node1!==u&&Eo(h.node1,Us),h.node2!==u&&Eo(h.node2,Us))})}c&&(Eo(c,jh),Eo(c.node1,Us),Eo(c.node2,Us))}},unfocusNodeAdjacency:function(e,t,n,i){var r=e.getGraph();r.eachNode(function(o){qh(o,dw)}),r.eachEdge(function(o){qh(o,hw)})}}),hi({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){n.setNodePosition(e.dataIndex,[e.localX,e.localY])})}),Gi(function(e,t,n){e.eachSeriesByType("sankey",function(i){var f,r=i.get("nodeWidth"),o=i.get("nodeGap"),a=(f=t,Ki(i.getBoxLayoutParams(),{width:f.getWidth(),height:f.getHeight()})),s=(i.layoutInfo=a).width,l=a.height,u=i.getGraph(),c=u.nodes,d=u.edges;re(c,function(f){var p=ts(f.outEdges,Xh),_=ts(f.inEdges,Xh),v=f.getValue()||0,E=Math.max(p,_,v);f.setLayout({value:E},!0)}),function(h,f,p,_,v,E,F,V,q){var j,Y;(function(j,X,Y,Q,oe,ce,ge){for(var we=[],Ce=[],Ae=[],Oe=[],Ge=0,Pe=0;Pe<X.length;Pe++)we[Pe]=1;for(Pe=0;Pe<j.length;Pe++)Ce[Pe]=j[Pe].inEdges.length,0===Ce[Pe]&&Ae.push(j[Pe]);for(var st=-1;Ae.length;){for(var Pt=0;Pt<Ae.length;Pt++){var Ft=Ae[Pt],Nt=Ft.hostGraph.data.getRawDataItem(Ft.dataIndex),rn=null!=Nt.depth&&0<=Nt.depth;rn&&Nt.depth>st&&(st=Nt.depth),Ft.setLayout({depth:rn?Nt.depth:Ge},!0),Ft.setLayout("vertical"===ce?{dy:Y}:{dx:Y},!0);for(var fn=0;fn<Ft.outEdges.length;fn++){var Ln=Ft.outEdges[fn];we[X.indexOf(Ln)]=0;var kn=Ln.node2;0==--Ce[j.indexOf(kn)]&&Oe.indexOf(kn)<0&&Oe.push(kn)}}++Ge,Ae=Oe,Oe=[]}for(Pe=0;Pe<we.length;Pe++)if(1===we[Pe])throw new Error("Sankey is a DAG, the original data has cycle!");var fi,Ti,Vn=Ge-1<st?st:Ge-1;ge&&"left"!==ge&&function(bi,fi,Ti,Or){if("right"===fi){for(var Nr=[],Ta=bi,ss=0;Ta.length;){for(var Yc=0;Yc<Ta.length;Yc++){var v0=Ta[Yc];v0.setLayout({skNodeHeight:ss},!0);for(var y0=0;y0<v0.inEdges.length;y0++){var BM=v0.inEdges[y0];Nr.indexOf(BM.node1)<0&&Nr.push(BM.node1)}}Ta=Nr,Nr=[],++ss}re(bi,function($c){pw($c)||$c.setLayout({depth:Math.max(0,Or-$c.getLayout().skNodeHeight)},!0)})}else"justify"===fi&&(Vk=Or,re(bi,function(x0){pw(x0)||x0.outEdges.length||x0.setLayout({depth:Vk},!0)}));var Vk}(j,ge,0,Vn),fi="vertical"===ce?(oe-Y)/Vn:(Q-Y)/Vn,Ti=ce,re(j,function(Or){var Nr=Or.getLayout().depth*fi;Or.setLayout("vertical"===Ti?{y:Nr}:{x:Nr},!0)})})(h,f,p,v,E,V,q),function(j,X,Y,Q,oe,ce,ge){var Ge,Pe,st,we=(Ge=[],Pe="vertical"===ge?"y":"x",(st=Yf(j,function(Pt){return Pt.getLayout()[Pe]})).keys.sort(function(Pt,Ft){return Pt-Ft}),re(st.keys,function(Pt){Ge.push(st.buckets.get(Pt))}),Ge);(function(Ae,Oe,Ge,Pe,st,Pt){var Ft=1/0;re(Ae,function(Nt){var rn=Nt.length,fn=0;re(Nt,function(Zt){fn+=Zt.getLayout().value});var Ln="vertical"===Pt?(Pe-(rn-1)*st)/fn:(Ge-(rn-1)*st)/fn;Ln<Ft&&(Ft=Ln)}),re(Ae,function(Nt){re(Nt,function(rn,fn){var Ln=rn.getLayout().value*Ft;"vertical"===Pt?(rn.setLayout({x:fn},!0),rn.setLayout({dx:Ln},!0)):(rn.setLayout({y:fn},!0),rn.setLayout({dy:Ln},!0))})}),re(Oe,function(Nt){var rn=+Nt.getValue()*Ft;Nt.setLayout({dy:rn},!0)})})(we,X,Y,Q,oe,ge),Um(we,oe,Y,Q,ge);for(var Ce=1;0<ce;ce--)kD(we,Ce*=.99,ge),Um(we,oe,Y,Q,ge),PD(we,Ce,ge),Um(we,oe,Y,Q,ge)}(h,f,E,v,_,F,V),Y="vertical"===V?"x":"y",re(j=h,function(Q){Q.outEdges.sort(function(oe,ce){return oe.node2.getLayout()[Y]-ce.node2.getLayout()[Y]}),Q.inEdges.sort(function(oe,ce){return oe.node1.getLayout()[Y]-ce.node1.getLayout()[Y]})}),re(j,function(Q){var oe=0,ce=0;re(Q.outEdges,function(ge){ge.setLayout({sy:oe},!0),oe+=ge.getLayout().dy}),re(Q.inEdges,function(ge){ge.setLayout({ty:ce},!0),ce+=ge.getLayout().dy})})}(c,d,r,o,s,l,0!==nt(c,function(h){return 0===h.getLayout().value}).length?0:i.get("layoutIterations"),i.get("orient"),i.get("nodeAlign"))})}),Ni(function(e,t){e.eachSeriesByType("sankey",function(n){var i=n.getGraph().nodes;if(i.length){var r=1/0,o=-1/0;re(i,function(a){var s=a.getLayout().value;s<r&&(r=s),o<s&&(o=s)}),re(i,function(a){var s=new Ii({type:"color",mappingMethod:"linear",dataExtent:[r,o],visual:n.get("color")}).mapValueToVisual(a.getLayout().value),l=a.getModel().get("itemStyle.color");a.setVisual("color",null!=l?l:s)})}})});var gw={_baseAxisDim:null,getInitialData:function(e,t){var n,i,r=t.getComponent("xAxis",this.get("xAxisIndex")),o=t.getComponent("yAxis",this.get("yAxisIndex")),a=r.get("type"),s=o.get("type");"category"===a?(e.layout="horizontal",n=r.getOrdinalMeta(),i=!0):"category"===s?(e.layout="vertical",n=o.getOrdinalMeta(),i=!0):e.layout=e.layout||"horizontal";var l=["x","y"],u="horizontal"===e.layout?0:1,c=this._baseAxisDim=l[u],d=l[1-u],h=[r,o],f=h[u].get("type"),p=h[1-u].get("type"),_=e.data;if(_&&i){var v=[];re(_,function(V,q){var j;V.value&&Ye(V.value)?(j=V.value.slice(),V.value.unshift(q)):Ye(V)?(j=V.slice(),V.unshift(q)):j=V,v.push(j)}),e.data=v}var E=this.defaultValueDimensions,F=[{name:c,type:sh(f),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:sh(p),dimsDef:E.slice()}];return Vl(this,{coordDimensions:F,dimensionsCount:E.length+1,encodeDefaulter:Lt(Xy,F,this)})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};tt(Wi.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),gw,!0);var BD=["itemStyle"],OD=["emphasis","itemStyle"],zD=(fr.extend({type:"boxplot",render:function(e,t,n){var i=e.getData(),r=this.group,o=this._data;this._data||r.removeAll();var a="horizontal"===e.get("layout")?1:0;i.diff(o).add(function(s){if(i.hasValue(s)){var l=mw(i.getItemLayout(s),i,s,a,!0);i.setItemGraphicEl(s,l),r.add(l)}}).update(function(s,l){var u=o.getItemGraphicEl(l);if(i.hasValue(s)){var c=i.getItemLayout(s);u?vw(c,u,i,s):u=mw(c,i,s,a),r.add(u),i.setItemGraphicEl(s,u)}else r.remove(u)}).remove(function(s){var l=o.getItemGraphicEl(s);l&&r.remove(l)}).execute(),this._data=i},remove:function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(i){i&&t.remove(i)})},dispose:en}),ci.extend({type:"boxplotBoxPath",shape:{},buildPath:function(e,t){var n=t.points,i=0;for(e.moveTo(n[i][0],n[i][1]),i++;i<4;i++)e.lineTo(n[i][0],n[i][1]);for(e.closePath();i<n.length;i++)e.moveTo(n[i][0],n[i][1]),i++,e.lineTo(n[i][0],n[i][1])}}));function mw(e,t,n,i,r){var s,l,u,o=e.ends,a=new zD({shape:{points:r?(s=o,l=i,u=e,Ke(s,function(c){return(c=c.slice())[l]=u.initBaseline,c})):o}});return vw(e,a,t,n,r),a}function vw(e,t,n,i,r){(0,fa[r?"initProps":"updateProps"])(t,{shape:{points:e.ends}},n.hostModel,i);var a=n.getItemModel(i),s=a.getModel(BD),l=n.getItemVisual(i,"color"),u=s.getItemStyle(["borderColor"]);u.stroke=l,u.strokeNoScale=!0,t.useStyle(u),t.z2=100,Ri(t,a.getModel(OD).getItemStyle())}var yw=["itemStyle","borderColor"],Ic=re;Ni(function(e,t){var n=e.get("color");e.eachRawSeriesByType("boxplot",function(i){var r=n[i.seriesIndex%n.length],o=i.getData();o.setVisual({legendSymbol:"roundRect",color:i.get(yw)||r}),e.isSeriesFiltered(i)||o.each(function(a){var s=o.getItemModel(a);o.setItemVisual(a,{color:s.get(yw,!0)})})})}),Gi(function(e){var t=function(n){var i=[],r=[];return n.eachSeriesByType("boxplot",function(o){var a=o.getBaseAxis(),s=Je(r,a);s<0&&(r[s=r.length]=a,i[s]={axis:a,seriesModels:[]}),i[s].seriesModels.push(o)}),i}(e);Ic(t,function(n){var i=n.seriesModels;i.length&&(function(r){var o,a,s=r.axis,l=r.seriesModels,u=l.length,c=r.boxWidthList=[],d=r.boxOffsetList=[],h=[];if("category"===s.type)a=s.getBandWidth();else{var f=0;Ic(l,function(F){f=Math.max(f,F.getData().count())}),o=s.getExtent(),Math.abs(o[1]-o[0])}Ic(l,function(F){var V=F.get("boxWidth");Ye(V)||(V=[V,V]),h.push([yn(V[0],a)||0,yn(V[1],a)||0])});var p=.8*a-2,_=p/u*.3,v=(p-_*(u-1))/u,E=v/2-p/2;Ic(l,function(F,V){d.push(E),E+=_+v,c.push(Math.min(Math.max(v,h[V][0]),h[V][1]))})}(n),Ic(i,function(r,o){!function(a,s,l){var u=a.coordinateSystem,c=a.getData(),d=l/2,h="horizontal"===a.get("layout")?0:1,f=1-h,p=["x","y"],_=c.mapDimension(p[h]),v=c.mapDimension(p[f],!0);if(!(null==_||v.length<5))for(var E=0;E<c.count();E++){var F=c.get(_,E),V=oe(F,v[2],E),q=oe(F,v[0],E),j=oe(F,v[1],E),X=oe(F,v[3],E),Y=oe(F,v[4],E),Q=[];ce(Q,j,0),ce(Q,X,1),Q.push(q,j,Y,X),ge(Q,q),ge(Q,Y),ge(Q,V),c.setItemLayout(E,{initBaseline:V[f],ends:Q})}function oe(we,Ce,Ae){var Oe,Ge=c.get(Ce,Ae),Pe=[];return Pe[h]=we,Pe[f]=Ge,isNaN(we)||isNaN(Ge)?Oe=[NaN,NaN]:(Oe=u.dataToPoint(Pe))[h]+=s,Oe}function ce(we,Ce,Ae){var Oe=Ce.slice(),Ge=Ce.slice();Oe[h]+=d,Ge[h]-=d,Ae?we.push(Oe,Ge):we.push(Ge,Oe)}function ge(we,Ce){var Ae=Ce.slice(),Oe=Ce.slice();Ae[h]-=d,Oe[h]+=d,we.push(Ae,Oe)}}(r,n.boxOffsetList[o],n.boxWidthList[o])}))})}),tt(Wi.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(e,t,n){var i=t.getItemLayout(e);return i&&n.rect(i.brushRect)}}),gw,!0);var xw=["itemStyle"],VD=["emphasis","itemStyle"],bw=["color","color0","borderColor","borderColor0"],HD=(fr.extend({type:"candlestick",render:function(e,t,n){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,i){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e){var t=e.getData(),n=this._data,i=this.group,r=t.getLayout("isSimpleBox"),o=e.get("clip",!0),a=e.coordinateSystem,s=a.getArea&&a.getArea();this._data||i.removeAll(),t.diff(n).add(function(l){if(t.hasValue(l)){var u,c=t.getItemLayout(l);if(o&&_w(s,c))return;Tr(u=jm(c,0,!0),{shape:{points:c.ends}},e,l),qm(u,t,l,r),i.add(u),t.setItemGraphicEl(l,u)}}).update(function(l,u){var c=n.getItemGraphicEl(u);if(t.hasValue(l)){var d=t.getItemLayout(l);o&&_w(s,d)?i.remove(c):(c?Qn(c,{shape:{points:d.ends}},e,l):c=jm(d),qm(c,t,l,r),i.add(c),t.setItemGraphicEl(l,c))}else i.remove(c)}).remove(function(l){var u=n.getItemGraphicEl(l);u&&i.remove(u)}).execute(),this._data=t},_renderLarge:function(e){this._clear(),Cw(e,this.group);var t=e.get("clip",!0)?vh(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},_incrementalRenderNormal:function(e,t){for(var n,i=t.getData(),r=i.getLayout("isSimpleBox");null!=(n=e.next());){var o;qm(o=jm(i.getItemLayout(n)),i,n,r),o.incremental=!0,this.group.add(o)}},_incrementalRenderLarge:function(e,t){Cw(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:en}),ci.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))}}));function jm(e,t,n){var i=e.ends;return new HD({shape:{points:n?function(r,o){return Ke(r,function(a){return(a=a.slice())[1]=o.initBaseline,a})}(i,e):i},z2:100})}function _w(e,t){for(var n=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){n=!1;break}return n}function qm(e,t,n,i){var r=t.getItemModel(n),o=r.getModel(xw),a=t.getItemVisual(n,"color"),s=t.getItemVisual(n,"borderColor")||a,l=o.getItemStyle(bw);e.useStyle(l),e.style.strokeNoScale=!0,e.style.fill=a,e.style.stroke=s,e.__simpleBox=i,Ri(e,r.getModel(VD).getItemStyle())}var ww=ci.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var n=t.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];e.moveTo(r,n[i++]),e.lineTo(r,n[i++])}else i+=3}});function Cw(e,t,n){var i=e.getData(),r=i.getLayout("largePoints"),o=new ww({shape:{points:r},__sign:1});t.add(o);var a=new ww({shape:{points:r},__sign:-1});t.add(a),Sw(1,o,e,i),Sw(-1,a,e,i),n&&(o.incremental=!0,a.incremental=!0)}function Sw(e,t,n,i){var r=0<e?"P":"N",o=i.getVisual("borderColor"+r)||i.getVisual("color"+r),a=n.getModel(xw).getItemStyle(bw);t.useStyle(a),t.style.fill=null,t.style.stroke=o}var FD=["itemStyle","borderColor"],WD=["itemStyle","borderColor0"],GD=["itemStyle","color"],UD=["itemStyle","color0"],jD={seriesType:"candlestick",plan:Tl(),performRawSeries:!0,reset:function(e,t){if(e.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,e),colorN:n(-1,e),borderColorP:i(1,e),borderColorN:i(-1,e)}),!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(r,o){for(var a;null!=(a=r.next());){var s=o.getItemModel(a),l=o.getItemLayout(a).sign;o.setItemVisual(a,{color:n(l,s),borderColor:i(l,s)})}}};function n(r,o){return o.get(0<r?GD:UD)}function i(r,o){return o.get(0<r?FD:WD)}}},qD=typeof Float32Array<"u"?Float32Array:Array,XD={seriesType:"candlestick",plan:Tl(),reset:function(e){var d,h,f,p,_,v,E,F,t=e.coordinateSystem,n=e.getData(),i=(h=n,_="category"===(p=(d=e).getBaseAxis()).type?p.getBandWidth():(f=p.getExtent(),Math.abs(f[1]-f[0])/h.count()),v=yn(_t(d.get("barMaxWidth"),_),_),E=yn(_t(d.get("barMinWidth"),1),_),null!=(F=d.get("barWidth"))?yn(F,_):Math.max(Math.min(_/2,v),E)),r=["x","y"],o=n.mapDimension(r[0]),a=n.mapDimension(r[1],!0),s=a[0],l=a[1],u=a[2],c=a[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(null==o||a.length<4))return{progress:e.pipelineContext.large?function(d,h){for(var f,p,_=new qD(4*d.count),v=0,E=[],F=[];null!=(p=d.next());){var V=h.get(o,p),q=h.get(s,p),j=h.get(l,p),X=h.get(u,p),Y=h.get(c,p);isNaN(V)||isNaN(X)||isNaN(Y)?(_[v++]=NaN,v+=3):(_[v++]=Mw(h,p,q,j,l),E[0]=V,E[1]=X,f=t.dataToPoint(E,null,F),_[v++]=f?f[0]:NaN,_[v++]=f?f[1]:NaN,E[1]=Y,f=t.dataToPoint(E,null,F),_[v++]=f?f[1]:NaN)}h.setLayout("largePoints",_)}:function(d,h){for(var f;null!=(f=d.next());){var p=h.get(o,f),_=h.get(s,f),v=h.get(l,f),E=h.get(u,f),F=h.get(c,f),V=Math.min(_,v),q=Math.max(_,v),j=ce(V,p),X=ce(q,p),Y=ce(E,p),Q=ce(F,p),oe=[];ge(oe,X,0),ge(oe,j,1),oe.push(Ce(Q),Ce(X),Ce(Y),Ce(j)),h.setItemLayout(f,{sign:Mw(h,f,_,v,l),initBaseline:v<_?X[1]:j[1],ends:oe,brushRect:(Ae=E,Oe=F,Ge=p,Pe=void 0,st=void 0,Pe=ce(Ae,Ge),st=ce(Oe,Ge),Pe[0]-=i/2,st[0]-=i/2,{x:Pe[0],y:Pe[1],width:i,height:st[1]-Pe[1]})})}var Ae,Oe,Ge,Pe,st;function ce(Ae,Oe){var Ge=[];return Ge[0]=Oe,Ge[1]=Ae,isNaN(Oe)||isNaN(Ae)?[NaN,NaN]:t.dataToPoint(Ge)}function ge(Ae,Oe,Ge){var Pe=Oe.slice(),st=Oe.slice();Pe[0]=Id(Pe[0]+i/2,1,!1),st[0]=Id(st[0]-i/2,1,!0),Ge?Ae.push(Pe,st):Ae.push(st,Pe)}function Ce(Ae){return Ae[0]=Id(Ae[0],1),Ae}}}}};function Mw(e,t,n,i,r){return i<n?-1:n<i?1:0<t?e.get(r,t-1)<=i?1:-1:1}function Tw(e,t){var n=t.rippleEffectColor||t.color;e.eachChild(function(i){i.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})})}function Xm(e,t){m.call(this);var n=new qa(e,t),i=new m;this.add(n),this.add(i),i.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(e,t)}br(function(e){e&&Ye(e.series)&&re(e.series,function(t){Mt(t)&&"k"===t.type&&(t.type="candlestick")})}),Ni(jD),Gi(XD),Wi.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return ya(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var js=Xm.prototype;js.stopEffectAnimation=function(){this.childAt(1).removeAll()},js.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,i=this.childAt(1),r=0;r<3;r++){var o=io(t,-1,-1,2,2,n);o.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var a=-r/3*e.period+e.effectOffset;o.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(a).start(),o.animateStyle(!0).when(e.period,{opacity:0}).delay(a).start(),i.add(o)}Tw(i,e)},js.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale"],r=0;r<i.length;r++){var o=i[r];if(t[o]!==e[o])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}Tw(n,e)},js.highlight=function(){this.trigger("emphasis")},js.downplay=function(){this.trigger("normal")},js.updateData=function(e,t){var n=e.hostModel;this.childAt(0).updateData(e,t);var _,i=this.childAt(1),r=e.getItemModel(t),o=e.getItemVisual(t,"symbol"),a=(Ye(_=e.getItemVisual(t,"symbolSize"))||(_=[+_,+_]),_),s=e.getItemVisual(t,"color");i.attr("scale",a),i.traverse(function(_){_.attr({fill:s})});var l=r.getShallow("symbolOffset");if(l){var u=i.position;u[0]=yn(l[0],a[0]),u[1]=yn(l[1],a[1])}var c=e.getItemVisual(t,"symbolRotate");i.rotation=(c||0)*Math.PI/180||0;var d={};if(d.showEffectOn=n.get("showEffectOn"),d.rippleScale=r.get("rippleEffect.scale"),d.brushType=r.get("rippleEffect.brushType"),d.period=1e3*r.get("rippleEffect.period"),d.effectOffset=t/e.count(),d.z=r.getShallow("z")||0,d.zlevel=r.getShallow("zlevel")||0,d.symbolType=o,d.color=s,d.rippleEffectColor=r.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===d.showEffectOn)this._effectCfg?this.updateEffectAnimation(d):this.startEffectAnimation(d),this._effectCfg=d;else{this._effectCfg=null,this.stopEffectAnimation();var h=this.childAt(0),f=function(){h.highlight(),"render"!==d.showEffectOn&&this.startEffectAnimation(d)},p=function(){h.downplay(),"render"!==d.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",f,this).on("mouseout",p,this).on("emphasis",f,this).on("normal",p,this)}this._effectCfg=d},js.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},Ue(Xm,m),Zr({type:"effectScatter",init:function(){this._symbolDraw=new Ll(Xm)},render:function(e,t,n){var i=e.getData(),r=this._symbolDraw;r.updateData(i),this.group.add(r.group)},updateTransform:function(e,t,n){var i=e.getData();this.group.dirty();var r=oc().reset(e);r.progress&&r.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=du(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}}),Ni(Rs("effectScatter","circle")),Gi(oc("effectScatter"));var ZD=typeof Uint32Array>"u"?Array:Uint32Array,YD=typeof Float64Array>"u"?Array:Float64Array;function Aw(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Ke(t,function(n){var i={coords:[n[0].coord,n[1].coord]};return n[0].name&&(i.fromName=n[0].name),n[1].name&&(i.toName=n[1].name),Ie([i,n[0],n[1]])}))}var Iw=Wi.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],Aw(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),Iw.superApply(this,"init",arguments)},mergeOption:function(e){if(Aw(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}Iw.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=bt(this._flatCoords,t.flatCoords),this._flatCoordsOffset=bt(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],i=this._flatCoordsOffset[2*e+1],r=0;r<i;r++)t[r]=t[r]||[],t[r][0]=this._flatCoords[n+2*r],t[r][1]=this._flatCoords[n+2*r+1];return i}var o=this._getCoordsFromItemModel(e);for(r=0;r<o.length;r++)t[r]=t[r]||[],t[r][0]=o[r][0],t[r][1]=o[r][1];return o.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"!=typeof e[0])return{flatCoordsOffset:null,flatCoords:null,count:e.length};for(var n=e.length,i=new ZD(n),r=new YD(n),o=0,a=0,s=0,l=0;l<n;){s++;var u=e[l++];i[a++]=o+t,i[a++]=u;for(var c=0;c<u;c++){var d=e[l++],h=e[l++];r[o++]=d,r[o++]=h}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,a),flatCoords:r,count:s}},getInitialData:function(e,t){var n=new ur(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(i,r,o,a){if(i instanceof Array)return NaN;n.hasItemOption=!0;var s=i.value;return null!=s?s instanceof Array?s[a]:s:void 0}),n},formatTooltip:function(e){var t=this.getData().getItemModel(e),n=t.get("name");if(n)return n;var i=t.get("fromName"),r=t.get("toName"),o=[];return null!=i&&o.push(i),null!=r&&o.push(r),Oi(o.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){return this.option.progressive??(this.option.large?1e4:this.get("progressive"))},getProgressiveThreshold:function(){return this.option.progressiveThreshold??(this.option.large?2e4:this.get("progressiveThreshold"))},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function Dc(e,t,n){m.call(this),this.add(this.createLine(e,t,n)),this._updateEffectSymbol(e,t)}var ns=Dc.prototype;function Zh(e,t,n){m.call(this),this._createPolyline(e,t,n)}ns.createLine=function(e,t,n){return new Sc(e,t,n)},ns._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),i=n.get("symbolSize"),r=n.get("symbol");Ye(i)||(i=[i,i]);var o=n.get("color")||e.getItemVisual(t,"color"),a=this.childAt(1);this._symbolType!==r&&(this.remove(a),(a=io(r,-.5,-.5,1,1,o)).z2=100,a.culling=!0,this.add(a)),a&&(a.setStyle("shadowColor",o),a.setStyle(n.getItemStyle(["color"])),a.attr("scale",i),a.setColor(o),a.attr("scale",i),this._symbolType=r,this._symbolScale=i,this._updateEffectAnimation(e,n,t))},ns._updateEffectAnimation=function(e,t,n){var i=this.childAt(1);if(i){var r=this,o=e.getItemLayout(n),a=1e3*t.get("period"),s=t.get("loop"),l=t.get("constantSpeed"),u=an(t.get("delay"),function(f){return f/e.count()*a/3}),c="function"==typeof u;if(i.ignore=!0,this.updateAnimationPoints(i,o),0<l&&(a=this.getLineLength(i)/l*1e3),a!==this._period||s!==this._loop){i.stopAnimation();var d=u;c&&(d=u(n)),0<i.__t&&(d=-a*i.__t),i.__t=0;var h=i.animate("",s).when(a,{__t:1}).delay(d).during(function(){r.updateSymbolPosition(i)});s||h.done(function(){r.remove(i)}),h.start()}this._period=a,this._loop=s}},ns.getLineLength=function(e){return Gn(e.__p1,e.__cp1)+Gn(e.__cp1,e.__p2)},ns.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},ns.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},ns.updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,i=e.__cp1,r=e.__t,o=e.position,a=[o[0],o[1]],s=Mr,l=$f;o[0]=s(t[0],i[0],n[0],r),o[1]=s(t[1],i[1],n[1],r);var u=l(t[0],i[0],n[0],r),c=l(t[1],i[1],n[1],r);if(e.rotation=-Math.atan2(c,u)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var d=1.05*Gn(a,o);e.attr("scale",[e.scale[0],d]),1===r&&(o[0]=a[0]+(o[0]-a[0])/2,o[1]=a[1]+(o[1]-a[1])/2)}else 1===e.__lastT?(d=2*Gn(t,o),e.attr("scale",[e.scale[0],d])):e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},ns.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},Ue(Dc,m);var Yh=Zh.prototype;function Zm(e,t,n){Dc.call(this,e,t,n),this._lastFrame=0,this._lastFramePercent=0}Yh._createPolyline=function(e,t,n){var i=e.getItemLayout(t),r=new po({shape:{points:i}});this.add(r),this._updateCommonStl(e,t,n)},Yh.updateData=function(e,t,n){var i=e.hostModel;Qn(this.childAt(0),{shape:{points:e.getItemLayout(t)}},i,t),this._updateCommonStl(e,t,n)},Yh._updateCommonStl=function(e,t,n){var i=this.childAt(0),r=e.getItemModel(t),o=e.getItemVisual(t,"color"),a=n&&n.lineStyle,s=n&&n.hoverLineStyle;n&&!e.hasItemOption||(a=r.getModel("lineStyle").getLineStyle(),s=r.getModel("emphasis.lineStyle").getLineStyle()),i.useStyle(De({strokeNoScale:!0,fill:"none",stroke:o},a)),i.hoverStyle=s,Ri(this)},Yh.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},Ue(Zh,m);var $h=Zm.prototype;$h.createLine=function(e,t,n){return new Zh(e,t,n)},$h.updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],i=0,r=1;r<t.length;r++)i+=Gn(t[r-1],t[r]),n.push(i);if(0!==i){for(r=0;r<n.length;r++)n[r]/=i;this._offsets=n,this._length=i}},$h.getLineLength=function(e){return this._length},$h.updateSymbolPosition=function(e){var t=e.__t,n=this._points,i=this._offsets,r=n.length;if(i){var o=this._lastFrame;if(t<this._lastFramePercent){for(a=Math.min(o+1,r-1);0<=a&&!(i[a]<=t);a--);a=Math.min(a,r-2)}else{for(var a=o;a<r&&!(i[a]>t);a++);a=Math.min(a-1,r-2)}ji(e.position,n[a],n[a+1],(t-i[a])/(i[a+1]-i[a])),e.rotation=-Math.atan2(n[a+1][1]-n[a][1],n[a+1][0]-n[a][0])-Math.PI/2,this._lastFrame=a,this._lastFramePercent=t,e.ignore=!1}},Ue(Zm,Dc);var Dw=go({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var n=t.segs,i=t.curveness;if(t.polyline)for(var r=0;r<n.length;){var o=n[r++];if(0<o){e.moveTo(n[r++],n[r++]);for(var a=1;a<o;a++)e.lineTo(n[r++],n[r++])}}else for(r=0;r<n.length;){var s=n[r++],l=n[r++],u=n[r++],c=n[r++];e.moveTo(s,l),0<i?e.quadraticCurveTo((s+u)/2-(l-c)*i,(l+c)/2-(u-s)*i,u,c):e.lineTo(u,c)}},findDataIndex:function(e,t){var n=this.shape,i=n.segs,r=n.curveness;if(n.polyline)for(var o=0,a=0;a<i.length;){var s=i[a++];if(0<s)for(var l=i[a++],u=i[a++],c=1;c<s;c++)if(Ra(l,u,d=i[a++],h=i[a++]))return o;o++}else for(o=0,a=0;a<i.length;){l=i[a++],u=i[a++];var d=i[a++],h=i[a++];if(0<r){if(j0(l,u,(l+d)/2-(u-h)*r,(u+h)/2-(d-l)*r,d,h))return o}else if(Ra(l,u,d,h))return o;o++}return-1}});function kw(){this.group=new m}var qs=kw.prototype;qs.isPersistent=function(){return!this._incremental},qs.updateData=function(e){this.group.removeAll();var t=new Dw({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},qs.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),5e5<e.count()?(this._incremental||(this._incremental=new Jr({silent:!0})),this.group.add(this._incremental)):this._incremental=null},qs.incrementalUpdate=function(e,t){var n=new Dw;n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=e.start,this.group.add(n))},qs.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},qs._setCommon=function(e,t,n){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var r=t.getVisual("color");r&&e.setStyle("stroke",r),e.setStyle("fill"),n||(e.seriesIndex=i.seriesIndex,e.on("mousemove",function(o){e.dataIndex=null;var a=e.findDataIndex(o.offsetX,o.offsetY);0<a&&(e.dataIndex=a+e.__startIndex)}))},qs._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var Nw={seriesType:"lines",plan:Tl(),reset:function(e){var t=e.coordinateSystem,n=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(r,o){var a=[];if(i){var s,l=r.end-r.start;if(n){for(var u=0,c=r.start;c<r.end;c++)u+=e.getLineCoordsCount(c);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var d=0,h=[];for(c=r.start;c<r.end;c++){var f=e.getLineCoords(c,a);n&&(s[d++]=f);for(var p=0;p<f;p++)h=t.dataToPoint(a[p],!1,h),s[d++]=h[0],s[d++]=h[1]}o.setLayout("linesPoints",s)}else for(c=r.start;c<r.end;c++){var _=o.getItemModel(c),v=(f=e.getLineCoords(c,a),[]);if(n)for(var E=0;E<f;E++)v.push(t.dataToPoint(a[E]));else{v[0]=t.dataToPoint(a[0]),v[1]=t.dataToPoint(a[1]);var F=_.get("lineStyle.curveness");+F&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*F,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*F])}o.setItemLayout(c,v)}}}}};function Kh(e){return e instanceof Array||(e=[e,e]),e}Zr({type:"lines",init:function(){},render:function(e,t,n){var i=e.getData(),r=this._updateLineDraw(i,e),o=e.get("zlevel"),a=e.get("effect.trailLength"),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(o).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&a&&(l||s.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)})),r.updateData(i);var u=e.get("clip",!0)&&vh(e.coordinateSystem,!1,e);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},incrementalPrepareRender:function(e,t,n){var i=e.getData();this._updateLineDraw(i,e).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},incrementalRender:function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var i=e.getData(),r=e.pipelineContext;if(!this._finished||r.large||r.progressiveRender)return{update:!0};var o=Nw.reset(e);o.progress&&o.progress({start:0,end:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(e,t){var n=this._lineDraw,i=this._showEffect(t),r=!!t.get("polyline"),o=t.pipelineContext.large;return n&&i===this._hasEffet&&r===this._isPolyline&&o===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=o?new kw:new zh(r?i?Zm:Zh:i?Dc:Sc),this._hasEffet=i,this._isPolyline=r,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});var Ew="lineStyle.opacity".split("."),$D={seriesType:"lines",reset:function(e,t,n){var i=Kh(e.get("symbol")),r=Kh(e.get("symbolSize")),o=e.getData();return o.setVisual("fromSymbol",i&&i[0]),o.setVisual("toSymbol",i&&i[1]),o.setVisual("fromSymbolSize",r&&r[0]),o.setVisual("toSymbolSize",r&&r[1]),o.setVisual("opacity",e.get(Ew)),{dataEach:o.hasItemOption?function(a,s){var l=a.getItemModel(s),u=Kh(l.getShallow("symbol",!0)),c=Kh(l.getShallow("symbolSize",!0)),d=l.get(Ew);u[0]&&a.setItemVisual(s,"fromSymbol",u[0]),u[1]&&a.setItemVisual(s,"toSymbol",u[1]),c[0]&&a.setItemVisual(s,"fromSymbolSize",c[0]),c[1]&&a.setItemVisual(s,"toSymbolSize",c[1]),a.setItemVisual(s,"opacity",d)}:null}}};function Lw(){var e=Ee();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}Gi(Nw),Ni($D),Wi.extend({type:"series.heatmap",getInitialData:function(e,t){return ya(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=Ir.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),Lw.prototype={update:function(e,t,n,i,r,o){var a=this._getBrush(),s=this._getGradient(e,r,"inRange"),l=this._getGradient(e,r,"outOfRange"),u=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),h=e.length;c.width=t,c.height=n;for(var f=0;f<h;++f){var p=e[f],_=p[0],v=p[1],E=i(p[2]);d.globalAlpha=E,d.drawImage(a,_-u,v-u)}if(!c.width||!c.height)return c;for(var F=d.getImageData(0,0,c.width,c.height),V=F.data,q=0,j=V.length,X=this.minOpacity,Y=this.maxOpacity-X;q<j;){E=V[q+3]/256;var Q=4*Math.floor(255*E);if(0<E){var oe=o(E)?s:l;0<E&&(E=E*Y+X),V[q++]=oe[Q],V[q++]=oe[1+Q],V[q++]=oe[2+Q],V[q++]=oe[3+Q]*E*256}else q+=4}return d.putImageData(F,0,0),c},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=Ee()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var i=e.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),e},_getGradient:function(e,t,n){for(var i=this._gradientPixels,r=i[n]||(i[n]=new Uint8ClampedArray(1024)),o=[0,0,0,0],a=0,s=0;s<256;s++)t[n](s/255,!0,o),r[a++]=o[0],r[a++]=o[1],r[a++]=o[2],r[a++]=o[3];return r}},Zr({type:"heatmap",render:function(e,t,n){var i;t.eachComponent("visualMap",function(o){o.eachTargetSeries(function(a){a===e&&(i=o)})}),this.group.removeAll(),this._incrementalDisplayable=null;var r=e.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):function(o){var a=o.dimensions;return"lng"===a[0]&&"lat"===a[1]}(r)&&this._renderOnGeo(r,e,i,n)},incrementalPrepareRender:function(e,t,n){this.group.removeAll()},incrementalRender:function(e,t,n,i){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,i,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,n,i,r){var o,a,s=e.coordinateSystem;if("cartesian2d"===s.type){var l=s.getAxis("x"),u=s.getAxis("y");o=l.getBandWidth(),a=u.getBandWidth()}for(var c=this.group,d=e.getData(),h="emphasis.itemStyle",f="emphasis.label",p=e.getModel("itemStyle").getItemStyle(["color"]),_=e.getModel(h).getItemStyle(),v=e.getModel("label"),E=e.getModel(f),F=s.type,V="cartesian2d"===F?[d.mapDimension("x"),d.mapDimension("y"),d.mapDimension("value")]:[d.mapDimension("time"),d.mapDimension("value")],q=n;q<i;q++){var j;if("cartesian2d"===F){if(isNaN(d.get(V[2],q)))continue;var X=s.dataToPoint([d.get(V[0],q),d.get(V[1],q)]);j=new vi({shape:{x:Math.floor(Math.round(X[0])-o/2),y:Math.floor(Math.round(X[1])-a/2),width:Math.ceil(o),height:Math.ceil(a)},style:{fill:d.getItemVisual(q,"color"),opacity:d.getItemVisual(q,"opacity")}})}else{if(isNaN(d.get(V[1],q)))continue;j=new vi({z2:1,shape:s.dataToRect([d.get(V[0],q)]).contentShape,style:{fill:d.getItemVisual(q,"color"),opacity:d.getItemVisual(q,"opacity")}})}var Y=d.getItemModel(q);d.hasItemOption&&(p=Y.getModel("itemStyle").getItemStyle(["color"]),_=Y.getModel(h).getItemStyle(),v=Y.getModel("label"),E=Y.getModel(f));var Q=e.getRawValue(q),oe="-";Q&&null!=Q[2]&&(oe=Q[2]),Qr(p,_,v,E,{labelFetcher:e,labelDataIndex:q,defaultText:oe,isRectText:!0}),j.setStyle(p),Ri(j,d.hasItemOption?_:fe({},_)),(j.incremental=r)&&(j.useHoverLayer=!0),c.add(j),d.setItemGraphicEl(q,j)}},_renderOnGeo:function(e,t,n,i){var r=n.targetVisuals.inRange,o=n.targetVisuals.outOfRange,a=t.getData(),s=this._hmLayer||this._hmLayer||new Lw;s.blurSize=t.get("blurSize"),s.pointSize=t.get("pointSize"),s.minOpacity=t.get("minOpacity"),s.maxOpacity=t.get("maxOpacity");var l=e.getViewRect().clone(),u=e.getRoamTransform();l.applyTransform(u);var j,X,Y,c=Math.max(l.x,0),d=Math.max(l.y,0),h=Math.min(l.width+l.x,i.getWidth()),f=Math.min(l.height+l.y,i.getHeight()),p=h-c,_=f-d,v=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],E=a.mapArray(v,function(j,X,Y){var Q=e.dataToPoint([j,X]);return Q[0]-=c,Q[1]-=d,Q.push(Y),Q}),F=n.getExtent(),V="visualMap.continuous"===n.type?(X=[((X=n.option.range)[0]-(j=F)[0])/(Y=j[1]-j[0]),(X[1]-j[0])/Y],function(Q){return Q>=X[0]&&Q<=X[1]}):function(j,X,Y){var Q=j[1]-j[0],oe=(X=Ke(X,function(ge){return{interval:[(ge.interval[0]-j[0])/Q,(ge.interval[1]-j[0])/Q]}})).length,ce=0;return function(ge){for(var we=ce;we<oe;we++)if((Ce=X[we].interval)[0]<=ge&&ge<=Ce[1]){ce=we;break}if(we===oe)for(we=ce-1;0<=we;we--){var Ce;if((Ce=X[we].interval)[0]<=ge&&ge<=Ce[1]){ce=we;break}}return 0<=we&&we<oe&&Y[we]}}(F,n.getPieceList(),n.option.selected);s.update(E,p,_,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:o.color.getColorMapper()},V);var q=new li({style:{width:p,height:_,x:c,y:d,image:s.canvas},silent:!0});this.group.add(q)},dispose:function(){}});var KD=cb.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(e){return e.stack=null,KD.superApply(this,"getInitialData",arguments)}}),JD=["itemStyle","borderWidth"],Rw=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Ym=new Fo;function Pw(e,t,n,i){var p,_,E,V,q,j,X,Y,Q,oe,ce,ge,r=e.getItemLayout(t),o=n.get("symbolRepeat"),a=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,u=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),d={dataIndex:t,layout:r,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",color:e.getItemVisual(t,"color"),symbolClip:a,symbolRepeat:o,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:l,animationModel:c?n:null,hoverAnimation:c&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};(function(p,_,v,E,F){var V,q=E.valueDim,j=p.get("symbolBoundingData"),X=E.coordSys.getOtherAxis(E.coordSys.getBaseAxis()),Y=X.toGlobalCoord(X.dataToCoord(0)),Q=1-+(v[q.wh]<=0);if(Ye(j)){var oe=[$m(X,j[0])-Y,$m(X,j[1])-Y];oe[1]<oe[0]&&oe.reverse(),V=oe[Q]}else V=null!=j?$m(X,j)-Y:_?E.coordSysExtent[q.index][Q]-Y:v[q.wh];F.boundingLength=V,_&&(F.repeatCutLength=v[q.wh]),F.pxSign=0<V?1:V<0?-1:0})(n,o,r,i,d),p=e,_=t,E=o,V=d.boundingLength,q=d.pxSign,j=u,Y=d,Q=(X=i).valueDim,oe=X.categoryDim,ce=Math.abs(r[oe.wh]),(ge=Ye(ge=p.getItemVisual(_,"symbolSize"))?ge.slice():(null==ge&&(ge="100%"),[ge,ge]))[oe.index]=yn(ge[oe.index],ce),ge[Q.index]=yn(ge[Q.index],E?ce:Math.abs(V)),Y.symbolSize=ge,(Y.symbolScale=[ge[0]/j,ge[1]/j])[Q.index]*=(X.isHorizontal?-1:1)*q,function(p,_,v,E,F){var V=p.get(JD)||0;V&&(Ym.attr({scale:_.slice(),rotation:v}),Ym.updateTransform(),V/=Ym.getLineScale(),V*=_[E.valueDim.index]),F.valueLineWidth=V}(n,d.symbolScale,l,i,d);var h=d.symbolSize,f=n.get("symbolOffset");return Ye(f)&&(f=[yn(f[0],h[0]),yn(f[1],h[1])]),function(p,_,v,E,F,V,q,j,X,Y,Q,oe){var ce=Q.categoryDim,ge=Q.valueDim,we=oe.pxSign,Ce=Math.max(_[ge.index]+j,0),Ae=Ce;if(E){var Oe=Math.abs(X),Ge=an(p.get("symbolMargin"),"15%")+"",Pe=!1;Ge.lastIndexOf("!")===Ge.length-1&&(Pe=!0,Ge=Ge.slice(0,Ge.length-1)),Ge=yn(Ge,_[ge.index]);var st=Math.max(Ce+2*Ge,0),Pt=Pe?0:2*Ge,Ft=Ey(E),Nt=Ft?E:qw((Oe+Pt)/st);st=Ce+2*(Ge=(Oe-Nt*Ce)/2/(Pe?Nt:Nt-1)),Pt=Pe?0:2*Ge,Ft||"fixed"===E||(Nt=Y?qw((Math.abs(Y)+Pt)/st):0),Ae=Nt*st-Pt,oe.repeatTimes=Nt,oe.symbolMargin=Ge}var rn=we*(Ae/2),fn=oe.pathPosition=[];fn[ce.index]=v[ce.wh]/2,fn[ge.index]="start"===q?rn:"end"===q?X-rn:X/2,V&&(fn[0]+=V[0],fn[1]+=V[1]);var Ln=oe.bundlePosition=[];Ln[ce.index]=v[ce.xy],Ln[ge.index]=v[ge.xy];var Zt=oe.barRectShape=fe({},v);Zt[ge.wh]=we*Math.max(Math.abs(v[ge.wh]),Math.abs(fn[ge.index]+rn)),Zt[ce.wh]=v[ce.wh];var kn=oe.clipShape={};kn[ce.xy]=-v[ce.xy],kn[ce.wh]=Q.ecSize[ce.wh],kn[ge.xy]=0,kn[ge.wh]=v[ge.wh]}(n,h,r,o,0,f,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,i,d),d}function $m(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function Bw(e){var t=e.symbolPatternSize,n=io(e.symbolType,-t/2,-t/2,t,t,e.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function Ow(e,t,n,i){var r=e.__pictorialBundle,s=n.pathPosition,l=t.valueDim,u=n.repeatTimes||0,c=0,d=n.symbolSize[t.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(kc(e,function(E){E.__pictorialAnimationIndex=c,E.__pictorialRepeatTimes=u,c<u?Jl(E,null,p(c),n,i):Jl(E,null,{scale:[0,0]},n,i,function(){r.remove(E)}),Km(E,n),c++});c<u;c++){var h=Bw(n);h.__pictorialAnimationIndex=c,h.__pictorialRepeatTimes=u,r.add(h);var f=p(c);Jl(h,{position:f.position,scale:[0,0]},{scale:f.scale,rotation:f.rotation},n,i),h.on("mouseover",_).on("mouseout",v),Km(h,n)}function p(E){var F=s.slice(),V=n.pxSign,q=E;return("start"===n.symbolRepeatDirection?0<V:V<0)&&(q=u-1-E),F[l.index]=d*(q-u/2+.5)+s[l.index],{position:F,scale:n.symbolScale.slice(),rotation:n.rotation}}function _(){kc(e,function(E){E.trigger("emphasis")})}function v(){kc(e,function(E){E.trigger("normal")})}}function zw(e,t,n,i){var r=e.__pictorialBundle,o=e.__pictorialMainPath;o?Jl(o,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,i):(o=e.__pictorialMainPath=Bw(n),r.add(o),Jl(o,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,i),o.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),Km(o,n)}function Vw(e,t,n){var i=fe({},t.barRectShape),r=e.__pictorialBarRect;r?Jl(r,null,{shape:i},t,n):(r=e.__pictorialBarRect=new vi({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(r))}function Hw(e,t,n,i){if(n.symbolClip){var r=e.__pictorialClipPath,o=fe({},n.clipShape),a=t.valueDim,s=n.animationModel,l=n.dataIndex;if(r)Qn(r,{shape:o},s,l);else{o[a.wh]=0,r=new vi({shape:o}),e.__pictorialBundle.setClipPath(r),e.__pictorialClipPath=r;var u={};u[a.wh]=n.clipShape[a.wh],fa[i?"updateProps":"initProps"](r,{shape:u},s,l)}}}function Fw(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=QD,n.isAnimationEnabled=e2,n}function QD(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function e2(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Km(e,t){e.off("emphasis").off("normal");var n=t.symbolScale.slice();t.hoverAnimation&&e.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function Ww(e,t,n,i){var r=new m,o=new m;return r.add(o),(r.__pictorialBundle=o).attr("position",n.bundlePosition.slice()),n.symbolRepeat?Ow(r,t,n):zw(r,0,n),Vw(r,n,i),Hw(r,t,n,i),r.__pictorialShapeStr=Uw(e,n),r.__pictorialSymbolMeta=n,r}function Gw(e,t,n,i){var r=i.__pictorialBarRect;r&&(r.style.text=null);var o=[];kc(i,function(a){o.push(a)}),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),re(o,function(a){Qn(a,{scale:[0,0]},n,t,function(){i.parent&&i.parent.remove(i)})}),e.setItemGraphicEl(t,null)}function Uw(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function kc(e,t,n){re(e.__pictorialBundle.children(),function(i){i!==e.__pictorialBarRect&&t.call(n,i)})}function Jl(e,t,n,i,r,o){t&&e.attr(t),i.symbolClip&&!r?n&&e.attr(n):n&&fa[r?"updateProps":"initProps"](e,n,i.animationModel,i.dataIndex,o)}function jw(e,t,n){var i=n.color,r=n.dataIndex,o=n.itemModel,a=o.getModel("itemStyle").getItemStyle(["color"]),s=o.getModel("emphasis.itemStyle").getItemStyle(),l=o.getShallow("cursor");kc(e,function(d){d.setColor(i),d.setStyle(De({fill:i,opacity:n.opacity},a)),Ri(d,s),l&&(d.cursor=l),d.z2=n.z2});var u={},c=e.__pictorialBarRect;db(c.style,u,o,i,t.seriesModel,r),Ri(c,u)}function qw(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}function Jh(e,t,n,i,r){er.call(this,e,t,n),this.type=i||"value",this.position=r||"bottom",this.orient=null}function Jm(e,t,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(e,t,n),this.model=e}function Qm(e,t){t=t||{};var i=e.axis,r={},o=i.position,a=i.orient,s=e.coordinateSystem.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};r.position=["vertical"===a?u.vertical[o]:l[0],"horizontal"===a?u.horizontal[o]:l[3]],r.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,right:1,left:-1}[o],e.get("axisTick.inside")&&(r.tickDirection=-r.tickDirection),an(t.labelInside,e.get("axisLabel.inside"))&&(r.labelDirection=-r.labelDirection);var c=t.rotate;return null==c&&(c=e.get("axisLabel.rotate")),r.labelRotation="top"===o?-c:c,r.z2=1,r}Zr({type:"pictorialBar",render:function(e,t,n){var i=this.group,r=e.getData(),o=this._data,a=e.coordinateSystem,s=!!a.getBaseAxis().isHorizontal(),l=a.grid.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:a,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:Rw[+s],categoryDim:Rw[1-s]};return r.diff(o).add(function(c){if(r.hasValue(c)){var d=Fw(r,c),h=Pw(r,c,d,u),f=Ww(r,u,h);r.setItemGraphicEl(c,f),i.add(f),jw(f,u,h)}}).update(function(c,d){var v,E,F,V,q,h=o.getItemGraphicEl(d);if(r.hasValue(c)){var f=Fw(r,c),p=Pw(r,c,f,u),_=Uw(r,p);h&&_!==h.__pictorialShapeStr&&(i.remove(h),r.setItemGraphicEl(c,null),h=null),h?(E=u,V=(F=p).animationModel,q=F.dataIndex,Qn((v=h).__pictorialBundle,{position:F.bundlePosition.slice()},V,q),F.symbolRepeat?Ow(v,E,F,!0):zw(v,0,F,!0),Vw(v,F,!0),Hw(v,E,F,!0)):h=Ww(r,u,p,!0),r.setItemGraphicEl(c,h),h.__pictorialSymbolMeta=p,i.add(h),jw(h,u,p)}else i.remove(h)}).remove(function(c){var d=o.getItemGraphicEl(c);d&&Gw(o,c,d.__pictorialSymbolMeta.animationModel,d)}).execute(),this._data=r,this.group},dispose:en,remove:function(e,t){var n=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl(function(r){Gw(i,r.dataIndex,e,r)}):n.removeAll()}}),Gi(Lt(dx,"pictorialBar")),Ni(Rs("pictorialBar","roundRect")),Jh.prototype={constructor:Jh,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},pointToData:function(e,t){return this.coordinateSystem.pointToData(e,t)[0]},toGlobalCoord:null,toLocalCoord:null},Ue(Jh,er),Ir.register("single",{create:function(e,t){var n=[];return e.eachComponent("singleAxis",function(i,r){var o=new Jm(i,e,t);o.name="single_"+r,o.resize(i,t),i.coordinateSystem=o,n.push(o)}),e.eachSeries(function(i){if("singleAxis"===i.get("coordinateSystem")){var r=e.queryComponents({mainType:"singleAxis",index:i.get("singleAxisIndex"),id:i.get("singleAxisId")})[0];i.coordinateSystem=r&&r.coordinateSystem}}),n},dimensions:(Jm.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:Jm,_init:function(e,t,n){var r=new Jh(this.dimension,El(e),[0,0],e.get("type"),e.get("position"));r.onBand="category"===r.type&&e.get("boundaryGap"),r.inverse=e.get("inverse"),r.orient=e.get("orient"),(e.axis=r).model=e,(r.coordinateSystem=this)._axis=r},update:function(e,t){e.eachSeries(function(n){if(n.coordinateSystem===this){var i=n.getData();re(i.mapDimension(this.dimension,!0),function(r){this._axis.scale.unionExtentFromData(i,r)},this),ja(this._axis.scale,this._axis.model)}},this)},resize:function(e,t){this._rect=Ki({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),i=n?[0,e.width]:[0,e.height],r=t.reverse?1:0;t.setExtent(i[r],i[1-r]),this._updateAxisTransform(t,n?e.x:e.y)},_updateAxisTransform:function(e,t){var n=e.getExtent(),i=n[0]+n[1],r=e.isHorizontal();e.toGlobalCoord=r?function(o){return o+t}:function(o){return i-o+t},e.toLocalCoord=r?function(o){return o-t}:function(o){return i-o+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},pointToData:function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},dataToPoint:function(e){var t=this.getAxis(),n=this.getRect(),i=[],r="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),i[r]=t.toGlobalCoord(t.dataToCoord(+e)),i[1-r]=0==r?n.y+n.height/2:n.x+n.width/2,i}}).dimensions});var t2=["axisLine","axisTickLabel","axisName"],n2=["splitArea","splitLine"],i2=ro.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(e,t,n,i){var r=this.group;r.removeAll();var o=this._axisGroup;this._axisGroup=new m;var a=Qm(e),s=new Yr(e,a);re(t2,s.add,s),r.add(this._axisGroup),r.add(s.getGroup()),re(n2,function(l){e.get(l+".show")&&this["_"+l](e)},this),Ed(o,this._axisGroup,e),i2.superCall(this,"render",e,t,n,i)},remove:function(){ub(this)},_splitLine:function(e){var t=e.axis;if(!t.scale.isBlank()){var n=e.getModel("splitLine"),i=n.getModel("lineStyle"),r=i.get("width"),o=i.get("color");o=o instanceof Array?o:[o];for(var a=e.coordinateSystem.getRect(),s=t.isHorizontal(),l=[],u=0,c=t.getTicksCoords({tickModel:n}),d=[],h=[],f=0;f<c.length;++f){var p=t.toGlobalCoord(c[f].coord);s?(d[0]=p,d[1]=a.y,h[0]=p,h[1]=a.y+a.height):(d[0]=a.x,d[1]=p,h[0]=a.x+a.width,h[1]=p);var _=u++%o.length;l[_]=l[_]||[],l[_].push(new yr({subPixelOptimize:!0,shape:{x1:d[0],y1:d[1],x2:h[0],y2:h[1]},style:{lineWidth:r},silent:!0}))}for(f=0;f<l.length;++f)this.group.add(mo(l[f],{style:{stroke:o[f%o.length],lineDash:i.getLineDash(r),lineWidth:r},silent:!0}))}},_splitArea:function(e){lb(this,this._axisGroup,e,e)}}),Xw=yi.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function Zw(e,t){var n,i=[],r=e.seriesIndex;if(null==r||!(n=t.getSeriesByIndex(r)))return{point:[]};var o=n.getData(),a=sd(o,e);if(null==a||a<0||Ye(a))return{point:[]};var s=o.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)i=l.dataToPoint(o.getValues(Ke(l.dimensions,function(c){return o.mapDimension(c)}),a,!0))||[];else if(s){var u=s.getBoundingRect().clone();u.applyTransform(s.transform),i=[u.x+u.width/2,u.y+u.height/2]}return{point:i,el:s}}rt(Xw.prototype,Es),Pl("single",Xw,function(e,t){return t.type||(t.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var Qo=re,Yw=Lt,$w=Wr();function Kw(e,t,n,i,r){var u,c,d,h,f,p,_,v,o=e.axis;if(!o.scale.isBlank()&&o.containData(t))if(e.involveSeries){var a=(h=(d=(c=e).axis).dim,f=u=t,p=[],_=Number.MAX_VALUE,v=-1,Qo(c.seriesModels,function(E,F){var V,q,j=E.getData().mapDimension(h,!0);if(E.getAxisTooltipData){var X=E.getAxisTooltipData(j,u,d);q=X.dataIndices,V=X.nestestValue}else{if(!(q=E.getData().indicesOfNearest(j[0],u,"category"===d.type?.5:null)).length)return;V=E.getData().get(j[0],q[0])}if(null!=V&&isFinite(V)){var Y=u-V,Q=Math.abs(Y);Q<=_&&((Q<_||0<=Y&&v<0)&&(_=Q,v=Y,f=V,p.length=0),Qo(q,function(oe){p.push({seriesIndex:E.seriesIndex,dataIndexInside:oe,dataIndex:E.getData().getRawIndex(oe)})}))}}),{payloadBatch:p,snapToValue:f}),s=a.payloadBatch,l=a.snapToValue;s[0]&&null==r.seriesIndex&&fe(r,s[0]),!i&&e.snap&&o.containData(l)&&null!=l&&(t=l),n.showPointer(e,t,s,r),n.showTooltip(e,a,l)}else n.showPointer(e,t)}function r2(e,t,n,i){e[t.key]={value:n,payloadBatch:i}}function o2(e,t,n,i){var r=n.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(t.triggerTooltip&&r.length){var l=t.coordSys.model,u=sc(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:r.slice()})}}function Jw(e){var t=e.axis.model,n={},i=n.axisDim=e.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=t.componentIndex,n.axisName=n[i+"AxisName"]=t.name,n.axisId=n[i+"AxisId"]=t.id,n}function Qh(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}no({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var _a=Wr(),a2=re;function Qw(e,t,n){if(!He.node){var i=t.getZr();_a(i).records||(_a(i).records={}),function(r,o){function a(s,l){r.on(s,function(u){var d,h,f,c=(d=o,{dispatchAction:f=function(p){var _=h[p.type];_?_.push(p):(p.dispatchAction=f,d.dispatchAction(p))},pendings:h={showTip:[],hideTip:[]}});a2(_a(r).records,function(d){d&&l(d,u,c.dispatchAction)}),function(d,h){var f,p=d.showTip.length,_=d.hideTip.length;p?f=d.showTip[p-1]:_&&(f=d.hideTip[_-1]),f&&(f.dispatchAction=null,h.dispatchAction(f))}(c.pendings,o)})}_a(r).initialized||(_a(r).initialized=!0,a("click",Lt(eC,"click")),a("mousemove",Lt(eC,"mousemove")),a("globalout",s2))}(i,t),(_a(i).records[e]||(_a(i).records[e]={})).handler=n}}function s2(e,t,n){e.handler("leave",null,n)}function eC(e,t,n,i){t.handler(e,n,i)}function ev(e,t){if(!He.node){var n=t.getZr();(_a(n).records||{})[e]&&(_a(n).records[e]=null)}}var tC=lr({type:"axisPointer",render:function(e,t,n){var i=t.getComponent("tooltip"),r=e.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";Qw("axisPointer",n,function(o,a,s){"none"!==r&&("leave"===o||0<=r.indexOf(o))&&s({type:"updateAxisPointer",currTrigger:o,x:a&&a.offsetX,y:a&&a.offsetY})})},remove:function(e,t){ev(t.getZr(),"axisPointer"),tC.superApply(this._model,"remove",arguments)},dispose:function(e,t){ev("axisPointer",t),tC.superApply(this._model,"dispose",arguments)}}),Xs=Wr(),nC=Fe,tv=ut;function Nc(){}function iC(e,t,n,i){!function r(o,a){if(Mt(o)&&Mt(a)){var s=!0;return re(a,function(l,u){s=s&&r(o[u],l)}),!!s}return o===a}(Xs(n).lastProp,i)&&(Xs(n).lastProp=i,t?Qn(n,i,e):(n.stopAnimation(),n.attr(i)))}function rC(e,t){e[t.get("label.show")?"show":"hide"]()}function nv(e){return{position:e.position.slice(),rotation:e.rotation||0}}function oC(e,t,n){var i=t.get("z"),r=t.get("zlevel");e&&e.traverse(function(o){"group"!==o.type&&(null!=i&&(o.z=i),null!=r&&(o.zlevel=r),o.silent=n)})}function iv(e){var t,n=e.get("type"),i=e.getModel(n+"Style");return"line"===n?(t=i.getLineStyle()).fill=null:"shadow"===n&&((t=i.getAreaStyle()).stroke=null),t}function aC(e,t,n,i,r){var o=sC(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),a=n.getModel("label"),s=Ms(a.get("padding")||0),l=a.getFont(),u=Jn(o,l),c=r.position,d=u.width+s[1]+s[3],h=u.height+s[0]+s[2],f=r.align;"right"===f&&(c[0]-=d),"center"===f&&(c[0]-=d/2);var v,E,F,V,q,j,p=r.verticalAlign;"bottom"===p&&(c[1]-=h),"middle"===p&&(c[1]-=h/2),v=c,E=d,F=h,q=(V=i).getWidth(),j=V.getHeight(),v[0]=Math.min(v[0]+E,q)-E,v[1]=Math.min(v[1]+F,j)-F,v[0]=Math.max(v[0],0),v[1]=Math.max(v[1],0);var _=a.get("backgroundColor");_&&"auto"!==_||(_=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:d,height:h,r:a.get("borderRadius")},position:c.slice(),style:{text:o,textFont:l,textFill:a.getTextColor(),textPosition:"inside",textPadding:s,fill:_,stroke:a.get("borderColor")||"transparent",lineWidth:a.get("borderWidth")||0,shadowBlur:a.get("shadowBlur"),shadowColor:a.get("shadowColor"),shadowOffsetX:a.get("shadowOffsetX"),shadowOffsetY:a.get("shadowOffsetY")},z2:10}}function sC(e,t,n,i,r){e=t.scale.parse(e);var o=t.scale.getLabel(e,{precision:r.precision}),a=r.formatter;if(a){var s={value:xg(t,e),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};re(i,function(l){var u=n.getSeriesByIndex(l.seriesIndex),d=u&&u.getDataParams(l.dataIndexInside);d&&s.seriesData.push(d)}),it(a)?o=a.replace("{value}",o):gn(a)&&(o=a(s))}return o}function rv(e,t,n){var i=gr();return So(i,i,n.rotation),wr(i,i,n.position),Uo([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function lC(e,t,n,i,r,o){var a=Yr.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=r.get("label.margin"),aC(t,i,r,o,{position:rv(i.axis,e,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function ov(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function uC(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function cC(e,t,n,i,r,o){return{cx:e,cy:t,r0:n,r:i,startAngle:r,endAngle:o,clockwise:!0}}_u((Nc.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,n,i){var r=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,i||this._lastValue!==r||this._lastStatus!==o){this._lastValue=r,this._lastStatus=o;var a=this._group,s=this._handle;if(!o||"hide"===o)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,r,e,t,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var c=this._moveAnimation=this.determineAnimation(e,t);if(a){var d=Lt(iC,t,c);this.updatePointerEl(a,l,d,t),this.updateLabelEl(a,l,d,t)}else a=this._group=new m,this.createPointerEl(a,l,e,t),this.createLabelEl(a,l,e,t),n.getZr().add(a);oC(a,t,!0),this._renderHandle(r)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var n=t.get("animation"),i=e.axis,r="category"===i.type,o=t.get("snap");if(!o&&!r)return!1;if("auto"!==n&&null!=n)return!0===n;var a=this.animationThreshold;if(r&&i.getBandWidth()>a)return!0;if(o){var s=Lg(e).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1},makeElOption:function(e,t,n,i,r){},createPointerEl:function(e,t,n,i){var r=t.pointer;if(r){var o=Xs(e).pointerEl=new fa[r.type](nC(t.pointer));e.add(o)}},createLabelEl:function(e,t,n,i){if(t.label){var r=Xs(e).labelEl=new vi(nC(t.label));e.add(r),rC(r,i)}},updatePointerEl:function(e,t,n){var i=Xs(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),n(i,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,n,i){var r=Xs(e).labelEl;r&&(r.setStyle(t.label.style),n(r,{shape:t.label.shape,position:t.label.position}),rC(r,i))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,n=this._axisPointerModel,i=this._api.getZr(),r=this._handle,o=n.getModel("handle"),a=n.get("status");if(!o.get("show")||!a||"hide"===a)return r&&i.remove(r),void(this._handle=null);this._handle||(t=!0,r=this._handle=wl(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(l){Vi(l.event)},onmousedown:tv(this._onHandleDragMove,this,0,0),drift:tv(this._onHandleDragMove,this),ondragend:tv(this._onHandleDragEnd,this)}),i.add(r)),oC(r,n,!1),r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=o.get("size");Ye(s)||(s=[s,s]),r.attr("scale",[s[0]/2,s[1]/2]),Gu(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){iC(this._axisPointerModel,!t&&this._moveAnimation,this._handle,nv(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(nv(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(nv(i)),Xs(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},_onHandleDragEnd:function(e){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,i=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}}).constructor=Nc);var l2=Nc.extend({makeElOption:function(e,t,n,i,r){var o=n.axis,a=o.grid,s=i.get("type"),l=dC(a,o).getOtherAxis(o).getGlobalExtent(),u=o.toGlobalCoord(o.dataToCoord(t,!0));if(s&&"none"!==s){var c=iv(i),d=u2[s](o,u,l);d.style=c,e.graphicKey=d.type,e.pointer=d}lC(t,e,Pg(a.model,n),n,i,r)},getHandleTransform:function(e,t,n){var i=Pg(t.axis.grid.model,t,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:rv(t.axis,e,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,i){var r=n.axis,o=r.grid,a=r.getGlobalExtent(!0),s=dC(o,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,u=e.position;u[l]+=t[l],u[l]=Math.min(a[1],u[l]),u[l]=Math.max(a[0],u[l]);var c=(s[1]+s[0])/2,d=[c,c];return d[l]=u[l],{position:u,rotation:e.rotation,cursorPoint:d,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function dC(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var u2={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:ov([t,n[0]],[t,n[1]],hC(e))}},shadow:function(e,t,n){var i=Math.max(1,e.getBandWidth());return{type:"Rect",shape:uC([t-i/2,n[0]],[i,n[1]-n[0]],hC(e))}}};function hC(e){return"x"===e.dim?0:1}ro.registerAxisPointerClass("CartesianAxisPointer",l2),br(function(e){if(e){e.axisPointer&&0!==e.axisPointer.length||(e.axisPointer={});var t=e.axisPointer.link;t&&!Ye(t)&&(e.axisPointer.link=[t])}}),to(qo.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=function sI(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(i,r,o){var a=r.getComponent("tooltip"),s=r.getComponent("axisPointer"),l=s.get("link",!0)||[],u=[];zl(o.getCoordinateSystems(),function(c){if(c.axisPointerEnabled){var d=sc(c.model),h=i.coordSysAxesInfo[d]={},f=(i.coordSysMap[d]=c).model.getModel("tooltip",a);if(zl(c.getAxes(),Ng(E,!1,null)),c.getTooltipAxes&&a&&f.get("show")){var p="axis"===f.get("trigger"),_="cross"===f.get("axisPointer.type"),v=c.getTooltipAxes(f.get("axisPointer.axis"));(p||_)&&zl(v.baseAxes,Ng(E,!_||"cross",p)),_&&zl(v.otherAxes,Ng(E,"cross",!1))}}function E(F,V,q){var j=q.model.getModel("axisPointer",s),X=j.get("show");if(X&&("auto"!==X||F||Rg(j))){null==V&&(V=j.get("triggerTooltip"));var Y=(j=F?function(Ce,Ae,Oe,Ge,Pe,st){var Pt=Ae.getModel("axisPointer"),Ft={};zl(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(Ln){Ft[Ln]=Fe(Pt.get(Ln))}),Ft.snap="category"!==Ce.type&&!!st,"cross"===Pt.get("type")&&(Ft.type="line");var Nt=Ft.label||(Ft.label={});if(null==Nt.show&&(Nt.show=!1),"cross"===Pe){var rn=Pt.get("label.show");if(Nt.show=null==rn||rn,!st){var fn=Ft.lineStyle=Pt.get("crossStyle");fn&&De(Nt,fn.textStyle)}}return Ce.model.getModel("axisPointer",new di(Ft,Oe,Ge))}(q,f,s,r,F,V):j).get("snap"),Q=sc(q.model),oe=V||Y||"category"===q.type,ce=i.axesInfo[Q]={key:Q,axis:q,coordSys:c,axisPointerModel:j,triggerTooltip:V,involveSeries:oe,snap:Y,useHandle:Rg(j),seriesModels:[]};h[Q]=ce,i.seriesInvolved|=oe;var ge=function(Ce,Ae){for(var Oe=Ae.model,Ge=Ae.dim,Pe=0;Pe<Ce.length;Pe++){var st=Ce[Pe]||{};if(Eg(st[Ge+"AxisId"],Oe.id)||Eg(st[Ge+"AxisIndex"],Oe.componentIndex)||Eg(st[Ge+"AxisName"],Oe.name))return Pe}}(l,q);if(null!=ge){var we=u[ge]||(u[ge]={axesInfo:{}});we.axesInfo[Q]=ce,we.mapper=l[ge].mapper,ce.linkGroup=we}}}})}(n,e,t),n.seriesInvolved&&function(i,r){r.eachSeries(function(o){var a=o.coordinateSystem,s=o.get("tooltip.trigger",!0),l=o.get("tooltip.show",!0);a&&"none"!==s&&!1!==s&&"item"!==s&&!1!==l&&!1!==o.get("axisPointer.show",!0)&&zl(i.coordSysAxesInfo[sc(a.model)],function(u){var c=u.axis;a.getAxis(c.dim)===c&&(u.seriesModels.push(o),null==u.seriesDataCount&&(u.seriesDataCount=0),u.seriesDataCount+=o.getData().count())})},this)}(n,e),n}(e,t)}),hi({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(e,t,n){var E,F,q,i=e.currTrigger,r=[e.x,e.y],o=e,a=e.dispatchAction||ut(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){Qh(r)&&(r=Zw({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Qh(r),u=o.axesInfo,c=s.axesInfo,d="leave"===i||Qh(r),h={},f={},p={list:[],map:{}},_={showPointer:Yw(r2,f),showTooltip:Yw(o2,p)};Qo(s.coordSysMap,function(E,F){var V=l||E.containPoint(r);Qo(s.coordSysAxesInfo[F],function(q,j){var X=q.axis,Y=function(oe,ce){for(var ge=0;ge<(oe||[]).length;ge++){var we=oe[ge];if(ce.axis.dim===we.axisDim&&ce.axis.model.componentIndex===we.axisIndex)return we}}(u,q);if(!d&&V&&(!u||Y)){var Q=Y&&Y.value;null!=Q||l||(Q=X.pointToData(r)),null!=Q&&Kw(q,Q,_,!1,h)}})});var v={};return Qo(c,function(E,F){var V=E.linkGroup;V&&!f[F]&&Qo(V.axesInfo,function(q,j){var X=f[j];if(q!==E&&X){var Y=X.value;V.mapper&&(Y=E.axis.scale.parse(V.mapper(Y,Jw(q),Jw(E)))),v[E.key]=Y}})}),Qo(v,function(E,F){Kw(c[F],E,_,!0,h)}),E=f,F=c,q=h.axesInfo=[],Qo(F,function(j,X){var Y=j.axisPointerModel.option,Q=E[X];Q?(j.useHandle||(Y.status="show"),Y.value=Q.value,Y.seriesDataIndices=(Q.payloadBatch||[]).slice()):j.useHandle||(Y.status="hide"),"show"===Y.status&&q.push({axisDim:j.axis.dim,axisIndex:j.axis.model.componentIndex,value:Y.value})}),function(E,F,V,q){if(Qh(F)||!E.list.length)return q({type:"hideTip"});var j=((E.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};q({type:"showTip",escapeConnect:!0,x:F[0],y:F[1],tooltipOption:V.tooltipOption,position:V.position,dataIndexInside:j.dataIndexInside,dataIndex:j.dataIndex,seriesIndex:j.seriesIndex,dataByCoordSys:E.list})}(p,r,e,a),function(E,F,V){var q=V.getZr(),j="axisPointerLastHighlights",X=$w(q)[j]||{},Y=$w(q)[j]={};Qo(E,function(ce,ge){var we=ce.axisPointerModel.option;"show"===we.status&&Qo(we.seriesDataIndices,function(Ce){Y[Ce.seriesIndex+" | "+Ce.dataIndex]=Ce})});var Q=[],oe=[];re(X,function(ce,ge){Y[ge]||oe.push(ce)}),re(Y,function(ce,ge){X[ge]||Q.push(ce)}),oe.length&&V.dispatchAction({type:"downplay",escapeConnect:!0,batch:oe}),Q.length&&V.dispatchAction({type:"highlight",escapeConnect:!0,batch:Q})}(c,0,n),h}});var fC=["x","y"],c2=["width","height"],d2=Nc.extend({makeElOption:function(e,t,n,i,r){var o=n.axis,a=o.coordinateSystem,s=av(a,1-ef(o)),l=a.dataToPoint(t)[0],u=i.get("type");if(u&&"none"!==u){var c=iv(i),d=h2[u](o,l,s);d.style=c,e.graphicKey=d.type,e.pointer=d}lC(t,e,Qm(n),n,i,r)},getHandleTransform:function(e,t,n){var i=Qm(t,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:rv(t.axis,e,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,i){var r=n.axis,o=r.coordinateSystem,a=ef(r),s=av(o,a),l=e.position;l[a]+=t[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var u=av(o,1-a),c=(u[1]+u[0])/2,d=[c,c];return d[a]=l[a],{position:l,rotation:e.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}}}),h2={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:ov([t,n[0]],[t,n[1]],ef(e))}},shadow:function(e,t,n){var i=e.getBandWidth();return{type:"Rect",shape:uC([t-i/2,n[0]],[i,n[1]-n[0]],ef(e))}}};function ef(e){return e.isHorizontal()?0:1}function av(e,t){var n=e.getRect();return[n[fC[t]],n[fC[t]]+n[c2[t]]]}ro.registerAxisPointerClass("SingleAxisPointer",d2),lr({type:"single"});var f2=Wi.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){f2.superApply(this,"init",arguments),this.legendVisualProvider=new lc(ut(this.getData,this),ut(this.getRawData,this))},fixData:function(e){var t=e.length,n={},i=Yf(e,function(c){return n.hasOwnProperty(c[0])||(n[c[0]]=-1),c[2]}),r=[];i.buckets.each(function(c,d){r.push({name:d,dataList:c})});for(var o=r.length,a=0;a<o;++a){for(var s=r[a].name,l=0;l<r[a].dataList.length;++l)n[u=r[a].dataList[l][0]]=a;for(var u in n)n.hasOwnProperty(u)&&n[u]!==a&&(n[u]=a,e[t]=[],e[t][0]=u,e[t][1]=0,e[t][2]=s,t++)}return e},getInitialData:function(e,t){for(var n=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),i=nt(e.data,function(d){return void 0!==d[2]}),r=this.fixData(i||[]),o=[],a=this.nameMap=Ct(),s=0,l=0;l<r.length;++l)o.push(r[l][2]),a.get(r[l][2])||(a.set(r[l][2],s),s++);var u=Dl(r,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:sh(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),c=new ur(u,this);return c.initData(r),c},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),n=[],i=0;i<t;++i)n[i]=i;var r=e.mapDimension("single"),o=Yf(n,function(s){return e.get("name",s)}),a=[];return o.buckets.each(function(s,l){s.sort(function(u,c){return e.get(r,u)-e.get(r,c)}),a.push({name:l,indices:s})}),a},getAxisTooltipData:function(e,t,n){Ye(e)||(e=e?[e]:[]);for(var i,r=this.getData(),o=this.getLayerSeries(),a=[],s=o.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,c=-1,d=o[l].indices.length,h=0;h<d;++h){var f=r.get(e[0],o[l].indices[h]),p=Math.abs(f-t);p<=u&&(i=f,u=p,c=o[l].indices[h])}a.push(c)}return{dataIndices:a,nestestValue:i}},formatTooltip:function(e){var t=this.getData(),n=t.getName(e),i=t.get(t.mapDimension("value"),e);return!isNaN(i)&&null!=i||(i="-"),Oi(n+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function pC(e,t,n){if(e.count())for(var i,r=t.coordinateSystem,o=t.getLayerSeries(),a=e.mapDimension("single"),s=e.mapDimension("value"),l=Ke(o,function(v){return Ke(v.indices,function(E){var F=r.dataToPoint(e.get(a,E));return F[1]=e.get(s,E),F})}),u=function(v){for(var E=v.length,F=v[0].length,V=[],q=[],j=0,X={},Y=0;Y<F;++Y){for(var Q=0,oe=0;Q<E;++Q)oe+=v[Q][Y][1];j<oe&&(j=oe),V.push(oe)}for(var ce=0;ce<F;++ce)q[ce]=(j-V[ce])/2;for(var ge=j=0;ge<F;++ge){var we=V[ge]+q[ge];j<we&&(j=we)}return X.y0=q,X.max=j,X}(l),c=u.y0,d=n/u.max,h=o.length,f=o[0].indices.length,p=0;p<f;++p){e.setItemLayout(o[0].indices[p],{layerIndex:0,x:l[0][p][0],y0:i=c[p]*d,y:l[0][p][1]*d});for(var _=1;_<h;++_)e.setItemLayout(o[_].indices[p],{layerIndex:_,x:l[_][p][0],y0:i+=l[_-1][p][1]*d,y:l[_][p][1]*d})}}function tf(e,t,n){m.call(this);var i=new Ao({z2:2});i.seriesIndex=t.seriesIndex;var r=new oi({z2:4,silent:e.getModel("label").get("silent")});function o(){r.ignore=r.hoverIgnore}function a(){r.ignore=r.normalIgnore}this.add(i),this.add(r),this.updateData(!0,e,"normal",t,n),this.on("emphasis",o).on("normal",a).on("mouseover",o).on("mouseout",a)}Zr({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,n){var i=e.getData(),r=this.group,o=e.getLayerSeries(),a=i.getLayout("layoutInfo");function u(f){return f.name}r.attr("position",[0,a.rect.y+a.boundaryGap[0]]);var c=new ma(this._layersSeries||[],o,u,u),d={};function h(f,p,_){var Pt,Ft,rn,v=this._layers;if("remove"!==f){for(var E,F,V,q=[],j=[],X=o[p].indices,Y=0;Y<X.length;Y++){var Q=i.getItemLayout(X[Y]),oe=Q.x,ce=Q.y0,ge=Q.y;q.push([oe,ce]),j.push([oe,ce+ge]),E=i.getItemVisual(X[Y],"color")}var we=i.getItemLayout(X[0]),Ce=i.getItemModel(X[Y-1]),Ae=Ce.getModel("label"),Oe=Ae.get("margin");if("add"===f){var Ge=d[p]=new m;F=new zx({shape:{points:q,stackedOnPoints:j,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),V=new oi({style:{x:we.x-Oe,y:we.y0+we.y/2}}),Ge.add(F),Ge.add(V),r.add(Ge),F.setClipPath((Pt=F.getBoundingRect(),Ft=e,Tr(rn=new vi({shape:{x:Pt.x-10,y:Pt.y-10,width:0,height:Pt.height+20}}),{shape:{width:Pt.width+20,height:Pt.height+20}},Ft,function(){F.removeClipPath()}),rn))}else F=(Ge=v[_]).childAt(0),V=Ge.childAt(1),r.add(Ge),d[p]=Ge,Qn(F,{shape:{points:q,stackedOnPoints:j}},e),Qn(V,{style:{x:we.x-Oe,y:we.y0+we.y/2}},e);var Pe=Ce.getModel("emphasis.itemStyle"),st=Ce.getModel("itemStyle");Fi(V.style,Ae,{text:Ae.get("show")?e.getFormattedLabel(X[Y-1],"normal")||i.getName(X[Y-1]):null,textVerticalAlign:"middle"}),F.setStyle(fe({fill:E},st.getItemStyle(["color"]))),Ri(F,Pe.getItemStyle())}else r.remove(v[p])}c.add(ut(h,this,"add")).update(ut(h,this,"update")).remove(ut(h,this,"remove")).execute(),this._layersSeries=o,this._layers=d},dispose:function(){}}),Gi(function(e,t){e.eachSeriesByType("themeRiver",function(n){var i=n.getData(),r=n.coordinateSystem,o={},a=r.getRect();o.rect=a;var s=n.get("boundaryGap"),l=r.getAxis();o.boundaryGap=s,"horizontal"===l.orient?(s[0]=yn(s[0],a.height),s[1]=yn(s[1],a.height),pC(i,n,a.height-s[0]-s[1])):(s[0]=yn(s[0],a.width),s[1]=yn(s[1],a.width),pC(i,n,a.width-s[0]-s[1])),i.setLayout("layoutInfo",o)})}),Ni(function(e){e.eachSeriesByType("themeRiver",function(t){var n=t.getData(),i=t.getRawData(),r=t.get("color"),o=Ct();n.each(function(a){o.set(n.getRawIndex(a),a)}),i.each(function(a){var s=i.getName(a),l=r[(t.nameMap.get(s)-1)%r.length];i.setItemVisual(a,"color",l);var u=o.get(a);null!=u&&n.setItemVisual(u,"color",l)})})}),to(uc("themeRiver")),Wi.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var n={name:e.name,children:e.data};!function o(a){var s=0;re(a.children,function(u){o(u);var c=u.value;Ye(c)&&(c=c[0]),s+=c});var l=a.value;Ye(l)&&(l=l[0]),null!=l&&!isNaN(l)||(l=s),l<0&&(l=0),Ye(a.value)?a.value[0]=l:a.value=l}(n);var i=Ke(e.levels||[],function(o){return new di(o,this,t)},this),r=Os.createTree(n,this,function(o){o.wrapMethod("getItemModel",function(a,s){var l=r.getNodeByDataIndex(s),u=i[l.depth];return u&&(a.parentModel=u),a})});return r.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=Wi.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=im(n,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var Zs=tf.prototype;Zs.updateData=function(e,t,n,i,r){(this.node=t).piece=this,i=i||this._seriesModel,r=r||this._ecModel;var o=this.childAt(0);o.dataIndex=t.dataIndex;var a=t.getModel(),s=t.getLayout(),l=fe({},s);l.label=null;var p,v,u=function(p,_,v){var E=p.getVisual("color"),F=p.getVisual("visualMeta");F&&0!==F.length||(E=null);var V=p.getModel("itemStyle").get("color");if(V)return V;if(E)return E;if(0===p.depth)return v.option.color[0];var q=v.option.color.length;return v.option.color[function(j){for(var X=j;1<X.depth;)X=X.parentNode;return Je(j.getAncestors()[0].children,X)}(p)%q]}(t,0,r);p=t,v=u,i.getData().setItemVisual(p.dataIndex,"color",v);var c,d=a.getModel("itemStyle").getItemStyle();c=De({lineJoin:"bevel",fill:(c="normal"===n?d:rt(a.getModel(n+".itemStyle").getItemStyle(),d)).fill||u},c),e?(o.setShape(l),o.shape.r=s.r0,Qn(o,{shape:{r:s.r}},i,t.dataIndex),o.useStyle(c)):"object"==typeof c.fill&&c.fill.type||"object"==typeof o.style.fill&&o.style.fill.type?(Qn(o,{shape:l},i),o.useStyle(c)):Qn(o,{shape:l,style:c},i),this._updateLabel(i,u,n);var h=a.getShallow("cursor");if(h&&o.attr("cursor",h),e){var f=i.getShallow("highlightPolicy");this._initEvents(o,t,i,f)}this._seriesModel=i||this._seriesModel,this._ecModel=r||this._ecModel,Ri(this)},Zs.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(t.node===n?n.piece.updateData(!1,n,"emphasis"):function(i,r,o){return"none"!==o&&("self"===o?i===r:"ancestor"===o?i===r||i.isAncestorOf(r):i===r||i.isDescendantOf(r))}(n,t.node,e)?n.piece.childAt(0).trigger("highlight"):"none"!==e&&n.piece.childAt(0).trigger("downplay"))})},Zs.onNormal=function(){this.node.hostTree.root.eachNode(function(e){e.piece&&e.piece.updateData(!1,e,"normal")})},Zs.onHighlight=function(){this.updateData(!1,this.node,"highlight")},Zs.onDownplay=function(){this.updateData(!1,this.node,"downplay")},Zs._updateLabel=function(e,t,n){var i=this.node.getModel(),r=i.getModel("label"),o="normal"===n||"emphasis"===n?r:i.getModel(n+".label"),a=i.getModel("emphasis.label"),s=o.get("formatter")?n:"normal",l=an(e.getFormattedLabel(this.node.dataIndex,s,null,null,"label"),this.node.name);!1===Q("show")&&(l="");var u=this.node.getLayout(),c=o.get("minAngle");null==c&&(c=r.get("minAngle")),null!=(c=c/180*Math.PI)&&Math.abs(u.endAngle-u.startAngle)<c&&(l="");var h=this.childAt(1);Qr(h.style,h.hoverStyle||{},r,a,{defaultText:o.getShallow("show")?l:null,autoColor:t,useInsideStyle:!0});var f,p=(u.startAngle+u.endAngle)/2,_=Math.cos(p),v=Math.sin(p),E=Q("position"),F=Q("distance")||0,V=Q("align");"outside"===E?(f=u.r+F,V=p>Math.PI/2?"right":"left"):V&&"center"!==V?"left"===V?(f=u.r0+F,p>Math.PI/2&&(V="right")):"right"===V&&(f=u.r-F,p>Math.PI/2&&(V="left")):(f=(u.r+u.r0)/2,V="center"),h.attr("style",{text:l,textAlign:V,textVerticalAlign:Q("verticalAlign")||"middle",opacity:Q("opacity")}),h.attr("position",[f*_+u.cx,f*v+u.cy]);var X=Q("rotate"),Y=0;function Q(oe){return o.get(oe)??r.get(oe)}"radial"===X?(Y=-p)<-Math.PI/2&&(Y+=Math.PI):"tangential"===X?(Y=Math.PI/2-p)>Math.PI/2?Y-=Math.PI:Y<-Math.PI/2&&(Y+=Math.PI):"number"==typeof X&&(Y=X*Math.PI/180),h.attr("rotation",Y)},Zs._initEvents=function(e,t,n,i){function r(){a.onEmphasis(i)}function o(){a.onNormal()}e.off("mouseover").off("mouseout").off("emphasis").off("normal");var a=this;n.isAnimationEnabled()&&e.on("mouseover",r).on("mouseout",o).on("emphasis",r).on("normal",o).on("downplay",function(){a.onDownplay()}).on("highlight",function(){a.onHighlight()})},Ue(tf,m),fr.extend({type:"sunburst",init:function(){},render:function(e,t,n,i){var r=this;this.seriesModel=e,this.api=n,this.ecModel=t;var o=e.getData(),a=o.tree.root,s=e.getViewRoot(),l=this.group,u=e.get("renderLabelForZeroData"),c=[];if(s.eachNode(function(p){c.push(p)}),function(p,_){function v(F){return F.getId()}function E(F,V){!function(q,j){if(u||!q||q.getValue()||(q=null),q!==a&&j!==a)if(j&&j.piece)q?(j.piece.updateData(!1,q,"normal",e,t),o.setItemGraphicEl(q.dataIndex,j.piece)):!(Y=j)||Y.piece&&(l.remove(Y.piece),Y.piece=null);else if(q){var X=new tf(q,e,t);l.add(X),o.setItemGraphicEl(q.dataIndex,X)}var Y}(null==F?null:p[F],null==V?null:_[V])}0===p.length&&0===_.length||new ma(_,p,v,v).add(E).update(E).remove(Lt(E,null)).execute()}(c,this._oldChildren||[]),function(p,_){if(0<_.depth){r.virtualPiece?r.virtualPiece.updateData(!1,p,"normal",e,t):(r.virtualPiece=new tf(p,e,t),l.add(r.virtualPiece)),_.piece._onclickEvent&&_.piece.off("click",_.piece._onclickEvent);var v=function(E){r._rootToNode(_.parentNode)};_.piece._onclickEvent=v,r.virtualPiece.on("click",v)}else r.virtualPiece&&(l.remove(r.virtualPiece),r.virtualPiece=null)}(a,s),i&&i.highlight&&i.highlight.piece){var h=e.getShallow("highlightPolicy");i.highlight.piece.onEmphasis(h)}else if(i&&i.unhighlight){var f=this.virtualPiece;!f&&a.children.length&&(f=a.children[0].piece),f&&f.onNormal()}this._initEvents(),this._oldChildren=c},dispose:function(){},_initEvents:function(){function e(n){var i=!1;t.seriesModel.getViewRoot().eachNode(function(r){if(!i&&r.piece&&r.piece.childAt(0)===n.target){var o=r.getModel().get("nodeClick");if("rootToNode"===o)t._rootToNode(r);else if("link"===o){var a=r.getModel(),s=a.get("link");s&&Pu(s,a.get("target",!0)||"_blank")}i=!0}})}var t=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var i=e[0]-n.cx,r=e[1]-n.cy,o=Math.sqrt(i*i+r*r);return o<=n.r&&o>=n.r0}}});var mC="sunburstRootToNode";hi({type:mC,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,i){var r=mc(e,[mC],n);if(r){var o=n.getViewRoot();o&&(e.direction=nm(o,r.node)?"rollUp":"drillDown"),n.resetViewRoot(r.node)}})});var vC="sunburstHighlight";hi({type:vC,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,i){var r=mc(e,[vC],n);r&&(e.highlight=r.node)})}),hi({type:"sunburstUnhighlight",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,i){e.unhighlight=!0})});var yC=Math.PI/180;function x2(e,t){return t=t||[0,0],Ke(["x","y"],function(n,i){var r=this.getAxis(n),o=t[i],a=e[i]/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(o-a)-r.dataToCoord(o+a))},this)}function b2(e,t){return t=t||[0,0],Ke([0,1],function(n){var i=t[n],r=e[n]/2,o=[],a=[];return o[n]=i-r,a[n]=i+r,o[1-n]=a[1-n]=t[1-n],Math.abs(this.dataToPoint(o)[n]-this.dataToPoint(a)[n])},this)}function _2(e,t){var n=this.getAxis(),i=t instanceof Array?t[0]:t,r=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-r)-n.dataToCoord(i+r))}function w2(e,t){return Ke(["Radius","Angle"],function(n,i){var r=this["get"+n+"Axis"](),o=t[i],a=e[i]/2,s="dataTo"+n,l="category"===r.type?r.getBandWidth():Math.abs(r[s](o-a)-r[s](o+a));return"Angle"===n&&(l=l*Math.PI/180),l},this)}Ni(Lt(Ch,"sunburst")),Gi(Lt(function(e,t,n,i){t.eachSeriesByType(e,function(r){var o=r.get("center"),a=r.get("radius");Ye(a)||(a=[0,a]),Ye(o)||(o=[o,o]);var s=n.getWidth(),l=n.getHeight(),u=Math.min(s,l),c=yn(o[0],s),d=yn(o[1],l),h=yn(a[0],u/2),f=yn(a[1],u/2),p=-r.get("startAngle")*yC,_=r.get("minAngle")*yC,v=r.getData().tree.root,E=r.getViewRoot(),F=E.depth,V=r.get("sort");null!=V&&function Pe(st,Pt){var Ft=st.children||[];st.children=function y2(e,t){if("function"==typeof t)return e.sort(t);var n="asc"===t;return e.sort(function(i,r){var o=(i.getValue()-r.getValue())*(n?1:-1);return 0==o?(i.dataIndex-r.dataIndex)*(n?-1:1):o})}(Ft,Pt),Ft.length&&re(st.children,function(Nt){Pe(Nt,Pt)})}(E,V);var q=0;re(E.children,function(Pe){isNaN(Pe.getValue())||q++});var j=E.getValue(),X=Math.PI/(j||q)*2,Y=0<E.depth,oe=(f-h)/(E.height-(Y?-1:1)||1),ce=r.get("clockwise"),ge=r.get("stillShowZeroSum"),we=ce?1:-1,Ce=function(Pe,st){if(Pe){var Pt=st;if(Pe!==v){var Ft=Pe.getValue(),Nt=0===j&&ge?X:Ft*X;Nt<_&&(Nt=_),Pt=st+we*Nt;var rn=Pe.depth-F-(Y?-1:1),fn=h+oe*rn,Ln=h+oe*(1+rn),Zt=Pe.getModel();null!=Zt.get("r0")&&(fn=yn(Zt.get("r0"),u/2)),null!=Zt.get("r")&&(Ln=yn(Zt.get("r"),u/2)),Pe.setLayout({angle:Nt,startAngle:st,endAngle:Pt,clockwise:ce,cx:c,cy:d,r0:fn,r:Ln})}if(Pe.children&&Pe.children.length){var kn=0;re(Pe.children,function(Rn){kn+=Ce(Rn,st+kn)})}return Pt-st}};if(Y){var Ge=2*Math.PI;v.setLayout({angle:Ge,startAngle:p,endAngle:p+Ge,clockwise:ce,cx:c,cy:d,r0:h,r:h+oe})}Ce(E,p)})},"sunburst")),to(Lt(uc,"sunburst"));var xC=sy,C2=["itemStyle"],S2=["emphasis","itemStyle"],M2=["label"],T2=["emphasis","label"],I2={cartesian2d:function(e){var t=e.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:ut(x2,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(n){return e.dataToPoint(n)},size:ut(b2,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:ut(_2,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),i=t.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:i[1],r0:i[0]},api:{coord:ut(function(r){var o=t.dataToRadius(r[0]),a=n.dataToAngle(r[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s}),size:ut(w2,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(i,r){return e.dataToPoint(i,r)}}}}};function bC(e,t,n,i,r){null==n[e]||r||(t[e]=n[e],n[e]=i[e])}function _C(e,t,n,i){var r=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms():I2[o.type](o));var s,l,u,c,d,v,E,h=De({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(v,E){return null==E&&(E=s),t.get(t.getDimension(v||0),E)},style:function(v,E){null==E&&(E=s),_(E);var F=l.getModel(C2).getItemStyle();null!=d&&(F.fill=d);var V=t.getItemVisual(E,"opacity");null!=V&&(F.opacity=V);var q=v?SC(v,u):u;return Fi(F,q,null,{autoColor:d,isRectText:!0}),F.text=q.getShallow("show")?_t(e.getFormattedLabel(E,"normal"),gh(t,E)):null,v&&MC(F,v),F},styleEmphasis:function(v,E){null==E&&(E=s),_(E);var F=l.getModel(S2).getItemStyle(),V=v?SC(v,c):c;return Fi(F,V,null,{isRectText:!0},!0),F.text=V.getShallow("show")?pn(e.getFormattedLabel(E,"emphasis"),e.getFormattedLabel(E,"normal"),gh(t,E)):null,v&&MC(F,v),F},visual:function(v,E){return null==E&&(E=s),t.getItemVisual(E,v)},barLayout:function(v){if(o.getBaseAxis)return function(E){var F=[],V=E.axis;if("category"===V.type){for(var q=V.getBandWidth(),j=0;j<E.count;j++)F.push(De({bandWidth:q,axisKey:"axis0",stackId:hg+j},E));var X=ux(F),Y=[];for(j=0;j<E.count;j++){var Q=X.axis0[hg+j];Q.offsetCenter=Q.offset+Q.width/2,Y.push(Q)}return Y}}(De({axis:o.getBaseAxis()},v))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(v){return dp(v,n)}},a.api||{}),f={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:(v=e.getData(),E={},re(v.dimensions,function(F,V){var q=v.getDimensionInfo(F);if(!q.isExtraCoord){var j=q.coordDim;(E[j]=E[j]||[])[q.coordDimIndex]=V}}),E)},p=!0;return function(v,E){return s=v,p=!0,r&&r(De({dataIndexInside:v,dataIndex:t.getRawIndex(v),actionType:E?E.type:null},f),h)};function _(v){null==v&&(v=s),p&&(l=t.getItemModel(v),u=l.getModel(M2),c=l.getModel(T2),d=t.getItemVisual(v,"color"),p=!1)}}function sv(e,t,n,i,r,o){return(e=lv(e,t,n,i,r,o,!0))&&o.setItemGraphicEl(t,e),e}function lv(e,t,n,i,r,o,a){var h,s=!n,l=(n=n||{}).type,u=n.shape,c=n.style;if(e&&(s||null!=l&&l!==e.__customGraphicType||"path"===l&&(h=u)&&(h.hasOwnProperty("pathData")||h.hasOwnProperty("d"))&&TC(u)!==e.__customPathData||"image"===l&&AC(c,"image")&&c.image!==e.__customImagePath||"text"===l&&AC(u,"text")&&c.text!==e.__customText)&&(r.remove(e),e=null),!s){var d=!e;return function(h,f,p,_,v,E,F){var V={},q=p.style||{};if(p.shape&&(V.shape=Fe(p.shape)),p.position&&(V.position=p.position.slice()),p.scale&&(V.scale=p.scale.slice()),p.origin&&(V.origin=p.origin.slice()),p.rotation&&(V.rotation=p.rotation),"image"===h.type&&p.style){var j=V.style={};re(["x","y","width","height"],function(Q){bC(Q,j,q,h.style,E)})}if("text"===h.type&&p.style&&(j=V.style={},re(["x","y"],function(Q){bC(Q,j,q,h.style,E)}),!q.hasOwnProperty("textFill")&&q.fill&&(q.textFill=q.fill),!q.hasOwnProperty("textStroke")&&q.stroke&&(q.textStroke=q.stroke)),"group"!==h.type&&(h.useStyle(q),E)){h.style.opacity=0;var X=q.opacity;null==X&&(X=1),Tr(h,{style:{opacity:X}},_,f)}E?h.attr(V):Qn(h,V,_,f),p.hasOwnProperty("z2")&&h.attr("z2",p.z2||0),p.hasOwnProperty("silent")&&h.attr("silent",p.silent),p.hasOwnProperty("invisible")&&h.attr("invisible",p.invisible),p.hasOwnProperty("ignore")&&h.attr("ignore",p.ignore),p.hasOwnProperty("info")&&h.attr("info",p.info);var Y=p.styleEmphasis;Du(h,Y),F&&ws(h,!1!==Y)}(e=e||function(h){var f,p=h.type;if("path"===p){var _=h.shape,v=null!=_.width&&null!=_.height?{x:_.x||0,y:_.y||0,width:_.width,height:_.height}:null,E=TC(_);(f=Ad(E,null,v,_.layout||"center")).__customPathData=E}else if("image"===p)(f=new li({})).__customImagePath=h.style.image;else if("text"===p)(f=new oi({})).__customText=h.style.text;else if("group"===p)f=new m;else{if("compoundPath"===p)throw new Error('"compoundPath" is not supported yet.');f=new(sp(p))}return f.__customGraphicType=p,f.name=h.name,f}(n),t,n,i,0,d,a),"group"===l&&function(h,f,p,_,v){var Y,E=p.children,F=E?E.length:0,V=p.$mergeChildren,q="byName"===V||p.diffChildrenByName,j=!1===V;if(F||q||j){if(q)return void new ma((Y={oldChildren:h.children()||[],newChildren:E||[],dataIndex:f,animatableModel:_,group:h,data:v}).oldChildren,Y.newChildren,wC,wC,Y).add(CC).update(CC).remove(D2).execute();j&&h.removeAll();for(var X=0;X<F;X++)E[X]&&lv(h.childAt(X),f,E[X],_,h,v)}}(e,t,n,i,o),r.add(e),e}}function wC(e,t){return(e&&e.name)??"e\0\0"+t}function CC(e,t){var n=this.context;lv(null!=t?n.oldChildren[t]:null,n.dataIndex,null!=e?n.newChildren[e]:null,n.animatableModel,n.group,n.data)}function SC(e,t){var n=new di({},t);return re(xC,function(i,r){e.hasOwnProperty(i)&&(n.option[r]=e[i])}),n}function MC(e,t){for(var n in t)!t.hasOwnProperty(n)&&xC.hasOwnProperty(n)||(e[n]=t[n])}function D2(e){var t=this.context,n=t.oldChildren[e];n&&t.group.remove(n)}function TC(e){return e&&(e.pathData||e.d)}function AC(e,t){return e&&e.hasOwnProperty(t)}function IC(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function DC(e,t){return t.dim+e.model.componentIndex}function nf(e,t){er.call(this,"radius",e,t),this.type="category"}Wi.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(e,t){return ya(this.getSource(),this)},getDataParams:function(e,t,n){var i=Wi.prototype.getDataParams.apply(this,arguments);return n&&(i.info=n.info),i}}),fr.extend({type:"custom",_data:null,render:function(e,t,n,i){var r=this._data,o=e.getData(),a=this.group,s=_C(e,o,t,n);o.diff(r).add(function(u){sv(null,u,s(u,i),e,a,o)}).update(function(u,c){sv(r.getItemGraphicEl(c),u,s(u,i),e,a,o)}).remove(function(u){var c=r.getItemGraphicEl(u);c&&a.remove(c)}).execute();var l=e.get("clip",!0)?vh(e.coordinateSystem,!1,e):null;l?a.setClipPath(l):a.removeClipPath(),this._data=o},incrementalPrepareRender:function(e,t,n){this.group.removeAll(),this._data=null},incrementalRender:function(e,t,n,i,r){var o=t.getData(),a=_C(t,o,n,i);function s(u){u.isGroup||(u.incremental=!0,u.useHoverLayer=!0)}for(var l=e.start;l<e.end;l++)sv(null,l,a(l,r),t,this.group,o).traverse(s)},dispose:en,filterForExposedEvent:function(e,t,n,i){var r=t.element;if(null==r||n.name===r)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===r)return!0;return!1}}),nf.prototype={constructor:nf,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToRadius:er.prototype.dataToCoord,radiusToData:er.prototype.coordToData},Ue(nf,er);var k2=Wr();function rf(e,t){er.call(this,"angle",e,t=t||[0,360]),this.type="category"}function of(e){this.name=e||"",this.cx=0,this.cy=0,this._radiusAxis=new nf,this._angleAxis=new rf,this._radiusAxis.polar=this._angleAxis.polar=this}rf.prototype={constructor:rf,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToAngle:er.prototype.dataToCoord,angleToData:er.prototype.coordToData,calculateCategoryInterval:function(){var e=this.getLabelModel(),t=this.scale,n=t.getExtent(),i=t.count();if(n[1]-n[0]<1)return 0;var r=n[0],o=this.dataToCoord(r+1)-this.dataToCoord(r),a=Math.abs(o),s=Jn(r,e.getFont(),"center","top"),l=Math.max(s.height,7)/a;isNaN(l)&&(l=1/0);var u=Math.max(0,Math.floor(l)),c=k2(this.model),d=c.lastAutoInterval,h=c.lastTickCount;return null!=d&&null!=h&&Math.abs(d-u)<=1&&Math.abs(h-i)<=1&&u<d?u=d:(c.lastTickCount=i,c.lastAutoInterval=u),u}},Ue(rf,er),of.prototype={type:"polar",axisPointerEnabled:!0,constructor:of,dimensions:["radius","angle"],model:null,containPoint:function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},getAxis:function(e){return this["_"+e+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var t=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===e&&t.push(n),i.scale.type===e&&t.push(i),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},pointToData:function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},pointToCoord:function(e){var t=e[0]-this.cx,n=e[1]-this.cy,i=this.getAngleAxis(),r=i.getExtent(),o=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);i.inverse?o=a-360:a=o+360;var s=Math.sqrt(t*t+n*n);t/=s,n/=s;for(var l=Math.atan2(-n,t)/Math.PI*180,u=l<o?1:-1;l<o||a<l;)l+=360*u;return[s,l]},coordToPoint:function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},getArea:function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:e.inverse,contain:function(r,o){var a=r-this.cx,s=o-this.cy,l=a*a+s*s,u=this.r,c=this.r0;return l<=u*u&&c*c<=l}}}};var uv=yi.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function kC(e,t){return t.type||(t.data?"category":"value")}function E2(e,t){var n=this,i=n.getAngleAxis(),r=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),r.scale.setExtent(1/0,-1/0),e.eachSeries(function(s){if(s.coordinateSystem===n){var l=s.getData();re(l.mapDimension("radius",!0),function(u){r.scale.unionExtentFromData(l,Qu(l,u))}),re(l.mapDimension("angle",!0),function(u){i.scale.unionExtentFromData(l,Qu(l,u))})}}),ja(i.scale,i.model),ja(r.scale,r.model),"category"===i.type&&!i.onBand){var o=i.getExtent(),a=360/i.scale.count();i.inverse?o[1]+=a:o[1]-=a,i.setExtent(o[0],o[1])}}function NC(e,t){if(e.type=t.get("type"),e.scale=El(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var n=t.get("startAngle");e.setExtent(n,n+(e.inverse?-360:360))}(t.axis=e).model=t}rt(uv.prototype,Es),Pl("angle",uv,kC,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),Pl("radius",uv,kC,{splitNumber:5}),no({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(e){var t;return this.ecModel.eachComponent(e,function(n){n.getCoordSysModel()===this&&(t=n)},this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),Ir.register("polar",{dimensions:of.prototype.dimensions,create:function(e,t){var n=[];return e.eachComponent("polar",function(i,r){var o=new of(r);o.update=E2;var a=o.getRadiusAxis(),s=o.getAngleAxis(),l=i.findAxisModel("radiusAxis"),u=i.findAxisModel("angleAxis");NC(a,l),NC(s,u),function(c,d,h){var f=d.get("center"),p=h.getWidth(),_=h.getHeight();c.cx=yn(f[0],p),c.cy=yn(f[1],_);var v=c.getRadiusAxis(),E=Math.min(p,_)/2,F=d.get("radius");null==F?F=[0,"100%"]:Ye(F)||(F=[0,F]),F=[yn(F[0],E),yn(F[1],E)],v.inverse?v.setExtent(F[1],F[0]):v.setExtent(F[0],F[1])}(o,i,t),n.push(o),(i.coordinateSystem=o).model=i}),e.eachSeries(function(i){if("polar"===i.get("coordinateSystem")){var r=e.queryComponents({mainType:"polar",index:i.get("polarIndex"),id:i.get("polarId")})[0];i.coordinateSystem=r.coordinateSystem}}),n}});var L2=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function af(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var i=e.coordToPoint([t[0],n]),r=e.coordToPoint([t[1],n]);return{x1:i[0],y1:i[1],x2:r[0],y2:r[1]}}function sf(e){return e.getRadiusAxis().inverse?0:1}function EC(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}ro.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,i=n.polar,r=i.getRadiusAxis().getExtent(),o=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=Ke(n.getViewLabels(),function(l){return(l=Fe(l)).coord=n.dataToCoord(l.tickValue),l});EC(s),EC(o),re(L2,function(l){!e.get(l+".show")||n.scale.isBlank()&&"axisLine"!==l||this["_"+l](e,i,o,a,r,s)},this)}},_axisLine:function(e,t,n,i,r){var o,a=e.getModel("axisLine.lineStyle"),s=sf(t),l=s?0:1;(o=0===r[l]?new Fo({shape:{cx:t.cx,cy:t.cy,r:r[s]},style:a.getLineStyle(),z2:1,silent:!0}):new _d({shape:{cx:t.cx,cy:t.cy,r:r[s],r0:r[l]},style:a.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(o)},_axisTick:function(e,t,n,i,r){var o=e.getModel("axisTick"),a=(o.get("inside")?-1:1)*o.get("length"),s=r[sf(t)],l=Ke(n,function(u){return new yr({shape:af(t,[s,s+a],u.coord)})});this.group.add(mo(l,{style:De(o.getModel("lineStyle").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})}))},_minorTick:function(e,t,n,i,r){if(i.length){for(var o=e.getModel("axisTick"),a=e.getModel("minorTick"),s=(o.get("inside")?-1:1)*a.get("length"),l=r[sf(t)],u=[],c=0;c<i.length;c++)for(var d=0;d<i[c].length;d++)u.push(new yr({shape:af(t,[l,l+s],i[c][d].coord)}));this.group.add(mo(u,{style:De(a.getModel("lineStyle").getLineStyle(),De(o.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(e,t,n,i,r,o){var a=e.getCategories(!0),s=e.getModel("axisLabel"),l=s.get("margin"),u=e.get("triggerEvent");re(o,function(c,d){var h=s,f=c.tickValue,p=r[sf(t)],_=t.coordToPoint([p+l,c.coord]),v=t.cx,E=t.cy,F=Math.abs(_[0]-v)/p<.3?"center":_[0]>v?"left":"right",V=Math.abs(_[1]-E)/p<.3?"middle":_[1]>E?"top":"bottom";a&&a[f]&&a[f].textStyle&&(h=new di(a[f].textStyle,s,s.ecModel));var q=new oi({silent:Yr.isLabelSilent(e)});this.group.add(q),Fi(q.style,h,{x:_[0],y:_[1],textFill:h.getTextColor()||e.get("axisLine.lineStyle.color"),text:c.formattedLabel,textAlign:F,textVerticalAlign:V}),u&&(q.eventData=Yr.makeAxisEventDataBase(e),q.eventData.targetType="axisLabel",q.eventData.value=c.rawLabel)},this)},_splitLine:function(e,t,n,i,r){var o=e.getModel("splitLine").getModel("lineStyle"),a=o.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=0;u<n.length;u++){var c=s++%a.length;l[c]=l[c]||[],l[c].push(new yr({shape:af(t,r,n[u].coord)}))}for(u=0;u<l.length;u++)this.group.add(mo(l[u],{style:De({stroke:a[u%a.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},_minorSplitLine:function(e,t,n,i,r){if(i.length){for(var o=e.getModel("minorSplitLine").getModel("lineStyle"),a=[],s=0;s<i.length;s++)for(var l=0;l<i[s].length;l++)a.push(new yr({shape:af(t,r,i[s][l].coord)}));this.group.add(mo(a,{style:o.getLineStyle(),silent:!0,z:e.get("z")}))}},_splitArea:function(e,t,n,i,r){if(n.length){var o=e.getModel("splitArea").getModel("areaStyle"),a=o.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=Math.PI/180,c=-n[0].coord*u,d=Math.min(r[0],r[1]),h=Math.max(r[0],r[1]),f=e.get("clockwise"),p=1;p<n.length;p++){var _=s++%a.length;l[_]=l[_]||[],l[_].push(new Ao({shape:{cx:t.cx,cy:t.cy,r0:d,r:h,startAngle:c,endAngle:-n[p].coord*u,clockwise:f},silent:!0})),c=-n[p].coord*u}for(p=0;p<l.length;p++)this.group.add(mo(l[p],{style:De({fill:a[p%a.length]},o.getAreaStyle()),silent:!0}))}}});var R2=["axisLine","axisTickLabel","axisName"],P2=["splitLine","splitArea","minorSplitLine"];ro.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,i=n.polar,r=i.getAngleAxis(),o=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=r.getExtent()[0],l=n.getExtent(),u={position:[(d=i).cx,d.cy],rotation:s/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1},c=new Yr(e,u);re(R2,c.add,c),this.group.add(c.getGroup()),re(P2,function(d){e.get(d+".show")&&!n.scale.isBlank()&&this["_"+d](e,i,s,l,o,a)},this)}var d},_splitLine:function(e,t,n,i,r){var o=e.getModel("splitLine").getModel("lineStyle"),a=o.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=0;u<r.length;u++){var c=s++%a.length;l[c]=l[c]||[],l[c].push(new Fo({shape:{cx:t.cx,cy:t.cy,r:r[u].coord}}))}for(u=0;u<l.length;u++)this.group.add(mo(l[u],{style:De({stroke:a[u%a.length],fill:null},o.getLineStyle()),silent:!0}))},_minorSplitLine:function(e,t,n,i,r,o){if(o.length){for(var a=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<o.length;l++)for(var u=0;u<o[l].length;u++)s.push(new Fo({shape:{cx:t.cx,cy:t.cy,r:o[l][u].coord}}));this.group.add(mo(s,{style:De({fill:null},a.getLineStyle()),silent:!0}))}},_splitArea:function(e,t,n,i,r){if(r.length){var o=e.getModel("splitArea").getModel("areaStyle"),a=o.get("color"),s=0;a=a instanceof Array?a:[a];for(var l=[],u=r[0].coord,c=1;c<r.length;c++){var d=s++%a.length;l[d]=l[d]||[],l[d].push(new Ao({shape:{cx:t.cx,cy:t.cy,r0:u,r:r[c].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),u=r[c].coord}for(c=0;c<l.length;c++)this.group.add(mo(l[c],{style:De({fill:a[c%a.length]},o.getAreaStyle()),silent:!0}))}}});var B2=Nc.extend({makeElOption:function(e,t,n,i,r){var o=n.axis;"angle"===o.dim&&(this.animationThreshold=Math.PI/18);var a,s=o.polar,l=s.getOtherAxis(o).getExtent();a=o["dataTo"+Bd(o.dim)](t);var u=i.get("type");if(u&&"none"!==u){var c=iv(i),d=O2[u](o,s,a,l,c);d.style=c,e.graphicKey=d.type,e.pointer=d}var h=i.get("label.margin");aC(e,n,i,r,function(f,p,_,v,E){var F=p.axis,V=F.dataToCoord(f),q=v.getAngleAxis().getExtent()[0];q=q/180*Math.PI;var j,X,Y,Q=v.getRadiusAxis().getExtent();if("radius"===F.dim){var oe=gr();So(oe,oe,q),wr(oe,oe,[v.cx,v.cy]),j=Uo([V,-E],oe);var ce=p.getModel("axisLabel").get("rotate")||0,ge=Yr.innerTextLayout(q,ce*Math.PI/180,-1);X=ge.textAlign,Y=ge.textVerticalAlign}else{var we=Q[1];j=v.coordToPoint([we+E,V]);var Ce=v.cx,Ae=v.cy;X=Math.abs(j[0]-Ce)/we<.3?"center":j[0]>Ce?"left":"right",Y=Math.abs(j[1]-Ae)/we<.3?"middle":j[1]>Ae?"top":"bottom"}return{position:j,align:X,verticalAlign:Y}}(t,n,0,s,h))}}),O2={line:function(e,t,n,i,r){return"angle"===e.dim?{type:"Line",shape:ov(t.coordToPoint([i[0],n]),t.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,i,r){var o=Math.max(1,e.getBandWidth()),a=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:cC(t.cx,t.cy,i[0],i[1],(-n-o/2)*a,(o/2-n)*a)}:{type:"Sector",shape:cC(t.cx,t.cy,n-o/2,n+o/2,0,2*Math.PI)}}};function cv(e,t){t.update="updateView",hi(t,function(n,i){var r={};return i.eachComponent({mainType:"geo",query:n},function(o){o[e](n.name),re(o.coordinateSystem.regions,function(a){r[a.name]=o.isSelected(a.name)||!1})}),{selected:r,name:n.name}})}function wa(e,t,n){this._model=e}function LC(e,t,n,i){var r=n.calendarModel,o=n.seriesModel,a=r?r.coordinateSystem:o?o.coordinateSystem:null;return a===this?a[e](i):null}ro.registerAxisPointerClass("PolarAxisPointer",B2),Gi(Lt(function(e,t,n){var i={},r=function(o){var a={};re(o,function(l,u){var c=l.getData(),d=l.coordinateSystem,h=d.getBaseAxis(),f=DC(d,h),p=h.getExtent(),_="category"===h.type?h.getBandWidth():Math.abs(p[1]-p[0])/c.count(),v=a[f]||{bandWidth:_,remainedWidth:_,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},E=v.stacks;a[f]=v;var F=IC(l);E[F]||v.autoWidthCount++,E[F]=E[F]||{width:0,maxWidth:0};var V=yn(l.get("barWidth"),_),q=yn(l.get("barMaxWidth"),_),j=l.get("barGap"),X=l.get("barCategoryGap");V&&!E[F].width&&(V=Math.min(v.remainedWidth,V),E[F].width=V,v.remainedWidth-=V),q&&(E[F].maxWidth=q),null!=j&&(v.gap=j),null!=X&&(v.categoryGap=X)});var s={};return re(a,function(l,u){s[u]={};var c=l.stacks,h=yn(l.categoryGap,l.bandWidth),f=yn(l.gap,1),p=l.remainedWidth,_=l.autoWidthCount,v=(p-h)/(_+(_-1)*f);v=Math.max(v,0),re(c,function(q,j){var X=q.maxWidth;X&&X<v&&(X=Math.min(X,p),q.width&&(X=Math.min(X,q.width)),p-=X,q.width=X,_--)}),v=(p-h)/(_+(_-1)*f),v=Math.max(v,0);var E,F=0;re(c,function(q,j){q.width||(q.width=v),F+=(E=q).width*(1+f)}),E&&(F-=E.width*f);var V=-F/2;re(c,function(q,j){s[u][j]=s[u][j]||{offset:V,width:q.width},V+=q.width*(1+f)})}),s}(nt(t.getSeriesByType(e),function(o){return!t.isSeriesFiltered(o)&&o.coordinateSystem&&"polar"===o.coordinateSystem.type}));t.eachSeriesByType(e,function(o){if("polar"===o.coordinateSystem.type){var a=o.getData(),s=o.coordinateSystem,l=s.getBaseAxis(),u=DC(s,l),c=IC(o),d=r[u][c],h=d.offset,f=d.width,p=s.getOtherAxis(l),_=o.coordinateSystem.cx,v=o.coordinateSystem.cy,E=o.get("barMinHeight")||0,F=o.get("barMinAngle")||0;i[c]=i[c]||[];for(var V=a.mapDimension(p.dim),q=a.mapDimension(l.dim),j=va(a,V),X="radius"!==l.dim||!o.get("roundCap",!0),Y="radius"===p.dim?p.dataToRadius(0):p.dataToAngle(0),Q=0,oe=a.count();Q<oe;Q++){var ce,ge,we,Ce,Ae=a.get(V,Q),Oe=a.get(q,Q),Ge=0<=Ae?"p":"n",Pe=Y;if(j&&(i[c][Oe]||(i[c][Oe]={p:Y,n:Y}),Pe=i[c][Oe][Ge]),"radius"===p.dim){var st=p.dataToRadius(Ae)-Y,Pt=l.dataToAngle(Oe);Math.abs(st)<E&&(st=(st<0?-1:1)*E),ge=(ce=Pe)+st,Ce=(we=Pt-h)-f,j&&(i[c][Oe][Ge]=ge)}else{var Ft=p.dataToAngle(Ae,X)-Y,Nt=l.dataToRadius(Oe);Math.abs(Ft)<F&&(Ft=(Ft<0?-1:1)*F),ge=(ce=Nt+h)+f,Ce=(we=Pe)+Ft,j&&(i[c][Oe][Ge]=Ce)}a.setItemLayout(Q,{cx:_,cy:v,r0:ce,r:ge,startAngle:-we*Math.PI/180,endAngle:-Ce*Math.PI/180})}}},this)},"bar")),lr({type:"polar"}),tt(yi.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(e){yi.prototype.init.apply(this,arguments),ms(e,"label",["show"])},optionUpdated:function(){var e=this.option,t=this;e.regions=$b.getFilledRegions(e.regions,e.map,e.nameMap),this._optionModelMap=Tt(e.regions||[],function(n,i){return i.name&&n.set(i.name,new di(i,t)),n},Ct()),this.updateSelectedMap(e.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(e){return this._optionModelMap.get(e)||new di(null,this,this.ecModel)},getFormattedLabel:function(e,t){t=t||"normal";var n=this.getRegionModel(e).get(("normal"===t?"":t+".")+"label.formatter"),i={name:e};return"function"==typeof n?(i.status=t,n(i)):"string"==typeof n?n.replace("{a}",e??""):void 0},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e}}),Hg),lr({type:"geo",init:function(e,t){var n=new Ih(t,!0);this._mapDraw=n,this.group.add(n.group)},render:function(e,t,n,i){if(!i||"geoToggleSelect"!==i.type||i.from!==this.uid){var r=this._mapDraw;e.get("show")?r.draw(e,t,n,this,i):this._mapDraw.group.removeAll(),this.group.silent=e.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),cv("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),cv("select",{type:"geoSelect",event:"geoselected"}),cv("unSelect",{type:"geoUnSelect",event:"geounselected"}),wa.prototype={constructor:wa,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(e){var t=(e=Ru(e)).getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var i=e.getDate();i=i<10?"0"+i:i;var r=e.getDay();return{y:t,m:n,d:i,day:r=Math.abs((r+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+n+"-"+i,date:e}},getNextNDay:function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},update:function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],r=this._model.get("cellSize").slice(),o=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];re([0,1],function(c){u(r,c)&&(o[i[c]]=r[c]*a[c])});var s={width:t.getWidth(),height:t.getHeight()},l=this._rect=Ki(o,s);function u(c,d){return null!=c[d]&&"auto"!==c[d]}re([0,1],function(c){u(r,c)||(r[c]=l[i[c]]/a[c])}),this._sw=r[0],this._sh=r[1]},dataToPoint:function(e,t){Ye(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),i=this._rangeInfo;if(t&&!(n.time>=i.start.time&&n.time<i.end.time+864e5))return[NaN,NaN];var o=n.day,a=this._getRangeInfo([i.start.time,n.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},pointToData:function(e){var t=this.pointToDate(e);return t&&t.time},dataToRect:function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,i):this._getDateByWeeksAndDay(t,n-1,i)},convertToPixel:Lt(LC,"dataToPoint"),convertFromPixel:Lt(LC,"pointToData"),_initRangeOption:function(){var e=this._model.get("range"),t=e;if(Ye(t)&&1===t.length&&(t=t[0]),/^\d{4}$/.test(t)&&(e=[t+"-01-01",t+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(t)){var n=this.getDateInfo(t),i=n.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);e=[n.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(t)&&(e=[t,t]);var o=this._getRangeInfo(e);return o.start.time>o.end.time&&e.reverse(),e},_getRangeInfo:function(e){var t;(e=[this.getDateInfo(e[0]),this.getDateInfo(e[1])])[0].time>e[1].time&&(t=!0,e.reverse());var n=Math.floor(e[1].time/864e5)-Math.floor(e[0].time/864e5)+1,i=new Date(e[0].time),r=i.getDate(),o=e[1].date.getDate();i.setDate(r+n-1);var a=i.getDate();if(a!==o)for(var s=0<i.getTime()-e[1].time?1:-1;(a=i.getDate())!==o&&0<(i.getTime()-e[1].time)*s;)n-=s,i.setDate(a-s);var l=Math.floor((n+e[0].day+6)/7),u=t?1-l:l-1;return t&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:l,nthWeek:u,fweek:e[0].day,lweek:e[1].day}},_getDateByWeeksAndDay:function(e,t,n){var i=this._getRangeInfo(n);if(e>i.weeks||0===e&&t<i.fweek||e===i.weeks&&t>i.lweek)return!1;var r=7*(e-1)-i.fweek+t,o=new Date(i.start.time);return o.setDate(i.start.d+r),this.getDateInfo(o)}},wa.dimensions=wa.prototype.dimensions,wa.getDimensionsInfo=wa.prototype.getDimensionsInfo,wa.create=function(e,t){var n=[];return e.eachComponent("calendar",function(i){var r=new wa(i,e,t);n.push(r),i.coordinateSystem=r}),e.eachSeries(function(i){"calendar"===i.get("coordinateSystem")&&(i.coordinateSystem=n[i.get("calendarIndex")||0])}),n},Ir.register("calendar",wa);var RC=yi.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(e,t,n,i){var r=Sl(e);RC.superApply(this,"init",arguments),PC(e,r)},mergeOption:function(e,t){RC.superApply(this,"mergeOption",arguments),PC(this.option,e)}});function PC(e,t){var n=e.cellSize;Ye(n)?1===n.length&&(n[1]=n[0]):n=e.cellSize=[n,n];var i=Ke([0,1],function(r){return function(o,a){return null!=o[Ts[a][0]]||null!=o[Ts[a][1]]&&null!=o[Ts[a][2]]}(t,r)&&(n[r]="auto"),null!=n[r]&&"auto"!==n[r]});Va(e,t,{type:"box",ignoreSize:i})}var z2={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},V2={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]};lr({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(e,t,n){var i=this.group;i.removeAll();var r=e.coordinateSystem,o=r.getRangeInfo(),a=r.getOrient();this._renderDayRect(e,o,i),this._renderLines(e,o,a,i),this._renderYearText(e,o,a,i),this._renderMonthText(e,a,i),this._renderWeekText(e,o,a,i)},_renderDayRect:function(e,t,n){for(var i=e.coordinateSystem,r=e.getModel("itemStyle").getItemStyle(),o=i.getCellWidth(),a=i.getCellHeight(),s=t.start.time;s<=t.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,u=new vi({shape:{x:l[0],y:l[1],width:o,height:a},cursor:"default",style:r});n.add(u)}},_renderLines:function(e,t,n,i){var r=this,o=e.coordinateSystem,a=e.getModel("splitLine.lineStyle").getLineStyle(),s=e.get("splitLine.show"),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=t.start,c=0;u.time<=t.end.time;c++){h(u.formatedDate),0===c&&(u=o.getDateInfo(t.start.y+"-"+t.start.m));var d=u.date;d.setMonth(d.getMonth()+1),u=o.getDateInfo(d)}function h(f){r._firstDayOfMonth.push(o.getDateInfo(f)),r._firstDayPoints.push(o.dataToRect([f],!1).tl);var p=r._getLinePointsOfOneWeek(e,f,n);r._tlpoints.push(p[0]),r._blpoints.push(p[p.length-1]),s&&r._drawSplitline(p,a,i)}h(o.getNextNDay(t.end.time,1).formatedDate),s&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,l,n),a,i),s&&this._drawSplitline(r._getEdgesPoints(r._blpoints,l,n),a,i)},_getEdgesPoints:function(e,t,n){var i=[e[0].slice(),e[e.length-1].slice()],r="horizontal"===n?0:1;return i[0][r]=i[0][r]-t/2,i[1][r]=i[1][r]+t/2,i},_drawSplitline:function(e,t,n){var i=new po({z2:20,shape:{points:e},style:t});n.add(i)},_getLinePointsOfOneWeek:function(e,t,n){var i=e.coordinateSystem;t=i.getDateInfo(t);for(var r=[],o=0;o<7;o++){var a=i.getNextNDay(t.time,o),s=i.dataToRect([a.time],!1);r[2*a.day]=s.tl,r[2*a.day+1]=s["horizontal"===n?"bl":"tr"]}return r},_formatterLabel:function(e,t){return"string"==typeof e&&e?Py(e,t):"function"==typeof e?e(t):t.nameMap},_yearTextPositionControl:function(e,t,n,i,r){t=t.slice();var o=["center","bottom"];"bottom"===i?(t[1]+=r,o=["center","top"]):"left"===i?t[0]-=r:"right"===i?(t[0]+=r,o=["center","top"]):t[1]-=r;var a=0;return"left"!==i&&"right"!==i||(a=Math.PI/2),{rotation:a,position:t,style:{textAlign:o[0],textVerticalAlign:o[1]}}},_renderYearText:function(e,t,n,i){var r=e.getModel("yearLabel");if(r.get("show")){var o=r.get("margin"),a=r.get("position");a=a||("horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,c="horizontal"===n?0:1,d={top:[l,s[c][1]],bottom:[l,s[1-c][1]],left:[s[1-c][0],u],right:[s[c][0],u]},h=t.start.y;+t.end.y>+t.start.y&&(h=h+"-"+t.end.y);var f=r.get("formatter"),_=this._formatterLabel(f,{start:t.start.y,end:t.end.y,nameMap:h}),v=new oi({z2:30});Fi(v.style,r,{text:_}),v.attr(this._yearTextPositionControl(v,d[a],n,a,o)),i.add(v)}},_monthTextPositionControl:function(e,t,n,i,r){var o="left",a="top",s=e[0],l=e[1];return"horizontal"===n?(l+=r,t&&(o="center"),"start"===i&&(a="bottom")):(s+=r,t&&(a="middle"),"start"===i&&(o="right")),{x:s,y:l,textAlign:o,textVerticalAlign:a}},_renderMonthText:function(e,t,n){var i=e.getModel("monthLabel");if(i.get("show")){var r=i.get("nameMap"),o=i.get("margin"),a=i.get("position"),s=i.get("align"),l=[this._tlpoints,this._blpoints];it(r)&&(r=z2[r.toUpperCase()]||[]);var u="start"===a?0:1,c="horizontal"===t?0:1;o="start"===a?-o:o;for(var d="center"===s,h=0;h<l[u].length-1;h++){var f=l[u][h].slice(),p=this._firstDayOfMonth[h];d&&(f[c]=(this._firstDayPoints[h][c]+l[0][h+1][c])/2);var v=i.get("formatter"),E=r[+p.m-1],F={yyyy:p.y,yy:(p.y+"").slice(2),MM:p.m,M:+p.m,nameMap:E},V=this._formatterLabel(v,F),q=new oi({z2:30});fe(Fi(q.style,i,{text:V}),this._monthTextPositionControl(f,d,t,a,o)),n.add(q)}}},_weekTextPositionControl:function(e,t,n,i,r){var o="center",a="middle",s=e[0],l=e[1],u="start"===n;return"horizontal"===t?(s=s+i+(u?1:-1)*r[0]/2,o=u?"right":"left"):(l=l+i+(u?1:-1)*r[1]/2,a=u?"bottom":"top"),{x:s,y:l,textAlign:o,textVerticalAlign:a}},_renderWeekText:function(e,t,n,i){var r=e.getModel("dayLabel");if(r.get("show")){var o=e.coordinateSystem,a=r.get("position"),s=r.get("nameMap"),l=r.get("margin"),u=o.getFirstDayOfWeek();it(s)&&(s=V2[s.toUpperCase()]||[]);var c=o.getNextNDay(t.end.time,7-t.lweek).time,d=[o.getCellWidth(),o.getCellHeight()];l=yn(l,d["horizontal"===n?0:1]),"start"===a&&(c=o.getNextNDay(t.start.time,-(7+t.fweek)).time,l=-l);for(var h=0;h<7;h++){var f,p=o.getNextNDay(c,h),_=o.dataToRect([p.time],!1).center;f=Math.abs((h+u)%7);var v=new oi({z2:30});fe(Fi(v.style,r,{text:s[f]}),this._weekTextPositionControl(_,n,a,l,d)),i.add(v)}}}});var BC={path:null,compoundPath:null,group:m,image:li,text:oi};br(function(e){var t=e.graphic;Ye(t)?e.graphic=t[0]&&t[0].elements?[e.graphic[0]]:[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])});var H2=no({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(e){var t=this.option.elements;this.option.elements=null,H2.superApply(this,"mergeOption",arguments),this.option.elements=t},optionUpdated:function(e,t){var n=this.option,i=(t?n:e).elements,r=n.elements=t?[]:n.elements,o=[];this._flatten(i,o);var a=qf(r,o);k0(a);var s=this._elOptionsToUpdate=[];re(a,function(u,c){var h,f,p,_,v,E,d=u.option;d&&(s.push(d),function(h,f){var p=h.exist;if(f.id=h.keyInfo.id,!f.type&&p&&(f.type=p.type),null==f.parentId){var _=f.parentOption;_?f.parentId=_.id:p&&(f.parentId=p.parentId)}f.parentOption=null}(u,d),h=r,f=c,_=fe({},p=d),v=h[f],"merge"===(E=p.$action||"merge")?v?(rt(v,_,!0),Va(v,_,{ignoreSize:!0}),zy(p,v)):h[f]=_:"replace"===E?h[f]=_:"remove"===E&&v&&(h[f]=null),function(h,f){!h||(h.hv=f.hv=[zC(f,["left","right"]),zC(f,["top","bottom"])],"group"===h.type&&(null==h.width&&(h.width=f.width=0),null==h.height&&(h.height=f.height=0)))}(r[c],d))},this);for(var l=r.length-1;0<=l;l--)null==r[l]?r.splice(l,1):delete r[l].$action},_flatten:function(e,t,n){re(e,function(i){if(i){n&&(i.parentOption=n),t.push(i);var r=i.children;"group"===i.type&&r&&this._flatten(r,t,i),delete i.children}},this)},useElOptionsToUpdate:function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e}});function OC(e,t,n,i){var r=n.type,o=new(BC.hasOwnProperty(r)?BC[r]:sp(r))(n);t.add(o),i.set(e,o),o.__ecGraphicId=e}function lf(e,t){var n=e&&e.parent;n&&("group"===e.type&&e.traverse(function(i){lf(i,t)}),t.removeKey(e.__ecGraphicId),n.remove(e))}function zC(e,t){var n;return re(t,function(i){null!=e[i]&&"auto"!==e[i]&&(n=!0)}),n}lr({type:"graphic",init:function(e,t){this._elMap=Ct()},render:function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},_updateElements:function(e){var t=e.useElOptionsToUpdate();if(t){var n=this._elMap,i=this.group;re(t,function(r){var o=r.$action,a=r.id,s=n.get(a),l=r.parentId,u=null!=l?n.get(l):i,c=r.style;"text"===r.type&&c&&(r.hv&&r.hv[1]&&(c.textVerticalAlign=c.textBaseline=null),!c.hasOwnProperty("textFill")&&c.fill&&(c.textFill=c.fill),!c.hasOwnProperty("textStroke")&&c.stroke&&(c.textStroke=c.stroke));var f,d=(f=fe({},f=r),re(["id","parentId","$action","hv","bounding"].concat(Oy),function(p){delete f[p]}),f);o&&"merge"!==o?"replace"===o?(lf(s,n),OC(a,u,d,n)):"remove"===o&&lf(s,n):s?s.attr(d):OC(a,u,d,n);var h=n.get(a);h&&(h.__ecGraphicWidthOption=r.width,h.__ecGraphicHeightOption=r.height,function(f,p){var _=f.eventData;f.silent||f.ignore||_||(_=f.eventData={componentType:"graphic",componentIndex:p.componentIndex,name:f.name}),_&&(_.info=f.info)}(h,e))})}},_relocate:function(e,t){for(var n=e.option.elements,i=this.group,r=this._elMap,o=t.getWidth(),a=t.getHeight(),s=0;s<n.length;s++){var l=n[s];if((c=r.get(l.id))&&c.isGroup){var u=(d=c.parent)===i;c.__ecGraphicWidth=yn(c.__ecGraphicWidthOption,u?o:d.__ecGraphicWidth)||0,c.__ecGraphicHeight=yn(c.__ecGraphicHeightOption,u?a:d.__ecGraphicHeight)||0}}for(s=n.length-1;0<=s;s--){var c,d;(c=r.get((l=n[s]).id))&&zd(c,l,(d=c.parent)===i?{width:o,height:a}:{width:d.__ecGraphicWidth,height:d.__ecGraphicHeight},null,{hv:l.hv,boundingMode:l.bounding})}},_clear:function(){var e=this._elMap;e.each(function(t){lf(t,e)}),this._elMap=Ct()},dispose:function(){this._clear()}});var VC={};function Ql(e,t){VC[e]=t}function HC(e){return VC[e]}var F2=no({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){F2.superApply(this,"optionUpdated",arguments),re(this.option.feature,function(e,t){var n=HC(t);n&&rt(e,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function FC(e,t){var n=Ms(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),new vi({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1})}lr({type:"toolbox",render:function(e,t,n,i){var c,d,h,f,p,_,v,r=this.group;if(r.removeAll(),e.get("show")){var o=+e.get("itemSize"),a=e.get("feature")||{},s=this._features||(this._features={}),l=[];re(a,function(c,d){l.push(d)}),new ma(this._featureNames||[],l).add(u).update(u).remove(Lt(u,null)).execute(),this._featureNames=l,c=r,h=n,f=(d=e).getBoxLayoutParams(),p=d.get("padding"),v=Ki(f,_={width:h.getWidth(),height:h.getHeight()},p),As(d.get("orient"),c,d.get("itemGap"),v.width,v.height),zd(c,f,_,p),r.add(FC(r.getBoundingRect(),e)),r.eachChild(function(c){var d=c.__title,h=c.hoverStyle;if(h&&d){var f=Jn(d,Te(h)),p=c.position[0]+r.position[0],_=!1;c.position[1]+r.position[1]+o+f.height>n.getHeight()&&(h.textPosition="top",_=!0);var v=_?-5-f.height:o+8;p+f.width/2>n.getWidth()?(h.textPosition=["100%",v],h.textAlign="right"):p-f.width/2<0&&(h.textPosition=[0,v],h.textAlign="left")}})}function u(c,d){var h,f=l[c],p=l[d],_=a[f],v=new di(_,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===f&&(_.title=i.newTitle),f&&!p){if(0===f.indexOf("my"))h={model:v,onclick:v.option.onclick,featureName:f};else{var E=HC(f);if(!E)return;h=new E(v,t,n)}s[f]=h}else{if(!(h=s[p]))return;h.model=v,h.ecModel=t,h.api=n}f||!p?v.get("show")&&!h.unusable?(function(F,V,q){var j=F.getModel("iconStyle"),X=F.getModel("emphasis.iconStyle"),Y=V.getIcons?V.getIcons():F.get("icon"),Q=F.get("title")||{};if("string"==typeof Y){var oe=Y,ce=Q;Q={},(Y={})[q]=oe,Q[q]=ce}var ge=F.iconPaths={};re(Y,function(we,Ce){var Ae=wl(we,{},{x:-o/2,y:-o/2,width:o,height:o});Ae.setStyle(j.getItemStyle()),Ae.hoverStyle=X.getItemStyle(),Ae.setStyle({text:Q[Ce],textAlign:X.get("textAlign"),textBorderRadius:X.get("textBorderRadius"),textPadding:X.get("textPadding"),textFill:null});var Oe=e.getModel("tooltip");Oe&&Oe.get("show")&&Ae.attr("tooltip",fe({content:Q[Ce],formatter:Oe.get("formatter",!0)||function(){return Q[Ce]},formatterParams:{componentType:"toolbox",name:Ce,title:Q[Ce],$vars:["name","title"]},position:Oe.get("position",!0)||"bottom"},Oe.option)),Ri(Ae),e.get("showTitle")&&(Ae.__title=Q[Ce],Ae.on("mouseover",function(){var Ge=X.getItemStyle(),Pe="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";Ae.setStyle({textFill:X.get("textFill")||Ge.fill||Ge.stroke||"#000",textBackgroundColor:X.get("textBackgroundColor"),textPosition:X.get("textPosition")||Pe})}).on("mouseout",function(){Ae.setStyle({textFill:null,textBackgroundColor:null})})),Ae.trigger(F.get("iconStatus."+Ce)||"normal"),r.add(Ae),Ae.on("click",ut(V.onclick,V,t,n,Ce)),ge[Ce]=Ae})}(v,h,f),v.setIconStatus=function(F,V){var q=this.option,j=this.iconPaths;q.iconStatus=q.iconStatus||{},q.iconStatus[F]=V,j[F]&&j[F].trigger(V)},h.render&&h.render(v,t,n,i)):h.remove&&h.remove(t,n):h.dispose&&h.dispose(t,n)}},updateView:function(e,t,n,i){re(this._features,function(r){r.updateView&&r.updateView(r.model,t,n,i)})},remove:function(e,t){re(this._features,function(n){n.remove&&n.remove(e,t)}),this.group.removeAll()},dispose:function(e,t){re(this._features,function(n){n.dispose&&n.dispose(e,t)})}});var WC=ga.toolbox.saveAsImage;function uf(e){this.model=e}uf.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:WC.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:WC.lang.slice()},uf.prototype.unusable=!He.canvasSupported,uf.prototype.onclick=function(e,t){var n=this.model,i=n.get("name")||e.get("title.0.text")||"echarts",r="svg"===t.getZr().painter.getType()?"svg":n.get("type",!0)||"png",o=t.getConnectedDataURL({type:r,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||He.browser.ie||He.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var a=atob(o.split(",")[1]),s=a.length,l=new Uint8Array(s);s--;)l[s]=a.charCodeAt(s);var u=new Blob([l]);window.navigator.msSaveOrOpenBlob(u,i+"."+r)}else{var c=n.get("lang"),d='<body style="margin:0;"><img src="'+o+'" style="max-width:100%;" title="'+(c&&c[0]||"")+'" /></body>';window.open().document.write(d)}else{var h=document.createElement("a");h.download=i+"."+r,h.target="_blank",h.href=o;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});h.dispatchEvent(f)}},Ql("saveAsImage",uf);var cf=ga.toolbox.magicType,dv="__ec_magicType_stack__";function hv(e){this.model=e}hv.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:Fe(cf.title),option:{},seriesIndex:{}};var GC=hv.prototype;GC.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return re(e.get("type"),function(i){t[i]&&(n[i]=t[i])}),n};var UC={line:function(e,t,n,i){if("bar"===e)return rt({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(e,t,n,i){if("line"===e)return rt({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(e,t,n,i){var r=n.get("stack")===dv;if("line"===e||"bar"===e)return i.setIconStatus("stack",r?"normal":"emphasis"),rt({id:t,stack:r?"":dv},i.get("option.stack")||{},!0)}},W2=[["line","bar"],["stack"]];GC.onclick=function(e,t,n){var i=this.model,r=i.get("seriesIndex."+n);if(UC[n]){var o,a={series:[]};re(W2,function(s){0<=Je(s,n)&&re(s,function(l){i.setIconStatus(l,"normal")})}),i.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},function(s){var c=UC[n](s.subType,s.id,s,i);c&&(De(c,s.option),a.series.push(c));var d=s.coordinateSystem;if(d&&"cartesian2d"===d.type&&("line"===n||"bar"===n)){var h=d.getAxesByScale("ordinal")[0];if(h){var f=h.dim+"Axis",p=e.queryComponents({mainType:f,index:s.get(name+"Index"),id:s.get(name+"Id")})[0].componentIndex;a[f]=a[f]||[];for(var _=0;_<=p;_++)a[f][p]=a[f][p]||{};a[f][p].boundaryGap="bar"===n}}}),"stack"===n&&(o=a.series&&a.series[0]&&a.series[0].stack===dv?rt({stack:cf.title.tiled},cf.title):Fe(cf.title)),t.dispatchAction({type:"changeMagicType",currentType:n,newOption:a,newTitle:o,featureName:"magicType"})}},hi({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)}),Ql("magicType",hv);var jC=ga.toolbox.dataView,df=new Array(60).join("-");function hf(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var fv=new RegExp("[\t]+","g");function Ec(e){this._dom=null,this.model=e}Ec.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:Fe(jC.title),lang:Fe(jC.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},Ec.prototype.onclick=function(e,t){var n=t.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var o=document.createElement("h4"),a=i.get("lang")||[];o.innerHTML=a[0]||i.get("title"),o.style.cssText="margin: 10px 20px;",o.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=i.get("optionToContent"),c=i.get("contentToOption"),d=function G2(e){var t=function(n){var i={},r=[],o=[];return n.eachRawSeries(function(a){var s=a.coordinateSystem;if(!s||"cartesian2d"!==s.type&&"polar"!==s.type)r.push(a);else{var l=s.getBaseAxis();if("category"===l.type){var u=l.dim+"_"+l.index;i[u]||(i[u]={categoryAxis:l,valueAxis:s.getOtherAxis(l),series:[]},o.push({axisDim:l.dim,axisIndex:l.index})),i[u].series.push(a)}else r.push(a)}}),{seriesGroupByCategoryAxis:i,other:r,meta:o}}(e);return{value:nt([function(n){var i=[];return re(n,function(r,o){var a=r.categoryAxis,s=r.valueAxis.dim,l=[" "].concat(Ke(r.series,function(p){return p.name})),u=[a.model.getCategories()];re(r.series,function(p){var _=p.getRawData();u.push(p.getRawData().mapArray(_.mapDimension(s),function(v){return v}))});for(var c=[l.join("\t")],d=0;d<u[0].length;d++){for(var h=[],f=0;f<u.length;f++)h.push(u[f][d]);c.push(h.join("\t"))}i.push(c.join("\n"))}),i.join("\n\n"+df+"\n\n")}(t.seriesGroupByCategoryAxis),function(n){return Ke(n,function(i){var r=i.getRawData(),o=[i.name],a=[];return r.each(r.dimensions,function(){for(var s=arguments.length,u=r.getName(arguments[s-1]),c=0;c<s-1;c++)a[c]=arguments[c];o.push((u?u+"\t":"")+a.join("\t"))}),o.join("\n")}).join("\n\n"+df+"\n\n")}(t.other)],function(n){return n.replace(/[\n\t\s]/g,"")}).join("\n\n"+df+"\n\n"),meta:t.meta}}(e);if("function"==typeof u){var h=u(t.getOption());"string"==typeof h?s.innerHTML=h:lt(h)&&s.appendChild(h)}else s.appendChild(l),l.readOnly=i.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=i.get("textColor"),l.style.borderColor=i.get("textareaBorderColor"),l.style.backgroundColor=i.get("textareaColor"),l.value=d.value;var f=d.meta,p=document.createElement("div");p.style.cssText="position:absolute;bottom:0;left:0;right:0;";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),E=document.createElement("div");_+=";background-color:"+i.get("buttonColor"),_+=";color:"+i.get("buttonTextColor");var F=this;function V(){n.removeChild(r),F._dom=null}Yi(v,"click",V),Yi(E,"click",function(){var q;try{q="function"==typeof c?c(s,t.getOption()):function U2(e,t){var n=e.split(new RegExp("\n*"+df+"\n*","g")),i={series:[]};return re(n,function(r,o){if(function(u){if(0<=u.slice(0,u.indexOf("\n")).indexOf("\t"))return!0}(r)){var a=function(u){for(var c=u.split(/\n+/g),d=[],h=Ke(hf(c.shift()).split(fv),function(v){return{name:v,data:[]}}),f=0;f<c.length;f++){var p=hf(c[f]).split(fv);d.push(p.shift());for(var _=0;_<p.length;_++)h[_]&&(h[_].data[f]=p[_])}return{series:h,categories:d}}(r),s=t[o],l=s.axisDim+"Axis";s&&(i[l]=i[l]||[],i[l][s.axisIndex]={data:a.categories},i.series=i.series.concat(a.series))}else a=function(u){for(var c=u.split(/\n+/g),d=hf(c.shift()),h=[],f=0;f<c.length;f++){var p=hf(c[f]);if(p){var _,v=p.split(fv),E="",F=!1;_=isNaN(v[0])?(F=!0,E=v[0],v=v.slice(1),h[f]={name:E,value:[]},h[f].value):h[f]=[];for(var V=0;V<v.length;V++)_.push(+v[V]);1===_.length&&(F?h[f].value=_[0]:h[f]=_[0])}}return{name:d,data:h}}(r),i.series.push(a)}),i}(l.value,f)}catch(j){throw V(),new Error("Data view format error "+j)}q&&t.dispatchAction({type:"changeDataView",newOption:q}),V()}),v.innerHTML=a[1],E.innerHTML=a[2],E.style.cssText=_,v.style.cssText=_,i.get("readOnly")||p.appendChild(E),p.appendChild(v),r.appendChild(o),r.appendChild(s),r.appendChild(p),s.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},Ec.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},Ec.prototype.dispose=function(e,t){this.remove(e,t)},Ql("dataView",Ec),hi({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];re(e.newOption.series,function(i){var a,s,r=t.getSeriesByName(i.name)[0];if(r){var o=r.get("data");n.push({name:i.name,data:(a=i.data,s=o,Ke(a,function(l,u){var c=s&&s[u];if(!Mt(c)||Ye(c))return l;Mt(l)&&!Ye(l)||(l={value:l});var d=null!=c.name&&null==l.name;return l=De(l,c),d&&delete l.name,l}))})}else n.push(fe({type:"scatter"},i))}),t.mergeOption(De({series:n},e.newOption))});var is=re,ff=Je,pf=Lt,pv=["dataToPoint","pointToData"],j2=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function gf(e,t,n){var i=this._targetInfoList=[],r={},o=qC(t,e);is(q2,function(a,s){n&&n.include&&!(0<=ff(n.include,s))||a(o,i,r)})}var tu=gf.prototype;function gv(e){return e[0]>e[1]&&e.reverse(),e}function qC(e,t){return ld(e,t,{includeMainTypes:j2})}tu.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,function(n,i,r){if((n.coordRanges||(n.coordRanges=[])).push(i),!n.coordRange){n.coordRange=i;var o=mv[n.brushType](0,r,i);n.__rangeOffset={offset:$C[n.brushType](o.values,n.range,[1,1]),xyMinMax:o.xyMinMax}}})},tu.matchOutputRanges=function(e,t,n){is(e,function(i){var r=this.findTargetInfo(i,t);r&&!0!==r&&re(r.coordSyses,function(o){var a=mv[i.brushType](1,o,i.range);n(i,a.values,o,t)})},this)},tu.setInputRanges=function(e,t){is(e,function(n){var s,l,u,c,i=this.findTargetInfo(n,t);if(n.range=n.range||[],i&&!0!==i){n.panelId=i.panelId;var r=mv[n.brushType](0,i.coordSys,n.coordRange),o=n.__rangeOffset;n.range=o?$C[n.brushType](r.values,o.offset,(s=o.xyMinMax,l=JC(r.xyMinMax),u=JC(s),c=[l[0]/u[0],l[1]/u[1]],isNaN(c[0])&&(c[0]=1),isNaN(c[1])&&(c[1]=1),c)):r.values}},this)},tu.makePanelOpts=function(e,t){return Ke(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t&&t(n),clipPath:rw(i),isTargetByCursor:aw(i,e,n.coordSysModel),getLinearBrushOtherExtent:ow(i)}})},tu.controlSeries=function(e,t,n){var i=this.findTargetInfo(e,n);return!0===i||i&&0<=ff(i.coordSyses,t.coordinateSystem)},tu.findTargetInfo=function(e,t){for(var n=this._targetInfoList,i=qC(t,e),r=0;r<n.length;r++){var o=n[r],a=e.panelId;if(a){if(o.panelId===a)return o}else for(r=0;r<XC.length;r++)if(XC[r](i,o))return o}return!0};var q2={grid:function(e,t){var n=e.xAxisModels,i=e.yAxisModels,r=e.gridModels,o=Ct(),a={},s={};(n||i||r)&&(is(n,function(l){var u=l.axis.grid.model;o.set(u.id,u),a[u.id]=!0}),is(i,function(l){var u=l.axis.grid.model;o.set(u.id,u),s[u.id]=!0}),is(r,function(l){o.set(l.id,l),a[l.id]=!0,s[l.id]=!0}),o.each(function(l){var c=[];is(l.coordinateSystem.getCartesians(),function(d,h){(0<=ff(n,d.getAxis("x").model)||0<=ff(i,d.getAxis("y").model))&&c.push(d)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:ZC.grid,xAxisDeclared:a[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,t){is(e.geoModels,function(n){var i=n.coordinateSystem;t.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:i,coordSyses:[i],getPanelRect:ZC.geo})})}},XC=[function(e,t){var n=e.xAxisModel,i=e.yAxisModel,r=e.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],ZC={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(Cs(e)),t}},mv={lineX:pf(YC,0),lineY:pf(YC,1),rect:function(e,t,n){var i=t[pv[e]]([n[0][0],n[1][0]]),r=t[pv[e]]([n[0][1],n[1][1]]),o=[gv([i[0],r[0]]),gv([i[1],r[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,n){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:Ke(n,function(r){var o=t[pv[e]](r);return i[0][0]=Math.min(i[0][0],o[0]),i[1][0]=Math.min(i[1][0],o[1]),i[0][1]=Math.max(i[0][1],o[0]),i[1][1]=Math.max(i[1][1],o[1]),o}),xyMinMax:i}}};function YC(e,t,n,i){var r=n.getAxis(["x","y"][e]),o=gv(Ke([0,1],function(s){return t?r.coordToData(r.toLocalCoord(i[s])):r.toGlobalCoord(r.dataToCoord(i[s]))})),a=[];return a[e]=o,a[1-e]=[NaN,NaN],{values:o,xyMinMax:a}}var $C={lineX:pf(KC,0),lineY:pf(KC,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return Ke(e,function(i,r){return[i[0]-n[0]*t[r][0],i[1]-n[1]*t[r][1]]})}};function KC(e,t,n,i){return[t[0]-i[e]*n[0],t[1]-i[e]*n[1]]}function JC(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var QC=re,vv="\0_ec_hist_store";function yv(e){return e[vv]||(e[vv]=[{}])}yi.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var xv,Lc,eS,tS,X2=["cartesian2d","polar","singleAxis"],nS=(Lc=["axisIndex","axis","index","id"],eS=Ke(xv=(xv=["x","y","z","radius","angle","single"]).slice(),Bd),tS=Ke(Lc=(Lc||[]).slice(),Bd),function(e,t){re(xv,function(n,i){for(var r={name:n,capital:eS[i]},o=0;o<Lc.length;o++)r[Lc[o]]=n+tS[o];e.call(t,r)})});function bv(e,t,n,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=n}var Ys=re,iS=Ss;function rS(e,t){var n=e.getAxisModel(),i=e._percentWindow,r=e._valueWindow;if(i){var o=gp(r,[0,500]);o=Math.min(o,20);var a=t||0===i[0]&&100===i[1];n.setRange(a?null:+r[0].toFixed(o),a?null:+r[1].toFixed(o))}}bv.prototype={constructor:bv,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries(function(n){if(function(o){return 0<=Je(X2,o)}(n.get("coordinateSystem"))){var i=this._dimName,r=t.queryComponents({mainType:i+"Axis",index:n.get(i+"AxisIndex"),id:n.get(i+"AxisId")})[0];this._axisIndex===(r&&r.componentIndex)&&e.push(n)}},this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,n,i=this._dimName,r=this.ecModel,o=this.getAxisModel();return e="x"===i||"y"===i?(t="gridIndex","x"===i?"y":"x"):(t="polarIndex","angle"===i?"radius":"angle"),r.eachComponent(e+"Axis",function(a){(a.get(t)||0)===(o.get(t)||0)&&(n=a)}),n},getMinMaxSpan:function(){return Fe(this._minMaxSpan)},calculateDataWindow:function(e){var t,n=this._dataExtent,i=this.getAxisModel().axis.scale,r=this._dataZoomModel.getRangePropMode(),o=[0,100],a=[],s=[];Ys(["start","end"],function(c,d){var h=e[c],f=e[c+"Value"];"percent"===r[d]?(null==h&&(h=o[d]),f=i.parse(Pi(h,o,n))):(t=!0,h=Pi(f=null==f?n[d]:i.parse(f),n,o)),s[d]=f,a[d]=h}),iS(s),iS(a);var l=this._minMaxSpan;function u(c,d,h,f,p){var _=p?"Span":"ValueSpan";Ws(0,c,h,"all",l["min"+_],l["max"+_]);for(var v=0;v<2;v++)d[v]=Pi(c[v],h,f,!0),p&&(d[v]=i.parse(d[v]))}return t?u(s,a,n,o,!1):u(a,s,o,n,!0),{valueWindow:s,percentWindow:a}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(i,r,o){var a=[1/0,-1/0];return Ys(o,function(s){var l=s.getData();l&&Ys(l.mapDimension(r,!0),function(u){var c=l.getApproximateExtent(u);c[0]<a[0]&&(a[0]=c[0]),c[1]>a[1]&&(a[1]=c[1])})}),a[1]<a[0]&&(a=[NaN,NaN]),function(s,l){var u=s.getAxisModel(),c=u.getMin(!0),d="category"===u.get("type"),h=d&&u.getCategories().length;null!=c&&"dataMin"!==c&&"function"!=typeof c?l[0]=c:d&&(l[0]=0<h?0:NaN);var f=u.getMax(!0);null!=f&&"dataMax"!==f&&"function"!=typeof f?l[1]=f:d&&(l[1]=0<h?h-1:NaN),u.get("scale",!0)||(0<l[0]&&(l[0]=0),l[1]<0&&(l[1]=0))}(i,a),a}(this,this._dimName,t),function(i){var r=i._minMaxSpan={},o=i._dataZoomModel,a=i._dataExtent;Ys(["min","max"],function(s){var l=o.get(s+"Span"),u=o.get(s+"ValueSpan");null!=u&&(u=i.getAxisModel().axis.scale.parse(u)),null!=u?l=Pi(a[0]+u,a,[0,100],!0):null!=l&&(u=Pi(l,[0,100],a,!0)-a[0]),r[s+"Span"]=l,r[s+"ValueSpan"]=u})}(this);var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,rS(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,rS(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),r=e.get("filterMode"),o=this._valueWindow;"none"!==r&&Ys(i,function(a){var s=a.getData(),l=s.mapDimension(n,!0);l.length&&("weakFilter"===r?s.filterSelf(function(u){for(var c,d,h,f=0;f<l.length;f++){var p=s.get(l[f],u),_=!isNaN(p),v=p<o[0],E=p>o[1];if(_&&!v&&!E)return!0;_&&(h=!0),v&&(c=!0),E&&(d=!0)}return h&&c&&d}):Ys(l,function(u){if("empty"===r)a.setData(s=s.map(u,function(d){return(h=d)>=o[0]&&h<=o[1]?d:NaN;var h}));else{var c={};c[u]=o,s.selectRange(c)}}),Ys(l,function(u){s.setApproximateExtent(o,u)}))})}}};var $s=re,Ks=nS,_v=no({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var i=oS(e);this.settledOption=i,this.mergeDefaultAndTheme(e,n),this.doInit(i)},mergeOption:function(e){var t=oS(e);rt(this.option,e,!0),rt(this.settledOption,t,!0),this.doInit(t)},doInit:function(e){var t=this.option;He.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),aS(this,e);var n=this.settledOption;$s([["start","startValue"],["end","endValue"]],function(i,r){"value"===this._rangePropMode[r]&&(t[i[0]]=n[i[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis(function(t,n,i,r){var o=this.dependentModels[t.axis][n],a=o.__dzAxisProxy||(o.__dzAxisProxy=new bv(t.name,n,this,r));e[t.name+"_"+n]=a},this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();Ks(function(n){var i=n.axisIndex;e[i]=vr(e[i])},this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;Ks(function(i){null!=e[i.axisIndex]&&(t=!0)},this);var n=e.orient;return null==n&&t?"orient":t?void 0:(null==n&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),n=this.option,i=this.dependentModels;if(e){var r="vertical"===t?"y":"x";i[r+"Axis"].length?(n[r+"AxisIndex"]=[0],e=!1):$s(i.singleAxis,function(o){e&&o.get("orient",!0)===t&&(n.singleAxisIndex=[o.componentIndex],e=!1)})}e&&Ks(function(o){if(e){var a=[],s=this.dependentModels[o.axis];if(s.length&&!a.length)for(var l=0,u=s.length;l<u;l++)"category"===s[l].get("type")&&a.push(l);(n[o.axisIndex]=a).length&&(e=!1)}},this),e&&this.ecModel.eachSeries(function(o){this._isSeriesHasAllAxesTypeOf(o,"value")&&Ks(function(a){var s=n[a.axisIndex],l=o.get(a.axisIndex),u=o.get(a.axisId);Je(s,l=o.ecModel.queryComponents({mainType:a.axis,index:l,id:u})[0].componentIndex)<0&&s.push(l)})},this)},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){e=e||t.name},this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var n=!0;return Ks(function(i){var r=e.get(i.axisIndex),o=this.dependentModels[i.axis][r];o&&o.get("type")===t||(n=!1)},this),n},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&0<t.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var e;return Ks(function(t){if(null==e){var n=this.get(t.axisIndex);n.length&&(e=this.dependentModels[t.axis][n[0]])}},this),e},eachTargetAxis:function(e,t){var n=this.ecModel;Ks(function(i){$s(this.get(i.axisIndex),function(r){e.call(t,i,r,this,n)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var n=this.getAxisProxy(e,t);return n&&n.getAxisModel()},setRawRange:function(e){var t=this.option,n=this.settledOption;$s([["start","startValue"],["end","endValue"]],function(i){null==e[i[0]]&&null==e[i[1]]||(t[i[0]]=n[i[0]]=e[i[0]],t[i[1]]=n[i[1]]=e[i[1]])},this),aS(this,e)},setCalculatedRange:function(e){var t=this.option;$s(["start","startValue","end","endValue"],function(n){t[n]=e[n]})},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var n in t)if(t.hasOwnProperty(n)&&t[n].hostedBy(this))return t[n];for(var n in t)if(t.hasOwnProperty(n)&&!t[n].hostedBy(this))return t[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function oS(e){var t={};return $s(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function aS(e,t){var n=e._rangePropMode,i=e.get("rangeMode");$s([["start","startValue"],["end","endValue"]],function(r,o){var a=null!=t[r[0]],s=null!=t[r[1]];a&&!s?n[o]="percent":!a&&s?n[o]="value":i?n[o]=i[o]:a&&(n[o]="percent")})}var wv=jo.extend({type:"dataZoom",render:function(e,t,n,i){this.dataZoomModel=e,this.ecModel=t,this.api=n},getTargetCoordInfo:function(){var t=this.ecModel,n={};return this.dataZoomModel.eachTargetAxis(function(i,r){var o=t.getComponent(i.axis,r);if(o){var a=o.getCoordSysModel();a&&function(s,l,u,c){for(var d,h=0;h<u.length;h++)if(u[h].model===s){d=u[h];break}d||u.push(d={model:s,axisModels:[],coordIndex:c}),d.axisModels.push(l)}(a,o,n[a.mainType]||(n[a.mainType]=[]),a.componentIndex)}},this),n}});_v.extend({type:"dataZoom.select"}),wv.extend({type:"dataZoom.select"}),to({getTargetSeries:function(e){var t=Ct();return e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(i,r,o){re(o.getAxisProxy(i.name,r).getTargetSeriesModels(),function(a){t.set(a.uid,a)})})}),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(i,r,o){o.getAxisProxy(i.name,r).reset(o,t)}),n.eachTargetAxis(function(i,r,o){o.getAxisProxy(i.name,r).filterData(o,t)})}),e.eachComponent("dataZoom",function(n){var i=n.findRepresentativeAxisProxy(),r=i.getDataPercentWindow(),o=i.getDataValueWindow();n.setCalculatedRange({start:r[0],end:r[1],startValue:o[0],endValue:o[1]})})}}),hi("dataZoom",function(e,t){var n=function Z2(e,t,n){return function(r){var o,a={nodes:[],records:{}};if(t(function(l){a.records[l.name]={}}),!r)return a;for(i(r,a);o=!1,e(s),o;);function s(l){var u,c,d;!(0<=Je(a.nodes,l))&&(u=l,c=a,d=!1,t(function(h){re(n(u,h)||[],function(f){c.records[h.name][f]&&(d=!0)})}),d)&&(i(l,a),o=!0)}return a};function i(r,o){o.nodes.push(r),t(function(a){re(n(r,a)||[],function(s){o.records[a.name][s]=!0})})}}(ut(t.eachComponent,t,"dataZoom"),nS,function(r,o){return r.get(o.axisIndex)}),i=[];t.eachComponent({mainType:"dataZoom",query:e},function(r,o){i.push.apply(i,n(r).nodes)}),re(i,function(r,o){r.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})});var sS=re;function Cv(e,t,n){(this._brushController=new Kl(n.getZr())).on("brush",ut(this._onBrush,this)).mount()}Cv.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:Fe(ga.toolbox.dataZoom.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var nu=Cv.prototype;nu.render=function(e,t,n,i){this.model=e,this.ecModel=t,this.api=n,function(r,o,a,s,l){var u=a._isZoomActive;s&&"takeGlobalCursor"===s.type&&(u="dataZoomSelect"===s.key&&s.dataZoomSelectActive),a._isZoomActive=u,r.setIconStatus("zoom",u?"emphasis":"normal");var c=new gf(lS(r.option),o,{include:["grid"]});a._brushController.setPanels(c.makePanelOpts(l,function(d){return d.xAxisDeclared&&!d.yAxisDeclared?"lineX":!d.xAxisDeclared&&d.yAxisDeclared?"lineY":"rect"})).enableBrush(!!u&&{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()})}(e,t,this,i,n),function(r,o){r.setIconStatus("back",1<yv(o).length?"emphasis":"normal")}(e,t)},nu.onclick=function(e,t,n){$2[n].call(this)},nu.remove=function(e,t){this._brushController.unmount()},nu.dispose=function(e,t){this._brushController.dispose()};var $2={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(e){var t=yv(e),n=t[t.length-1];1<t.length&&t.pop();var i={};return QC(n,function(r,o){for(var a=t.length-1;0<=a;a--)if(r=t[a][o]){i[o]=r;break}}),i}(this.ecModel))}};function lS(e){var t={};return re(["xAxisIndex","yAxisIndex"],function(n){t[n]=e[n],null==t[n]&&(t[n]="all"),!1!==t[n]&&"none"!==t[n]||(t[n]=[])}),t}function Sv(e){this.model=e}nu._onBrush=function(e,t){if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new gf(lS(this.model.option),i,{include:["grid"]}).matchOutputRanges(e,i,function(o,a,s){if("cartesian2d"===s.type){var l=o.brushType;"rect"===l?(r("x",s,a[0]),r("y",s,a[1])):r({lineX:"x",lineY:"y"}[l],s,a)}}),function(o,a){var s=yv(o);QC(a,function(l,u){for(var c=s.length-1;0<=c&&!s[c][u];c--);if(c<0){var d=o.queryComponents({mainType:"dataZoom",subType:"select",id:u})[0];if(d){var h=d.getPercentRange();s[0][u]={dataZoomId:u,start:h[0],end:h[1]}}}}),s.push(a)}(i,n),this._dispatchZoomAction(n)}function r(o,a,s){var h,f,_,l=a.getAxis(o),u=l.model,c=(h=o,f=u,i.eachComponent({mainType:"dataZoom",subType:"select"},function(v){v.getAxisModel(h,f.componentIndex)&&(_=v)}),_),d=c.findRepresentativeAxisProxy(u).getMinMaxSpan();null==d.minValueSpan&&null==d.maxValueSpan||(s=Ws(0,s.slice(),l.scale.getExtent(),0,d.minValueSpan,d.maxValueSpan)),c&&(n[c.id]={dataZoomId:c.id,startValue:s[0],endValue:s[1]})}},nu._dispatchZoomAction=function(e){var t=[];sS(e,function(n,i){t.push(Fe(n))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},Ql("dataZoom",Cv),br(function(e){if(e){var t=e.dataZoom||(e.dataZoom=[]);Ye(t)||(e.dataZoom=t=[t]);var n=e.toolbox;if(n&&(Ye(n)&&(n=n[0]),n&&n.feature)){var i=n.feature.dataZoom;r("xAxis",i),r("yAxis",i)}}function r(o,a){if(a){var s=o+"Index",l=a[s];null==l||"all"===l||Ye(l)||(l=!1===l||"none"===l?[]:[l]),Ye(d=e[o])||(d=d?[d]:[]),sS(d,function(u,c){if(null==l||"all"===l||-1!==Je(l,c)){var d={type:"select",$fromToolbox:!0,filterMode:a.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+o+c};d[s]=c,t.push(d)}})}var d}}),Sv.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:ga.toolbox.restore.title},Sv.prototype.onclick=function(e,t,n){(function(i){i[vv]=null})(e),t.dispatchAction({type:"restore",from:this.uid})},Ql("restore",Sv),hi({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")}),no({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var uS=re,J2=Ly,Q2=["","-webkit-","-moz-","-o-"];function cS(e,t,n,i,r){var l,c,o=t&&t.painter;if(n){var a=o&&o.getViewportRoot();a&&(l=e,c=document.body,An(sn,a,i,r,!0)&&An(l,c,sn[0],sn[1]))}else{e[0]=i,e[1]=r;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function Mv(e,t,n){if(He.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=t.getZr(),o=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],cS(this._styleCoord,r,o,t.getWidth()/2,t.getHeight()/2),o?document.body.appendChild(i):e.appendChild(i),this._container=e,this._show=!1;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(s){if(s=s||window.event,!a._enterable){var l=r.handler;Ai(r.painter.getViewportRoot(),s,!0),l.dispatch("mousemove",s)}},i.onmouseleave=function(){a._enterable&&a._show&&a.hideLater(a._hideDelay),a._inContent=!1}}function dS(e,t,n,i){e[0]=n,e[1]=i,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function Tv(e){var t=this._zr=e.getZr();this._styleCoord=[0,0,0,0],dS(this._styleCoord,t,e.getWidth()/2,e.getHeight()/2),this._show=!1}Mv.prototype={constructor:Mv,_enterable:!0,update:function(e){var t=this._container,n=t.currentStyle||document.defaultView.getComputedStyle(t),i=t.style;"absolute"!==i.position&&"absolute"!==n.position&&(i.position="relative"),e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),i=t*this._zr.getHeight();this.moveTo(n,i)},show:function(e){clearTimeout(this._hideTimeout);var t=this.el,n=this._styleCoord;t.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function ek(e){var a,l,t=[],n=e.get("transitionDuration"),i=e.get("backgroundColor"),r=e.getModel("textStyle"),o=e.get("padding");return n&&t.push((l="left "+(a=n)+"s "+"cubic-bezier(0.23, 1, 0.32, 1)"+",top "+a+"s cubic-bezier(0.23, 1, 0.32, 1)",Ke(Q2,function(u){return u+"transition:"+l}).join(";"))),i&&(He.canvasSupported?t.push("background-Color:"+i):(t.push("background-Color:#"+fs(i)),t.push("filter:alpha(opacity=70)"))),uS(["width","color","radius"],function(a){var s="border-"+a,l=J2(s),u=e.get(l);null!=u&&t.push(s+":"+u+("color"===a?"":"px"))}),t.push(function(a){var s=[],l=a.get("fontSize"),u=a.getTextColor();u&&s.push("color:"+u),s.push("font:"+a.getFont());var c=a.get("lineHeight");null==c&&(c=Math.round(3*l/2)),l&&s.push("line-height:"+c+"px");var d=a.get("textShadowColor"),h=a.get("textShadowBlur")||0,f=a.get("textShadowOffsetX")||0,p=a.get("textShadowOffsetY")||0;return h&&s.push("text-shadow:"+f+"px "+p+"px "+h+"px "+d),uS(["decoration","align"],function(_){var v=a.get(_);v&&s.push("text-"+_+":"+v)}),s.join(";")}(r)),null!=o&&t.push("padding:"+Ms(o).join("px ")+"px"),t.join(";")+";"}(e)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",t.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(e){this.el.innerHTML=e??""},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var n=this._styleCoord;cS(n,this._zr,this._appendToBody,e,t);var i=this.el.style;i.left=n[0]+"px",i.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ut(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var e=this.el.clientWidth,t=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(e+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),t+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:e,height:t}}},Tv.prototype={constructor:Tv,_enterable:!0,update:function(e){e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),i=t*this._zr.getHeight();this.moveTo(n,i)},show:function(e){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(e,t,n){this.el&&this._zr.remove(this.el);for(var i={},r=e,o="{marker",a=r.indexOf(o);0<=a;){var s=r.indexOf("|}"),l=r.substr(a+o.length,s-a-o.length);i["marker"+l]=-1<l.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[l],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[l]},a=(r=r.substr(s+1)).indexOf("{marker")}var u=n.getModel("textStyle"),c=u.get("fontSize"),d=n.get("textLineHeight");null==d&&(d=Math.round(3*c/2)),this.el=new oi({style:Fi({},u,{rich:i,text:e,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:d}),z:n.get("z")}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el.getBoundingRect();return[e.width,e.height]},moveTo:function(e,t){if(this.el){var n=this._styleCoord;dS(n,this._zr,e,t),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ut(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var e=this.getSize();return{width:e[0],height:e[1]}}};var hS=ut,Rc=re,fS=yn,tk=new vi({shape:{x:-1,y:-1,width:2,height:2}});function Av(e){for(var t=e.pop();e.length;){var n=e.pop();n&&(di.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),t=new di(n,t,t.ecModel))}return t}function pS(e,t){return e.dispatchAction||ut(t.dispatchAction,t)}function gS(e){return"center"===e||"middle"===e}lr({type:"tooltip",init:function(e,t){if(!He.node){var n,i=e.getComponent("tooltip"),r=i.get("renderMode");this._renderMode=E0(r),"html"===this._renderMode?(n=new Mv(t.getDom(),t,{appendToBody:i.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new Tv(t),this._newLine="\n"),this._tooltipContent=n}},render:function(e,t,n){if(!He.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var i=this._tooltipContent;i.update(e),i.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel.get("triggerOn");Qw("itemTooltip",this._api,hS(function(t,n,i){"none"!==e&&(0<=e.indexOf(t)?this._tryShow(n,i):"leave"===t&&this._hide(i))},this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.isDisposed()||i.manuallyShowTip(e,t,n,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(e,t,n,i){if(i.from!==this.uid&&!He.node){var r=pS(i,n);this._ticket="";var o=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var a=tk;a.position=[i.x,i.y],a.update(),a.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:a},r)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,i))return;var s=Zw(i,t),l=s.point[0],u=s.point[1];null!=l&&null!=u&&this._tryShow({offsetX:l,offsetY:u,position:i.position,target:s.el},r)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},r))}},manuallyHideTip:function(e,t,n,i){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(pS(i,n))},_manuallyAxisShowTip:function(e,t,n,i){var r=i.seriesIndex,o=i.dataIndex,a=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=o&&null!=a){var s=t.getSeriesByIndex(r);if(s&&"axis"===(e=Av([s.getData().getItemModel(o),s,(s.coordinateSystem||{}).model,e])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:o,position:i.position}),!0}},_tryShow:function(e,t){var n=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var i=e.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,e):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,n,t)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,n,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var n=e.get("showDelay");t=ut(t,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(t,n):t()},_showAxisTooltip:function(e,t){var n=this._ecModel,r=[t.offsetX,t.offsetY],o=[],a=[],s=Av([t.tooltipOption,this._tooltipModel]),l=this._renderMode,u=this._newLine,c={};Rc(e,function(h){Rc(h.dataByAxis,function(f){var p=n.getComponent(f.axisDim+"Axis",f.axisIndex),_=f.value,v=[];if(p&&null!=_){var E=sC(_,p.axis,n,f.seriesDataIndices,f.valueLabelOpt);re(f.seriesDataIndices,function(V){var q=n.getSeriesByIndex(V.seriesIndex),j=V.dataIndexInside,X=q&&q.getDataParams(j);if(X.axisDim=f.axisDim,X.axisIndex=f.axisIndex,X.axisType=f.axisType,X.axisId=f.axisId,X.axisValue=xg(p.axis,_),X.axisValueLabel=E,X){a.push(X);var Y,Q=q.formatTooltip(j,!0,null,l);Mt(Q)?(Y=Q.html,rt(c,Q.markers)):Y=Q,v.push(Y)}});var F=E;o.push("html"!==l?v.join(u):(F?Oi(F)+u:"")+v.join(u))}})},this),o.reverse(),o=o.join(this._newLine+this._newLine);var d=t.position;this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(s,d,r[0],r[1],this._tooltipContent,a):this._showTooltipContent(s,o,a,Math.random(),r[0],r[1],d,void 0,c)})},_showSeriesItemTooltip:function(e,t,n){var r=t.seriesIndex,o=this._ecModel.getSeriesByIndex(r),a=t.dataModel||o,s=t.dataIndex,l=t.dataType,u=a.getData(l),c=Av([u.getItemModel(s),a,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),d=c.get("trigger");if(null==d||"item"===d){var h,f,p=a.getDataParams(s,l),_=a.formatTooltip(s,!1,l,this._renderMode);f=Mt(_)?(h=_.html,_.markers):(h=_,null);var v="item_"+a.name+"_"+s;this._showOrMove(c,function(){this._showTooltipContent(c,h,p,v,e.offsetX,e.offsetY,e.position,e.target,f)}),n({type:"showTip",dataIndexInside:s,dataIndex:u.getRawIndex(s),seriesIndex:r,from:this.uid})}},_showComponentItemTooltip:function(e,t,n){var i=t.tooltip;"string"==typeof i&&(i={content:i,formatter:i});var r=new di(i,this._tooltipModel,this._ecModel),o=r.get("content"),a=Math.random();this._showOrMove(r,function(){this._showTooltipContent(r,o,r.get("formatterParams")||{},a,e.offsetX,e.offsetY,e.position,t)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,n,i,r,o,a,s,l){if(this._ticket="",e.get("showContent")&&e.get("show")){var u=this._tooltipContent,c=e.get("formatter");a=a||e.get("position");var d=t;if(c&&"string"==typeof c)d=wp(c,n,!0);else if("function"==typeof c){var h=hS(function(f,p){f===this._ticket&&(u.setContent(p,l,e),this._updatePosition(e,a,r,o,u,n,s))},this);this._ticket=i,d=c(n,i,h)}u.setContent(d,l,e),u.show(e),this._updatePosition(e,a,r,o,u,n,s)}},_updatePosition:function(e,t,n,i,r,o,a){var s=this._api.getWidth(),l=this._api.getHeight();t=t||e.get("position");var _,v,E,F,V,q,j,X,Y,Q,u=r.getSize(),c=e.get("align"),d=e.get("verticalAlign"),h=a&&a.getBoundingRect().clone();if(a&&h.applyTransform(a.transform),"function"==typeof t&&(t=t([n,i],o,r.el,h,{viewSize:[s,l],contentSize:u.slice()})),Ye(t))n=fS(t[0],s),i=fS(t[1],l);else if(Mt(t)){t.width=u[0],t.height=u[1];var f=Ki(t,{width:s,height:l});n=f.x,i=f.y,d=c=null}else if("string"==typeof t&&a)n=(p=function(_,v,E){var F=E[0],V=E[1],q=0,j=0,X=v.width,Y=v.height;switch(_){case"inside":q=v.x+X/2-F/2,j=v.y+Y/2-V/2;break;case"top":q=v.x+X/2-F/2,j=v.y-V-5;break;case"bottom":q=v.x+X/2-F/2,j=v.y+Y+5;break;case"left":q=v.x-F-5,j=v.y+Y/2-V/2;break;case"right":q=v.x+X+5,j=v.y+Y/2-V/2}return[q,j]}(t,h,u))[0],i=p[1];else{var p;n=(_=n,v=i,E=r,F=s,V=l,q=c?null:20,j=d?null:20,X=E.getOuterSize(),Y=X.width,Q=X.height,null!=q&&(F<_+Y+q?_-=Y+q:_+=q),null!=j&&(V<v+Q+j?v-=Q+j:v+=j),p=[_,v])[0],i=p[1]}c&&(n-=gS(c)?u[0]/2:"right"===c?u[0]:0),d&&(i-=gS(d)?u[1]/2:"bottom"===d?u[1]:0),e.get("confine")&&(n=(p=function(_,v,E,F,V){var q=E.getOuterSize(),j=q.width,X=q.height;return _=Math.min(_+j,F)-j,v=Math.min(v+X,V)-X,[_=Math.max(_,0),v=Math.max(v,0)]}(n,i,r,s,l))[0],i=p[1]),r.moveTo(n,i)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,n=!!t&&t.length===e.length;return n&&Rc(t,function(i,r){var o=i.dataByAxis||{},a=(e[r]||{}).dataByAxis||[];(n&=o.length===a.length)&&Rc(o,function(s,l){var u=a[l]||{},c=s.seriesDataIndices||[],d=u.seriesDataIndices||[];(n&=s.value===u.value&&s.axisType===u.axisType&&s.axisId===u.axisId&&c.length===d.length)&&Rc(c,function(h,f){var p=d[f];n&=h.seriesIndex===p.seriesIndex&&h.dataIndex===p.dataIndex})})}),this._lastDataByCoordSys=e,!!n},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){He.node||(this._tooltipContent.dispose(),ev("itemTooltip",t))}}),hi({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),hi({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var nk=["rect","polygon","keep","clear"],mS=re;function vS(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function Iv(e,t,n){var i={};return mS(t,function(r){var o=i[r]=function(){function a(){}return a.prototype.__hidden=a.prototype,new a}();mS(e[r],function(a,s){if(Ii.isValidType(s)){var l={type:s,visual:a};n&&n(l,r),o[s]=new Ii(l),"opacity"===s&&((l=Fe(l)).type="colorAlpha",o.__hidden.__alphaForOpacity=new Ii(l))}})}),i}function yS(e,t,n){var i;re(n,function(r){t.hasOwnProperty(r)&&vS(t[r])&&(i=!0)}),i&&re(n,function(r){t.hasOwnProperty(r)&&vS(t[r])?e[r]=Fe(t[r]):delete e[r]})}var Dv={lineX:xS(0),lineY:xS(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&Ls(n.range,e[0],e[1])},rect:function(e,t,n){var i=n.range;if(!e||i.length<=1)return!1;var r=e.x,o=e.y,a=e.width,s=e.height,l=i[0];return!!(Ls(i,r,o)||Ls(i,r+a,o)||Ls(i,r,o+s)||Ls(i,r+a,o+s)||g.create(e).contain(l[0],l[1])||Nu(r,o,r+a,o,i)||Nu(r,o,r,o+s,i)||Nu(r+a,o,r+a,o+s,i)||Nu(r,o+s,r+a,o+s,i))||void 0}}};function xS(e){var t=["x","y"],n=["width","height"];return{point:function(i,r,o){if(i)return Pc(i[e],o.range)},rect:function(i,r,o){if(i){var a=o.range,s=[i[t[e]],i[t[e]]+i[n[e]]];return s[1]<s[0]&&s.reverse(),Pc(s[0],a)||Pc(s[1],a)||Pc(a[0],s)||Pc(a[1],s)}}}}function Pc(e,t){return t[0]<=e&&e<=t[1]}var bS=["inBrush","outOfBrush"],kv="__ecBrushSelect",Nv="__ecInBrushSelectEvent",_S=qo.VISUAL.BRUSH;function wS(e){e.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new gf(t.option,e)).setInputRanges(t.areas,e)})}function ik(e,t){if(!e.isDisposed()){var n=e.getZr();n[Nv]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[Nv]=!1}}function CS(e,t,n,i){for(var r=0,o=t.length;r<o;r++){var a=t[r];if(e[a.brushType](i,n,a.selectors,a))return!0}}function SS(e){var t=e.brushSelector;if(it(t)){var n=[];return re(Dv,function(r,o){n[o]=function(a,s,l,u){var c=s.getItemLayout(a);return r[t](c,l,u)}}),n}if(gn(t)){var i={};return re(Dv,function(r,o){i[o]=t}),i}return t}Gi(_S,function(e,t,n){e.eachComponent({mainType:"brush"},function(i){n&&"takeGlobalCursor"===n.type&&i.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),wS(e)}),Ni(_S,function(e,t,n){var i,r,o=[];e.eachComponent({mainType:"brush"},function(a,s){var l={brushId:a.id,brushIndex:s,brushName:a.name,areas:Fe(a.areas),selected:[]};o.push(l);var u=a.option,c=u.brushLink,d=[],h=[],f=[],p=0;s||(i=u.throttleType,r=u.throttleDelay);var _=Ke(a.areas,function(V){return q=De({boundingRect:rk[V.brushType](V)},V),j=q.selectors={},re(Dv[q.brushType],function(X,Y){j[Y]=function(Q){return X(Q,j,q)}}),q;var q,j}),v=Iv(a.option,bS,function(V){V.mappingMethod="fixed"});function E(V){return"all"===c||d[V]}function F(V){return!!V.length}Ye(c)&&re(c,function(V){d[V]=1}),e.eachSeries(function(V,q){var X,Y,Q,j=f[q]=[];"parallel"===V.subType?(Y=q,p|=(Q=(X=V).coordinateSystem).hasAxisBrushed(),E(Y)&&Q.eachActiveState(X.getData(),function(oe,ce){"active"===oe&&(h[ce]=1)})):function(X,Y,Q){var we,Ce,oe=SS(X);if(oe&&(we=Y,null==(Ce=a.option.seriesIndex)||"all"===Ce||!(Ye(Ce)?Je(Ce,we)<0:we!==Ce))&&(re(_,function(ge){oe[ge.brushType]&&a.brushTargetManager.controlSeries(ge,X,e)&&Q.push(ge),p|=F(Q)}),E(Y)&&F(Q))){var ce=X.getData();ce.each(function(ge){CS(oe,Q,ce,ge)&&(h[ge]=1)})}}(V,q,j)}),e.eachSeries(function(V,q){var j={seriesId:V.id,seriesIndex:q,seriesName:V.name,dataIndex:[]};l.selected.push(j);var X=SS(V),Y=f[q],Q=V.getData(),oe=E(q)?function(ce){return h[ce]?(j.dataIndex.push(Q.getRawIndex(ce)),"inBrush"):"outOfBrush"}:function(ce){return CS(X,Y,Q,ce)?(j.dataIndex.push(Q.getRawIndex(ce)),"inBrush"):"outOfBrush"};(E(q)?p:F(Y))&&function(ce,ge,we,Ce,Ae,Oe){var Ge,Pe={};function st(Nt){return we.getItemVisual(Ge,Nt)}function Pt(Nt,rn){we.setItemVisual(Ge,Nt,rn)}re(ce,function(Nt){var rn=Ii.prepareVisualTypes(ge[Nt]);Pe[Nt]=rn}),we.each(function Ft(Nt,rn){var fn=we.getRawDataItem(Ge=Nt);if(!fn||!1!==fn.visualMap)for(var Ln=Ce.call(void 0,Nt),Zt=ge[Ln],kn=Pe[Ln],Rn=0,Vn=kn.length;Rn<Vn;Rn++){var bi=kn[Rn];Zt[bi]&&Zt[bi].applyVisual(Nt,st,Pt)}})}(bS,v,Q,oe)})}),function(a,s,l,u,c){if(c){var d=a.getZr();d[Nv]||(d[kv]||(d[kv]=ik),Gu(d,kv,l,s)(a,u))}}(t,i,r,o,n)});var rk={lineX:en,lineY:en,rect:function(e){return MS(e.range)},polygon:function(e){for(var t,n=e.range,i=0,r=n.length;i<r;i++){var o=n[i];o[0]<(t=t||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(t[0][0]=o[0]),o[0]>t[0][1]&&(t[0][1]=o[0]),o[1]<t[1][0]&&(t[1][0]=o[1]),o[1]>t[1][1]&&(t[1][1]=o[1])}return t&&MS(t)}};function MS(e){return new g(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var ok=["#ddd"];function TS(e,t){return rt({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new di(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}function Ev(e,t,n,i){i&&i.$from===e.id||this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}function Lv(e,t,n){this.model=e,this.ecModel=t,this.api=n}no({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,t){var n=this.option;t||yS(n,e,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:ok},i.hasOwnProperty("liftZ")||(i.liftZ=5)},setAreas:function(e){e&&(this.areas=Ke(e,function(t){return TS(this.option,t)},this))},setBrushOption:function(e){this.brushOption=TS(this.option,e),this.brushType=this.brushOption.brushType}}),lr({type:"brush",init:function(e,t){this.ecModel=e,this.api=t,(this._brushController=new Kl(t.getZr())).on("brush",ut(this._onBrush,this)).mount()},render:function(e){return this.model=e,Ev.apply(this,arguments)},updateTransform:function(e,t){return wS(t),Ev.apply(this,arguments)},updateView:Ev,dispose:function(){this._brushController.dispose()},_onBrush:function(e,t){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:Fe(e),$from:n}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:Fe(e),$from:n})}}),hi({type:"brush",event:"brush"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(n){n.setAreas(e.areas)})}),hi({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),hi({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),Lv.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:Fe(ga.toolbox.brush.title)};var mf=Lv.prototype;function AS(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),i=e.label||e.label||{},r=i.normal||(i.normal={}),o={normal:1,emphasis:1};re(i,function(a,s){o[s]||Js(r,s)||(r[s]=a)}),n.label&&!Js(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function Js(e,t){return e.hasOwnProperty(t)}mf.render=mf.updateView=function(e,t,n){var i,r,o;t.eachComponent({mainType:"brush"},function(a){i=a.brushType,r=a.brushOption.brushMode||"single",o|=a.areas.length}),this._brushType=i,this._brushMode=r,re(e.get("type",!0),function(a){e.setIconStatus(a,("keep"===a?"multiple"===r:"clear"===a?o:a===i)?"emphasis":"normal")})},mf.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return re(e.get("type",!0),function(i){t[i]&&(n[i]=t[i])}),n},mf.onclick=function(e,t,n){var i=this._brushType,r=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===r?"single":"multiple":r}})},Ql("brush",Lv),br(function(e,t){var l,u,n=e&&e.brush;if(Ye(n)||(n=n?[n]:[]),n.length){var i=[];re(n,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(i=i.concat(u))});var r=e&&e.toolbox;Ye(r)&&(r=r[0]),r||(e.toolbox=[r={feature:{}}]);var o=r.feature||(r.feature={}),a=o.brush||(o.brush={}),s=a.type||(a.type=[]);s.push.apply(s,i),u={},re(l=s,function(c){u[c]=1}),l.length=0,re(u,function(c,d){l.push(d)}),t&&!s.length&&s.push.apply(s,nk)}}),no({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),lr({type:"title",render:function(e,t,n){if(this.group.removeAll(),e.get("show")){var i=this.group,r=e.getModel("textStyle"),o=e.getModel("subtextStyle"),a=e.get("textAlign"),s=_t(e.get("textBaseline"),e.get("textVerticalAlign")),l=new oi({style:Fi({},r,{text:e.get("text"),textFill:r.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),c=e.get("subtext"),d=new oi({style:Fi({},o,{text:c,textFill:o.getTextColor(),y:u.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),h=e.get("link"),f=e.get("sublink"),p=e.get("triggerEvent",!0);l.silent=!h&&!p,d.silent=!f&&!p,h&&l.on("click",function(){Pu(h,"_"+e.get("target"))}),f&&d.on("click",function(){Pu(f,"_"+e.get("subtarget"))}),l.eventData=d.eventData=p?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(l),c&&i.add(d);var _=i.getBoundingRect(),v=e.getBoxLayoutParams();v.width=_.width,v.height=_.height;var E=Ki(v,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));a||("middle"===(a=e.get("left")||e.get("right"))&&(a="center"),"right"===a?E.x+=E.width:"center"===a&&(E.x+=E.width/2)),s||("center"===(s=e.get("top")||e.get("bottom"))&&(s="middle"),"bottom"===s?E.y+=E.height:"middle"===s&&(E.y+=E.height/2),s=s||"top"),i.attr("position",[E.x,E.y]);var F={textAlign:a,textVerticalAlign:s};l.setStyle(F),d.setStyle(F),_=i.getBoundingRect();var V=E.margin,q=e.getItemStyle(["color","opacity"]);q.fill=e.get("backgroundColor");var j=new vi({shape:{x:_.x-V[3],y:_.y-V[0],width:_.width+V[1]+V[3],height:_.height+V[0]+V[2],r:e.get("borderRadius")},style:q,subPixelOptimize:!0,silent:!0});i.add(j)}}}),yi.registerSubTypeDefaulter("timeline",function(){return"slider"}),hi({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t){var n=t.getComponent("timeline");return n&&null!=e.currentIndex&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),t.resetOption("timeline"),De({currentIndex:n.option.currentIndex},e)}),hi({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&null!=e.playState&&n.setPlayState(e.playState)});var IS=yi.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._initData()},mergeOption:function(e){IS.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(t<=e&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(e){this.option.autoPlay=!!e},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var e=this.option,t=e.data||[],n=e.axisType,i=this._names=[];if("category"===n){var r=[];re(t,function(a,s){var l,u=bu(a);Mt(a)?(l=Fe(a)).value=s:l=s,r.push(l),it(u)||null!=u&&!isNaN(u)||(u=""),i.push(u+"")}),t=r}(this._data=new ur([{name:"value",type:{category:"ordinal",time:"time"}[n]||"number"}],this)).initData(t,i)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function vf(e,t,n,i){er.call(this,e,t,n),this.type=i||"value",this.model=null}tt(IS.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),Fp);var sk=jo.extend({type:"timeline"});vf.prototype={constructor:vf,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},Ue(vf,er);var rs=ut,Rv=re,Pv=Math.PI;function DS(e,t,n,i,r,o){var a=t.get("color");r?(r.setColor(a),n.add(r),o&&o.onUpdate(r)):((r=io(e.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(r),o&&o.onCreate(r));var s=t.getItemStyle(["color","symbol","symbolSize"]);r.setStyle(s),i=rt({rectHover:!0,z2:100},i,!0);var l=e.get("symbolSize");(l=l instanceof Array?l.slice():[+l,+l])[0]/=2,l[1]/=2,i.scale=l;var u=e.get("symbolOffset");if(u){var c=i.position=i.position||[0,0];c[0]+=yn(u[0],l[0]),c[1]+=yn(u[1],l[1])}var d=e.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function kS(e,t,n,i,r){if(!e.dragging){var o=i.getModel("checkpointStyle"),a=n.dataToCoord(i.getData().get(["value"],t));r||!o.get("animation",!0)?e.attr({position:[a,0]}):(e.stopAnimation(!0),e.animateTo({position:[a,0]},o.get("animationDuration",!0),o.get("animationEasing",!0)))}}sk.extend({type:"timeline.slider",init:function(e,t){this.api=t},render:function(e,t,n,i){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var r=this._layout(e,n),o=this._createGroup("mainGroup"),a=this._createGroup("labelGroup"),s=this._axis=this._createAxis(r,e);e.formatTooltip=function(l){return Oi(s.scale.getLabel(l))},Rv(["AxisLine","AxisTick","Control","CurrentPointer"],function(l){this["_render"+l](r,o,s,e)},this),this._renderAxisLabel(r,a,s,e),this._position(r,e)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(e,t){var oe,ce,n=e.get("label.position"),i=e.get("orient"),r=(ce=t,Ki((oe=e).getBoxLayoutParams(),{width:ce.getWidth(),height:ce.getHeight()},oe.get("padding")));null==n||"auto"===n?n="horizontal"===i?r.y+r.height/2<t.getHeight()/2?"-":"+":r.x+r.width/2<t.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]);var o,a,s,l,u={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},c={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:Pv/2},h="vertical"===i?r.height:r.width,f=e.getModel("controlStyle"),p=f.get("show",!0),_=p?f.get("itemSize"):0,v=p?f.get("itemGap"):0,E=_+v,F=e.get("label.rotate")||0;F=F*Pv/180;var V=f.get("position",!0),q=p&&f.get("showPlayBtn",!0),j=p&&f.get("showPrevBtn",!0),Y=0,Q=h;return"left"===V||"bottom"===V?(q&&(o=[0,0],Y+=E),j&&(a=[Y,0],Y+=E)):(q&&(o=[Q-_,0],Q-=E),j&&(a=[0,0],Y+=E)),p&&f.get("showNextBtn",!0)&&(s=[Q-_,0],Q-=E),l=[Y,Q],e.get("inverse")&&l.reverse(),{viewRect:r,mainLength:h,orient:i,rotation:d[i],labelRotation:F,labelPosOpt:n,labelAlign:e.get("label.align")||u[i],labelBaseline:e.get("label.verticalAlign")||e.get("label.baseline")||c[i],playPosition:o,prevBtnPosition:a,nextBtnPosition:s,axisExtent:l,controlSize:_,controlGap:v}},_position:function(e,t){var n=this._mainGroup,i=this._labelGroup,r=e.viewRect;if("vertical"===e.orient){var o=gr(),a=r.x,s=r.y+r.height;wr(o,o,[-a,-s]),So(o,o,-Pv/2),wr(o,o,[a,s]),(r=r.clone()).applyTransform(o)}var l=v(r),u=v(n.getBoundingRect()),c=v(i.getBoundingRect()),d=n.position,h=i.position;h[0]=d[0]=l[0][0];var f,p=e.labelPosOpt;function _(F){var V=F.position;F.origin=[l[0][0]-V[0],l[1][0]-V[1]]}function v(F){return[[F.x,F.x+F.width],[F.y,F.y+F.height]]}function E(F,V,q,j,X){F[j]+=q[j][X]-V[j][X]}isNaN(p)?(E(d,u,l,1,f="+"===p?0:1),E(h,c,l,1,1-f)):(E(d,u,l,1,f=0<=p?0:1),h[1]=d[1]+p),n.attr("position",d),i.attr("position",h),n.rotation=i.rotation=e.rotation,_(n),_(i)},_createAxis:function(e,t){var n=t.getData(),i=t.get("axisType"),r=El(t,i);r.getTicks=function(){return n.mapArray(["value"],function(s){return s})};var o=n.getDataExtent("value");r.setExtent(o[0],o[1]),r.niceTicks();var a=new vf("value",r,e.axisExtent,i);return a.model=t,a},_createGroup:function(e){var t=this["_"+e]=new m;return this.group.add(t),t},_renderAxisLine:function(e,t,n,i){var r=n.getExtent();i.get("lineStyle.show")&&t.add(new yr({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:fe({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(e,t,n,i){var r=i.getData(),o=n.scale.getTicks();Rv(o,function(a){var s=n.dataToCoord(a),l=r.getItemModel(a),u=l.getModel("itemStyle"),c=l.getModel("emphasis.itemStyle"),d={position:[s,0],onclick:rs(this._changeTimeline,this,a)},h=DS(l,u,t,d);Ri(h,c.getItemStyle()),l.get("tooltip")?(h.dataIndex=a,h.dataModel=i):h.dataIndex=h.dataModel=null},this)},_renderAxisLabel:function(e,t,n,i){if(n.getLabelModel().get("show")){var r=i.getData(),o=n.getViewLabels();Rv(o,function(a){var s=a.tickValue,l=r.getItemModel(s),u=l.getModel("label"),c=l.getModel("emphasis.label"),d=n.dataToCoord(a.tickValue),h=new oi({position:[d,0],rotation:e.labelRotation-e.rotation,onclick:rs(this._changeTimeline,this,s),silent:!1});Fi(h.style,u,{text:a.formattedLabel,textAlign:e.labelAlign,textVerticalAlign:e.labelBaseline}),t.add(h),Ri(h,Fi({},c))},this)}},_renderControl:function(e,t,n,i){var r=e.controlSize,o=e.rotation,a=i.getModel("controlStyle").getItemStyle(),s=i.getModel("emphasis.controlStyle").getItemStyle(),l=[0,-r/2,r,r],u=i.getPlayState(),c=i.get("inverse",!0);function d(h,f,p,_){if(h){var v=(V=l,j=(q={position:h,origin:[r/2,0],rotation:_?-o:0,rectHover:!0,style:a,onclick:p}).style,X=wl(i.get(f),q||{},new g(V[0],V[1],V[2],V[3])),j&&X.setStyle(j),X);t.add(v),Ri(v,s)}var V,q,j,X}d(e.nextBtnPosition,"controlStyle.nextIcon",rs(this._changeTimeline,this,c?"-":"+")),d(e.prevBtnPosition,"controlStyle.prevIcon",rs(this._changeTimeline,this,c?"+":"-")),d(e.playPosition,"controlStyle."+(u?"stopIcon":"playIcon"),rs(this._handlePlayClick,this,!u),!0)},_renderCurrentPointer:function(e,t,n,i){var r=i.getData(),o=i.getCurrentIndex(),a=r.getItemModel(o).getModel("checkpointStyle"),s=this;this._currentPointer=DS(a,a,this._mainGroup,{},this._currentPointer,{onCreate:function(u){u.draggable=!0,u.drift=rs(s._handlePointerDrag,s),u.ondragend=rs(s._handlePointerDragend,s),kS(u,o,n,i,!0)},onUpdate:function(u){kS(u,o,n,i)}})},_handlePlayClick:function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},_handlePointerDrag:function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(e,t){var n=this._toAxisCoord(e)[0],i=Ss(this._axis.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var r=this._findNearestTick(n),o=this.model;(t||r!==o.getCurrentIndex()&&o.get("realtime"))&&this._changeTimeline(r)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(rs(function(){var e=this.model;this._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(e){return Uo(e,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(e){var t,n=this.model.getData(),i=1/0,r=this._axis;return n.each(["value"],function(o,a){var s=r.dataToCoord(o),l=Math.abs(s-e);l<i&&(i=l,t=a)}),t},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})}}),br(function(e){var t=e&&e.timeline;Ye(t)||(t=t?[t]:[]),re(t,function(n){n&&function(i){var r=i.type,o={number:"value",time:"time"};if(o[r]&&(i.axisType=o[r],delete i.type),AS(i),Js(i,"controlPosition")){var a=i.controlStyle||(i.controlStyle={});Js(a,"position")||(a.position=i.controlPosition),"none"!==a.position||Js(a,"show")||(a.show=!1,delete a.position),delete i.controlPosition}re(i.data||[],function(s){Mt(s)&&!Ye(s)&&(!Js(s,"value")&&Js(s,"name")&&(s.value=s.name),AS(s))})}(n)})});var NS=za,Bv=Oi;function yf(e){ms(e,"label",["show"])}var xf=no({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},isAnimationEnabled:function(){if(He.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,t){this._mergeOption(e,t,!1,!1)},_mergeOption:function(e,t,n,i){var r=this.constructor,o=this.mainType+"Model";n||t.eachSeries(function(a){var s=a.get(this.mainType,!0),l=a[o];s&&s.data?(l?l._mergeOption(s,t,!0):(i&&yf(s),re(s.data,function(u){u instanceof Array?(yf(u[0]),yf(u[1])):yf(u)}),fe(l=new r(s,this,t),{mainType:this.mainType,seriesIndex:a.seriesIndex,name:a.name,createdBySelf:!0}),l.__hostSeries=a),a[o]=l):a[o]=null},this)},formatTooltip:function(e,t,n,i){var r=this.getData(),o=this.getRawValue(e),a=Ye(o)?Ke(o,NS).join(", "):NS(o),s=r.getName(e),l=Bv(this.name);return null==o&&!s||(l+="html"===i?"<br/>":"\n"),s&&(l+=Bv(s),null!=o&&(l+=" : ")),null!=o&&(l+=Bv(a)),l},getData:function(){return this._data},setData:function(e){this._data=e}});tt(xf,Fp),xf.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var ES=Je;function Ov(e,t,n,i,r,o){var a=[],s=va(t,i)?t.getCalculationInfo("stackResultDimension"):i,l=Hv(t,s,e),u=t.indicesOfNearest(s,l)[0];a[r]=t.get(n,u),a[o]=t.get(s,u);var c=t.get(i,u),d=Dy(t.get(i,u));return 0<=(d=Math.min(d,20))&&(a[o]=+a[o].toFixed(d)),[a,c]}var zv=Lt,Vv={min:zv(Ov,"min"),max:zv(Ov,"max"),average:zv(Ov,"average")};function Bc(e,t){var d,n=e.getData(),i=e.coordinateSystem;if(t&&(d=t,isNaN(parseFloat(d.x))||isNaN(parseFloat(d.y)))&&!Ye(t.coord)&&i){var r=i.dimensions,o=LS(t,n,i,e);if((t=Fe(t)).type&&Vv[t.type]&&o.baseAxis&&o.valueAxis){var a=ES(r,o.baseAxis.dim),s=ES(r,o.valueAxis.dim),l=Vv[t.type](n,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],c=0;c<2;c++)Vv[u[c]]&&(u[c]=Hv(n,n.mapDimension(r[c]),u[c]));t.coord=u}}return t}function LS(e,t,n,i){var r={};return null!=e.valueIndex||null!=e.valueDim?(r.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,r.valueAxis=n.getAxis(function(o,a){var s=o.getData(),l=s.dimensions;a=s.getDimension(a);for(var u=0;u<l.length;u++){var c=s.getDimensionInfo(l[u]);if(c.name===a)return c.coordDim}}(i,r.valueDataDim)),r.baseAxis=n.getOtherAxis(r.valueAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=n.getOtherAxis(r.baseAxis),r.baseDataDim=t.mapDimension(r.baseAxis.dim),r.valueDataDim=t.mapDimension(r.valueAxis.dim)),r}function Oc(e,t){return!(e&&e.containData&&t.coord&&!function(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}(t))||e.containData(t.coord)}function RS(e,t,n,i){return i<2?e.coord&&e.coord[i]:e.value}function Hv(e,t,n){if("average"!==n)return"median"===n?e.getMedian(t):e.getDataExtent(t,!0)["max"===n?1:0];var i=0,r=0;return e.each(t,function(o,a){isNaN(o)||(i+=o,r++)}),i/r}var Fv=lr({type:"marker",init:function(){this.markerGroupMap=Ct()},render:function(e,t,n){var i=this.markerGroupMap;i.each(function(o){o.__keep=!1});var r=this.type+"Model";t.eachSeries(function(o){var a=o[r];a&&this.renderSeries(o,a,t,n)},this),i.each(function(o){o.__keep||this.group.remove(o.group)},this)},renderSeries:function(){}});function PS(e,t,n){var i=t.coordinateSystem;e.each(function(r){var o,a=e.getItemModel(r),s=yn(a.get("x"),n.getWidth()),l=yn(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(t.getMarkerPosition)o=t.getMarkerPosition(e.getValues(e.dimensions,r));else if(i){var u=e.get(i.dimensions[0],r),c=e.get(i.dimensions[1],r);o=i.dataToPoint([u,c])}}else o=[s,l];isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),e.setItemLayout(r,o)})}function lk(e,t,n,i){var r=e.getData(),o=i.type;if(!Ye(i)&&("min"===o||"max"===o||"average"===o||"median"===o||null!=i.xAxis||null!=i.yAxis)){var a,s;if(null!=i.yAxis||null!=i.xAxis)a=t.getAxis(null!=i.yAxis?"y":"x"),s=an(i.yAxis,i.xAxis);else{var l=LS(i,r,t,e);a=l.valueAxis,s=Hv(r,Qu(r,l.valueDataDim),o)}var u="x"===a.dim?0:1,c=1-u,d=Fe(i),h={};d.type=null,d.coord=[],h.coord=[],d.coord[c]=-1/0,h.coord[c]=1/0;var f=n.get("precision");0<=f&&"number"==typeof s&&(s=+s.toFixed(Math.min(f,20))),d.coord[u]=h.coord[u]=s,i=[d,h,{type:o,valueIndex:i.valueIndex,value:s}]}return(i=[Bc(e,i[0]),Bc(e,i[1]),fe({},i[2])])[2].type=i[2].type||"",rt(i[2],i[0]),rt(i[2],i[1]),i}function bf(e){return!isNaN(e)&&!isFinite(e)}function BS(e,t,n,i){var r=1-e,o=i.dimensions[e];return bf(t[r])&&bf(n[r])&&t[e]===n[e]&&i.getAxis(o).containData(t[e])}function uk(e,t){if("cartesian2d"===e.type){var n=t[0].coord,i=t[1].coord;if(n&&i&&(BS(1,n,i,e)||BS(0,n,i,e)))return!0}return Oc(e,t[0])&&Oc(e,t[1])}function Wv(e,t,n,i,r){var o,a=i.coordinateSystem,s=e.getItemModel(t),l=yn(s.get("x"),r.getWidth()),u=yn(s.get("y"),r.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)o=i.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=a.dimensions,d=e.get(c[0],t),h=e.get(c[1],t);o=a.dataToPoint([d,h])}if("cartesian2d"===a.type){var f=a.getAxis("x"),p=a.getAxis("y");bf(e.get((c=a.dimensions)[0],t))?o[0]=f.toGlobalCoord(f.getExtent()[n?0:1]):bf(e.get(c[1],t))&&(o[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}else o=[l,u];e.setItemLayout(t,o)}function ck(e,t,n,i){var r=Bc(e,i[0]),o=Bc(e,i[1]),a=an,s=r.coord,l=o.coord;s[0]=a(s[0],-1/0),s[1]=a(s[1],-1/0),l[0]=a(l[0],1/0),l[1]=a(l[1],1/0);var u=Ie([{},r,o]);return u.coord=[r.coord,o.coord],u.x0=r.x,u.y0=r.y,u.x1=o.x,u.y1=o.y,u}function iu(e){return!isNaN(e)&&!isFinite(e)}function OS(e,t,n){var i=1-e;return iu(t[i])&&iu(n[i])}function dk(e,t){var n=t.coord[0],i=t.coord[1];return!("cartesian2d"!==e.type||!n||!i||!OS(1,n,i)&&!OS(0,n,i))||Oc(e,{coord:n,x:t.x0,y:t.y0})||Oc(e,{coord:i,x:t.x1,y:t.y1})}function zS(e,t,n,i,r){var o,a=i.coordinateSystem,s=e.getItemModel(t),l=yn(s.get(n[0]),r.getWidth()),u=yn(s.get(n[1]),r.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)o=i.getMarkerPosition(e.getValues(n,t));else{var c=[f=e.get(n[0],t),p=e.get(n[1],t)];a.clampData&&a.clampData(c,c),o=a.dataToPoint(c,!0)}if("cartesian2d"===a.type){var d=a.getAxis("x"),h=a.getAxis("y"),f=e.get(n[0],t),p=e.get(n[1],t);iu(f)?o[0]=d.toGlobalCoord(d.getExtent()["x0"===n[0]?0:1]):iu(p)&&(o[1]=h.toGlobalCoord(h.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}else o=[l,u];return o}Fv.extend({type:"markPoint",updateTransform:function(e,t,n){t.eachSeries(function(i){var r=i.markPointModel;r&&(PS(r.getData(),i,n),this.markerGroupMap.get(i.id).updateLayout(r))},this)},renderSeries:function(e,t,n,i){var r=e.coordinateSystem,o=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new Ll),u=function(c,d,h){var f;f=c?Ke(c&&c.dimensions,function(v){return De({name:v},d.getData().getDimensionInfo(d.getData().mapDimension(v))||{})}):[{name:"value",type:"float"}];var p=new ur(f,h),_=Ke(h.get("data"),Lt(Bc,d));return c&&(_=nt(_,Lt(Oc,c))),p.initData(_,null,c?RS:function(v){return v.value}),p}(r,e,t);t.setData(u),PS(t.getData(),e,i),u.each(function(c){var d=u.getItemModel(c),h=d.getShallow("symbol"),f=d.getShallow("symbolSize"),p=d.getShallow("symbolRotate"),_=gn(h),v=gn(f),E=gn(p);if(_||v||E){var F=t.getRawValue(c),V=t.getDataParams(c);_&&(h=h(F,V)),v&&(f=f(F,V)),E&&(p=p(F,V))}u.setItemVisual(c,{symbol:h,symbolSize:f,symbolRotate:p,color:d.get("itemStyle.color")||a.getVisual("color")})}),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl(function(c){c.traverse(function(d){d.dataModel=t})}),l.__keep=!0,l.group.silent=t.get("silent")||e.get("silent")}}),br(function(e){e.markPoint=e.markPoint||{}}),xf.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),Fv.extend({type:"markLine",updateTransform:function(e,t,n){t.eachSeries(function(i){var r=i.markLineModel;if(r){var o=r.getData(),a=r.__from,s=r.__to;a.each(function(l){Wv(a,l,!0,i,n),Wv(s,l,!1,i,n)}),o.each(function(l){o.setItemLayout(l,[a.getItemLayout(l),s.getItemLayout(l)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},renderSeries:function(e,t,n,i){var r=e.coordinateSystem,o=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new zh);this.group.add(l.group);var u=function(v,E,F){var V;V=v?Ke(v&&v.dimensions,function(oe){return De({name:oe},E.getData().getDimensionInfo(E.getData().mapDimension(oe))||{})}):[{name:"value",type:"float"}];var q=new ur(V,F),j=new ur(V,F),X=new ur([],F),Y=Ke(F.get("data"),Lt(lk,E,v,F));v&&(Y=nt(Y,Lt(uk,v)));var Q=v?RS:function(oe){return oe.value};return q.initData(Ke(Y,function(oe){return oe[0]}),null,Q),j.initData(Ke(Y,function(oe){return oe[1]}),null,Q),X.initData(Ke(Y,function(oe){return oe[2]})),X.hasItemOption=!0,{from:q,to:j,line:X}}(r,e,t),c=u.from,d=u.to,h=u.line;t.__from=c,t.__to=d,t.setData(h);var f=t.get("symbol"),p=t.get("symbolSize");function _(v,E,F){var V=v.getItemModel(E);Wv(v,E,F,e,i),v.setItemVisual(E,{symbolRotate:V.get("symbolRotate"),symbolSize:V.get("symbolSize")||p[F?0:1],symbol:V.get("symbol",!0)||f[F?0:1],color:V.get("itemStyle.color")||a.getVisual("color")})}Ye(f)||(f=[f,f]),"number"==typeof p&&(p=[p,p]),u.from.each(function(v){_(c,v,!0),_(d,v,!1)}),h.each(function(v){var E=h.getItemModel(v).get("lineStyle.color");h.setItemVisual(v,{color:E||c.getItemVisual(v,"color")}),h.setItemLayout(v,[c.getItemLayout(v),d.getItemLayout(v)]),h.setItemVisual(v,{fromSymbolRotate:c.getItemVisual(v,"symbolRotate"),fromSymbolSize:c.getItemVisual(v,"symbolSize"),fromSymbol:c.getItemVisual(v,"symbol"),toSymbolRotate:d.getItemVisual(v,"symbolRotate"),toSymbolSize:d.getItemVisual(v,"symbolSize"),toSymbol:d.getItemVisual(v,"symbol")})}),l.updateData(h),u.line.eachItemGraphicEl(function(v,E){v.traverse(function(F){F.dataModel=t})}),l.__keep=!0,l.group.silent=t.get("silent")||e.get("silent")}}),br(function(e){e.markLine=e.markLine||{}}),xf.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var Gv=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];Fv.extend({type:"markArea",updateTransform:function(e,t,n){t.eachSeries(function(i){var r=i.markAreaModel;if(r){var o=r.getData();o.each(function(a){var s=Ke(Gv,function(l){return zS(o,a,l,i,n)});o.setItemLayout(a,s),o.getItemGraphicEl(a).setShape("points",s)})}},this)},renderSeries:function(e,t,n,i){var r=e.coordinateSystem,o=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,{group:new m});this.group.add(l.group),l.__keep=!0;var u=function(c,d,h){var f,p;p=c?(f=Ke(c&&c.dimensions,function(E){var F=d.getData();return De({name:E},F.getDimensionInfo(F.mapDimension(E))||{})}),new ur(Ke(["x0","y0","x1","y1"],function(E,F){return{name:E,type:f[F%2].type}}),h)):new ur(f=[{name:"value",type:"float"}],h);var _=Ke(h.get("data"),Lt(ck,d,c,h));return c&&(_=nt(_,Lt(dk,c))),p.initData(_,null,c?function(E,F,V,q){return E.coord[Math.floor(q/2)][q%2]}:function(E){return E.value}),p.hasItemOption=!0,p}(r,e,t);t.setData(u),u.each(function(c){var d=Ke(Gv,function(f){return zS(u,c,f,e,i)}),h=!0;re(Gv,function(f){if(h){var p=u.get(f[0],c),_=u.get(f[1],c);(iu(p)||r.getAxis("x").containData(p))&&(iu(_)||r.getAxis("y").containData(_))&&(h=!1)}}),u.setItemLayout(c,{points:d,allClipped:h}),u.setItemVisual(c,{color:a.getVisual("color")})}),u.diff(l.__data).add(function(c){var d=u.getItemLayout(c);if(!d.allClipped){var h=new qr({shape:{points:d.points}});u.setItemGraphicEl(c,h),l.group.add(h)}}).update(function(c,d){var h=l.__data.getItemGraphicEl(d),f=u.getItemLayout(c);f.allClipped?h&&l.group.remove(h):(h?Qn(h,{shape:{points:f.points}},t,c):h=new qr({shape:{points:f.points}}),u.setItemGraphicEl(c,h),l.group.add(h))}).remove(function(c){var d=l.__data.getItemGraphicEl(c);l.group.remove(d)}).execute(),u.eachItemGraphicEl(function(c,d){var h=u.getItemModel(d),f=h.getModel("label"),p=h.getModel("emphasis.label"),_=u.getItemVisual(d,"color");c.useStyle(De(h.getModel("itemStyle").getItemStyle(),{fill:ps(_,.4),stroke:_})),c.hoverStyle=h.getModel("emphasis.itemStyle").getItemStyle(),Qr(c.style,c.hoverStyle,f,p,{labelFetcher:t,labelDataIndex:d,defaultText:u.getName(d)||"",isRectText:!0,autoColor:_}),Ri(c,{}),c.dataModel=t}),l.__data=u,l.group.silent=t.get("silent")||e.get("silent")}}),br(function(e){e.markArea=e.markArea||{}});var VS=ga.legend.selector,hk={all:{type:"all",title:Fe(VS.all)},inverse:{type:"inverse",title:Fe(VS.inverse)}},HS=no({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){HS.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),Ye(t)&&re(t,function(n,i){it(n)&&(n={type:n}),t[i]=rt(n,hk[n.type])})},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var i=e[n].get("name");if(this.isSelected(i)){this.select(i),t=!0;break}}t||this.select(e[0].get("name"))}},_updateData:function(e){var t=[],n=[];e.eachRawSeries(function(r){var o;if(n.push(r.name),r.legendVisualProvider){var s=r.legendVisualProvider.getAllNames();e.isSeriesFiltered(r)||(n=n.concat(s)),s.length?t=t.concat(s):o=!0}else o=!0;o&&Xf(r)&&t.push(r.name)}),this._availableNames=n;var i=Ke(this.get("data")||t,function(r){return"string"!=typeof r&&"number"!=typeof r||(r={name:r}),new di(r,this,this.ecModel)},this);this._data=i},getData:function(){return this._data},select:function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&re(this._data,function(n){t[n.get("name")]=!1}),t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var t=this.option.selected;re(this._data,function(n){t[n.get("name",!0)]=!0})},inverseSelect:function(){var t=this.option.selected;re(this._data,function(n){var i=n.get("name",!0);t.hasOwnProperty(i)||(t[i]=!0),t[i]=!t[i]})},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&0<=Je(this._availableNames,e)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function zc(e,t,n){var i,r={},o="toggleSelected"===e;return n.eachComponent("legend",function(a){o&&null!=i?a[i?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?a[e]():(a[e](t.name),i=a.isSelected(t.name)),re(a.getData(),function(s){var l=s.get("name");if("\n"!==l&&""!==l){var u=a.isSelected(l);r[l]=r.hasOwnProperty(l)?r[l]&&u:u}})}),"allSelect"===e||"inverseSelect"===e?{selected:r}:{name:t.name,selected:r}}hi("legendToggleSelect","legendselectchanged",Lt(zc,"toggleSelected")),hi("legendAllSelect","legendselectall",Lt(zc,"allSelect")),hi("legendInverseSelect","legendinverseselect",Lt(zc,"inverseSelect")),hi("legendSelect","legendselected",Lt(zc,"select")),hi("legendUnSelect","legendunselected",Lt(zc,"unSelect"));var ru=Lt,FS=re,_f=m,fk=lr({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new _f),this.group.add(this._selectorGroup=new _f),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var r=e.get("align"),o=e.get("orient");r&&"auto"!==r||(r="right"===e.get("left")&&"vertical"===o?"right":"left");var a=e.get("selector",!0),s=e.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===o?"end":"start"),this.renderInner(r,e,t,n,a,o,s);var l=e.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=e.get("padding"),d=Ki(l,u,c),h=this.layoutInner(e,r,d,i,a,s),f=Ki(De({width:h.width,height:h.height},l),u,c);this.group.attr("position",[f.x-h.x,f.y-h.y]),this.group.add(this._backgroundEl=FC(h,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,n,i,r,o,a){var s=this.getContentGroup(),l=Ct(),u=t.get("selectedMode"),c=[];n.eachRawSeries(function(d){d.get("legendHoverLink")||c.push(d.id)}),FS(t.getData(),function(d,h){var f=d.get("name");if(this.newlineDisabled||""!==f&&"\n"!==f){var p=n.getSeriesByName(f)[0];if(!l.get(f))if(p){var _=p.getData(),v=_.getVisual("color"),E=_.getVisual("borderColor");"function"==typeof v&&(v=v(p.getDataParams(0))),"function"==typeof E&&(E=E(p.getDataParams(0)));var F=_.getVisual("legendSymbol")||"roundRect",V=_.getVisual("symbol");this._createItem(f,h,d,t,F,V,e,v,E,u).on("click",ru(GS,f,null,i,c)).on("mouseover",ru(Uv,p.name,null,i,c)).on("mouseout",ru(jv,p.name,null,i,c)),l.set(f,!0)}else n.eachRawSeries(function(q){if(!l.get(f)&&q.legendVisualProvider){var j=q.legendVisualProvider;if(!j.containName(f))return;var X=j.indexOfName(f),Y=j.getItemVisual(X,"color"),Q=j.getItemVisual(X,"borderColor");this._createItem(f,h,d,t,"roundRect",null,e,Y,Q,u).on("click",ru(GS,null,f,i,c)).on("mouseover",ru(Uv,null,f,i,c)).on("mouseout",ru(jv,null,f,i,c)),l.set(f,!0)}},this)}else s.add(new _f({newline:!0}))},this),r&&this._createSelector(r,t,i,o,a)},_createSelector:function(e,t,n,i,r){var o=this.getSelectorGroup();FS(e,function(a){!function(s){var l=s.type,u=new oi({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===l?"legendAllSelect":"legendInverseSelect"})}});o.add(u);var c=t.getModel("selectorLabel"),d=t.getModel("emphasis.selectorLabel");Qr(u.style,u.hoverStyle={},c,d,{defaultText:s.title,isRectText:!1}),Ri(u)}(a)})},_createItem:function(e,t,n,i,r,o,a,s,l,u){var c=i.get("itemWidth"),d=i.get("itemHeight"),h=i.get("inactiveColor"),f=i.get("inactiveBorderColor"),p=i.get("symbolKeepAspect"),_=i.getModel("itemStyle"),v=i.isSelected(e),E=new _f,F=n.getModel("textStyle"),V=n.get("icon"),q=n.getModel("tooltip"),j=q.parentModel,X=io(r=V||r,0,0,c,d,v?s:h,null==p||p);if(E.add(WS(X,r,_,l,f,v)),!V&&o&&(o!==r||"none"===o)){var Y=.8*d;"none"===o&&(o="circle");var Q=io(o,(c-Y)/2,(d-Y)/2,Y,Y,v?s:h,null==p||p);E.add(WS(Q,o,_,l,f,v))}var oe="left"===a?c+5:-5,ce=a,ge=i.get("formatter"),we=e;"string"==typeof ge&&ge?we=ge.replace("{name}",e??""):"function"==typeof ge&&(we=ge(e)),E.add(new oi({style:Fi({},F,{text:we,x:oe,y:d/2,textFill:v?F.getTextColor():h,textAlign:ce,textVerticalAlign:"middle"})}));var Ce=new vi({shape:E.getBoundingRect(),invisible:!0,tooltip:q.get("show")?fe({content:e,formatter:j.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:e,$vars:["name"]}},q.option):null});return E.add(Ce),E.eachChild(function(Ae){Ae.silent=!0}),Ce.silent=!u,this.getContentGroup().add(E),Ri(E),E.__legendDataIndex=t,E},layoutInner:function(e,t,n,i,r,o){var a=this.getContentGroup(),s=this.getSelectorGroup();As(e.get("orient"),a,e.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(r){As("horizontal",s,e.get("selectorItemGap",!0));var c=s.getBoundingRect(),d=[-c.x,-c.y],h=e.get("selectorButtonGap",!0),f=e.getOrient().index,p=0===f?"width":"height",_=0===f?"height":"width",v=0===f?"y":"x";"end"===o?d[f]+=l[p]+h:u[f]+=c[p]+h,d[1-f]+=l[_]/2-c[_]/2,s.attr("position",d),a.attr("position",u);var E={x:0,y:0};return E[p]=l[p]+h+c[p],E[_]=Math.max(l[_],c[_]),E[v]=Math.min(0,c[v]+d[1-f]),E}return a.attr("position",u),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function WS(e,t,n,i,r,o){var a;return"line"!==t&&t.indexOf("empty")<0?(a=n.getItemStyle(),e.style.stroke=i,o||(a.stroke=r)):a=n.getItemStyle(["borderWidth","borderColor"]),e.setStyle(a)}function GS(e,t,n,i){jv(e,t,n,i),n.dispatchAction({type:"legendToggleSelect",name:e??t}),Uv(e,t,n,i)}function Uv(e,t,n,i){var r=n.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function jv(e,t,n,i){var r=n.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}to(qo.PROCESSOR.SERIES_FILTER,function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(n){for(var i=0;i<t.length;i++)if(!t[i].isSelected(n.name))return!1;return!0})}),yi.registerSubTypeDefaulter("legend",function(){return"plain"});var US=HS.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,n,i){var r=Sl(e);US.superCall(this,"init",e,t,n,i),jS(this,e,r)},mergeOption:function(e,t){US.superCall(this,"mergeOption",e,t),jS(this,this.option,e)}});function jS(e,t,n){var i=[1,1];i[e.getOrient().index]=0,Va(t,n,{type:"box",ignoreSize:i})}var qS=m,qv=["width","height"],Xv=["x","y"],Zv=fk.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){Zv.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new qS),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new qS)},resetInner:function(){Zv.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,n,i,r,o,a){var s=this;Zv.superCall(this,"renderInner",e,t,n,i,r,o,a);var l=this._controllerGroup,u=t.get("pageIconSize",!0);Ye(u)||(u=[u,u]),d("pagePrev",0);var c=t.getModel("pageTextStyle");function d(h,f){var p=h+"DataIndex",_=wl(t.get("pageIcons",!0)[t.getOrient().name][f],{onclick:ut(s._pageGo,s,p,t,i)},{x:-u[0]/2,y:-u[1]/2,width:u[0],height:u[1]});_.name=h,l.add(_)}l.add(new oi({name:"pageText",style:{textFill:c.getTextColor(),font:c.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),d("pageNext",1)},layoutInner:function(e,t,n,i,r,o){var a=this.getSelectorGroup(),s=e.getOrient().index,l=qv[s],u=Xv[s],c=qv[1-s],d=Xv[1-s];r&&As("horizontal",a,e.get("selectorItemGap",!0));var h=e.get("selectorButtonGap",!0),f=a.getBoundingRect(),p=[-f.x,-f.y],_=Fe(n);r&&(_[l]=n[l]-f[l]-h);var v=this._layoutContentAndController(e,i,_,s,l,c,d);if(r){if("end"===o)p[s]+=v[l]+h;else{var E=f[l]+h;p[s]-=E,v[u]-=E}v[l]+=f[l]+h,p[1-s]+=v[d]+v[c]/2-f[c]/2,v[c]=Math.max(v[c],f[c]),v[d]=Math.min(v[d],f[d]+p[1-s]),a.attr("position",p)}return v},_layoutContentAndController:function(e,t,n,i,r,o,a){var s=this.getContentGroup(),l=this._containerGroup,u=this._controllerGroup;As(e.get("orient"),s,e.get("itemGap"),i?n.width:null,i?null:n.height),As("horizontal",u,e.get("pageButtonItemGap",!0));var c=s.getBoundingRect(),d=u.getBoundingRect(),h=this._showController=c[r]>n[r],f=[-c.x,-c.y];t||(f[i]=s.position[i]);var p=[0,0],_=[-d.x,-d.y],v=_t(e.get("pageButtonGap",!0),e.get("itemGap",!0));h&&("end"===e.get("pageButtonPosition",!0)?_[i]+=n[r]-d[r]:p[i]+=d[r]+v),_[1-i]+=c[o]/2-d[o]/2,s.attr("position",f),l.attr("position",p),u.attr("position",_);var E={x:0,y:0};if(E[r]=h?n[r]:c[r],E[o]=Math.max(c[o],d[o]),E[a]=Math.min(0,d[a]+_[1-i]),l.__rectSize=n[r],h){var F={x:0,y:0};F[r]=Math.max(n[r]-d[r]-v,0),F[o]=E[o],l.setClipPath(new vi({shape:F})),l.__rectSize=F[r]}else u.eachChild(function(q){q.attr({invisible:!0,silent:!0})});var V=this._getPageInfo(e);return null!=V.pageIndex&&Qn(s,{position:V.contentPosition},h&&e),this._updatePageInfoView(e,V),E},_pageGo:function(e,t,n){var i=this._getPageInfo(t)[e];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:t.id})},_updatePageInfoView:function(e,t){var n=this._controllerGroup;re(["pagePrev","pageNext"],function(l){var u=null!=t[l+"DataIndex"],c=n.childOfName(l);c&&(c.setStyle("fill",e.get(u?"pageIconColor":"pageIconInactiveColor",!0)),c.cursor=u?"pointer":"default")});var i=n.childOfName("pageText"),r=e.get("pageFormatter"),o=t.pageIndex,a=null!=o?o+1:0,s=t.pageCount;i&&r&&i.setStyle("text",it(r)?r.replace("{current}",a).replace("{total}",s):r({current:a,total:s}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,r=e.getOrient().index,o=qv[r],a=Xv[r],s=this._findTargetItemIndex(t),l=n.children(),u=l[s],c=l.length,d=c?1:0,h={contentPosition:n.position.slice(),pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return h;var f=F(u);h.contentPosition[r]=-f.s;for(var p=s+1,_=f,v=f,E=null;p<=c;++p)(!(E=F(l[p]))&&v.e>_.s+i||E&&!V(E,_.s))&&(_=v.i>_.i?v:E)&&(null==h.pageNextDataIndex&&(h.pageNextDataIndex=_.i),++h.pageCount),v=E;for(p=s-1,_=f,v=f,E=null;-1<=p;--p)(E=F(l[p]))&&V(v,E.s)||!(_.i<v.i)||(v=_,null==h.pagePrevDataIndex&&(h.pagePrevDataIndex=_.i),++h.pageCount,++h.pageIndex),_=E;return h;function F(q){if(q){var j=q.getBoundingRect(),X=j[a]+q.position[r];return{s:X,e:X+j[o],i:q.__legendDataIndex}}}function V(q,j){return q.e>=j&&q.s<=j+i}},_findTargetItemIndex:function(e){return this._showController?(this.getContentGroup().eachChild(function(i,r){var o=i.__legendDataIndex;null==n&&null!=o&&(n=r),o===e&&(t=r)}),t??n):0;var t,n}});hi("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(n)})}),_v.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var wf=vi,Qs=Pi,Yv=Ss,Ca=ut,$v=re,Vc="horizontal",XS="vertical",pk=["line","bar","candlestick","scatter"],Kv=wv.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this.api=t},render:function(e,t,n,i){Kv.superApply(this,"render",arguments),Gu(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){Kv.superApply(this,"remove",arguments),y1(this,"_dispatchZoomAction")},dispose:function(){Kv.superApply(this,"dispose",arguments),y1(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new m;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,n=this._findCoordRect(),i={width:t.getWidth(),height:t.getHeight()},r=this._orient===Vc?{right:i.width-n.x-n.width,top:i.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},o=Sl(e.option);re(["right","top","width","height"],function(s){"ph"===o[s]&&(o[s]=r[s])});var a=Ki(o,i,e.padding);this._location={x:a.x,y:a.y},this._size=[a.width,a.height],this._orient===XS&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),r=i&&i.get("inverse"),o=this._displayables.barGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n!==Vc||r?n===Vc&&r?{scale:a?[-1,1]:[-1,-1]}:n!==XS||r?{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[1,1]:[1,-1]});var s=e.getBoundingRect([o]);e.attr("position",[t.x-s.x,t.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this._size,n=this._displayables.barGroup;n.add(new wf({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),n.add(new wf({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:ut(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,n=e.series,i=n.getRawData(),r=n.getShadowDim?n.getShadowDim():e.otherDim;if(null!=r){var o=i.getDataExtent(r),a=.3*(o[1]-o[0]);o=[o[0]-a,o[1]+a];var s,l=[0,t[1]],c=[[t[0],0],[0,0]],d=[],h=t[0]/(i.count()-1),f=0,p=Math.round(i.count()/t[0]);i.each([r],function(v,E){if(0<p&&E%p)f+=h;else{var F=null==v||isNaN(v)||""===v,V=F?0:Qs(v,o,l,!0);F&&!s&&E?(c.push([c[c.length-1][0],0]),d.push([d[d.length-1][0],0])):!F&&s&&(c.push([f,0]),d.push([f,0])),c.push([f,V]),d.push([f,V]),f+=h,s=F}});var _=this.dataZoomModel;this._displayables.barGroup.add(new qr({shape:{points:c},style:De({fill:_.get("dataBackgroundColor")},_.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new po({shape:{points:d},style:_.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,i=this.ecModel;return e.eachTargetAxis(function(r,o){re(e.getAxisProxy(r.name,o).getTargetSeriesModels(),function(a){if(!(n||!0!==t&&Je(pk,a.get("type"))<0)){var s,l=i.getComponent(r.axis,o).axis,u={x:"y",y:"x",radius:"angle",angle:"radius"}[r.name],c=a.coordinateSystem;null!=u&&c.getOtherAxis&&(s=c.getOtherAxis(l).inverse),u=a.getData().mapDimension(u),n={thisAxis:l,series:a,thisDim:r.name,otherDim:u,otherAxisInverse:s}}},this)},this),n}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],n=e.handleLabels=[],i=this._displayables.barGroup,r=this._size,o=this.dataZoomModel;i.add(e.filler=new wf({draggable:!0,cursor:ZS(this._orient),drift:Ca(this._onDragMove,this,"all"),ondragstart:Ca(this._showDataInfo,this,!0),ondragend:Ca(this._onDragEnd,this),onmouseover:Ca(this._showDataInfo,this,!0),onmouseout:Ca(this._showDataInfo,this,!1),style:{fill:o.get("fillerColor"),textPosition:"inside"}})),i.add(new wf({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{stroke:o.get("dataBackgroundColor")||o.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),$v([0,1],function(a){var s=wl(o.get("handleIcon"),{cursor:ZS(this._orient),draggable:!0,drift:Ca(this._onDragMove,this,a),ondragend:Ca(this._onDragEnd,this),onmouseover:Ca(this._showDataInfo,this,!0),onmouseout:Ca(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),l=s.getBoundingRect();this._handleHeight=yn(o.get("handleSize"),this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(o.getModel("handleStyle").getItemStyle());var u=o.get("handleColor");null!=u&&(s.style.fill=u),i.add(t[a]=s);var c=o.textStyleModel;this.group.add(n[a]=new oi({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:c.getTextColor(),textFont:c.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[Qs(e[0],[0,100],t,!0),Qs(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var n=this.dataZoomModel,i=this._handleEnds,r=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];Ws(t,i,r,n.get("zoomLock")?"all":e,null!=o.minSpan?Qs(o.minSpan,a,r,!0):null,null!=o.maxSpan?Qs(o.maxSpan,a,r,!0):null);var s=this._range,l=this._range=Yv([Qs(i[0],r,a,!0),Qs(i[1],r,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(e){var t=this._displayables,n=this._handleEnds,i=Yv(n.slice()),r=this._size;$v([0,1],function(o){var s=this._handleHeight;t.handles[o].attr({scale:[s/2,s/2],position:[n[o],r[1]/2-s/2]})},this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:r[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,n=this._displayables,i=n.handleLabels,r=this._orient,o=["",""];if(t.get("showDetail")){var a=t.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,u=e?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();o=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var c=Yv(this._handleEnds.slice());function d(h){var f=Cs(n.handles[h].parent,this.group),p=hp(0===h?"right":"left",f),_=this._handleWidth/2+5,v=Uo([c[h]+(0===h?-_:_),this._size[1]/2],f);i[h].setStyle({x:v[0],y:v[1],textVerticalAlign:r===Vc?"middle":p,textAlign:r===Vc?p:"center",text:o[h]})}d.call(this,0),d.call(this,1)},_formatLabel:function(e,t){var n=this.dataZoomModel,i=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=t.getPixelPrecision());var o=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(r,20));return gn(i)?i(e,o):it(i)?i.replace("{value}",o):o},_showDataInfo:function(e){var t=this._displayables.handleLabels;t[0].attr("invisible",!(e=this._dragging||e)),t[1].attr("invisible",!e)},_onDragMove:function(e,t,n,i){this._dragging=!0,Vi(i.event);var r=Uo([t,n],this._displayables.barGroup.getLocalTransform(),!0),o=this._updateInterval(e,r[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),o&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,n=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var i=this._handleEnds,o=this._updateInterval("all",n[0]-(i[0]+i[1])/2);this._updateView(),o&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if($v(this.getTargetCoordInfo(),function(i){if(!e&&i.length){var r=i[0].model.coordinateSystem;e=r.getRect&&r.getRect()}}),!e){var t=this.api.getWidth(),n=this.api.getHeight();e={x:.2*t,y:.2*n,width:.6*t,height:.6*n}}return e}});function ZS(e){return"vertical"===e?"ns-resize":"ew-resize"}_v.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var YS="\0_ec_dataZoom_roams";function gk(e,t){var n=KS(e),i=t.dataZoomId,r=t.coordId;re(n,function(s,l){var u=s.dataZoomInfos;u[i]&&Je(t.allCoordIds,r)<0&&(delete u[i],s.count--)}),JS(n);var l,u,o=n[r];o||((o=n[r]={coordId:r,dataZoomInfos:{},count:0}).controller=(l=o,u=new Wl(e.getZr()),re(["pan","zoom","scrollMove"],function(c){u.on(c,function(d){var h=[];re(l.dataZoomInfos,function(f){if(d.isAvailableBehavior(f.dataZoomModel.option)){var p=(f.getRange||{})[c],_=p&&p(l.controller,d);!f.dataZoomModel.get("disabled",!0)&&_&&h.push({dataZoomId:f.dataZoomId,start:_[0],end:_[1]})}}),h.length&&l.dispatchAction(h)})}),u),o.dispatchAction=Lt(mk,e)),o.dataZoomInfos[i]||o.count++,o.dataZoomInfos[i]=t;var a=function(s){var l,u={type_true:2,type_move:1,type_false:0,type_undefined:-1},c=!0;return re(s,function(d){var h=d.dataZoomModel,f=!h.get("disabled",!0)&&(!h.get("zoomLock",!0)||"move");u["type_"+l]<u["type_"+f]&&(l=f),c&=h.get("preventDefaultMouseMove",!0)}),{controlType:l,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!c}}}(o.dataZoomInfos);o.controller.enable(a.controlType,a.opt),o.controller.setPointerChecker(t.containsPoint),Gu(o,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}function $S(e){return e.type+"\0_"+e.id}function KS(e){var t=e.getZr();return t[YS]||(t[YS]={})}function JS(e){re(e,function(t,n){t.count||(t.controller.dispose(),delete e[n])})}function mk(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var vk=ut,QS=wv.extend({type:"dataZoom.inside",init:function(e,t){},render:function(e,t,n,i){QS.superApply(this,"render",arguments),this._range=e.getPercentRange(),re(this.getTargetCoordInfo(),function(r,o){var a=Ke(r,function(s){return $S(s.model)});re(r,function(s){var l=s.model,u={};re(["pan","zoom","scrollMove"],function(c){u[c]=vk(yk[c],this,s,o)},this),gk(n,{coordId:$S(l),allCoordIds:a,containsPoint:function(c,d,h){return l.coordinateSystem.containPoint([d,h])},dataZoomId:e.id,dataZoomModel:e,getRange:u})},this)},this)},dispose:function(){(function(e,t){var n=KS(e);re(n,function(i){i.controller.dispose();var r=i.dataZoomInfos;r[t]&&(delete r[t],i.count--)}),JS(n)})(this.api,this.dataZoomModel.id),QS.superApply(this,"dispose",arguments),this._range=null}}),yk={zoom:function(e,t,n,i){var r=this._range,o=r.slice(),a=e.axisModels[0];if(a){var s=Jv[t](null,[i.originX,i.originY],a,n,e),l=(0<s.signal?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],u=Math.max(1/i.scale,0);o[0]=(o[0]-l)*u+l,o[1]=(o[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Ws(0,o,[0,100],0,c.minSpan,c.maxSpan),this._range=o,r[0]!==o[0]||r[1]!==o[1]?o:void 0}},pan:eM(function(e,t,n,i,r,o){var a=Jv[i]([o.oldX,o.oldY],[o.newX,o.newY],t,r,n);return a.signal*(e[1]-e[0])*a.pixel/a.pixelLength}),scrollMove:eM(function(e,t,n,i,r,o){return Jv[i]([0,0],[o.scrollDelta,o.scrollDelta],t,r,n).signal*(e[1]-e[0])*o.scrollDelta})};function eM(e){return function(t,n,i,r){var o=this._range,a=o.slice(),s=t.axisModels[0];if(s)return Ws(e(a,s,t,n,i,r),a,[0,100],"all"),this._range=a,o[0]!==a[0]||o[1]!==a[1]?a:void 0}}function tM(e){var t=e&&e.visualMap;Ye(t)||(t=t?[t]:[]),nM(t,function(n){if(n){ou(n,"splitList")&&!ou(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var i=n.pieces;i&&Ye(i)&&nM(i,function(r){Mt(r)&&(ou(r,"start")&&!ou(r,"min")&&(r.min=r.start),ou(r,"end")&&!ou(r,"max")&&(r.max=r.end))})}})}var Jv={grid:function(e,t,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem.getRect();return e=e||[0,0],"x"===o.dim?(a.pixel=t[0]-e[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a},polar:function(e,t,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(a.pixel=t[0]-e[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=o.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=u[1]-u[0],a.pixelStart=u[0],a.signal=o.inverse?-1:1),a},singleAxis:function(e,t,n,i,r){var o=n.axis,a=r.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===o.orient?(s.pixel=t[0]-e[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s}},nM=re;function ou(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}yi.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?0<e.pieces.length:0<e.splitNumber)&&!e.calculable?"piecewise":"continuous"});var iM=qo.VISUAL.COMPONENT;function xk(e,t,n,i){for(var r=t.targetVisuals[i],o=Ii.prepareVisualTypes(r),a={color:e.getData().getVisual("color")},s=0,l=o.length;s<l;s++){var u=o[s],c=r["opacity"===u?"__alphaForOpacity":u];c&&c.applyVisual(n,d,h)}return a.color;function d(f){return a[f]}function h(f,p){a[f]=p}}Ni(iM,{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(i){var r=e.pipelineContext;!i.isTargetSeries(e)||r&&r.large||n.push(function(o,a,s,l){var u={};return re(o,function(c){var d=Ii.prepareVisualTypes(a[c]);u[c]=d}),{progress:function(c,d){function h(Y){return d.getItemVisual(p,Y)}function f(Y,Q){d.setItemVisual(p,Y,Q)}var p;for(null!=l&&(l=d.getDimension(l));null!=(p=c.next());){var _=d.getRawDataItem(p);if(!_||!1!==_.visualMap)for(var v=null!=l?d.get(l,p,!0):p,E=s(v),F=a[E],V=u[E],q=0,j=V.length;q<j;q++){var X=V[q];F[X]&&F[X].applyVisual(v,h,f)}}}}}(i.stateList,i.targetVisuals,ut(i.getValueState,i),i.getDataDimension(e.getData())))}),n}}),Ni(iM,{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),i=[];t.eachComponent("visualMap",function(r){if(r.isTargetSeries(e)){var o=r.getVisualMeta(ut(xk,null,e,r))||{stops:[],outerColors:[]},a=r.getDataDimension(n),s=n.getDimensionInfo(a);null!=s&&(o.dimension=s.index,i.push(o))}}),e.getData().setVisual("visualMeta",i)}});var Qv=function(e,t,n){var i=Fe((bk[e]||{})[t]);return n&&Ye(i)?i[i.length-1]:i},bk={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},rM=Ii.mapVisual,_k=Ii.eachVisual,wk=Ye,e0=re,Ck=Ss,Sk=Pi,Cf=no({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(e,t,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(e,n)},optionUpdated:function(e,t){var n=this.option;He.canvasSupported||(n.realtime=!1),t||yS(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=ut(e,this),this.controllerVisuals=Iv(this.option.controller,t,e),this.targetVisuals=Iv(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries(function(n,i){t.push(i)}):t=vr(e),t},eachTargetSeries:function(e,t){re(this.getTargetSeriesIndices(),function(n){e.call(t,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(e){var t=!1;return this.eachTargetSeries(function(n){n===e&&(t=!0)}),t},formatValueText:function(e,t,n){var i,r,o=this.option,a=o.precision,s=this.dataBound,l=o.formatter;return n=n||["<",">"],Ye(e)&&(e=e.slice(),i=!0),r=t?e:i?[u(e[0]),u(e[1])]:u(e),it(l)?l.replace("{value}",i?r[0]:r).replace("{value2}",i?r[1]:r):gn(l)?i?l(e[0],e[1]):l(e):i?e[0]===s[0]?n[0]+" "+r[1]:e[1]===s[1]?n[1]+" "+r[0]:r[0]+" - "+r[1]:r;function u(c){return c===s[0]?"min":c===s[1]?"max":(+c).toFixed(Math.min(a,20))}},resetExtent:function(){var e=this.option,t=Ck([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension;if(null!=t||e.dimensions.length){if(null!=t)return e.getDimension(t);for(var i=e.dimensions,r=i.length-1;0<=r;r--){var o=i[r];if(!e.getDimensionInfo(o).isCalculationCoord)return o}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},i=t.target||(t.target={}),r=t.controller||(t.controller={});rt(i,n),rt(r,n);var o=this.isCategory();function a(s){wk(t.color)&&!s.inRange&&(s.inRange={color:t.color.slice().reverse()}),s.inRange=s.inRange||{color:e.get("gradientColor")},e0(this.stateList,function(l){var u=s[l];if(it(u)){var c=Qv(u,"active",o);c?(s[l]={},s[l][u]=c):delete s[l]}},this)}a.call(this,i),a.call(this,r),function(s,l,u){var c=s[l],d=s[u];c&&!d&&(d=s[u]={},e0(c,function(h,f){if(Ii.isValidType(f)){var p=Qv(f,"inactive",o);null!=p&&(d[f]=p,"color"!==f||d.hasOwnProperty("opacity")||d.hasOwnProperty("colorAlpha")||(d.opacity=[0,0]))}}))}.call(this,i,"inRange","outOfRange"),function(s){var l=(s.inRange||{}).symbol||(s.outOfRange||{}).symbol,u=(s.inRange||{}).symbolSize||(s.outOfRange||{}).symbolSize,c=this.get("inactiveColor");e0(this.stateList,function(d){var h=this.itemSize,f=s[d];null==(f=f||(s[d]={color:o?c:[c]})).symbol&&(f.symbol=l&&Fe(l)||(o?"roundRect":["roundRect"])),null==f.symbolSize&&(f.symbolSize=u&&Fe(u)||(o?h[0]:[h[0],h[0]])),f.symbol=rM(f.symbol,function(v){return"none"===v||"square"===v?"roundRect":v});var p=f.symbolSize;if(null!=p){var _=-1/0;_k(p,function(v){_<v&&(_=v)}),f.symbolSize=rM(p,function(v){return Sk(v,[0,_],[0,h[0]],!0)})}},this)}.call(this,r)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:en,getValueState:en,getVisualMeta:en}),oM=[20,140],aM=Cf.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){aM.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){aM.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),null!=e[0]&&!isNaN(e[0])||(e[0]=oM[0]),null!=e[1]&&!isNaN(e[1])||(e[1]=oM[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):Ye(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){Cf.prototype.completeVisualOption.apply(this,arguments),re(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)},this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=Ss((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),function(o,a){e[0]<=o&&o<=e[1]&&i.push(a)},this),t.push({seriesId:n.id,dataIndex:i})},this),t},getVisualMeta:function(e){var t=sM(0,0,this.getExtent()),n=sM(0,0,this.option.range.slice()),i=[];function r(d,h){i.push({value:d,color:e(d,h)})}for(var o=0,a=0,s=n.length,l=t.length;a<l&&(!n.length||t[a]<=n[0]);a++)t[a]<n[o]&&r(t[a],"outOfRange");for(var u=1;o<s;o++,u=0)u&&i.length&&r(n[o],"outOfRange"),r(n[o],"inRange");for(u=1;a<l;a++)(!n.length||n[n.length-1]<t[a])&&(u&&(i.length&&r(i[i.length-1].value,"outOfRange"),u=0),r(t[a],"outOfRange"));var c=i.length;return{stops:i,outerColors:[c?i[0].color:"transparent",c?i[c-1].color:"transparent"]}}});function sM(e,t,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,r=n[0],o=[],a=0;a<=200&&r<n[1];a++)o.push(r),r+=i;return o.push(n[1]),o}var lM=lr({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t},render:function(e,t,n,i){!1!==(this.visualMapModel=e).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,n=Ms(t.get("padding")||0),i=e.getBoundingRect();e.add(new vi({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(e,t,n){var i=(n=n||{}).forceState,r=this.visualMapModel,o={};if("symbol"===t&&(o.symbol=r.get("itemSymbol")),"color"===t){var a=r.get("contentColor");o.color=a}function s(c){return o[c]}function l(c,d){o[c]=d}var u=r.controllerVisuals[i||r.getValueState(e)];return re(Ii.prepareVisualTypes(u),function(c){var d=u[c];n.convertOpacityToAlpha&&"opacity"===c&&(c="colorAlpha",d=u.__alphaForOpacity),Ii.dependsOn(c,t)&&d&&d.applyVisual(e,s,l)}),o[t]},positionGroup:function(e){var n=this.api;zd(e,this.visualMapModel.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:en});function uM(e,t,n){var i=e.option,r=i.align;if(null!=r&&"auto"!==r)return r;for(var o={width:t.getWidth(),height:t.getHeight()},a="horizontal"===i.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],l=s[a],u=[0,null,10],c={},d=0;d<3;d++)c[s[1-a][d]]=u[d],c[l[d]]=2===d?n[0]:i[l[d]];var h=[["x","width",3],["y","height",0]][a],f=Ki(c,o,i.padding);return l[(f.margin[h[2]]||0)+f[h[0]]+.5*f[h[1]]<.5*o[h[1]]?0:1]}function Sf(e,t){return re(e||[],function(n){null!=n.dataIndex&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var Sa=Pi,Mk=re,Mf=Math.min,Hc=Math.max,Tk=lM.extend({type:"visualMap.continuous",init:function(){Tk.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(e,t,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,n){if(t){var i=t[1-n];i=null!=i?i+"":"";var r=this.visualMapModel,o=r.get("textGap"),a=r.itemSize,s=this._shapes.barGroup,l=this._applyTransform([a[0]/2,0===n?-o:a[1]+o],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new oi({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===c?"middle":u,textAlign:"horizontal"===c?u:"center",text:i,textFont:d.getFont(),textFill:d.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,n=this._shapes,i=t.itemSize,r=this._orient,o=this._useHandle,a=uM(t,this.api,i),s=n.barGroup=this._createBarGroup(a);s.add(n.outOfRange=Tf()),s.add(n.inRange=Tf(null,o?dM(this._orient):null,ut(this._dragHandle,this,"all",!1),ut(this._dragHandle,this,"all",!0)));var l=t.textStyleModel.getTextRect("\u56fd"),u=Hc(l.width,l.height);o&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,i,u,r,a),this._createHandle(s,1,i,u,r,a)),this._createIndicator(s,i,u,r),e.add(s)},_createHandle:function(e,t,n,i,r){var f,o=ut(this._dragHandle,this,t,!1),a=ut(this._dragHandle,this,t,!0),s=Tf((f=i,0===t?[[0,0],[f,0],[f,-f]]:[[0,0],[f,0],[f,f]]),dM(this._orient),o,a);s.position[0]=n[0],e.add(s);var l=this.visualMapModel.textStyleModel,u=new oi({draggable:!0,drift:o,onmousemove:function(h){Vi(h.event)},ondragend:a,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(u);var c=["horizontal"===r?i/2:1.5*i,"horizontal"===r?0===t?-1.5*i:1.5*i:0===t?-i/2:i/2],d=this._shapes;d.handleThumbs[t]=s,d.handleLabelPoints[t]=c,d.handleLabels[t]=u},_createIndicator:function(e,t,n,i){var r=Tf([[0,0]],"move");r.position[0]=t[0],r.attr({invisible:!0,silent:!0}),e.add(r);var o=this.visualMapModel.textStyleModel,a=new oi({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:o.getFont(),textFill:o.getTextColor()}});this.group.add(a);var s=["horizontal"===i?n/2:9,0],l=this._shapes;l.indicator=r,l.indicatorLabel=a,l.indicatorLabelPoint=s},_dragHandle:function(e,t,n,i){if(this._useHandle){if(this._dragging=!t,!t){var r=this._applyTransform([n,i],this._shapes.barGroup,!0);this._updateInterval(e,r[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?this._hovering||this._clearHoverLinkToSeries():cM(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[Sa(t[0],n,i,!0),Sa(t[1],n,i,!0)]},_updateInterval:function(e,t){var n=this.visualMapModel,i=this._handleEnds,r=[0,n.itemSize[1]];Ws(t=t||0,i,r,e,0);var o=n.getExtent();this._dataInterval=[Sa(i[0],r,o,!0),Sa(i[1],r,o,!0)]},_updateView:function(e){var t=this.visualMapModel,n=t.getExtent(),i=this._shapes,r=[0,t.itemSize[1]],o=e?r:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,o,"inRange"),s=this._createBarVisual(n,n,r,"outOfRange");i.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape("points",a.barPoints),i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(o,a)},_createBarVisual:function(e,t,n,i){var r={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(e,r),a=[this.getControllerVisual(e[0],"symbolSize",r),this.getControllerVisual(e[1],"symbolSize",r)],s=this._createBarPoints(n,a);return{barColor:new _s(0,0,0,1,o),barPoints:s,handlesColor:[o[0].color,o[o.length-1].color]}},_makeColorGradient:function(e,t){var n=[],i=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var r=1;r<100;r++){var o=e[0]+i*r;if(o>e[1])break;n.push({color:this.getControllerVisual(o,"color",t),offset:r/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},_createBarPoints:function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new m("horizontal"!==t||n?"horizontal"===t&&n?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||n?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(e,t){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,r=n.handleThumbs,o=n.handleLabels;Mk([0,1],function(a){var s=r[a];s.setStyle("fill",t.handlesColor[a]),s.position[1]=e[a];var l=Uo(n.handleLabelPoints[a],Cs(s,this.group));o[a].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[a]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===a?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(e,t,n,i){var E,F,V,r=this.visualMapModel,o=r.getExtent(),a=r.itemSize,l=Sa(e,o,[0,a[1]],!0),u=this._shapes,c=u.indicator;if(c){c.position[1]=l,c.attr("invisible",!1),c.setShape("points",(E=i,F=l,V=a[1],n?[[0,-Mf(E,Hc(F,0))],[6,0],[0,Mf(E,Hc(V-F,0))]]:[[0,0],[5,-5],[5,5]]));var d=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});c.setStyle("fill",d);var h=Uo(u.indicatorLabelPoint,Cs(c,this.group)),f=u.indicatorLabel;f.attr("invisible",!1);var p=this._applyTransform("left",u.barGroup),_=this._orient;f.setStyle({text:(n||"")+r.formatValueText(t),textVerticalAlign:"horizontal"===_?p:"middle",textAlign:"horizontal"===_?"center":p,x:h[0],y:h[1]})}},_enableHoverLinkToSeries:function(){var e=this;this._shapes.barGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,i=e._applyTransform([t.offsetX,t.offsetY],e._shapes.barGroup,!0,!0);i[1]=Mf(Hc(0,i[1]),n[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,e._dragging||e._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var p,_,v,E,n=this.visualMapModel;if(n.option.hoverLink){var r=[0,n.itemSize[1]],o=n.getExtent();e=Mf(Hc(r[0],e),r[1]);var a=(p=o,_=r,v=6,(E=n.get("hoverLinkDataSize"))&&(v=Sa(E,p,_,!0)/2),v),s=[e-a,e+a],l=Sa(e,r,o,!0),u=[Sa(s[0],r,o,!0),Sa(s[1],r,o,!0)];s[0]<r[0]&&(u[0]=-1/0),r[1]<s[1]&&(u[1]=1/0),t&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",a):u[1]===1/0?this._showIndicator(l,u[0],"> ",a):this._showIndicator(l,l,"\u2248 ",a));var c=this._hoverLinkDataIndices,d=[];(t||cM(n))&&(d=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var h=function(f,p){var _={},v={};return E(f||[],_),E(p||[],v,_),[F(_),F(v)];function E(V,q,j){for(var X=0,Y=V.length;X<Y;X++)for(var Q=V[X].seriesId,oe=vr(V[X].dataIndex),ce=j&&j[Q],ge=0,we=oe.length;ge<we;ge++){var Ce=oe[ge];ce&&ce[Ce]?ce[Ce]=null:(q[Q]||(q[Q]={}))[Ce]=1}}function F(V,q){var j=[];for(var X in V)if(V.hasOwnProperty(X)&&null!=V[X])if(q)j.push(+X);else{var Y=F(V[X],!0);Y.length&&j.push({seriesId:X,dataIndex:Y})}return j}}(c,d);this._dispatchHighDown("downplay",Sf(h[0],n)),this._dispatchHighDown("highlight",Sf(h[1],n))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,n=this.visualMapModel;if(t&&null!=t.dataIndex){var i=this.ecModel.getSeriesByIndex(t.seriesIndex);if(n.isTargetSeries(i)){var r=i.getData(t.dataType),o=r.get(n.getDataDimension(r),t.dataIndex,!0);isNaN(o)||this._showIndicator(o,o)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Sf(e,this.visualMapModel)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,t,n,i){var r=Cs(t,i?null:this.group);return fa[Ye(e)?"applyTransform":"transformDirection"](e,r,n)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function Tf(e,t,n,i){return new qr({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(r){Vi(r.event)},ondragend:i})}function cM(e){return!!(e.get("hoverLinkOnHandle")??e.get("realtime"))}function dM(e){return"vertical"===e?"ns-resize":"ew-resize"}hi({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(n){n.setSelected(e.selected)})}),br(tM);var Ak=Cf.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){Ak.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();Ik[this._mode].call(this),this._resetSelected(e,t);var i=this.option.categories;this.resetVisual(function(r,o){"categories"===n?(r.mappingMethod="category",r.categories=Fe(i)):(r.dataExtent=this.getExtent(),r.mappingMethod="piecewise",r.pieceList=Ke(this._pieceList,function(a){return a=Fe(a),"inRange"!==o&&(a.visual=null),a}))})},completeVisualOption:function(){var e=this.option,t={},n=Ii.listVisualTypes(),i=this.isCategory();function r(o,a,s){return o&&o[a]&&(Mt(o[a])?o[a].hasOwnProperty(s):o[a]===s)}re(e.pieces,function(o){re(n,function(a){o.hasOwnProperty(a)&&(t[a]=1)})}),re(t,function(o,a){var s=0;re(this.stateList,function(l){s|=r(e,l,a)||r(e.target,l,a)},this),s||re(this.stateList,function(l){(e[l]||(e[l]={}))[a]=Qv(a,"inRange"===l?"active":"inactive",i)})},this),Cf.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var n=this.option,i=this._pieceList,r=(t?n:e).selected||{};if(n.selected=r,re(i,function(a,s){var l=this.getSelectedMapKey(a);r.hasOwnProperty(l)||(r[l]=!0)},this),"single"===n.selectedMode){var o=!1;re(i,function(a,s){var l=this.getSelectedMapKey(a);r[l]&&(o?r[l]=!1:o=!0)},this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var e=this.option;return e.pieces&&0<e.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=Fe(e)},getValueState:function(e){var t=Ii.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),function(o,a){Ii.findPieceIndex(o,this._pieceList)===e&&i.push(a)},this),t.push({seriesId:n.id,dataIndex:i})},this),t},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},getVisualMeta:function(e){if(!this.isCategory()){var t=[],n=[],i=this,r=this._pieceList.slice();if(r.length){var o=r[0].interval[0];o!==-1/0&&r.unshift({interval:[-1/0,o]}),(o=r[r.length-1].interval[1])!==1/0&&r.push({interval:[o,1/0]})}else r.push({interval:[-1/0,1/0]});var a=-1/0;return re(r,function(l){var u=l.interval;u&&(u[0]>a&&s([a,u[0]],"outOfRange"),s(u.slice()),a=u[1])},this),{stops:t,outerColors:n}}function s(l,u){var c=i.getRepresentValue({interval:l});u=u||i.getValueState(c);var d=e(c,u);l[0]===-1/0?n[0]=d:l[1]===1/0?n[1]=d:t.push({value:l[0],color:d},{value:l[1],color:d})}}}),Ik={splitNumber:function(){var e=this.option,t=this._pieceList,n=Math.min(e.precision,20),i=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;for(var o=(i[1]-i[0])/r;+o.toFixed(n)!==o&&n<5;)n++;e.precision=n,o=+o.toFixed(n),e.minOpen&&t.push({interval:[-1/0,i[0]],close:[0,0]});for(var a=0,s=i[0];a<r;s+=o,a++)t.push({interval:[s,a===r-1?i[1]:s+o],close:[1,1]});e.maxOpen&&t.push({interval:[i[1],1/0],close:[0,0]}),bp(t),re(t,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(){var e=this.option;re(e.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),hM(e,this._pieceList)},pieces:function(){var e=this.option,t=this._pieceList;re(e.pieces,function(n,i){Mt(n)||(n={value:n});var r={text:"",index:i};if(null!=n.label&&(r.text=n.label),n.hasOwnProperty("value")){var o=r.value=n.value;r.interval=[o,o],r.close=[1,1]}else{for(var a=r.interval=[],s=r.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],d=0;d<2;d++){for(var h=[["gte","gt","min"],["lte","lt","max"]][d],f=0;f<3&&null==a[d];f++)a[d]=n[h[f]],s[d]=l[f],c[d]=2===f;null==a[d]&&(a[d]=u[d])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(r.value=a[0])}r.visual=Ii.retrieveVisuals(n),t.push(r)},this),hM(e,t),bp(t),re(t,function(n){var i=n.close;n.text=n.text||this.formatValueText(null!=n.value?n.value:n.interval,!1,[["<","\u2264"][i[1]],[">","\u2265"][i[0]]])},this)}};function hM(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}lM.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),i=t.textStyleModel,r=i.getFont(),o=i.getTextColor(),a=this._getItemAlign(),s=t.itemSize,l=this._getViewData(),u=l.endsText,c=an(t.get("showLabel",!0),!u);u&&this._renderEndsText(e,u[0],s,c,a),re(l.viewPieceList,function(d){var h=d.piece,f=new m;f.onclick=ut(this._onItemClick,this,h),this._enableHoverLink(f,d.indexInModelPieceList);var p=t.getRepresentValue(h);if(this._createItemSymbol(f,p,[0,0,s[0],s[1]]),c){var _=this.visualMapModel.getValueState(p);f.add(new oi({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:h.text,textVerticalAlign:"middle",textAlign:a,textFont:r,textFill:o,opacity:"outOfRange"===_?.5:1}}))}e.add(f)},this),u&&this._renderEndsText(e,u[1],s,c,a),As(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function n(i){var r=this.visualMapModel;r.option.hoverLink&&this.api.dispatchAction({type:i,batch:Sf(r.findTargetDataIndices(t),r)})}e.on("mouseover",ut(n,this,"highlight")).on("mouseout",ut(n,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return uM(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(e,t,n,i,r){if(t){var o=new m,a=this.visualMapModel.textStyleModel;o.add(new oi({style:{x:i?"right"===r?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:i?r:"center",text:t,textFont:a.getFont(),textFill:a.getTextColor()}})),e.add(o)}},_getViewData:function(){var e=this.visualMapModel,t=Ke(e.getPieceList(),function(o,a){return{piece:o,indexInModelPieceList:a}}),n=e.get("text"),i=e.get("orient"),r=e.get("inverse");return("horizontal"===i?r:!r)?t.reverse():n=n&&n.slice().reverse(),{viewPieceList:t,endsText:n}},_createItemSymbol:function(e,t,n){e.add(io(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,n=t.option,i=Fe(n.selected),r=t.getSelectedMapKey(e);"single"===n.selectedMode?(i[r]=!0,re(i,function(o,a){i[a]=a===r})):i[r]=!i[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}}),br(tM);var t0,fM="urn:schemas-microsoft-com:vml",pM=typeof window>"u"?null:window,gM=!1,ao=pM&&pM.document;function n0(e){return t0(e)}if(ao&&!He.canvasSupported)try{ao.namespaces.zrvml||ao.namespaces.add("zrvml",fM),t0=function(e){return ao.createElement("<zrvml:"+e+' class="zrvml">')}}catch{t0=function(t){return ao.createElement("<"+t+' xmlns="'+fM+'" class="zrvml">')}}var mM,el=jr.CMD,Mi=Math.round,Fc=Math.sqrt,Dk=Math.abs,vM=Math.cos,yM=Math.sin,i0=Math.max;if(!He.canvasSupported){var tr=",",r0="progid:DXImageTransform.Microsoft",cr=21600,$r=cr/2,o0=function(e){e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",e.coordsize=cr+","+cr,e.coordorigin="0,0"},xM=function(e,t,n){return"rgb("+[e,t,n].join(",")+")"},ea=function(e,t){t&&e&&t.parentNode!==e&&e.appendChild(t)},Wc=function(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)},a0=function(e,t,n){return 1e5*(parseFloat(e)||0)+1e3*(parseFloat(t)||0)+n},bM=_n,_M=function(e,t,n){var i=Sr(t);n=+n,isNaN(n)&&(n=1),i&&(e.color=xM(i[0],i[1],i[2]),e.opacity=n*i[3])},Af=function(e,t,n,i){var a,s,r="fill"===t,o=e.getElementsByTagName(t)[0];null!=n[t]&&"none"!==n[t]&&(r||!r&&n.lineWidth)?(e[r?"filled":"stroked"]="true",n[t]instanceof Wo&&Wc(e,o),o=o||n0(t),r?function(a,s,l){var c,d=s.fill;if(null!=d)if(d instanceof Wo){var h,f=0,p=[0,0],_=0,v=1,E=l.getBoundingRect(),F=E.width,V=E.height;if("linear"===d.type){h="gradient";var q=l.transform,j=[d.x*F,d.y*V],X=[d.x2*F,d.y2*V];q&&(ti(j,j,q),ti(X,X,q)),(f=180*Math.atan2(X[0]-j[0],X[1]-j[1])/Math.PI)<0&&(f+=360),f<1e-6&&(f=0)}else{h="gradientradial";var oe=l.scale,ce=F,ge=V;p=[((j=[d.x*F,d.y*V])[0]-E.x)/ce,(j[1]-E.y)/ge],(q=l.transform)&&ti(j,j,q);var we=i0(ce/=oe[0]*cr,ge/=oe[1]*cr);v=2*d.r/we-(_=0/we)}var Ce=d.colorStops.slice();Ce.sort(function(Ln,Zt){return Ln.offset-Zt.offset});for(var Ae=Ce.length,Oe=[],Ge=[],Pe=0;Pe<Ae;Pe++){var st=Ce[Pe],Pt=(c=Sr(st.color),[xM(c[0],c[1],c[2]),c[3]]);Ge.push(st.offset*v+_+" "+Pt[0]),0!==Pe&&Pe!==Ae-1||Oe.push(Pt)}if(2<=Ae){var Ft=Oe[0][0],Nt=Oe[1][0],rn=Oe[0][1]*s.opacity,fn=Oe[1][1]*s.opacity;a.type=h,a.method="none",a.focus="100%",a.angle=f,a.color=Ft,a.color2=Nt,a.colors=Ge.join(","),a.opacity=fn,a.opacity2=rn}"radial"===h&&(a.focusposition=p.join(","))}else _M(a,d,s.opacity)}(o,n,i):(a=o,(s=n).lineDash&&(a.dashstyle=s.lineDash.join(" ")),null==s.stroke||s.stroke instanceof Wo||_M(a,s.stroke,s.opacity)),ea(e,o)):(e[r?"filled":"stroked"]="false",Wc(e,o))},so=[[],[],[]];ci.prototype.brushVML=function(e){var t=this.style,n=this._vmlEl;n||(n=n0("shape"),o0(n),this._vmlEl=n),Af(n,"fill",t,this),Af(n,"stroke",t,this);var i=this.transform,r=null!=i,o=n.getElementsByTagName("stroke")[0];if(o){var a=t.lineWidth;r&&!t.strokeNoScale&&(a*=Fc(Dk(i[0]*i[3]-i[1]*i[2]))),o.weight=a+"px"}var l=this.path||(this.path=new jr);this.__dirtyPath&&(l.beginPath(),l.subPixelOptimize=!1,this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),n.path=function(u,c){var d,h,f,p,_,v,E=el.M,F=el.C,V=el.L,q=el.A,j=el.Q,X=[],Y=u.data,Q=u.len();for(p=0;p<Q;){switch(h="",d=0,f=Y[p++]){case E:h=" m ",d=1,_=Y[p++],v=Y[p++],so[0][0]=_,so[0][1]=v;break;case V:h=" l ",d=1,_=Y[p++],v=Y[p++],so[0][0]=_,so[0][1]=v;break;case j:case F:h=" c ",d=3;var oe,ce,ge=Y[p++],we=Y[p++],Ce=Y[p++],Ae=Y[p++];f===j?(Ce=((oe=Ce)+2*ge)/3,Ae=((ce=Ae)+2*we)/3,ge=(_+2*ge)/3,we=(v+2*we)/3):(oe=Y[p++],ce=Y[p++]),so[0][0]=ge,so[0][1]=we,so[1][0]=Ce,so[1][1]=Ae,_=so[2][0]=oe,v=so[2][1]=ce;break;case q:var Oe=0,Ge=0,Pe=1,st=1,Pt=0;c&&(Oe=c[4],Ge=c[5],Pe=Fc(c[0]*c[0]+c[1]*c[1]),st=Fc(c[2]*c[2]+c[3]*c[3]),Pt=Math.atan2(-c[1]/st,c[0]/Pe));var Ft=Y[p++],Nt=Y[p++],rn=Y[p++],fn=Y[p++],Ln=Y[p++]+Pt,Zt=Y[p++]+Ln+Pt;p++;var kn=Y[p++],Rn=Ft+vM(Ln)*rn,Vn=Nt+yM(Ln)*fn,bi=(ge=Ft+vM(Zt)*rn,we=Nt+yM(Zt)*fn,kn?" wa ":" at ");Math.abs(Rn-ge)<1e-4&&(.01<Math.abs(Zt-Ln)?kn&&(Rn+=.0125):Math.abs(Vn-Nt)<1e-4?kn&&Rn<Ft||!kn&&Ft<Rn?we-=.0125:we+=.0125:kn&&Vn<Nt||!kn&&Nt<Vn?ge+=.0125:ge-=.0125),X.push(bi,Mi(((Ft-rn)*Pe+Oe)*cr-$r),tr,Mi(((Nt-fn)*st+Ge)*cr-$r),tr,Mi(((Ft+rn)*Pe+Oe)*cr-$r),tr,Mi(((Nt+fn)*st+Ge)*cr-$r),tr,Mi((Rn*Pe+Oe)*cr-$r),tr,Mi((Vn*st+Ge)*cr-$r),tr,Mi((ge*Pe+Oe)*cr-$r),tr,Mi((we*st+Ge)*cr-$r)),_=ge,v=we;break;case el.R:var fi=so[0],Ti=so[1];fi[0]=Y[p++],fi[1]=Y[p++],Ti[0]=fi[0]+Y[p++],Ti[1]=fi[1]+Y[p++],c&&(ti(fi,fi,c),ti(Ti,Ti,c)),fi[0]=Mi(fi[0]*cr-$r),Ti[0]=Mi(Ti[0]*cr-$r),fi[1]=Mi(fi[1]*cr-$r),Ti[1]=Mi(Ti[1]*cr-$r),X.push(" m ",fi[0],tr,fi[1]," l ",Ti[0],tr,fi[1]," l ",Ti[0],tr,Ti[1]," l ",fi[0],tr,Ti[1]);break;case el.Z:X.push(" x ")}if(0<d){X.push(h);for(var Or=0;Or<d;Or++){var Nr=so[Or];c&&ti(Nr,Nr,c),X.push(Mi(Nr[0]*cr-$r),tr,Mi(Nr[1]*cr-$r),Or<d-1?tr:"")}}}return X.join("")}(l,this.transform),n.style.zIndex=a0(this.zlevel,this.z,this.z2),ea(e,n),null!=t.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},ci.prototype.onRemove=function(e){Wc(e,this._vmlEl),this.removeRectText(e)},ci.prototype.onAdd=function(e){ea(e,this._vmlEl),this.appendRectText(e)},li.prototype.brushVML=function(e){var t,n,fn,i=this.style,r=i.image;if("object"==typeof(fn=r)&&fn.tagName&&"IMG"===fn.tagName.toUpperCase()){var o=r.src;if(o===this._imageSrc)t=this._imageWidth,n=this._imageHeight;else{var a=r.runtimeStyle,s=a.width,l=a.height;a.width="auto",a.height="auto",t=r.width,n=r.height,a.width=s,a.height=l,this._imageSrc=o,this._imageWidth=t,this._imageHeight=n}r=o}else r===this._imageSrc&&(t=this._imageWidth,n=this._imageHeight);if(r){var u=i.x||0,c=i.y||0,d=i.width,h=i.height,f=i.sWidth,p=i.sHeight,_=i.sx||0,v=i.sy||0,E=f&&p,F=this._vmlEl;F||(F=ao.createElement("div"),o0(F),this._vmlEl=F);var V,q=F.style,j=!1,X=1,Y=1;if(this.transform&&(X=Fc((V=this.transform)[0]*V[0]+V[1]*V[1]),Y=Fc(V[2]*V[2]+V[3]*V[3]),j=V[1]||V[2]),j){var Q=[u,c],oe=[u+d,c],ce=[u,c+h],ge=[u+d,c+h];ti(Q,Q,V),ti(oe,oe,V),ti(ce,ce,V),ti(ge,ge,V);var we=i0(Q[0],oe[0],ce[0],ge[0]),Ce=i0(Q[1],oe[1],ce[1],ge[1]),Ae=[];Ae.push("M11=",V[0]/X,tr,"M12=",V[2]/Y,tr,"M21=",V[1]/X,tr,"M22=",V[3]/Y,tr,"Dx=",Mi(u*X+V[4]),tr,"Dy=",Mi(c*Y+V[5])),q.padding="0 "+Mi(we)+"px "+Mi(Ce)+"px 0",q.filter=r0+".Matrix("+Ae.join("")+", SizingMethod=clip)"}else V&&(u=u*X+V[4],c=c*Y+V[5]),q.filter="",q.left=Mi(u)+"px",q.top=Mi(c)+"px";var Oe=this._imageEl,Ge=this._cropEl;Oe||(Oe=ao.createElement("div"),this._imageEl=Oe);var Pe=Oe.style;if(E){if(t&&n)Pe.width=Mi(X*t*d/f)+"px",Pe.height=Mi(Y*n*h/p)+"px";else{var st=new Image,Pt=this;st.onload=function(){st.onload=null,n=st.height,Pe.width=Mi(X*(t=st.width)*d/f)+"px",Pe.height=Mi(Y*n*h/p)+"px",Pt._imageWidth=t,Pt._imageHeight=n,Pt._imageSrc=r},st.src=r}Ge||((Ge=ao.createElement("div")).style.overflow="hidden",this._cropEl=Ge);var Ft=Ge.style;Ft.width=Mi((d+_*d/f)*X),Ft.height=Mi((h+v*h/p)*Y),Ft.filter=r0+".Matrix(Dx="+-_*d/f*X+",Dy="+-v*h/p*Y+")",Ge.parentNode||F.appendChild(Ge),Oe.parentNode!==Ge&&Ge.appendChild(Oe)}else Pe.width=Mi(X*d)+"px",Pe.height=Mi(Y*h)+"px",F.appendChild(Oe),Ge&&Ge.parentNode&&(F.removeChild(Ge),this._cropEl=null);var Nt="",rn=i.opacity;rn<1&&(Nt+=".Alpha(opacity="+Mi(100*rn)+") "),Pe.filter=Nt+=r0+".AlphaImageLoader(src="+r+", SizingMethod=scale)",F.style.zIndex=a0(this.zlevel,this.z,this.z2),ea(e,F),null!=i.text&&this.drawRectText(e,this.getBoundingRect())}},li.prototype.onRemove=function(e){Wc(e,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(e)},li.prototype.onAdd=function(e){ea(e,this._vmlEl),this.appendRectText(e)};var tl,s0="normal",l0={},u0=0,kk=document.createElement("div");mM=function(e,t){var n=ao;tl||((tl=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",ao.body.appendChild(tl));try{tl.style.font=t}catch{}return tl.innerHTML="",tl.appendChild(n.createTextNode(e)),{width:tl.offsetWidth}},Yn.measureText=mM;for(var c0=new g,Nk=function(e,t,n,i){var r=this.style;this.__dirty&&_e(r);var o=r.text;if(null!=o&&(o+=""),o){if(r.rich){var a=dn(o,r);o=[];for(var s=0;s<a.lines.length;s++){for(var l=a.lines[s].tokens,u=[],c=0;c<l.length;c++)u.push(l[c].text);o.push(u.join(""))}o=o.join("\n")}var d,h,f=r.textAlign,p=r.textVerticalAlign,_=function(ge){var we=l0[ge];if(!we){100<u0&&(u0=0,l0={});var Ce,Ae=kk.style;try{Ae.font=ge,Ce=Ae.fontFamily.split(",")[0]}catch{}we={style:Ae.fontStyle||s0,variant:Ae.fontVariant||s0,weight:Ae.fontWeight||s0,size:0|parseFloat(Ae.fontSize||12),family:Ce||"Microsoft YaHei"},l0[ge]=we,u0++}return we}(r.font),v=_.style+" "+_.variant+" "+_.weight+" "+_.size+'px "'+_.family+'"';n=n||Jn(o,v,f,p,r.textPadding,r.textLineHeight);var E=this.transform;if(E&&!i&&(c0.copy(t),c0.applyTransform(E),t=c0),i)d=t.x,h=t.y;else{var F=r.textPosition;if(F instanceof Array)d=t.x+bM(F[0],t.width),h=t.y+bM(F[1],t.height),f=f||"left";else{var V=this.calculateTextPosition?this.calculateTextPosition({},r,t):gi({},r,t);d=V.x,h=V.y,f=f||V.textAlign,p=p||V.textVerticalAlign}}d=Kn(d,n.width,f),h=wi(h,n.height,p),h+=n.height/2;var q,j,X,Y=n0,Q=this._textVmlEl;Q?j=(q=(X=Q.firstChild).nextSibling).nextSibling:(Q=Y("line"),q=Y("path"),j=Y("textpath"),X=Y("skew"),j.style["v-text-align"]="left",o0(Q),q.textpathok=!0,j.on=!0,Q.from="0 0",Q.to="1000 0.05",ea(Q,X),ea(Q,q),ea(Q,j),this._textVmlEl=Q);var oe=[d,h],ce=Q.style;E&&i?(ti(oe,oe,E),X.on=!0,X.matrix=E[0].toFixed(3)+tr+E[2].toFixed(3)+tr+E[1].toFixed(3)+tr+E[3].toFixed(3)+",0,0",X.offset=(Mi(oe[0])||0)+","+(Mi(oe[1])||0),X.origin="0 0",ce.left="0px",ce.top="0px"):(X.on=!1,ce.left=Mi(d)+"px",ce.top=Mi(h)+"px"),j.string=String(o).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{j.style.font=v}catch{}Af(Q,"fill",{fill:r.textFill,opacity:r.opacity},this),Af(Q,"stroke",{stroke:r.textStroke,opacity:r.opacity,lineDash:r.lineDash||null},this),Q.style.zIndex=a0(this.zlevel,this.z,this.z2),ea(e,Q)}},Ek=function(e){Wc(e,this._textVmlEl),this._textVmlEl=null},Lk=function(e){ea(e,this._textVmlEl)},wM=[ii,Xn,li,ci,oi],d0=0;d0<wM.length;d0++){var h0=wM[d0].prototype;h0.drawRectText=Nk,h0.removeRectText=Ek,h0.appendRectText=Lk}oi.prototype.brushVML=function(e){var t=this.style;null!=t.text?this.drawRectText(e,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(e)},oi.prototype.onRemove=function(e){this.removeRectText(e)},oi.prototype.onAdd=function(e){this.appendRectText(e)}}function au(e){return parseInt(e,10)}function If(e,t){(function(){if(!gM&&ao){gM=!0;var a=ao.styleSheets;a.length<31?ao.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):a[0].addRule(".zrvml","behavior:url(#default#VML)")}})(),this.root=e,this.storage=t;var n=document.createElement("div"),i=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",i.style.cssText="position:absolute;left:0;top:0;",e.appendChild(n),this._vmlRoot=i,this._vmlViewport=n,this.resize();var r=t.delFromStorage,o=t.addToStorage;t.delFromStorage=function(a){r.call(t,a),a&&a.onRemove&&a.onRemove(i)},t.addToStorage=function(a){a.onAdd&&a.onAdd(i),o.call(t,a)},this._firstPaint=!0}function ta(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}If.prototype={constructor:If,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0,!0);this._paintList(e)},_paintList:function(e){for(var t=this._vmlRoot,n=0;n<e.length;n++){var i=e[n];i.invisible||i.ignore?(i.__alreadyNotVisible||i.onRemove(t),i.__alreadyNotVisible=!0):(i.__alreadyNotVisible&&i.onAdd(t),i.__alreadyNotVisible=!1,i.__dirty&&(i.beforeBrush&&i.beforeBrush(),(i.brushVML||i.brush).call(i,t),i.afterBrush&&i.afterBrush())),i.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(t),this._firstPaint=!1)},resize:function(e,t){if(e=e??this._getWidth(),t=t??this._getHeight(),this._width!==e||this._height!==t){this._width=e,this._height=t;var n=this._vmlViewport.style;n.width=e+"px",n.height=t+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var e=this.root,t=e.currentStyle;return(e.clientWidth||au(t.width))-au(t.paddingLeft)-au(t.paddingRight)|0},_getHeight:function(){var e=this.root,t=e.currentStyle;return(e.clientHeight||au(t.height))-au(t.paddingTop)-au(t.paddingBottom)|0}},re(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(e){If.prototype[e]=function(){}}),Uf("vml",If);var nl=jr.CMD,Rk=Array.prototype.join,su="none",f0=Math.round,CM=Math.sin,SM=Math.cos,MM=Math.PI,os=2*Math.PI,Pk=180/MM;function Lo(e){return f0(1e4*e)/1e4}function AM(e){return e<1e-4&&-1e-4<e}function p0(e,t){t&&Ui(e,"transform","matrix("+Rk.call(t,",")+")")}function Ui(e,t,n){n&&("linear"===n.type||"radial"===n.type)||e.setAttribute(t,n)}function IM(e,t,n,i){if(a=t,null!=(l=n?a.textFill:a.fill)&&l!==su){var r=n?t.textFill:t.fill;Ui(e,"fill",r="transparent"===r?su:r),Ui(e,"fill-opacity",null!=t.fillOpacity?t.fillOpacity*t.opacity:t.opacity)}else Ui(e,"fill",su);var a,l;if(function(a,s){var l=s?a.textStroke:a.stroke;return null!=l&&l!==su}(t,n)){var o=n?t.textStroke:t.stroke;Ui(e,"stroke",o="transparent"===o?su:o),Ui(e,"stroke-width",(n?t.textStrokeWidth:t.lineWidth)/(!n&&t.strokeNoScale?i.getLineScale():1)),Ui(e,"paint-order",n?"stroke":"fill"),Ui(e,"stroke-opacity",null!=t.strokeOpacity?t.strokeOpacity:t.opacity),t.lineDash?(Ui(e,"stroke-dasharray",t.lineDash.join(",")),Ui(e,"stroke-dashoffset",f0(t.lineDashOffset||0))):Ui(e,"stroke-dasharray",""),t.lineCap&&Ui(e,"stroke-linecap",t.lineCap),t.lineJoin&&Ui(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&Ui(e,"stroke-miterlimit",t.miterLimit)}else Ui(e,"stroke",su)}var Gc={brush:function(e){var t=e.style,n=e.__svgEl;n||(n=ta("path"),e.__svgEl=n),e.path||e.createPathProxy();var i=e.path;if(e.__dirtyPath){i.beginPath(),i.subPixelOptimize=!1,e.buildPath(i,e.shape),e.__dirtyPath=!1;var r=function(o){for(var a=[],s=o.data,l=o.len(),u=0;u<l;){var c="",d=0;switch(s[u++]){case nl.M:c="M",d=2;break;case nl.L:c="L",d=2;break;case nl.Q:c="Q",d=4;break;case nl.C:c="C",d=6;break;case nl.A:var h=s[u++],f=s[u++],p=s[u++],_=s[u++],v=s[u++],E=s[u++],F=s[u++],V=s[u++],q=Math.abs(E),j=AM(q-os)||(V?os<=E:os<=-E),X=0<E?E%os:E%os+os,Y=!1;Y=!!j||!AM(q)&&MM<=X==!!V;var Q=Lo(h+p*SM(v)),oe=Lo(f+_*CM(v));j&&(E=V?os-1e-4:1e-4-os,Y=!0,9===u&&a.push("M",Q,oe));var ce=Lo(h+p*SM(v+E)),ge=Lo(f+_*CM(v+E));a.push("A",Lo(p),Lo(_),f0(F*Pk),+Y,+V,ce,ge);break;case nl.Z:c="Z";break;case nl.R:ce=Lo(s[u++]),ge=Lo(s[u++]);var we=Lo(s[u++]),Ce=Lo(s[u++]);a.push("M",ce,ge,"L",ce+we,ge,"L",ce+we,ge+Ce,"L",ce,ge+Ce,"L",ce,ge)}c&&a.push(c);for(var Ae=0;Ae<d;Ae++)a.push(Lo(s[u++]))}return a.join(" ")}(i);r.indexOf("NaN")<0&&Ui(n,"d",r)}IM(n,t,!1,e),p0(n,e.transform),null!=t.text?kf(e,e.getBoundingRect()):m0(e)}},DM={brush:function(e){var t=e.style,n=t.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var i=t.x||0,r=t.y||0,o=t.width,a=t.height,s=e.__svgEl;s||(s=ta("image"),e.__svgEl=s),n!==e.__imageSrc&&(s.setAttributeNS("http://www.w3.org/1999/xlink","href",n),e.__imageSrc=n),Ui(s,"width",o),Ui(s,"height",a),Ui(s,"x",i),Ui(s,"y",r),p0(s,e.transform),null!=t.text?kf(e,e.getBoundingRect()):m0(e)}}},Df={},g0=new g,Uc={},Ma=[],Bk={left:"start",right:"end",center:"middle",middle:"middle"},kf=function(e,t){var n=e.style,i=e.transform,r=e instanceof oi||n.transformText;e.__dirty&&_e(n);var Ce,Ae,Oe,o=n.text;if(null!=o&&(o+=""),In(o,n)){null==o&&(o=""),!r&&i&&(g0.copy(t),g0.applyTransform(i),t=g0);var a=e.__textSvgEl;a||(a=ta("text"),e.__textSvgEl=a);var s=a.style,l=n.font||Pn,u=a.__computedFont;l!==a.__styleFont&&(s.font=a.__styleFont=l,u=a.__computedFont=s.font);var c=n.textPadding,h=e.__textCotentBlock;h&&!e.__dirtyText||(h=e.__textCotentBlock=Sn(o,u,c,n.textLineHeight,n.truncate));var f=h.outerHeight,p=h.lineHeight;Ut(Uc,e,n,t);var _=Uc.baseX,v=Uc.baseY,E=Uc.textAlign||"left",F=Uc.textVerticalAlign;!function(Ce,Ae,Oe,Ge,Pe,st,Pt){Ro(Ma),Ae&&Oe&&ra(Ma,Oe);var Ft=Ge.textRotation;if(Pe&&Ft){var Nt=Ge.textOrigin;"center"===Nt?(st=Pe.width/2+Pe.x,Pt=Pe.height/2+Pe.y):Nt&&(st=Nt[0]+Pe.x,Pt=Nt[1]+Pe.y),Ma[4]-=st,Ma[5]-=Pt,So(Ma,Ma,Ft),Ma[4]+=st,Ma[5]+=Pt}p0(Ce,Ma)}(a,r,i,n,t,_,v);var V=_,q=wi(v,f,F);c&&(Ce=_,Oe=c,V="right"===(Ae=E)?Ce-Oe[1]:"center"===Ae?Ce+Oe[3]/2-Oe[1]/2:Ce+Oe[3],q+=c[0]),q+=p/2,IM(a,n,!0,e);var j=h.canCacheByTextString,X=e.__tspanList||(e.__tspanList=[]),Y=X.length;if(j&&e.__canCacheByTextString&&e.__text===o){if(e.__dirtyText&&Y)for(var Q=0;Q<Y;++Q)kM(X[Q],E,V,q+Q*p)}else{e.__text=o,e.__canCacheByTextString=j;var oe=h.lines,ce=oe.length;for(Q=0;Q<ce;Q++){var ge=X[Q],we=oe[Q];ge?ge.__zrText!==we&&(ge.innerHTML="",ge.appendChild(document.createTextNode(we))):(ge=X[Q]=ta("tspan"),a.appendChild(ge),ge.appendChild(document.createTextNode(we))),kM(ge,E,V,q+Q*p)}if(ce<Y){for(;Q<Y;Q++)a.removeChild(X[Q]);X.length=ce}}}};function kM(e,t,n,i){Ui(e,"dominant-baseline","middle"),Ui(e,"text-anchor",Bk[t]),Ui(e,"x",n),Ui(e,"y",i)}function m0(e){e&&e.__textSvgEl&&(e.__textSvgEl.parentNode&&e.__textSvgEl.parentNode.removeChild(e.__textSvgEl),e.__textSvgEl=null,e.__tspanList=[],e.__text=null)}function NM(){}function Ok(e,t){for(var n=0,i=t.length,r=0,o=0;n<i;n++){var a=t[n];if(a.removed){for(s=[],l=o;l<o+a.count;l++)s.push(l);a.indices=s,o+=a.count}else{for(var s=[],l=r;l<r+a.count;l++)s.push(l);a.indices=s,r+=a.count,a.added||(o+=a.count)}}return t}Df.drawRectText=kf,Df.brush=function(e){null!=e.style.text?kf(e,!1):m0(e)},NM.prototype={diff:function(e,t,n){this.equals=n=n||function(p,_){return p===_};var i=this;e=e.slice();var r=(t=t.slice()).length,o=e.length,a=1,s=r+o,l=[{newPos:-1,components:[]}],u=this.extractCommon(l[0],t,e,0);if(l[0].newPos+1>=r&&o<=u+1){for(var c=[],d=0;d<t.length;d++)c.push(d);return[{indices:c,count:t.length}]}function h(){for(var p=-1*a;p<=a;p+=2){var _,v=l[p-1],E=l[p+1],F=(E?E.newPos:0)-p;v&&(l[p-1]=void 0);var V=v&&v.newPos+1<r,q=E&&0<=F&&F<o;if(V||q){if(!V||q&&v.newPos<E.newPos?(_={newPos:(j=E).newPos,components:j.components.slice(0)},i.pushComponent(_.components,void 0,!0)):((_=v).newPos++,i.pushComponent(_.components,!0,void 0)),F=i.extractCommon(_,t,e,p),_.newPos+1>=r&&o<=F+1)return Ok(0,_.components);l[p]=_}else l[p]=void 0}var j;a++}for(;a<=s;){var f=h();if(f)return f}},pushComponent:function(e,t,n){var i=e[e.length-1];i&&i.added===t&&i.removed===n?e[e.length-1]={count:i.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,i){for(var r=t.length,o=n.length,a=e.newPos,s=a-i,l=0;a+1<r&&s+1<o&&this.equals(t[a+1],n[s+1]);)a++,s++,l++;return l&&e.components.push({count:l}),e.newPos=a,s},tokenize:function(e){return e.slice()},join:function(e){return e.slice()}};var zk=new NM;function zi(e,t,n,i,r){this._zrId=e,this._svgRoot=t,this._tagNames="string"==typeof n?[n]:n,this._markLabel=i,this._domName=r||"_dom",this.nextId=0}function il(e,t){zi.call(this,e,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function jc(e,t){zi.call(this,e,t,"clipPath","__clippath_in_use__")}function as(e,t){zi.call(this,e,t,["filter"],"__filter_in_use__","_shadowDom")}function EM(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY||e.textShadowBlur||e.textShadowOffsetX||e.textShadowOffsetY)}function Nf(e){return parseInt(e,10)}function LM(e,t){return t&&e&&t.parentNode!==e}function qc(e,t,n){if(LM(e,t)&&n){var i=n.nextSibling;i?e.insertBefore(t,i):e.appendChild(t)}}function RM(e,t){if(LM(e,t)){var n=e.firstChild;n?e.insertBefore(t,n):e.appendChild(t)}}function PM(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function Xc(e){return e.__textSvgEl}function Zc(e){return e.__svgEl}function Ef(e,t,n,i){this.root=e,this.storage=t,this._opts=n=fe({},n||{});var r=ta("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("version","1.1"),r.setAttribute("baseProfile","full"),r.style.cssText="user-select:none;position:absolute;left:0;top:0;";var o=ta("g");r.appendChild(o);var a=ta("g");r.appendChild(a),this.gradientManager=new il(i,a),this.clipPathManager=new jc(i,a),this.shadowManager=new as(i,a);var s=document.createElement("div");s.style.cssText="overflow:hidden;position:relative",this._svgDom=r,this._svgRoot=a,this._backgroundRoot=o,this._viewport=s,e.appendChild(s),s.appendChild(r),this.resize(n.width,n.height),this._visibleList=[]}zi.prototype.createElement=ta,zi.prototype.getDefs=function(e){var t=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?e?((n=t.insertBefore(this.createElement("defs"),t.firstChild)).contains||(n.contains=function(i){var r=n.children;if(!r)return!1;for(var o=r.length-1;0<=o;--o)if(r[o]===i)return!0;return!1}),n):null:n[0]},zi.prototype.update=function(e,t){if(e){var n=this.getDefs(!1);if(e[this._domName]&&n.contains(e[this._domName]))"function"==typeof t&&t(e);else{var i=this.add(e);i&&(e[this._domName]=i)}}},zi.prototype.addDom=function(e){this.getDefs(!0).appendChild(e)},zi.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},zi.prototype.getDoms=function(){var e=this.getDefs(!1);if(!e)return[];var t=[];return re(this._tagNames,function(n){var i=e.getElementsByTagName(n);t=t.concat([].slice.call(i))}),t},zi.prototype.markAllUnused=function(){var e=this.getDoms(),t=this;re(e,function(n){n[t._markLabel]="0"})},zi.prototype.markUsed=function(e){e&&(e[this._markLabel]="1")},zi.prototype.removeUnused=function(){var e=this.getDefs(!1);if(e){var t=this.getDoms(),n=this;re(t,function(i){"1"!==i[n._markLabel]&&e.removeChild(i)})}},zi.prototype.getSvgProxy=function(e){return e instanceof ci?Gc:e instanceof li?DM:e instanceof oi?Df:Gc},zi.prototype.getTextSvgElement=function(e){return e.__textSvgEl},zi.prototype.getSvgElement=function(e){return e.__svgEl},Ue(il,zi),il.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var n=this;re(["fill","stroke"],function(i){if(t.style[i]&&("linear"===t.style[i].type||"radial"===t.style[i].type)){var r,o=t.style[i],a=n.getDefs(!0);o._dom?(r=o._dom,a.contains(o._dom)||n.addDom(r)):r=n.add(o),n.markUsed(t);var s=r.getAttribute("id");e.setAttribute(i,"url(#"+s+")")}})}},il.prototype.add=function(e){var t;if("linear"===e.type)t=this.createElement("linearGradient");else{if("radial"!==e.type)return null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},il.prototype.update=function(e){var t=this;zi.prototype.update.call(this,e,function(){var n=e.type,i=e._dom.tagName;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?t.updateDom(e,e._dom):(t.removeDom(e),t.add(e))})},il.prototype.updateDom=function(e,t){if("linear"===e.type)t.setAttribute("x1",e.x),t.setAttribute("y1",e.y),t.setAttribute("x2",e.x2),t.setAttribute("y2",e.y2);else{if("radial"!==e.type)return;t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)}t.setAttribute("gradientUnits",e.global?"userSpaceOnUse":"objectBoundingBox"),t.innerHTML="";for(var n=e.colorStops,i=0,r=n.length;i<r;++i){var o=this.createElement("stop");o.setAttribute("offset",100*n[i].offset+"%");var a=n[i].color;if(-1<a.indexOf("rgba")){var s=Sr(a)[3],l=fs(a);o.setAttribute("stop-color","#"+l),o.setAttribute("stop-opacity",s)}else o.setAttribute("stop-color",n[i].color);t.appendChild(o)}e._dom=t},il.prototype.markUsed=function(e){if(e.style){var t=e.style.fill;t&&t._dom&&zi.prototype.markUsed.call(this,t._dom),(t=e.style.stroke)&&t._dom&&zi.prototype.markUsed.call(this,t._dom)}},Ue(jc,zi),jc.prototype.update=function(e){var t=this.getSvgElement(e);t&&this.updateDom(t,e.__clipPaths,!1);var n=this.getTextSvgElement(e);n&&this.updateDom(n,e.__clipPaths,!0),this.markUsed(e)},jc.prototype.updateDom=function(e,t,n){if(t&&0<t.length){var i,r,o=this.getDefs(!0),a=t[0],s=n?"_textDom":"_dom";a[s]?(r=a[s].getAttribute("id"),o.contains(i=a[s])||o.appendChild(i)):(r="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(i=this.createElement("clipPath")).setAttribute("id",r),o.appendChild(i),a[s]=i);var l=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!n){var u=Array.prototype.slice.call(a.transform);lo(a.transform,a.parent.invTransform,a.transform),l.brush(a),a.transform=u}else l.brush(a);var c=this.getSvgElement(a);i.innerHTML="",i.appendChild(c.cloneNode()),e.setAttribute("clip-path","url(#"+r+")"),1<t.length&&this.updateDom(i,t.slice(1),n)}else e&&e.setAttribute("clip-path","none")},jc.prototype.markUsed=function(e){var t=this;e.__clipPaths&&re(e.__clipPaths,function(n){n._dom&&zi.prototype.markUsed.call(t,n._dom),n._textDom&&zi.prototype.markUsed.call(t,n._textDom)})},Ue(as,zi),as.prototype.addWithoutUpdate=function(e,t){if(t&&EM(t.style)){var n;t._shadowDom?(n=t._shadowDom,this.getDefs(!0).contains(t._shadowDom)||this.addDom(n)):n=this.add(t),this.markUsed(t);var i=n.getAttribute("id");e.style.filter="url(#"+i+")"}},as.prototype.add=function(e){var t=this.createElement("filter");return e._shadowDomId=e._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+e._shadowDomId),this.updateDom(e,t),this.addDom(t),t},as.prototype.update=function(e,t){if(EM(t.style)){var n=this;zi.prototype.update.call(this,t,function(){n.updateDom(t,t._shadowDom)})}else this.remove(e,t)},as.prototype.remove=function(e,t){null!=t._shadowDomId&&(this.removeDom(e),e.style.filter="")},as.prototype.updateDom=function(e,t){var n=t.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var i,r,o,a,s=e.style,l=e.scale&&e.scale[0]||1,u=e.scale&&e.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)i=s.shadowOffsetX||0,r=s.shadowOffsetY||0,o=s.shadowBlur,a=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(t,s);i=s.textShadowOffsetX||0,r=s.textShadowOffsetY||0,o=s.textShadowBlur,a=s.textShadowColor}n.setAttribute("dx",i/l),n.setAttribute("dy",r/u),n.setAttribute("flood-color",a),n.setAttribute("stdDeviation",o/2/l+" "+o/2/u),t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width",Math.ceil(o/2*200)+"%"),t.setAttribute("height",Math.ceil(o/2*200)+"%"),t.appendChild(n),e._shadowDom=t},as.prototype.markUsed=function(e){e._shadowDom&&zi.prototype.markUsed.call(this,e._shadowDom)},Ef.prototype={constructor:Ef,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},setBackgroundColor:function(e){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=ta("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=e,this._backgroundRoot.appendChild(t),this._backgroundNode=t},_paintList:function(e){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var t,n,i=this._svgRoot,r=this._visibleList,o=e.length,a=[];for(t=0;t<o;t++){var s=e[t],l=(n=s)instanceof ci?Gc:n instanceof li?DM:n instanceof oi?Df:Gc,u=Zc(s)||Xc(s);s.invisible||(s.__dirty&&(l&&l.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(u,s)),s.__dirty=!1),a.push(s))}var c,d=zk.diff(r,a,void 0);for(t=0;t<d.length;t++)if((p=d[t]).removed)for(var h=0;h<p.count;h++){u=Zc(s=r[p.indices[h]]);var f=Xc(s);PM(i,u),PM(i,f)}for(t=0;t<d.length;t++){var p;if((p=d[t]).added)for(h=0;h<p.count;h++)u=Zc(s=a[p.indices[h]]),f=Xc(s),c?qc(i,u,c):RM(i,u),u?qc(i,f,u):c?qc(i,f,c):RM(i,f),qc(i,f,u),c=f||u||c,this.gradientManager.addWithoutUpdate(u||f,s),this.shadowManager.addWithoutUpdate(u||f,s),this.clipPathManager.markUsed(s);else if(!p.removed)for(h=0;h<p.count;h++)u=Zc(s=a[p.indices[h]]),f=Xc(s),u=Zc(s),f=Xc(s),this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(u||f,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(u||f,s),this.clipPathManager.markUsed(s),f&&qc(i,f,u),c=u||f||c}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(e){var t,n=this._svgDom;return 0!==(t=n.getElementsByTagName("defs")).length?t[0]:e?((t=n.insertBefore(ta("defs"),n.firstChild)).contains||(t.contains=function(i){var r=t.children;if(!r)return!1;for(var o=r.length-1;0<=o;--o)if(r[o]===i)return!0;return!1}),t):null},resize:function(e,t){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=t&&(i.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var r=n.style;r.width=e+"px",r.height=t+"px";var o=this._svgDom;o.setAttribute("width",e),o.setAttribute("height",t)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",e),this._backgroundNode.setAttribute("height",t))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],i=["clientWidth","clientHeight"][e],r=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||Nf(s[n])||Nf(a.style[n]))-(Nf(s[r])||0)-(Nf(s[o])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},re(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(e){Ef.prototype[e]=function(){}}),Uf("svg",Ef),Qt.version="4.9.0",Qt.dependencies={zrender:"4.3.2"},Qt.PRIORITY=qo,Qt.init=function(e,t,n){var i=ig(e);if(i)return i;var r=new Xu(e,t,n);return r.id="ec_"+pA++,Ns[r.id]=r,N0(e,ng,r.id),function(o){var a="__connectUpdateStatus";function s(l,u){for(var c=0;c<l.length;c++)l[c][a]=u}sr(ih,function(l,u){o._messageCenter.on(u,function(c){if(oh[o.group]&&0!==o[a]){if(c&&c.escapeConnect)return;var d=o.makeActionFromEvent(c),h=[];sr(Ns,function(f){f!==o&&f.group===o.group&&h.push(f)}),s(h,0),sr(h,function(f){1!==f[a]&&f.dispatchAction(d)}),s(h,2)}})})}(r),r},Qt.connect=function(e){if(Ye(e)){var t=e;e=null,sr(t,function(n){null!=n.group&&(e=n.group)}),e=e||"g_"+gA++,sr(t,function(n){n.group=e})}return oh[e]=!0,e},Qt.disConnect=G1,Qt.disconnect=mA,Qt.dispose=function(e){"string"==typeof e?e=Ns[e]:e instanceof Xu||(e=ig(e)),e instanceof Xu&&!e.isDisposed()&&e.dispose()},Qt.getInstanceByDom=ig,Qt.getInstanceById=function(e){return Ns[e]},Qt.registerTheme=rg,Qt.registerPreprocessor=br,Qt.registerProcessor=to,Qt.registerPostUpdate=function(e){F1.push(e)},Qt.registerAction=hi,Qt.registerCoordinateSystem=og,Qt.getCoordinateSystemDimensions=function(e){var t=Ir.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},Qt.registerLayout=Gi,Qt.registerVisual=Ni,Qt.registerLoading=U1,Qt.extendComponentModel=no,Qt.extendComponentView=lr,Qt.extendSeriesModel=ah,Qt.extendChartView=Zr,Qt.setCanvasCreator=function(e){Vt("createCanvas",e)},Qt.registerMap=function(e,t,n){!function(e,t,n){var i;re(i=Ye(t)?t:t.svg?[{type:"svg",source:t.svg,specialAreas:t.specialAreas}]:(t.geoJson&&!t.features&&(n=t.specialAreas,t=t.geoJson),[{type:"geoJSON",source:t,specialAreas:n}]),function(r){var o=r.type;"geoJson"===o&&(o=r.type="geoJSON"),(0,cA[o])(r)}),N1.set(e,i)}(e,t,n)},Qt.getMap=function(e){var t=Qd_retrieveMap(e);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}},Qt.dataTool={},Qt.zrender=HM,Qt.number=wT,Qt.format=MT,Qt.throttle=qd,Qt.helper=WA,Qt.matrix=Qc,Qt.vector=pr,Qt.color=ed,Qt.parseGeoJSON=wg,Qt.parseGeoJson=qA,Qt.util=Nx,Qt.graphic=Ex,Qt.List=ur,Qt.Model=di,Qt.Axis=er,Qt.env=He}),function(Qt,Dn){"object"==typeof exports&&typeof module<"u"?Dn(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],Dn):Dn(Qt.bmap={},Qt.echarts)}(this,function(Qt,Dn){"use strict";function _i(Et,$t){this._bmap=Et,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=$t,this._projection=new BMap.MercatorProjection}function He(Et,$t){return $t=$t||[0,0],Dn.util.map([0,1],function(ht){var be=$t[ht],Ze=Et[ht]/2,St=[],Dt=[];return St[ht]=be-Ze,Dt[ht]=be+Ze,St[1-ht]=Dt[1-ht]=$t[1-ht],Math.abs(this.dataToPoint(St)[ht]-this.dataToPoint(Dt)[ht])},this)}var rr;function or(Et){for(var $t in Et)if(Et.hasOwnProperty($t))return!1;return!0}_i.prototype.dimensions=["lng","lat"],_i.prototype.setZoom=function(Et){this._zoom=Et},_i.prototype.setCenter=function(Et){this._center=this._projection.lngLatToPoint(new BMap.Point(Et[0],Et[1]))},_i.prototype.setMapOffset=function(Et){this._mapOffset=Et},_i.prototype.getBMap=function(){return this._bmap},_i.prototype.dataToPoint=function(Et){var $t=new BMap.Point(Et[0],Et[1]),ht=this._bmap.pointToOverlayPixel($t),be=this._mapOffset;return[ht.x-be[0],ht.y-be[1]]},_i.prototype.pointToData=function(Et){var $t=this._mapOffset;return[(Et=this._bmap.overlayPixelToPoint({x:Et[0]+$t[0],y:Et[1]+$t[1]})).lng,Et.lat]},_i.prototype.getViewRect=function(){var Et=this._api;return new Dn.graphic.BoundingRect(0,0,Et.getWidth(),Et.getHeight())},_i.prototype.getRoamTransform=function(){return Dn.matrix.create()},_i.prototype.prepareCustoms=function(Et){var $t=this.getViewRect();return{coordSys:{type:"bmap",x:$t.x,y:$t.y,width:$t.width,height:$t.height},api:{coord:Dn.util.bind(this.dataToPoint,this),size:Dn.util.bind(He,this)}}},_i.dimensions=_i.prototype.dimensions,_i.create=function(Et,$t){var ht,be=$t.getDom();Et.eachComponent("bmap",function(Ze){var St=$t.getZr().painter,Dt=St.getViewportRoot();if(typeof BMap>"u")throw new Error("BMap api is not loaded");if(rr=rr||function(){function Ve(Je){this._root=Je}return(Ve.prototype=new BMap.Overlay).initialize=function(Je){return Je.getPanes().labelPane.appendChild(this._root),this._root},Ve.prototype.draw=function(){},Ve}(),ht)throw new Error("Only one bmap component can exist");if(!Ze.__bmap){var Re=be.querySelector(".ec-extension-bmap");Re&&(Dt.style.left="0px",Dt.style.top="0px",be.removeChild(Re)),(Re=document.createElement("div")).style.cssText="width:100%;height:100%",Re.classList.add("ec-extension-bmap"),be.appendChild(Re);var Vt=Ze.get("mapOptions")||{};delete Vt.mapType;var Fe=Ze.__bmap=new BMap.Map(Re,Vt),rt=new rr(Dt);Fe.addOverlay(rt),St.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}Fe=Ze.__bmap;var Ie=Ze.get("center"),fe=Ze.get("zoom");if(Ie&&fe){var De=Fe.getCenter(),Ee=Fe.getZoom();if(Ze.centerOrZoomChanged([De.lng,De.lat],Ee)){var ze=new BMap.Point(Ie[0],Ie[1]);Fe.centerAndZoom(ze,fe)}}(ht=new _i(Fe,$t)).setMapOffset(Ze.__mapOffset||[0,0]),ht.setZoom(fe),ht.setCenter(Ie),Ze.coordinateSystem=ht}),Et.eachSeries(function(Ze){"bmap"===Ze.get("coordinateSystem")&&(Ze.coordinateSystem=ht)})},Dn.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(Et,$t){this.option.center=Et,this.option.zoom=$t},centerOrZoomChanged:function(Et,$t){var be,Ze,ht=this.option;return Ze=ht.center,!((be=Et)&&Ze&&be[0]===Ze[0]&&be[1]===Ze[1]&&$t===ht.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),Dn.extendComponentView({type:"bmap",render:function(Et,$t,ht){function be(Ve,Je){if(!Ze){var Ue=Dt.parentNode.parentNode.parentNode,tt=[-parseInt(Ue.style.left,10)||0,-parseInt(Ue.style.top,10)||0];Dt.style.left=tt[0]+"px",Dt.style.top=tt[1]+"px",Re.setMapOffset(tt),Et.__mapOffset=tt,ht.dispatchAction({type:"bmapRoam"})}}var Ze=!0,St=Et.getBMap(),Dt=ht.getZr().painter.getViewportRoot(),Re=Et.coordinateSystem;function Vt(){Ze||ht.dispatchAction({type:"bmapRoam"})}St.removeEventListener("moving",this._oldMoveHandler),St.removeEventListener("moveend",this._oldMoveHandler),St.removeEventListener("zoomend",this._oldZoomEndHandler),St.addEventListener("moving",be),St.addEventListener("moveend",be),St.addEventListener("zoomend",Vt),this._oldMoveHandler=be,this._oldZoomEndHandler=Vt;var Fe=Et.get("roam");Fe&&"scale"!==Fe?St.enableDragging():St.disableDragging(),Fe&&"move"!==Fe?(St.enableScrollWheelZoom(),St.enableDoubleClickZoom(),St.enablePinchToZoom()):(St.disableScrollWheelZoom(),St.disableDoubleClickZoom(),St.disablePinchToZoom());var rt=Et.__mapStyle,Ie=Et.get("mapStyle")||{},fe=JSON.stringify(Ie);JSON.stringify(rt)!==fe&&(or(Ee)||St.setMapStyle(Dn.util.clone(Ie)),Et.__mapStyle=JSON.parse(fe));var De=Et.__mapStyle2,Ee=Et.get("mapStyleV2")||{},ze=JSON.stringify(Ee);JSON.stringify(De)!==ze&&(or(Ee)||St.setMapStyleV2(Dn.util.clone(Ee)),Et.__mapStyle2=JSON.parse(ze)),Ze=!1}}),Dn.registerCoordinateSystem("bmap",_i),Dn.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(Et,$t){$t.eachComponent("bmap",function(ht){var be=ht.getBMap(),Ze=be.getCenter();ht.setCenterAndZoom([Ze.lng,Ze.lat],be.getZoom())})}),Qt.version="1.0.0"});